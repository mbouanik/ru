if (self.CavalryLogger) { CavalryLogger.start_js(["fucOv"]); }

__d("NotifType",[],(function(a,b,c,d,e,f){e.exports={LIKE:"like",OPEN_GRAPH_ACTION_LIKE:"open_graph_action_like",LIKE_TAGGED:"like_tagged",PAGE_FAN:"page_fan",IG_MEDIA_LIKE:"ig_media_like",FEEDBACK_REACTION_GENERIC:"feedback_reaction_generic",FEEDBACK_REACTION_GENERIC_TAGGED:"feedback_reaction_generic_tagged",MESSENGER_REACTIONS:"messenger_reactions",MARKETPLACE_RECEIVED_RATING:"marketplace_received_rating",MARKETPLACE_RECEIVED_RATING_COMPLETED:"marketplace_received_rating_completed"}}),null);
__d("NullBusinessID",[],(function(a,b,c,d,e,f){e.exports="personal-business"}),null);
__d("asyncSleep",["regeneratorRuntime","Promise"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(b){return setTimeout(b,a)}));case 2:case"end":return c.stop()}},null,this)}e.exports=a}),null);
__d("BusinessConf",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DOMAIN:"business",WWW_DOMAIN:"www",HOSTNAME:"business.facebook.com",BIZ_ID_PARAM_NAME:"business_id",BIZ_ID_AUTOMATICALLY_ATTACHED_API_PARAM_NAME:"__business_id",LABEL_ID_PARAM_NAME:"project_id",ACCOUNT_ID_PARAM_NAME:"act",ACCOUNT_ID_PARAM_NAME_LONG:"account_id",ACCOUNT_IDS_PARAM_NAME_LONG:"account_ids",ACCOUNT_ID_CATEGORY_NAME:"cat",PAGE_ID_PARAM_NAME:"id",PAGE_ADMIN_SELECTED_KEY:"sk",PRODUCT_CATALOG_ID_PARAM_NAME:"catalog_id",PRODUCT_FEED_ID_PARAM_NAME:"feed_id",LEGACY_ADS_MANAGER_PREFIX:"/ads/manage/",CAMPAIGN_MANAGER_PREFIX:"/ads/manager/",SAM_PREFIX:"/ads/management/",AUDIENCE_INSIGHTS_PREFIX:"/ads/audience-insights/",SHOW_ADD_PRODUCT_FEED_DIALOG:"add_feed",SHOW_SPLASH_PARAM_NAME:"splash",SHOW_GRAY_MIGRATE_COMPLETE_SPLASH_PARAM_NAME:"migrate",COMMENT_ID_PARAM_NAME:"comment_id",NAV_SOURCE_PARAM_NAME:"nav_source",OFFLINE_DATASET_PARAM_NAME:"dataset_id",WHITELISTED_URI_CLASS:"bizOK",BIZ_HOME_FAVORITE_UPSELL:"biz_home_favorite_upsell",OPT_OUT_KEY:"do_not_redirect_to_biz_site",GRAY_MIGRATE_KEY:"tried_to_migrate_from_gray_account",HIDE_OPT_OUT_KEY:"hide_opt_out",HIDE_HOME_V3_SPLASH_KEY:"hide_home_v3_splash",CAKE_NUX_IS_OPTED_OUT:"1",DPA_TD_WELCOME_NUX_KEY:"dpa_td_welcome_nux",HIDE_AD_ACCOUNT_MSG_PANEL:"hide_ad_account_msg_panel",HIDE_AD_ACCOUNT_FAV_UPSELL:"hide_ad_account_fav_upsell",HIDE_PAGE_FAV_UPSELL:"hide_page_fav_upsell",DPA_TD_WELCOME_NUX_ID:3918,BM_BIZ_VS_PERSONAL_BANNER_NUX_ID:6094,OPT_OUT_EXPIRE:259200,BM_AD_ACCOUNT_BAN_HAMMER_NUX_ID:6106})}),null);
__d("BizSiteIdentifier.brands",["BusinessConf","NullBusinessID","URI"],(function(a,b,c,d,e,f){__p&&__p();var g=b("NullBusinessID"),h={isBizSite:function(){return b("URI").getRequestURI(!1).getSubdomain()===b("BusinessConf").DOMAIN},getBusinessID:function(){return b("URI").getRequestURI(!1).getQueryData()[b("BusinessConf").BIZ_ID_PARAM_NAME]},createBusinessURL:function(a,c){if(!c||c===g)return new(b("URI"))(a).setSubdomain("www");a=new(b("URI"))(a).setSubdomain(b("BusinessConf").DOMAIN);h.isBizSite()&&a.setDomain(b("URI").getRequestURI(!1).getDomain());c=c||h.getBusinessID();a.addQueryData(b("BusinessConf").BIZ_ID_PARAM_NAME,c);return a}};e.exports=h}),null);
__d("BusinessURI.brands",["BizSiteIdentifier.brands","BusinessConf","URI","isFacebookURI"],(function(a,b,c,d,e,f){__p&&__p();var g;a=babelHelpers.inherits(h,b("URI"));g=a&&a.prototype;function h(a,c){"use strict";__p&&__p();g.constructor.call(this,a);if(b("BizSiteIdentifier.brands").isBizSite()){a=c||b("BizSiteIdentifier.brands").getBusinessID();a&&this.addQueryData(b("BusinessConf").BIZ_ID_PARAM_NAME,a);this.$BusinessURI1(this.getSubdomain())||this.setSubdomain(b("BusinessConf").DOMAIN)}if(!b("isFacebookURI")(this))throw new Error("Business URI must be FB URI");return this}h.prototype.$BusinessURI1=function(a){"use strict";return a==="developers"};c=function(a,b){return new h(a,b)};c.BusinessURI=h;e.exports=c}),null);
__d("NotificationConstants",[],(function(a,b,c,d,e,f){e.exports={PayloadSourceType:{UNKNOWN:0,USER_ACTION:1,LIVE_SEND:2,ENDPOINT:3,INITIAL_LOAD:4,OTHER_APPLICATION:5,SYNC:6,CLIENT:7}}}),null);
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","FBJSON"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(a){g.constructor.call(this),this.$CrossWindowEventEmitter2=a,this.$CrossWindowEventEmitter1=new(b("CacheStorage"))("localstorage",a+":"),this.$CrossWindowEventEmitter1.addValueChangeCallback(function(a,c,d){var event=a.split(":")[1];try{c=b("FBJSON").parse(d)}catch(a){c=undefined}if(c&&c.__v){(a=g.emit).call.apply(a,[this,event].concat(c.__v))}}.bind(this))}a.prototype.emit=function(a){var b;for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];this.emitRemote.apply(this,[a].concat(d));(b=g.emit).call.apply(b,[this,a].concat(d))};a.prototype.emitRemote=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$CrossWindowEventEmitter1.set(a,c)};e.exports=a}),null);
__d("NotificationCounter",["Arbiter","CrossWindowEventEmitter","DocumentTitle","JSLogger","MessengerEnvironment"],(function(a,b,c,d,e,f){__p&&__p();var g=new(b("CrossWindowEventEmitter"))("JewelBase"),h={messages:0,notifications:0,requests:0};a={init:function(){b("Arbiter").subscribe("update_title",this._handleUpdate.bind(this)),b("Arbiter").subscribe("jewel/count-updated",this._handleCountUpdate.bind(this)),g.addListener("count-updated",function(a){this._handleCountUpdate("",a)}.bind(this))},getCount:function(){__p&&__p();var a=0;for(var c in h){var d=Number(h[c]);if(typeof h[c]==="string"&&isNaN(d))return h[c];if(isNaN(d)||d<0){b("JSLogger").create("jewels").error("bad_count",{jewel:c,count:h[c]});continue}a+=d}return a},updateTitle:function(){if(b("MessengerEnvironment").messengerui)return;var a=this.getCount();b("DocumentTitle").badge(a)},_handleCountUpdate:function(a,b){h[b.jewel]=b.count,this.updateTitle()},_handleUpdate:function(a,b){this.updateTitle()}};e.exports=a}),null);
__d("NotificationJewelFunnelLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";e.exports={FUNNEL_LOGGING_NAME:"WWW_NOTIFICATION_FUNNEL",FUNNEL_LOGGING_EVENT:{FETCH_NOTIFICATIONS:"fetch_notifications",OPEN_JEWEL:"open_jewel",CLOSE_JEWEL:"close_jewel",MOUSE_OVER_ON_JEWEL:"mouse_over_on_jewel",SCROLL_TO_FETCH:"scroll_to_fetch",FETCH_NEXT_SET:"fetch_next_set",CLEAR_BADGE_COUNT:"clear_badge_count"}}}),null);
__d("NotificationSeenFilter",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ALL:"all",SEEN_ONLY:"seen_only",UNSEEN_ONLY:"unseen_only",READ_ONLY:"read_only",UNREAD_ONLY:"unread_only",SEEN_BUT_UNREAD_ONLY:"seen_unread_only"})}),null);
__d("NotificationUpdates",["Arbiter","LiveTimer","NotificationConstants","createObjectFrom"],(function(a,b,c,d,e,f){__p&&__p();var g={},h={},i={},j={},k=!1,l=[],m=0,n=new(b("Arbiter"))();function o(){__p&&__p();if(m)return;var a=g,b=h,c=i,d=j;g={};h={};i={};j={};(Object.keys(a).length||k)&&(k=!1,q("notifications-updated",a));Object.keys(b).length&&q("seen-state-updated",b);Object.keys(c).length&&q("read-state-updated",c);Object.keys(d).length&&q("hidden-state-updated",d);l.pop()}function p(){return l.length?l[l.length-1]:b("NotificationConstants").PayloadSourceType.UNKNOWN}function q(event,a){s.inform(event,{updates:a,source:p()})}var r=null,s={getserverTime:function(){return r},handleUpdate:function(a,c,d,e){c.servertime&&(r=c.servertime,b("LiveTimer").restart(c.servertime)),this._updateWithPayload(a,c)},_updateWithPayload:function(a,b){Object.keys(b).length&&this.synchronizeInforms(function(){l.push(a);var c=babelHelpers["extends"]({},b,{payloadsource:p()});this.inform("update-notifications",c);this.inform("update-seen",c);this.inform("update-read",c);this.inform("update-hidden",c)}.bind(this))},getArbiter:function(){return n},inform:function(event,a){return n.inform(event,a)},subscribe:function(event,a){return n.subscribe(event,a)},didUpdateNotifications:function(a){Object.assign(g,b("createObjectFrom")(a)),k=!0,o()},didUpdateSeenState:function(a){Object.assign(h,b("createObjectFrom")(a)),o()},didUpdateReadState:function(a){Object.assign(i,b("createObjectFrom")(a)),o()},didUpdateHiddenState:function(a){Object.assign(j,b("createObjectFrom")(a)),o()},synchronizeInforms:function(a){m++;try{a()}catch(a){throw a}finally{m--,o()}}};e.exports=s}),null);
__d("objectValues",[],(function(a,b,c,d,e,f){function a(a){return Object.values(a)}e.exports=a}),null);
__d("NotificationSeenState",["NotificationConstants","NotificationSeenFilter","NotificationUpdates","createObjectFrom","ifRequired","objectValues"],(function(a,b,c,d,e,f){__p&&__p();var g=1,h=2,i=0,j=g,k=3,l=b("NotificationConstants").PayloadSourceType.INITIAL_LOAD,m={SEEN_AND_READ:k,SEEN_BUT_UNREAD:j,UNSEEN_AND_UNREAD:i},n={};b("ifRequired")("NotificationStore",function(a){a=a.getAllForAllEndpoints();a=b("objectValues")(a);var c=p(a);Object.keys(c).forEach(function(a){var b=c[a];n[a]=b})});function o(a){__p&&__p();var c=[],d=[];Object.keys(a).forEach(function(b){__p&&__p();var e=a[b],f=n[b];n[b]=e;if(f===undefined){c.push(b);d.push(b);return}f=f^e;f&g&&c.push(b);f&h&&d.push(b)});c.length&&b("NotificationUpdates").didUpdateSeenState(c);d.length&&b("NotificationUpdates").didUpdateReadState(d)}b("NotificationUpdates").subscribe("update-notifications",function(a,c){__p&&__p();a=c.nodes;if(!a||!a.length)return;c=c.payloadsource;var d=b("NotificationConstants").PayloadSourceType,e=c==d.ENDPOINT;c=a.filter(function(a){a=a.alert_id;return!e||n[a]===undefined});d=p(c);o(d)});function p(a){var b={};a.forEach(function(a){a.seen_state&&(b[a.alert_id]=m[a.seen_state])});return b}b("NotificationUpdates").subscribe("update-seen",function(a,c){__p&&__p();if(!c.seenState)return;var d=[],e={};Object.keys(c.seenState).forEach(function(a){if(!c.seenState||!c.seenState[a]){d.push(a);return}var b=n[a];b!==undefined&&(e[a]=b|g)});a=babelHelpers["extends"]({},b("createObjectFrom")(d,i),e);o(a)});b("NotificationUpdates").subscribe("update-read",function(a,c){__p&&__p();if(!c.readState)return;var d=[],e={};Object.keys(c.readState).forEach(function(a){if(!c.readState)return;var b=c.readState[a];if(b){d.push(a);return}b=n[a];b!==undefined?e[a]=b&~h:c.payloadsource==l&&(e[a]=j)});a=babelHelpers["extends"]({},b("createObjectFrom")(d,k),e);o(a)});function q(a){a=n[a];return a}var r={isRead:function(a){return q(a)===k},isSeen:function(a){return q(a)!==i},getUnseenCount:function(){return r.getUnseenIDs().length},getUnseenIDs:function(){return Object.keys(n).filter(function(a){return n[a]===i})},getUnreadCount:function(){return r.getUnreadIDs().length},getUnreadIDs:function(){return Object.keys(n).filter(function(a){return n[a]!==k})},validateFilter:function(a,c){switch(c){case b("NotificationSeenFilter").SEEN_ONLY:return r.isSeen(a);case b("NotificationSeenFilter").UNSEEN_ONLY:return!r.isSeen(a);case b("NotificationSeenFilter").READ_ONLY:return r.isRead(a);case b("NotificationSeenFilter").UNREAD_ONLY:return!r.isRead(a);case b("NotificationSeenFilter").SEEN_BUT_UNREAD_ONLY:return r.isSeen(a)&&!r.isRead(a);default:return!0}}};e.exports=r}),6);
__d("NotificationEndpointState",["BusinessUserConf","KeyedCallbackManager","RangedCallbackManager","flatMapArray","objectValues","react-relay/classic/query/stableStringify"],(function(a,b,c,d,e,f){__p&&__p();var g={AdsUnifiedNavNotificationsPayloadPagelet:"AdsUnifiedNavNotificationsPayloadPagelet",BusinessManagerNotificationsPayloadPagelet:"BusinessManagerNotificationsPayloadPagelet",WebNotificationsPayloadPagelet:"WebNotificationsPayloadPagelet","/notifications/client/ads_unified_nav/":"AdsUnifiedNavNotificationsPayloadPagelet","/notifications/client/business_manager/":"BusinessManagerNotificationsPayloadPagelet","/ajax/notifications/client/get.php":b("BusinessUserConf").businessUserID?"BusinessManagerNotificationsPayloadPagelet":"WebNotificationsPayloadPagelet"};h.getInstance=function(a){"use strict";var b=a.classification!=null?a.classification:"_",c=a.readness!=null?a.readness:"_";b="(c)"+b+"(s)"+c;c=h.$1[a.endpointControllerName];c==null&&(h.$1[a.endpointControllerName]=c={});c[b]==null&&(c[b]=new h(a));return c[b]};h.getAllInstances=function(a){"use strict";a!=null?a=[a]:a=Object.keys(h.$1);return b("flatMapArray")(a,function(a){a=h.$1[a];if(a==null)return[];else return b("objectValues")(a)})};function h(a){__p&&__p();var c=a.businessUserID,d=a.classification,e=a.endpointControllerName;a=a.readness;this.notifications=new(b("KeyedCallbackManager"))();this.businessUserID=c!=null?c:b("BusinessUserConf").businessUserID;this.classification=d;this.endpointControllerName=e;this.readness=a;c=function(a){a=this.notifications.getResource(a);return a.creation_time};this.order=new(b("RangedCallbackManager"))(c.bind(this),function(a,b){return b-a});this.graphQLPageInfo=null}h.prototype.getConfig=function(){"use strict";return{businessUserID:this.businessUserID,classification:this.classification,endpointControllerName:this.endpointControllerName,readness:this.readness}};h.prototype.getHash=function(){"use strict";return b("react-relay/classic/query/stableStringify")(this.getConfig())};h.prototype.getRequestParams=function(a){"use strict";a=Math.max(0,a-this.order.getAllResources().length);return{businessUserID:this.businessUserID,classification:this.classification!=null?this.classification.toLowerCase():undefined,cursor:this.graphQLPageInfo&&this.graphQLPageInfo.end_cursor,filter:this.readness==null?undefined:this.readness==="SEEN_AND_READ"?"read":"unread",readness:this.readness,length:a}};h.prototype.getStreamingTransportPageletName=function(){"use strict";return g[this.endpointControllerName]||this.endpointControllerName};h.$1={};e.exports=h}),null);
__d("NotificationServerTransport",["invariant","DOM","UIPagelet","compactArray","ifRequired","objectValues","once","promiseDone","promiseFinally","setImmediateAcrossTransitions","uniqueID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={},i={},j={},k={};function l(a){k[a]==null&&(k[a]=b("DOM").create("div",{"class":"hidden_elem",id:a}),b("DOM").appendContent(document.documentElement,k[a]));return k[a].id}function m(a){return a.reduce(function(a,b){b=b.targetNumToLoad;return Math.max(a,b)},0)}function n(a,b){var c=b.getHash(),d=h[c];if(!d||d.clientRequestID!==a)return;delete h[c];d.calls.forEach(function(a){a=a.onCompleted;a&&a()});i[c]!=null&&p(b)}function o(a,b,c){var d=b.getHash(),e=h[d];if(!e||e.clientRequestID!==a)return;delete h[d];e.calls.forEach(function(a){a=a.onError;a&&a(c)});i[d]!=null&&p(b)}function p(a){__p&&__p();var c=a.getHash();if(j[c]!=null)return;j[c]=b("setImmediateAcrossTransitions")(function(){__p&&__p();delete j[c];var d=b("uniqueID")(),e=i[c];delete i[c];if(e==null)return;var f=m(e);f=a.getRequestParams(f);if(f.length<=0){e.forEach(function(a){a=a.onCompleted;a&&a()});return}var k=function(b){o(d,a,b.toError())},n=a.getStreamingTransportPageletName();n!=null||g(0);n=b("UIPagelet").loadFromEndpoint(n,l(d),babelHelpers["extends"]({},f,{clientRequestID:d}),{allowIrrelevantRequests:!0,automatic:!1,crossPage:!0,errorHandler:k,jsNonblock:!0,transportErrorHandler:k,usePipe:!0,usePostRequest:!1});h[c]={calls:e,clientRequestID:d,endpointState:a,transport:n}})}a={makeRequest:function(a,b,c){__p&&__p();var d=c.onChunkResponse,e=c.onCompleted;c=c.onError;var f=a.getHash(),j={onChunkResponse:d,onCompleted:e,onError:c,targetNumToLoad:b};s(f);d=h[f];e=d?m(d.calls)>=b:!1;e?(d!=null||g(0),d.calls.push(j)):(i[f]==null&&(i[f]=[]),i[f].push(j),d==null&&p(a));return{remove:function(){__p&&__p();var b=h[f];if(b!=null){var c=b.calls.indexOf(j);c!==-1&&b.calls.splice(c,1);b.calls.length===0&&(b.transport&&b.transport.abandon(),delete h[f],i[f]!=null&&p(a))}c=i[f];if(c!=null){b=c.indexOf(j);b!==-1&&c.splice(b,1)}}}},handleResponseChunk:function(a,b){a=q(a);a.forEach(function(a){a(b)})},handleRequestCompleted:function(a){var c=b("objectValues")(h).find(function(b){return b&&b.clientRequestID===a});c||g(0);n(a,c.endpointState)},handleRequestFailed:function(a,c){__p&&__p();var d=b("objectValues")(h).find(function(b){return b&&b.clientRequestID===a});d||g(0);var e=d.endpointState.getHash(),f=h[e];if(!f||f.clientRequestID!==a)return;delete h[e];f.calls.forEach(function(a){a=a.onError;a&&a(new Error(c))});i[e]!=null&&p(d.endpointState)}};function q(a){__p&&__p();var c=Object.keys(h).find(function(b){b=h[b];return b&&b.clientRequestID===a}),d=c&&h[c];if(!d||!c)return[];d=d.calls;c=i[c];c&&(d=d.concat(c));return b("compactArray")(d.map(function(a){return a.onChunkResponse}))}function r(a,c){__p&&__p();var d=c.targetNumToLoad,e=c.endpointState;c=c.payloadPromise;if(h[a]!=null)return;var f=b("uniqueID")();d={calls:[{targetNumToLoad:d}],clientRequestID:f,endpointState:e};h[a]=d;c||g(0);a=c.then(function(a){var b=q(f);b.forEach(function(b){b(a)})});b("promiseDone")(b("promiseFinally")(a,function(){n(f,e)}))}c=function(a){b("ifRequired")("NotificationEagerLoader",function(b){b=b.eagerlyLoadedData;b.hasData&&a===b.endpointState.getHash()&&r(a,b)})};var s=b("once")(c);e.exports=a}),null);
__d("createObjectBy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c={};for(var d=0;d<a.length;d++){var e=a[d],f=b(e,d,a);c[f]=e}return c}e.exports=a}),null);
__d("distinctArrayBy",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a}function a(a,b){__p&&__p();b===void 0&&(b=g);var c=[],d=new Set();for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(e){if(f>=a.length)break;h=a[f++]}else{f=a.next();if(f.done)break;h=f.value}h=h;var i=b(h);d.has(i)||(d.add(i),c.push(h))}return c}e.exports=a}),null);
__d("sortBy",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){a=a.map(function(a,c){return{index:c,sortValue:b(a),value:a}});a.sort(function(a,b){var c=a.sortValue,d=b.sortValue;if(c>d)return 1;return c<d?-1:a.index-b.index});return a.map(function(a){return a.value})}e.exports=a}),null);
__d("NotificationStore",["FBLogger","NotificationConstants","NotificationEndpointState","NotificationServerTransport","NotificationUpdates","createObjectBy","distinctArrayBy","flatMapArray","objectValues","sortBy"],(function(a,b,c,d,e,f){__p&&__p();var g={};function h(a,b,c){return a.page_info!=null&&b.classification==c.classification&&b.endpointControllerName===c.endpointControllerName&&b.readness==c.readness}function i(a,c){__p&&__p();var d={};b("NotificationEndpointState").getAllInstances(c.endpointControllerName).forEach(function(e){var f;h(a,e,c)?(e.graphQLPageInfo=a.page_info,f=a):a.payloadsource===b("NotificationConstants").PayloadSourceType.SYNC&&c.endpointControllerName==="WebNotificationsPayloadPagelet"&&e.classification==null&&e.readness==null?f=a:f=babelHelpers["extends"]({},a,{nodes:a.nodes?a.nodes.filter(function(a){return j(a,e)}):undefined});if(f.nodes&&f.nodes.length>0){f=k(e,f);f!=null&&f.forEach(function(a){d[a]=!0})}});b("NotificationUpdates").didUpdateNotifications(Object.keys(d))}function j(a,b){__p&&__p();var c=b.classification,d=b.notifications,e=b.order;b=b.readness;e=e.getAllResources();e.length===0;if(e.length>0){e=e[0];d=d.getResource(e);if(d.creation_time>=a.creation_time)return!1}if(c&&(!a.classifications||!a.classifications.includes(c)))return!1;return b&&b==="SEEN_AND_READ"!==(a.seen_state==="SEEN_AND_READ")?!1:!0}function k(a,b){var c=[],d={};b.nodes&&b.nodes.length>0&&b.nodes.forEach(function(b){var e=b.alert_id,f=a.notifications.getResource(e);(!f||f.creation_time<b.creation_time)&&(c.push(e),d[e]=b)});a.notifications.addResourcesAndExecute(d);a.order.addResources(c);return c}b("NotificationUpdates").subscribe("update-notifications",function(a,c){c.payloadsource!==b("NotificationConstants").PayloadSourceType.ENDPOINT&&i(c,{endpointControllerName:c.endpoint!=null?c.endpoint:"WebNotificationsPayloadPagelet"})});var l={getNotifications:function(a,c,d){__p&&__p();var e=b("NotificationEndpointState").getInstance(c),f=e.notifications,h=e.order,j,k=h.executeOrEnqueue(0,a,function(a){if(d){j=f.executeOrEnqueue(a,d);a=f.getUnavailableResources(j);a.length>0&&b("FBLogger")("notifications").warn("The range for this endpoint contained notification IDs for which we have no payload (Notification IDs: %s, Endpoint config: %s)",JSON.stringify(a),JSON.stringify(e.getConfig()))}});function m(){h.unsubscribe(k),j&&f.unsubscribe(j)}if(h.getUnavailableResources(k).length===0)return{remove:m};if(!l.canFetchMore(c)){h.forceRunCallbacks();return{remove:m}}var n=e.getHash();g[n]==null?g[n]=1:g[n]++;function o(){g[n]--,g[n]===0&&h.forceRunCallbacks()}function p(a){if(!(a&&a.nodes))return;b("NotificationUpdates").handleUpdate(b("NotificationConstants").PayloadSourceType.ENDPOINT,a,c.readness,c.classification);i(babelHelpers["extends"]({},a,{payloadsource:b("NotificationConstants").PayloadSourceType.ENDPOINT}),c)}function q(){g[n]--,g[n]===0&&h.forceRunCallbacks()}a=b("NotificationServerTransport").makeRequest(e,a,{onChunkResponse:p,onCompleted:q,onError:o});var r=a.remove;return{remove:function(){m(),r()}}},getNotification:function(a,c){c=c===void 0?{}:c;var d=c.classification,e=c.endpointControllerName;e=e===void 0?"WebNotificationsPayloadPagelet":e;c=c.readness;d=b("NotificationEndpointState").getInstance({classification:d,endpointControllerName:e,readness:c});e=d.notifications;return e.getResource(a)},getAllForAllEndpoints:function(){__p&&__p();var a=b("NotificationEndpointState").getAllInstances();a=b("flatMapArray")(a,function(a){a=this.getAll(a.getConfig());return b("objectValues")(a)}.bind(this));a=b("sortBy")(a,function(a){return a.creation_time});a=a.reverse();a=b("distinctArrayBy")(a,function(a){return a.alert_id});return b("createObjectBy")(a,function(a){return a.alert_id})},getAll:function(a){var c=b("NotificationEndpointState").getInstance(a),d=c.notifications;c=c.order;var e={};c.getAllResources().forEach(function(c){var f=d.getResource(c);f==null?b("FBLogger")("notifications").warn("The range for this endpoint contained a notification ID for which we have no payload (Notification ID: %s, Endpoint config: %s)",c,JSON.stringify(a)):e[c]=f});return e},getCount:function(a){a=b("NotificationEndpointState").getInstance(a);return a.order.getAllResources().length},canFetchMore:function(a){a=b("NotificationEndpointState").getInstance(a);a=a.graphQLPageInfo;return!a||!Object.prototype.hasOwnProperty.call(a,"has_next_page")||a.has_next_page},registerEndpoint:function(a){b("NotificationEndpointState").getInstance(a)}};l.registerEndpoint({endpointControllerName:"WebNotificationsPayloadPagelet"});e.exports=l}),null);
__d("XWorkHubController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/hub/{?tab}/{?alert_id}/",{ref:{type:"String"},tab:{type:"String"},selected_key:{type:"String",defaultValue:"app_401904056828201"},alert_id:{type:"String"},mini:{type:"Bool",defaultValue:!1}})}),null);
__d("NotificationJewelController",["Arbiter","Bootloader","Event","EventProfiler","FunnelLogger","NotificationConstants","NotificationCounter","NotificationJewelFunnelLoggingConstants","NotificationListConfig","NotificationSeenState","NotificationStore","NotificationUpdates","XWorkHubController","clearTimeout","createObjectFrom","curry","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g=b("NotificationConstants").PayloadSourceType,h=b("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_EVENT,i=b("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_NAME,j=0,k=!1,l=!1,m=null;function n(a){var c=b("NotificationSeenState").getUnseenCount();b("Arbiter").inform("jewel/count-updated",{jewel:a,count:c,animation:k&&c>0?"heart":"none"},b("Arbiter").BEHAVIOR_STATE)}function a(a,c){"use strict";__p&&__p();var d=c.badgeAnimationData,e=c.endPoint,f=c.list;c.startTime;c=c.unseenNotifs;e&&b("NotificationStore").registerEndpoint({endpointControllerName:e});b("NotificationCounter").init();var l=b("Event").listen(a.getRoot(),"mouseover",function(){b("FunnelLogger").startFunnel(i),l&&l.remove(),l=null,b("FunnelLogger").appendAction(i,h.MOUSE_OVER_ON_JEWEL),this.eagerRender(f)}.bind(this));b("NotificationListConfig").eagerRenderJewel&&this.eagerRender(f);var o=null;b("Event").listen(a.getRoot(),"mouseover",function(){o=b("setTimeoutAcrossTransitions")(function(){b("Bootloader").loadModules(["QE2Logger"],function(a){a.logExposureForUser("www_jewel_tooltip_experiment")},"NotificationJewelController"),o=null},500)});b("Event").listen(a.getRoot(),"mouseout",function(){o&&b("clearTimeout")(o)});b("gkx")("AT7qvBGeY3qi4kzGsfSdDBRKoyiGhUCE2HY_OLm4gW_hIR5XTy870z-6Bh0Vp_U80-c")&&b("Event").listen(a.getButton(),"click",function(a){if(a.metaKey||a.ctrlKey){a=b("XWorkHubController").getURIBuilder().setString("ref","jewel").setString("tab","all").getURI();window.open(a,"notification_hub_tab_identifier")}});var p=!1,q=a.subscribe("opened",function(){p||(p=!0,b("EventProfiler").tagCurrentActiveInteractionsAs("FirstNotificationJewelOpen")),m&&m(),q&&q.unsubscribe(),q=null,f.open()}),r=f.pause.bind(f);a.subscribe("opened",function(){setTimeout(r,0),n(a.name),b("Bootloader").loadModules(["NotificationVPVs"],function(a){return a.clearImpressions()},"NotificationJewelController"),b("Arbiter").inform("notificationJewel/opened")});a.subscribe("closed",function(){f.unpause(),n(a.name),b("Arbiter").inform("notificationJewel/closed"),f.setFlyoutOpenState(!1)});a.subscribe("user-open",function(event,a){f.setFlyoutOpenState(!0)});a.isOpen()&&f.setFlyoutOpenState(!0);(b("NotificationListConfig").eagerOnBadgeUpdate||b("NotificationListConfig").eagerOnBadgeIncreaseFromZero&&a.initialCount===0)&&a.subscribe("updated",function(b,c){c&&c.count>a.initialCount&&this.eagerRender(f)}.bind(this));b("NotificationUpdates").subscribe("seen-state-updated",b("curry")(n,a.name));d&&(d.logWithQEUniverse&&b("Bootloader").loadModules(["QE2Logger"],function(a){return a.logExposureForUser(d.logWithQEUniverse)},"NotificationJewelController"),d.injectWithAnimation&&b("Bootloader").loadModules(["RelationshipDelightsBadge"],function(b){return b.inject(a,d.injectWithAnimation)},"NotificationJewelController"),b("Bootloader").loadModules(["RelationshipDelightUtils"],function(a){b("NotificationUpdates").subscribe("update-notifications",function(b,c){b=c.nodes;c=c.payloadsource;b=b&&b.length?b.filter(a.shouldHeartBadge):null;b&&b.length?(k=!0,d.injectWithAnimation&&((c===g.INITIAL_LOAD||c===g.INITIAL_SEND)&&a.logBadgeAnimation(b[0].alert_id))):k=!1}),d.logWithAlertID&&a.logBadgeAnimation(d.logWithAlertID)},"NotificationJewelController"));b("NotificationUpdates").handleUpdate(g.INITIAL_LOAD,{seenState:b("createObjectFrom")(c,j)});n(a.name)}a.prototype.eagerRender=function(a){"use strict";l||(l=!0,m=b("EventProfiler").notifyRunningEagerInteraction(["Notifications_Jewel_Button"],"click"),a.open())};e.exports=a}),null);
__d("NotificationGenericBucket",["NotificationSeenState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$2=[],this.$3={},this.$4={},this.$7=function(a,b){a=this.$4[a];b=this.$4[b];return Number(b)-Number(a)}.bind(this),this.$1=a}a.prototype.reset=function(){this.$2=[],this.$3={},this.$4={}};a.prototype.getType=function(){return this.$1.bucket_type};a.prototype.getTitle=function(){return this.$1.title};a.prototype.getSortedIDs=function(){return this.$2.slice()};a.prototype.insertIfEligible=function(a){var b=this.$5(a);if(!b.eligible)return b;this.$6(a);return{eligible:!0}};a.prototype.remove=function(a){if(!this.$3[a])return!1;delete this.$3[a];delete this.$4[a];a=this.$2.indexOf(a);a>-1&&this.$2.splice(a,1);return!0};a.prototype.$6=function(a){__p&&__p();var b=a.alert_id;if(this.$3[b])return!0;this.$2.push(b);this.$3[b]=!0;var c=this.$8(this.$1.sort_key_index);if(c>-1){a=a.sort_keys?a.sort_keys[c]:null;a&&(this.$4[b]=a,this.$9())}return!0};a.prototype.$9=function(){this.$2.sort(this.$7)};a.prototype.$5=function(a){__p&&__p();if(!this.$10(a))return{eligible:!1,type:"bucket",data:a.eligible_buckets};if(!this.$11(a))return{eligible:!1,type:"exp_time"};if(!this.$12(a))return{eligible:!1,type:"seen_filter"};if(!this.$13(a))return{eligible:!1,type:"max_count"};if(!this.$14(a))return{eligible:!1,type:"seen_evict",data:this.$15(a)};return!this.$16(a)?{eligible:!1,type:"read_evict"}:{eligible:!0}};a.prototype.$8=function(a){return Number.isInteger(a)?Number(a):-1};a.prototype.$10=function(a){return!a.eligible_buckets?!1:a.eligible_buckets.includes(this.getType())};a.prototype.$12=function(a){return b("NotificationSeenState").validateFilter(a.alert_id,this.$1.seen_filter)};a.prototype.$11=function(a){var b=this.$8(this.$1.min_to_expire);return b===-1?!0:Date.now()-a.creation_time<b*60*1e3};a.prototype.$13=function(a){a=this.$8(this.$1.max_count);return a===-1?!0:this.$2.length<a};a.prototype.$15=function(a){var b=this.$8(this.$1.sec_to_evict_seen);return{secToEvict:b,firstTime:a.first_seen_time||0,currentTime:Date.now()/1e3}};a.prototype.$17=function(a){var b=this.$8(this.$1.sec_to_evict_read);return{secToEvict:b,firstTime:a.first_read_time||0,currentTime:Date.now()/1e3}};a.prototype.$18=function(a){var b=a.secToEvict,c=a.firstTime;a=a.currentTime;return b===-1||c===0?!0:a-c<b};a.prototype.$14=function(a){return this.$18(this.$15(a))};a.prototype.$16=function(a){return this.$18(this.$17(a))};a.prototype.$19=function(a){return!0};e.exports=a}),null);
__d("NotificationBucketStore",["Arbiter","Banzai","JSLogger","NotificationConstants","NotificationGenericBucket","NotificationsBucketList","NotificationStore","NotificationUpdates"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("NotificationConstants").PayloadSourceType,h=[],i={},j={},k=[],l=!1,m={},n={},o="notif_jewel_buckets";a=function(){if(l)return;l=!0;b("NotificationsBucketList").buckets.forEach(function(a){a.bucket_type=a.bucket_type.toUpperCase();a=new(b("NotificationGenericBucket"))(a);h.push(a);i[a.getType()]=a});y()};var p=function(){k=h.map(function(a){return{ids:a.getSortedIDs(),title:a.getTitle()||"",bucketType:a.getType()}})},q=function(a){__p&&__p();var b=a.alert_id;m[b]||(m[b]=[]);var c=[];for(var d=0,e=h.length;d<e;d++){var f=h[d],g=f.insertIfEligible(a);c.push({bucket:f.getType(),result:g});if(g.eligible){m[b].push(c);s(a,f);return f.getType()}}m[b].push(c);return null},r=function(a,c){__p&&__p();var d="PRIORITY_INBOX";if(!i[d]||c.getType()===d)return;c=a.alert_id;if(n[c]||a.creation_time>Date.now()/1e3-60*60){d=m[c];d=d[d.length-1]||[];a={notif_data:{alert_id:a.alert_id.split(":")[1],creation_time:a.creation_time,eligible_buckets:a.eligible_buckets,first_seen_time:a.first_seen_time,notif_type:a.notif_type,seen_state:a.seen_state,sort_keys:a.sort_keys},eviction_data:d,was_live_send:n[c]===!0,priority_eviction_reason:d[0]?d[0].result.type:null};b("Banzai").post(o,{event_type:"bucketing_error",data:a})}},s=function(a,b){j[a.alert_id]=b.getType(),r(a,b)},t=function(a,b){delete j[a.alert_id]},u=function(a){var b=a.alert_id,c=v(b);if(c){c=w(c);c&&(c.remove(b),t(a,c))}q(a)},v=function(a){return j[a]},w=function(a){return i[a]},x=function(){j={},h.forEach(function(a){return a.reset()}),m={},p()},y=function(){var a=b("NotificationStore").getAll({endpointControllerName:"WebNotificationsPayloadPagelet"});z(Object.keys(a).map(function(b){return a[b]}))},z=function(a){a.forEach(u),p()};b("NotificationUpdates").subscribe("update-notifications",function(a,b){if(!b.nodes||b.nodes.length===0)return;b.payloadsource===g.LIVE_SEND?(b.nodes.forEach(function(a){return n[a.alert_id]=!0}),x(),y()):b.nodes&&(b.nodes.forEach(function(a){return n[a.alert_id]=!1}),z(b.nodes))});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.notifs_bucket_data={bucketInfo:k,data:k.reduce(function(b,a){a=a.ids.map(function(a){return{id:a,results:m[a]}});return[].concat(b,a)},[])}});a();c={getBucketListData:function(){return k},isEmptyBucketListData:function(){var a=k.reduce(function(a,b){return a+b.ids.length},0);return a===0}};e.exports=c}),null);
__d("NotificationBucketUtils",["JSResource"],(function(a,b,c,d,e,f){"use strict";a={getCustomModuleForType:function(a){switch(a){case"TICKER":return b("JSResource")("NotificationBucketTicker.react").__setRef("NotificationBucketUtils");default:return null}}};e.exports=a}),null);
__d("NotificationHiddenState",["NotificationConstants","NotificationUpdates","isEmpty"],(function(a,b,c,d,e,f){__p&&__p();var g={};b("NotificationUpdates").subscribe("update-notifications",function(a,c){a=c.nodes;c=c.payloadsource;if(c===b("NotificationConstants").PayloadSourceType.LIVE_SEND&&a&&a.length){var d={};a.forEach(function(a){a=a.alert_id;g[a]&&(d[a]=!1)});b("isEmpty")(d)||(g=Object.assign(g,d),b("NotificationUpdates").didUpdateHiddenState(Object.keys(d)))}});b("NotificationUpdates").subscribe("update-hidden",function(a,c){if(c.hiddenState){a=c.hiddenState;g=Object.assign(g,a);b("NotificationUpdates").didUpdateHiddenState(Object.keys(a))}});a={isHidden:function(a){return g[a]?g[a]:!1}};e.exports=a}),null);
__d("NotificationTokens",["CurrentUser"],(function(a,b,c,d,e,f){a={tokenizeIDs:function(a){return a.map(function(a){return b("CurrentUser").getID()+":"+a})},untokenizeIDs:function(a){return a.map(function(a){return a.split(":")[1]})}};e.exports=a}),null);
__d("NotificationURI",["BusinessURI.brands","URI","VideoPermalinkURI","isFacebookURI"],(function(a,b,c,d,e,f){__p&&__p();a={localize:function(a){try{a=b("BusinessURI.brands")(a)}catch(b){return a.toString()}var c=a.getSubdomain();return a.getUnqualifiedURI().getQualifiedURI().setSubdomain(c).toString()},snowliftable:function(a){if(!a)return!1;a=new(b("URI"))(a);var c=a.getQueryData();return b("isFacebookURI")(a)&&(b("VideoPermalinkURI").isValid(a)||"fbid"in c)},isVaultSetURI:function(a){return this._areEquals(a,"/ajax/vault/sharer_preview.php")},isAlbumDraftRecoveryDialogURI:function(a){return this._areEquals(a,"/ajax/photos/upload/overlay/")},isQuicksilverURI:function(a){return this._areEquals(a,"/games/quicksilver/spotlight/")},isDirectURI:function(a){return this._startsWith(a,"/direct/")},isIGAccountCreationURI:function(a){return this._areEquals(a,"/ads/growth/aymt/instagram/account-creation-dialog/")},_areEquals:function(a,c){if(!a)return!1;a=new(b("URI"))(a);return b("isFacebookURI")(a)&&a.getPath()===c},_startsWith:function(a,c){if(!a)return!1;a=new(b("URI"))(a);return b("isFacebookURI")(a)&&a.getPath().startsWith(c)}};e.exports=a}),null);
__d("NotificationOptionActionWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1420844941369152"};c.getQueryID=function(){"use strict";return"318967338567215"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("NotificationUserActions",["AsyncRequest","Bootloader","BusinessUserConf","CurrentUser","NotificationConstants","NotificationOptionActionWebGraphQLMutation","NotificationTokens","NotificationUpdates","WebGraphQL","createObjectFrom"],(function(a,b,c,d,e,f){__p&&__p();var g=b("NotificationConstants").PayloadSourceType.USER_ACTION,h=!1;function i(a){b("BusinessUserConf").businessUserID!=null&&(a.biz_user_id=b("BusinessUserConf").businessUserID),new(b("AsyncRequest"))("/ajax/notifications/mark_read.php").setData(a).setAllowCrossPageTransition(!0).send()}function j(a){var b={};a.forEach(function(a,c){b["alert_ids["+c+"]"]=a});return b}a={markNotificationsAsSeen:function(a){var c=document.getElementById("notificationsCountValue"),d=null;c&&(d=c.textContent);b("NotificationUpdates").handleUpdate(g,{seenState:b("createObjectFrom")(a)});c=b("NotificationTokens").untokenizeIDs(a);a=j(c);a.seen=!0;d&&(a.badgeCount=d);i(a)},setNextIsFromReadButton:function(a){h=a},markNotificationsAsRead:function(a,c){b("NotificationUpdates").handleUpdate(g,{readState:b("createObjectFrom")(a,!0)});a=b("NotificationTokens").untokenizeIDs(a);a=j(a);h&&(a.from_read_button=!0,h=!1);c&&(a.source_view=c);i(a)},markNotificationsAsUnread:function(a,c){b("NotificationUpdates").handleUpdate(g,{readState:b("createObjectFrom")(a,!1)});a=b("NotificationTokens").untokenizeIDs(a);a=j(a);h&&(a.from_read_button=!0,h=!1);a.unread=!0;c&&(a.source_view=c);i(a)},markAllNotificationsAsRead:function(){b("Bootloader").loadModules(["NotificationSeenState"],function(a){a=a.getUnreadIDs();a.length>0&&b("NotificationUpdates").handleUpdate(g,{readState:b("createObjectFrom")(a)});a={read:!0};h&&(a.from_read_button=!0,h=!1);i(a)},"NotificationUserActions")},sendNotifOption:function(a){return b("WebGraphQL").exec(new(b("NotificationOptionActionWebGraphQLMutation"))({input:{action_type:a,actor_id:b("CurrentUser").getID(),client_mutation_id:"0"}}))}};e.exports=a}),null);
__d("NotificationAsyncWrapper",["NotificationListConfig","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("NotificationListConfig").reactFiberAsyncNotifications?a=b("React").unstable_AsyncMode:a=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("React").Component);a&&a.prototype;c.prototype.render=function(){"use strict";return this.props.children};function c(){"use strict";a.apply(this,arguments)}return c}();e.exports=a}),null);
__d("BanzaiLooper",["Banzai"],(function(a,b,c,d,e,f){var g={retry:!0};function h(a,c){b("Banzai").post("banzai_looper:"+a,c,g)}a={labelBinaryClassificationExample:function(a){h("binary_classification_example",babelHelpers["extends"]({operation:"label"},a))}};e.exports=a}),null);
__d("FeedQuickLogModule",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CACHE_FETCH:655545,LOAD:655546,NETWORK_FETCH:655544,POST_STARTUP:655535,SCROLL_PERF:655590,COMMENT_TTL_WWW:655585,CONSUMPTION_RESTORATION_WWW:655575,IMAGE_LOAD_WWW:655576,LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW:655596,LOAD_STORY_PERMALINK_FROM_ANYWHERE_WWW:655597,MAIN_THREAD_PERFORMANCE:655595,NOTIFICATION_INTERACTION_WWW:655584})}),null);
__d("NotificationJewelPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:NotificationJewelPerformanceLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:NotificationJewelPerformanceLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:NotificationJewelPerformanceLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setBadgeCurrentCount=function(a){this.$1.badge_current_count=a;return this};a.prototype.setBadgeInitialCount=function(a){this.$1.badge_initial_count=a;return this};a.prototype.setClientSessionID=function(a){this.$1.client_session_id=a;return this};a.prototype.setClientTimestamp=function(a){this.$1.client_timestamp=a;return this};a.prototype.setEagerLoadTriggerAndDelay=function(a){this.$1.eager_load_trigger_and_delay=a;return this};a.prototype.setEventName=function(a){this.$1.event_name=a;return this};a.prototype.setJewelName=function(a){this.$1.jewel_name=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={badge_current_count:!0,badge_initial_count:!0,client_session_id:!0,client_timestamp:!0,eager_load_trigger_and_delay:!0,event_name:!0,jewel_name:!0,vc:!0};e.exports=a}),null);
__d("JewelLogger",["BanzaiLooper","FeedQuickLogModule","NotificationJewelPerformanceTypedLogger","NotificationListConfig","QuickPerformanceLogger","gkx","performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("BanzaiLooper").labelBinaryClassificationExample,i=b("NotificationListConfig").sessionID,j=b("gkx")("AT6CUBYr_9N_CSXV6k-KrXQLKNDSPuibvI1F3ys7r1YWSdBoHIWjerwcV9NawiMLVuituTCqs9yoiqPJZAjB0JRa"),k=!1;a=babelHelpers.inherits(l,b("NotificationJewelPerformanceTypedLogger"));g=a&&a.prototype;function l(a){g.constructor.call(this),l.$JewelTypedLoggerWithSession1[a]||(l.$JewelTypedLoggerWithSession1[a]={}),this.$JewelTypedLoggerWithSession2=a}l.prototype.setEventName=function(a){this.$JewelTypedLoggerWithSession3=a;return g.setEventName.call(this,a)};l.prototype.log=function(){l.$JewelTypedLoggerWithSession1[this.$JewelTypedLoggerWithSession2][this.$JewelTypedLoggerWithSession3]||(l.$JewelTypedLoggerWithSession1[this.$JewelTypedLoggerWithSession2][this.$JewelTypedLoggerWithSession3]=!0,this.setClientSessionID(i),this.setJewelName(this.$JewelTypedLoggerWithSession2),g.log.call(this))};l.$JewelTypedLoggerWithSession1={};function m(a){a.jewelName==="notifications"&&a.eventName==="list_populated"&&q(a.timestamp),new l(a.jewelName).setEventName(a.eventName).setClientTimestamp(a.timestamp).log()}function n(a){var b=a.trigger,c=a.eagerLoadDelayInMs,d=babelHelpers.objectWithoutProperties(a,["trigger","eagerLoadDelayInMs"]);b=b+":"+c;new l(a.jewelName).setEventName(d.eventName).setClientTimestamp(d.timestamp).setEagerLoadTriggerAndDelay(b).log()}function o(a){j&&!k&&(b("QuickPerformanceLogger").markerStart(b("FeedQuickLogModule").NOTIFICATION_INTERACTION_WWW,0,a),k=!0)}function p(a){j&&k&&b("QuickPerformanceLogger").annotateMarkerIntArray(b("FeedQuickLogModule").NOTIFICATION_INTERACTION_WWW,"JEWEL_CLICK_COUNT",[a])}function q(a){j&&k&&(b("QuickPerformanceLogger").markerEnd(b("FeedQuickLogModule").NOTIFICATION_INTERACTION_WWW,"SUCCESS",0,a),k=!1)}function r(a){j&&k&&(b("QuickPerformanceLogger").markerEnd(b("FeedQuickLogModule").NOTIFICATION_INTERACTION_WWW,"CANCEL",0,a),k=!1)}function s(a){j&&k&&(b("QuickPerformanceLogger").markerEnd(b("FeedQuickLogModule").NOTIFICATION_INTERACTION_WWW,"FAIL",0,a),k=!1)}c={logDataEagerLoad:function(a){a.eventName==="data_eager_load_trigger"?n(a):m(a)},logJsBootload:function(a){a.eventName==="js_bootload_trigger"?n(a):m(a)},logJewelCancel:function(){r(b("performanceNow")())},logJewelFail:function(){s(b("performanceNow")())},logJewelClick:function(a){a.jewelName==="notifications"&&(b("gkx")("AT4YdlZV4JJTtJC077vmEmLVdJyWr6In834BSTh3uurhOmYMskwzQQVmbWvdp5iY7qOrPqjTDGZiEP6G4qFURsi-")||a.clickCount===1)&&(o(a.timestamp),p(a.clickCount)),a.clickCount===1&&(new l(a.jewelName).setEventName("first_jewel_click").setClientTimestamp(a.timestamp).setBadgeInitialCount(a.badgeInitialCount).setBadgeCurrentCount(a.badgeCurrentCount).log(),a.jewelName==="notifications"&&h({trace:i,loopName:"notifications_jewel_click",label:"positive"}))},logJewelInitialize:function(a){new l(a.jewelName).setEventName("jewel_initialize").setBadgeInitialCount(a.badgeInitialCount).log(),a.jewelName==="notifications"&&h({trace:i,loopName:"notifications_jewel_click",label:"tentatively_negative"})},logJewelListComponentEvent:m};e.exports=c}),null);
__d("NotifTestIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REACT_BLUE_BAR_JEWEL:"react_blue_bar_jewel",NON_REACT_BLUE_BAR_JEWEL:"non_react_blue_bar_jewel",REACT_NOTIF_LIST:"react_notif_list",NOTIF_LIST_ITEM:"notif_list_item",SEE_ALL_LIST:"see_all_list",REACT_NOTIF_JEWEL_FLYOUT:"react_notif_jewel_flyout",NON_REACT_NOTIF_JEWEL_FLYOUT:"non_react_notif_jewel_flyout",CHEVRON:"chevron",REACT_MARK_ALL_AS_READ_LINK:"react_mark_all_as_read_link",NON_REACT_MARK_ALL_AS_READ_LINK:"non_react_mark_all_as_read_link",NOTIFICATION_SOUND_SETTING:"notifiation_sound_setting",NOTIFICATION_SOUND_SETTING_SELECTOR:"notifiation_sound_setting_selector",MESSAGE_SOUND_SETTING:"message_sound_setting",MESSAGE_SOUND_SETTING_SELECTOR:"message_sound_setting_selector",CLOSE_FRIEND_ACTIVITY_SELECTOR:"close_friend_activity_selector",BIRTHDAY_SELECTOR:"birthday_selector",ON_THIS_DAY_SELECTOR:"on_this_day_selector",TAGS_SELECTOR:"tags_selector",LIVE_VIDEO_SELECTOR:"live_video_selector",REACT_BADGE_COUNT_CONTAINER:"react_badge_count_container",NON_REACT_BADGE_COUNT_CONTAINER:"non_react_badge_count_container",BEEPER_LIST:"beeper_list",NON_REACT_SETTING_LINK:"non_react_setting_link",REACT_SETTING_LINK:"react_setting_link",GEOGRAPHIC_SUBSCRIPTION_SELECTOR:"geographic_subscription_selector"})}),null);
__d("NotificationJewelListBucketHeader.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").createElement("div",{className:"_fyy"},a.title.toUpperCase())}e.exports=a}),null);
__d("NotificationBucketGeneric.react",["cx","NotificationJewelListBucketHeader.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props,c=a.title,d=a.ids,e=a.listRenderer;a=a.startIndex;if(d.length===0)return null;e=e(d,a);return b("React").createElement("div",{className:"_32hm"},c?b("React").createElement(b("NotificationJewelListBucketHeader.react"),{title:c}):null,b("React").createElement("ul",null,e))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("NotificationBucket.react",["cx","BootloadedComponent.react","NotificationBucketGeneric.react","NotificationBucketUtils","NotificationJewelListBucketHeader.react","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.$1=function(){var a=this.props.bucket,c=a.bucketType;a=a.title;return b("React").createElement("div",null,b("React").createElement(b("NotificationJewelListBucketHeader.react"),{title:a,bucketType:c}),b("React").createElement(b("XUISpinner.react"),{className:"_1e00"}))};a.prototype.render=function(){var a=this.props,c=a.bucket,d=a.listRenderer;a=a.startIndex;var e=c.bucketType;e=b("NotificationBucketUtils").getCustomModuleForType(e);return!e?b("React").createElement(b("NotificationBucketGeneric.react"),babelHelpers["extends"]({},c,{listRenderer:d,startIndex:a})):b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({bootloadLoader:e,bootloadPlaceholder:this.$1()},c))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("GamingDestinationEntrypoints",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CANVAS_RHC:"canvas_rhc",GAMES_VIDEO_BOOKMARK:"games_video_bookmark",GAME_SEARCH_UNIT:"game_search_unit",GAMEROOM_LHC:"gameroom_lhc",GAMEROOM_FOLLOWED_GAME_LHC:"gameroom_followed_game_lhc",GAMEROOM_RHC:"gameroom_rhc",GROUP_RHC:"group_rhc",GROUP_HOVERCARD:"group_hovercard",GROUP_METALINE:"group_metaline",NEWSFEED_RHC:"newsfeed_rhc",INSTANT_GAMES_RHC:"instant_games_rhc",VIDEO_ATTRIBUTION_NEWSFEED:"video_newsfeed",VIDEO_ATTRIBUTION_PAGE:"video_page",VIDEO_ATTRIBUTION_OTHER:"video_other",LIVE_NOTIFICATION:"live_notification",NONFOLLOWER_NOTIFICATION:"nonfollower_notification",GAME_FOLLOWER_NOTIFICATION:"game_follower_notification",FRIEND_OF_FOLLOWER_NOTIFICATION:"friend_of_follower_notification",GAME_BOOKMARK:"game_bookmark",GAME_SHORTCUT:"game_shortcut",GAMES_VIDEO_QP:"games_video_qp",GAME_PAGES:"game_pages",VIDEO_HOME:"video_home",NEWS_FEED_ON_VIDEO_CLICK:"news_feed_on_video_click",NEWS_FEED_AFTER_VIDEO_PLAY:"news_feed_after_video_play",GAMES_VIDEO_SOCIAL_PLUGIN:"games_video_social_plugin",ANDROID_GAMING_SHORTCUT:"android_gaming_shortcut",ANDROID_INSTANT_GAME_SHORTCUT:"android_instant_game_shortcut",INSTANT_GAMEHUB_CROSS_SELL:"instant_gamehub_cross_sell",DEEPLINK:"deeplink",UNKNOWN:"unknown",FEED_NAVIGATION_PILLS:"feed_navigation_pills"})}),null);
__d("RelationshipDelightTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAlertID=function(a){this.$1.alert_id=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setMetadata=function(a){this.$1.metadata=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={alert_id:!0,event:!0,metadata:!0,vc:!0};e.exports=a}),null);
__d("RelationshipDelightUtils",["NotificationRelationshipDelightsConfig","QE2Logger","RelationshipDelightTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function h(a){a=a.eligible_buckets;return!!a&&a.indexOf("SO_NOTIFICATIONS")!==-1}function i(){b("QE2Logger").logExposureForUser(b("NotificationRelationshipDelightsConfig").universeName)}function a(a){var c=b("NotificationRelationshipDelightsConfig").shouldDecorateNotificationWithHearts,d=b("NotificationRelationshipDelightsConfig").shouldLogExposureForNotification;if(h(a)===!1)return!1;d&&i();return c===!0}function j(a,event,c){var d=event+"-"+a;if(g[d])return;g[d]=!0;d=new(b("RelationshipDelightTypedLogger"))().setEvent(event).setAlertID(a);c&&d.setMetadata(JSON.stringify(c));d.log()}c={shouldHeartBadge:function(a){var c=b("NotificationRelationshipDelightsConfig").shouldDecorateBadgeWithHearts,d=b("NotificationRelationshipDelightsConfig").shouldLogExposureForBadge;if(h(a)===!1)return!1;d&&i();return c===!0},shouldHeartBeeper:a,shouldHeartNotification:a,logNotificationAnimation:function(a,b,c){j(a,"notification_animated",{animation:b,rowIndex:c})},logBeeperAnimation:function(a){j(a,"beeper_animated")},logBadgeAnimation:function(a){j(a,"badge_animated")}};e.exports=c}),null);
__d("NotificationListDelightUtils",["RelationshipDelightUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=-1;a={canShowHeartDelight:function(a,c,d){if(c)return!1;if(!b("RelationshipDelightUtils").shouldHeartNotification(a))return!1;(g<0||g>d)&&(g=d);return!0},getFirstDelightRow:function(){return g}};e.exports=a}),null);
__d("NotificationListDelights.react",["cx","BootloadedComponent.react","JSResource","NotificationListDelightUtils","NotificationSeenState","React","RelationshipDelightUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();-1;function a(a){var c=a.rowIndex;a=a.notification;a=a.alert_id;var d=b("NotificationListDelightUtils").getFirstDelightRow()===c&&!b("NotificationSeenState").isSeen(a)?1:2;b("RelationshipDelightUtils").logNotificationAnimation(a,d,c);return b("React").createElement("div",{className:"_3u5l _3u5m"},b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("RelationshipDelightsActorAnimation.react").__setRef("NotificationListDelights.react"),animationPhase:d}))}e.exports=a}),null);
__d("QPLTimeToLoadHelper",["QuickPerformanceLogger","Run","crc32","performance"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a&&b("crc32")(a)||0}function h(a){return b("performance")&&b("performance").timing&&b("performance").timing.navigationStart&&a<b("performance").timing.navigationStart?a+b("performance").timing.navigationStart:a}function i(a){a.time!=null&&(a.time=h(a.time));var c=g(a.instanceKey);b("QuickPerformanceLogger").markerStart(a.qplMarker,c,a.time);b("QuickPerformanceLogger").annotateMarkerString(a.qplMarker,"SOURCE",a.source,c);b("QuickPerformanceLogger").annotateMarkerInt(a.qplMarker,"START_TIME",a.time==null?-1:a.time,c);b("Run").onUnload(function(){return b("QuickPerformanceLogger").markerEnd(a.qplMarker,"CANCEL",c)})}a={startWithClickEvent:function(a){i(babelHelpers["extends"]({},a,{time:a.event.timeStamp}))},start:function(a){i(a)},annotateString:function(a){var c=g(a.instanceKey);b("QuickPerformanceLogger").annotateMarkerString(a.qplMarker,a.annotationKey,a.annotationValue,c)},annotateInt:function(a){var c=g(a.instanceKey);b("QuickPerformanceLogger").annotateMarkerInt(a.qplMarker,a.annotationKey,a.annotationValue,c)},addPoint:function(a){var c=g(a.instanceKey);b("QuickPerformanceLogger").markerPoint(a.qplMarker,a.pointName,a.data,c,a.time!=null?h(a.time):a.time)},end:function(a){var c=a.time!=null?h(a.time):a.time,d=g(a.instanceKey);window.location&&window.location.href&&b("QuickPerformanceLogger").annotateMarkerString(a.qplMarker,"URL",window.location.href,d);b("QuickPerformanceLogger").annotateMarkerInt(a.qplMarker,"END_TIME",c==null?-1:c,d);b("QuickPerformanceLogger").markerEnd(a.qplMarker,a.action?a.action:"SUCCESS",d,c)}};e.exports=a}),null);
__d("XLiveVideoLoadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live/video/load/",{video_id:{type:"FBID",required:!0}})}),null);
__d("NotificationListRendererUtils",["AsyncRequest","Bootloader","FBLogger","FeedQuickLogModule","NavigationMetrics","NotificationURI","PageTransitions","QPLTimeToLoadHelper","URI","VideoChainingCaller","XLiveVideoLoadController","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(event,a){b("Bootloader").loadModules(["FBStoriesLiveNotificationHandler"],function(b){b.renderLiveStory(a)},"NotificationListRendererUtils")}function h(event,a,c){b("Bootloader").loadModules(["TahoeController"],function(d){var e=b("NotificationURI").localize(new(b("URI"))(c.url)),f=a.video_channel_caller;d.openFromVideoLink(new(b("URI"))(e),{channelID:a.video_channel_id,caller:f?(d=b("VideoChainingCaller"))!=null?d[f]:d:null})},"NotificationListRendererUtils")}function i(a,c){b("QPLTimeToLoadHelper").start({source:"notifications",qplMarker:b("FeedQuickLogModule").COMMENT_TTL_WWW,time:a.timeStamp}),c.notif_type?b("QPLTimeToLoadHelper").annotateString({source:"notifications",qplMarker:b("FeedQuickLogModule").COMMENT_TTL_WWW,annotationKey:"NOTIF_TYPE",annotationValue:c.notif_type}):b("FBLogger")("comet_notifications").addMetadata("COMET_NOTIFICATION","ALERT_ID",c.alert_id||"UNKONWN").mustfix("Missing notification type",c.alert_id)}function j(a,c){b("QPLTimeToLoadHelper").start({source:"notifications",qplMarker:b("FeedQuickLogModule").LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW,time:a.timeStamp}),c.notif_type?b("QPLTimeToLoadHelper").annotateString({source:"notifications",qplMarker:b("FeedQuickLogModule").LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW,annotationKey:"NOTIF_TYPE",annotationValue:c.notif_type}):b("FBLogger")("comet_notifications").addMetadata("COMET_NOTIFICATION","ALERT_ID",c.alert_id||"UNKONWN").mustfix("Missing notification type"),b("NavigationMetrics").once(b("NavigationMetrics").Events.NAVIGATION_DONE,function(a,c){a=c.tti;c.tti||(a=c.e2e,b("QPLTimeToLoadHelper").annotateString({qplMarker:b("FeedQuickLogModule").LOAD_STORY_PERMALINK_FROM_ANYWHERE_WWW,annotationKey:"TIMESTAMP_ERROR",annotationValue:"NO_TTI"}));b("QPLTimeToLoadHelper").end({qplMarker:b("FeedQuickLogModule").LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW,time:a})})}var k={openNotification:function(event,a){__p&&__p();var c=a.renderer_data;if(c==null)return;if(!k.isStoryOnlyLiveVideoNotification(a)&&(event.metaKey||event.ctrlKey||event.button===1))return;if(c.__typename==="LiveVideoNotificationRendererData"){event.preventDefault();c=b("XLiveVideoLoadController").getURIBuilder().setFBID("video_id",c.video_id).getURI();c=new(b("AsyncRequest"))(c).setHandler(function(c){c.payload?k.openNotificationInSurface(event,a):b("PageTransitions").go(a.url)});c.send()}},openNotificationInSurface:function(event,a){var b=a.renderer_data;if(b==null)return;b.bucket_data?g(event,b):b.can_render_in_tahoe&&h(event,b,a)},isStoryOnlyLiveVideoNotification:function(a){a=a.renderer_data;return a==null?!1:a.__typename==="LiveVideoNotificationRendererData"&&!!a.bucket_data},startTTLMarkers:function(a,c){b("gkx")("AT5MBMFcixHBDTVOnCOPABoY0SEKBgkMs8hdbXp10jt9exDuCkED-SN_LCnMzGSUGwNE5GSruaV2scvSC7UQy-lM")&&i(a,c),b("gkx")("AT7tvAuAV_g6puo48Jr3rJqUtJbiLAulr3mm_Iqiyhky1tvFklMRTm84CFvshg4Yjh0vsxAXYBZkM_ZMvt8NGRwa")&&j(a,c)}};e.exports=k}),null);
__d("NotificationListItem.react",["cx","Bootloader","Event","GamingDestinationEntrypoints","Keys","Link.react","NotificationListConfig","NotificationListDelights.react","NotificationListDelightUtils","NotificationListItemBaseModule","NotificationListRendererUtils","NotificationURI","NotificationUserActions","PageTransitions","React","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("NotificationListItemBaseModule").NotificationListItemBase;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$5=function(a){__p&&__p();a=this.props.notification;var c=a.primerAttributes;a=a.url;if(c&&c.ajaxify){c=new(b("URI"))(c.ajaxify);c=c.getQueryData();var d=c.app_id,e=c.page_id,f=c.post_id,g=c.ref;g==="aymt_auto_opened_dialog"&&b("Bootloader").loadModules(["BoostedComponentAYMTActionsV2"],function(a){a.aymtAutoOpenDialogLinkClick(d,e,f,g)},"NotificationListItem.react")}else if(a){c=new(b("URI"))(a);a=c.getQueryData();var h=a.aymt_tip;a=a.external_ref;h==="1"&&b("PageTransitions").go(c.addQueryData("aymt_link_click",Date.now()));a===b("GamingDestinationEntrypoints").LIVE_NOTIFICATION&&b("PageTransitions").go(c)}}.bind(this),this.$6=function(a){this.props.onClick&&this.props.onClick(this.$4()),this.$7(a),b("NotificationListRendererUtils").openNotification(a,this.props.notification),b("NotificationListRendererUtils").startTTLMarkers(a,this.props.notification)}.bind(this),this.$8=function(a){if(b("Event").getKeyCode(a.nativeEvent)==b("Keys").RETURN){var c=this.$4();this.props.onSelected&&this.props.onSelected(c);this.$7(a)}}.bind(this),this.$7=function(a){var c=this.$4();this.props.onRead&&a&&this.props.onRead(c);b("NotificationUserActions").markNotificationsAsRead([c],null)}.bind(this),this.$9=function(){var a=this.$4();b("NotificationUserActions").markNotificationsAsUnread([a],null)}.bind(this),this.$11=function(a){var c;b("NotificationListRendererUtils").isStoryOnlyLiveVideoNotification(this.props.notification)||(c=b("NotificationURI").localize(new(b("URI"))(this.props.notification.url)));return b("React").createElement("a",babelHelpers["extends"]({},this.props.notification.primerAttributes,{target:this.props.target,href:c,role:"button",tabIndex:0,className:"_33e _1_0e",onClick:this.$5,onClickCapture:this.$6,onKeyUp:this.$8}),a,this.$10())}.bind(this),c}a.prototype.$2=function(){return b("NotificationListConfig").canMarkUnread||(this.props.enableHubView||!1)&&b("NotificationListConfig").canMarkUnreadInHub};a.prototype.$3=function(){var a=this.props,c=a.notification,d=a.isRead;a=a.rowIndex;return b("NotificationListDelightUtils").canShowHeartDelight(c,d,a)};a.prototype.$4=function(){return this.props.notification.alert_id};a.prototype.$10=function(){return!this.$3()||!this.props.paused?null:b("React").createElement(b("NotificationListDelights.react"),{notification:this.props.notification,rowIndex:this.props.rowIndex})};a.prototype.render=function(){return b("React").createElement(i,babelHelpers["extends"]({},this.props,{canMarkUnread:this.$2(),hasCustomForeground:this.$3(),renderLink:this.$11,onMarkItemRead:this.$7,onMarkItemUnread:this.$9,hideIcon:!1}))};e.exports=a}),null);
__d("NotificationListPropTypes",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c={tracking:a.string,notifs:a.object,afterScroll:a.func,onChevronShow:a.func,onChevronHide:a.func,onRead:a.func,canFetchMore:a.bool,hiddenState:a.object,readState:a.object,showingChevron:a.bool,paused:a.bool,maxHeight:a.number,shouldScroll:a.bool,listItemRenderer:a.func};e.exports=c}),null);
__d("NotificationVPVs",["MarauderLogger","getElementRect"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Set();function a(a){if(h(a))return;b("MarauderLogger").log("notifications_vpv",undefined,null,"notification",a);g.add(a)}function h(a){return g.has(a)}function c(){g.clear()}function d(a,b){return!a||!b?!1:!(a.bottom<b.top||a.top>b.bottom||a.right<b.left||a.left>b.right)}function f(a){a=b("getElementRect")(a);return!a||a.top==0&&a.bottom==0&&a.left==0&&a.right==0?null:a}a={logImpression:a,clearImpressions:c,hasLoggedImpression:h,getValidatedRectangle:f,areRectsOverlapping:d};e.exports=a}),null);
__d("WebNotificationsBottomCollisionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:WebNotificationsBottomCollisionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:WebNotificationsBottomCollisionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WebNotificationsBottomCollisionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={vc:!0};e.exports=a}),null);
__d("performanceNowNoFallback",["performance"],(function(a,b,c,d,e,f){e.exports=b("performance").now?function(){return b("performance").now()}:null}),null);
__d("NotificationJewelList.react",["ix","cx","fbt","AbstractButton.react","Animation","ErrorBoundary.react","Event","FunnelLogger","Image.react","JewelLogger","LogicalGrid.react","NotificationBucket.react","NotificationJewelFunnelLoggingConstants","NotificationListConfig","NotificationListItem.react","NotificationListPropTypes","NotificationVPVs","NotifTestIDs","React","ReactDOM","ScrollableArea.react","SubscriptionsHandler","TimeSlice","TrackingNodes","Vector","WebNotificationsBottomCollisionsTypedLogger","XUISpinner.react","asset","debounce","getObjectValues","gkx","isEmpty","performanceNowNoFallback","throttle"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k=b("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_EVENT,l=b("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_NAME;c=b("NotificationListConfig").numStoriesFromEndBeforeAFetchIsTriggered;var m=160,n=530,o=61,p=Math.ceil(o*c),q=430,r;function s(a){r!=a&&(new(b("WebNotificationsBottomCollisionsTypedLogger"))().log(),r=a)}d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={lastMeasuredHeight:null},this.$2=[],this.$6=new(b("SubscriptionsHandler"))(),this.$7=!1,this.$8=!1,this.$11=function(){__p&&__p();if(!this.$3||!this.$5)return;var a=b("ReactDOM").findDOMNode(this.$3);if(!a)return;var c=b("ReactDOM").findDOMNode(this.$5);if(!c)return;var d=b("NotificationVPVs").getValidatedRectangle(c);if(this.props.afterScroll){var e=function(){this.props.afterScroll(this.$9(),a,d)}.bind(this);c=b("Vector").getElementDimensions(c).y;var f=this.$5&&this.$5.getArea();f&&f.getContentHeight()>0&&this.$7===!1&&b("performanceNowNoFallback")&&b("getObjectValues")(this.props.notifs).length>0&&(this.$7=!0,b("JewelLogger").logJewelListComponentEvent({jewelName:"notifications",eventName:"list_population_initial",timestamp:b("performanceNowNoFallback")()}));f&&c>0&&f.getContentHeight()>=c?((b("gkx")("AT4YdlZV4JJTtJC077vmEmLVdJyWr6In834BSTh3uurhOmYMskwzQQVmbWvdp5iY7qOrPqjTDGZiEP6G4qFURsi-")||this.$8===!1)&&b("performanceNowNoFallback")&&(this.$8=!0,b("JewelLogger").logJewelListComponentEvent({jewelName:"notifications",eventName:"list_populated",timestamp:b("performanceNowNoFallback")()})),b("TimeSlice").guard(e,"NotificationJewelList afterScrollCallback",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()):e()}}.bind(this),this.$12=function(){return b("getObjectValues")(this.props.notifs).map(function(a){return JSON.stringify(a)})}.bind(this),this.$16=function(a,c){var d=this.$13(c);if(a.ids&&a.ids.length){var e=this.props.notifs,f=a.ids.filter(function(a){return!!e[a]});if(f.length===0)return null}return b("React").createElement("li",{key:c},b("React").createElement(b("NotificationBucket.react"),{bucket:a,listRenderer:this.$17,startIndex:d}))}.bind(this),this.$17=function(a,b){b=b||0;return a.map(function(a,c){a=this.props.notifs[a];if(!a)return null;c=c+b;return this.$18(a,c,c)}.bind(this))}.bind(this),this.$19=function(){this.setState(function(a){return babelHelpers["extends"]({},a,{lastMeasuredHeight:this.$10()})}.bind(this))}.bind(this),this.$20=function(){var a=b("debounce")(this.$19);this.$6.addSubscriptions(a);return a}.bind(this)(),this.$23=function(){this.props.onResetRetryCount&&this.props.onResetRetryCount()}.bind(this),this.$24=function(){b("FunnelLogger").appendAction(l,k.SCROLL_TO_FETCH),this.$11()}.bind(this),this.$25=b("throttle").acrossTransitionsWithBlocking(this.$24),c}a.prototype.$9=function(){"use strict";__p&&__p();if(!this.$4||!this.$5)return!1;var a=b("ReactDOM").findDOMNode(this.$5);if(!a)return!1;var c=b("ReactDOM").findDOMNode(this.$4);if(!c)return!1;var d=b("Vector").getElementDimensions(a).y;if(d===0)return!1;a=b("Vector").getElementPosition(a).y+d;d=b("Vector").getElementPosition(c).y;c=this.$5&&this.$5.getArea();c&&c.getScrollTop()>0&&d<a&&s(b("getObjectValues")(this.props.notifs).length);return d-p<a};a.prototype.$10=function(){"use strict";var a=b("Vector").getViewportDimensions().y;a=Math.min(this.props.maxHeight||n,a-m);return a};a.prototype.$13=function(a){"use strict";return this.$2.slice(0,a).reduce(function(a,b){return a+b},0)};a.prototype.$14=function(a){"use strict";this.$2=a?a.map(function(a){return a.ids.length}):[]};a.prototype.$15=function(){"use strict";return!this.props.buckets?null:this.props.buckets.map(this.$16)};a.prototype.$18=function(a,c,d){"use strict";var e=a.alert_id;return b("React").createElement(b("ErrorBoundary.react"),{key:e},b("React").createElement(b("NotificationListItem.react"),{getDebugData:this.$12,isRead:this.props.readState[e],onChevronHide:this.props.onChevronHide,onChevronShow:this.props.onChevronShow,onClick:this.props.onClick,onRead:this.props.onRead,parent:this,paused:this.props.paused,row:c,rowIndex:d,shortenTimestamp:this.props.shortenTimestamp,target:this.props.target,visible:!this.props.hiddenState[e],notification:a}))};a.prototype.$21=function(a){"use strict";this.props.onNumNotificationsViewableChange&&this.props.onNumNotificationsViewableChange(a/o)};a.prototype.UNSAFE_componentWillMount=function(){"use strict";this.$14(this.props.buckets),this.$6.addSubscriptions(b("Event").listen(window,"resize",this.$20)),this.$19()};a.prototype.componentDidMount=function(){"use strict";var a=this.state.lastMeasuredHeight;a!=null&&this.$21(a);b("performanceNowNoFallback")&&b("JewelLogger").logJewelListComponentEvent({jewelName:"notifications",eventName:"list_did_mount",timestamp:b("performanceNowNoFallback")()})};a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";if(a.buckets===this.props.buckets)return;this.$14(a.buckets)};a.prototype.componentDidUpdate=function(a,c){"use strict";__p&&__p();if(this.props.paused&&!a.paused&&(this.props.shouldScroll&&this.$5)){a=this.$5.getArea();a&&a.scrollToTop(!1)}this.props.retryLimitReached&&b("JewelLogger").logJewelFail();a=this.state.lastMeasuredHeight;if(a!=null&&a!==c.lastMeasuredHeight){this.$21(a);this.$1&&(this.$1.stop(),delete this.$1);if(!b("isEmpty")(this.props.notifs)){c=b("ReactDOM").findDOMNode(this.$5);c&&(this.$1=new(b("Animation"))(c).to("height",a+"px").duration(100).go())}}var d=setTimeout(this.$11,0);this.$6.addSubscriptions({remove:function(){clearTimeout(d)}})};a.prototype.componentWillUnmount=function(){"use strict";this.$6.release(),this.$1&&(this.$1.stop(),delete this.$1)};a.prototype.$22=function(a,b){"use strict";return b.indexOf(a)};a.prototype.$26=function(){"use strict";if(this.props.buckets&&this.props.buckets.length)return this.$15();var a=b("getObjectValues")(this.props.notifs).filter(Boolean).map(function(a){return a.alert_id});return b("getObjectValues")(this.props.notifs).filter(Boolean).map(function(b,c){var d=b.alert_id;d=this.$22(d,a);return this.$18(b,d,c)}.bind(this))};a.prototype.render=function(){"use strict";__p&&__p();var a=this.props.notifs,c=null,d=null,e=q,f=null,h=b("React").createElement("ul",{"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.NOTIFICATION_JEWEL),"data-gt":this.props.tracking,"data-testid":b("NotifTestIDs").REACT_NOTIF_LIST});!b("isEmpty")(a)?(c=b("React").createElement(b("LogicalGrid.react"),{ref:function(a){return this.$3=a}.bind(this),component:h},this.$26()),d=this.state.lastMeasuredHeight):this.props.canFetchMore||(c=b("React").createElement("div",{className:"_572e","data-testid":b("NotifTestIDs").REACT_NOTIF_LIST},i._("No new notifications")));this.props.canFetchMore&&(this.props.retryLimitReached&&this.props.onResetRetryCount!=null?f=b("React").createElement(b("AbstractButton.react"),{className:"_3heb","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":i._("A temporary issue prevented your notifications from being loaded. Click to try again."),"data-tooltip-delay":!0,image:b("React").createElement(b("Image.react"),{className:"_3hec",src:g("458300")}),label:i._("Try again"),labelIsHidden:!0,onClick:this.$23}):f=b("React").createElement(b("XUISpinner.react"),{ref:function(a){return this.$4=a}.bind(this),paused:!this.props.currentlyFetching,className:"jewelLoading"}));a=null;if(this.props.upsell){h=this.props.upsell.module;a=b("React").createElement(h,this.props.upsell.props)}h="_50-t"+(this.props.showingChevron?" _2iy1":"");e=b("React").createElement(b("ScrollableArea.react"),{ref:function(a){return this.$5=a}.bind(this),width:e,fade:!0,persistent:!0,onScroll:this.$25},c,f);return b("React").createElement("div",{style:d?{height:d+"px"}:{},className:h},e,a)};a.defaultProps={retryLimitExceeded:!1};a.propTypes=b("NotificationListPropTypes");e.exports=a}),null);
__d("retry",["regeneratorRuntime","asyncSleep"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;g=babelHelpers.inherits(i,Error);h=g&&g.prototype;function i(a,b,c,d){h.constructor.call(this,a),this.message=a,this.values=b,this.errors=c,this.options=d}function j(a){this.$1=babelHelpers["extends"]({},j.RETRY_OPTION_DEFAULTS,a),this.$2=0,this.$3=!1,this.$4=!1,this.$5=[],this.$6=[],this.$7=null,this.$8=0,this.$9()}j.prototype.$9=function(){if(this.$1.interval&&this.$1.interval<0)throw new i("C'mon, interval < 0 makes no sense.",[],[],this.$1);if(this.$1.backoff&&this.$1.backoff<1)throw new i("backoff must be >= 1",[],[],this.$1);if(this.$1.jitter&&(this.$1.jitter<0||this.$1.jitter>1))throw new i("jitter must be in range [0, 1]",[],[],this.$1)};j.prototype.onValue=function(){this.$1.retryValues||(this.$1.retryValues=[]);for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.$1.retryValues=this.$1.retryValues.concat(b);return this};j.prototype.untilValue=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return this.untilValueMatches(function(a){return b.indexOf(a)!==-1})};j.prototype.onFalsy=function(){return this.onValueMatches(function(a){return!a})};j.prototype.onTruthy=function(){return this.onValueMatches(function(a){return!!a})};j.prototype.untilTruthy=function(){return this.onFalsy()};j.prototype.untilFalsy=function(){return this.onTruthy()};j.prototype.onNull=function(){return this.onValueMatches(function(a){return a===null})};j.prototype.onUndefined=function(){return this.onValueMatches(function(a){return a===undefined})};j.prototype.onValueMatches=function(){this.$1.retryValueMatchers||(this.$1.retryValueMatchers=[]);for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.$1.retryValueMatchers=this.$1.retryValueMatchers.concat(b);return this};j.prototype.untilValueMatches=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return this.onValueMatches.apply(this,b.map(function(a){return function(b){return!a(b)}}))};j.prototype.onError=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];if(b.length===0)return this.onErrorMatches(function(a){return!0});this.$1.retryErrorClasses||(this.$1.retryErrorClasses=[]);this.$1.retryErrorClasses=this.$1.retryErrorClasses.concat(b);return this};j.prototype.onErrorMatches=function(){this.$1.retryErrorMatchers||(this.$1.retryErrorMatchers=[]);for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.$1.retryErrorMatchers=this.$1.retryErrorMatchers.concat(b);return this};j.prototype.limit=function(a){this.$1.retries=a;this.$9();return this};j.prototype.once=function(){return this.limit(1)};j.prototype.twice=function(){return this.limit(2)};j.prototype.withInterval=function(a){this.$1.interval=a;this.$9();return this};j.prototype.withMaxInterval=function(a){this.$1.maxInterval=a;return this};j.prototype.withMinInterval=function(a){this.$1.minInterval=a;return this};j.prototype.withBackoff=function(a){this.$1.backoff=a;this.$9();return this};j.prototype.withJitter=function(a){this.$1.jitter=a;this.$9();return this};j.prototype.abort=function(){this.$3=!0};j.prototype.getCallCount=function(){return this.$2};j.prototype.getValues=function(){return this.$5};j.prototype.getErrors=function(){return this.$6};j.prototype.isRunning=function(){return this.$4};j.prototype.call=function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:if(!this.$4){e.next=2;break}throw new i("Cannot reuse a retry object while it is still running!",[],[],this.$1);case 2:this.$4=!0,e.prev=3,this.$7=a,this.$6=[],this.$5=[];case 7:if(!(!this.$1.retries||this.$2<this.$1.retries+1)){e.next=33;break}if(!(this.$2>0)){e.next=12;break}c=this.$10();e.next=12;return b("regeneratorRuntime").awrap(b("asyncSleep")(c));case 12:if(!this.$3){e.next=14;break}throw new i("Retry aborted.",this.$5,this.$6,this.$1);case 14:e.prev=14;this.$2++;e.next=18;return b("regeneratorRuntime").awrap(a());case 18:d=e.sent;this.$5.push(d);if(!this.$11(d)){e.next=22;break}return e.abrupt("continue",7);case 22:return e.abrupt("return",d);case 25:e.prev=25;e.t0=e["catch"](14);this.$6.push(e.t0);if(!this.$12(e.t0)){e.next=30;break}return e.abrupt("continue",7);case 30:throw e.t0;case 31:e.next=7;break;case 33:throw new i("Max call count exceeded.",this.$5,this.$6,this.$1);case 34:e.prev=34;this.$4=!1;return e.finish(34);case 37:case"end":return e.stop()}},null,this,[[3,,34,37],[14,25]])};j.prototype.$10=function(){return Math.max(0,this.$13(this.$14()))};j.prototype.$13=function(a){a=a;this.$1.minInterval&&(a=Math.max(a,this.$1.minInterval));this.$1.maxInterval&&(a=Math.min(a,this.$1.maxInterval));return a};j.prototype.$14=function(){return this.$15()+this.$16()};j.prototype.$17=function(){return this.$1.interval?this.$1.interval:0};j.prototype.$18=function(){return this.$1.backoff?this.$1.backoff:1};j.prototype.$15=function(){var a=this.$17(),b=this.$18();return a*Math.pow(b,this.$2-1)};j.prototype.$16=function(){var a=this.$19(),b=a-this.$8;this.$8=a;return b};j.prototype.$19=function(){var a=this.$1.jitter;if(!a)return 0;var b=Math.random()*2-1;b=b*b*b*a/2;a=this.$17();var c=this.$18(),d=c-1;return d<1e-6?a*Math.pow(c,this.$2)*(b+d*(b*b-b)/2):a*Math.pow(c,this.$2)*(Math.pow(c,b)-1)/(c-1)};j.prototype.$11=function(a){return!!this.$1.retryValues&&this.$1.retryValues.indexOf(a)!==-1||!!this.$1.retryValueMatchers&&this.$1.retryValueMatchers.some(function(b){return b(a)})};j.prototype.$12=function(a){return!!this.$1.retryErrorClasses&&this.$1.retryErrorClasses.some(function(b){return a instanceof b})||!!this.$1.retryErrorMatchers&&this.$1.retryErrorMatchers.some(function(b){return b(a)})};j.RETRY_OPTION_DEFAULTS={interval:1e3,backoff:1,jitter:.25};function a(a,c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(new j(c).call(a));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},null,this)}a.Retry=j;a.RetryError=i;function c(){var a;return(a=new j()).onValue.apply(a,arguments)}a.onValue=c;function d(){var a;return(a=new j()).untilValue.apply(a,arguments)}a.untilValue=d;function f(){return new j().onFalsy()}a.onFalsy=f;function k(){return new j().onTruthy()}a.onTruthy=k;function l(){return new j().untilTruthy()}a.untilTruthy=l;function m(){return new j().untilFalsy()}a.untilFalsy=m;function n(){return new j().onNull()}a.onNull=n;function o(){return new j().onUndefined()}a.onUndefined=o;function p(){var a;return(a=new j()).onValueMatches.apply(a,arguments)}a.onValueMatches=p;function q(){var a;return(a=new j()).untilValueMatches.apply(a,arguments)}a.untilValueMatches=q;function r(){var a;return(a=new j()).onError.apply(a,arguments)}a.onError=r;function s(){var a;return(a=new j()).onErrorMatches.apply(a,arguments)}a.onErrorMatches=s;function t(a){return new j().limit(a)}a.limit=t;function u(){return new j().once()}a.once=u;function v(){return new j().twice()}a.twice=v;function w(a){return new j().withInterval(a)}a.withInterval=w;function x(a){return new j().withMaxInterval(a)}a.withMaxInterval=x;function y(a){return new j().withMinInterval(a)}a.withMinInterval=y;function z(a){return new j().withBackoff(a)}a.withBackoff=z;function A(a){return new j().withJitter(a)}a.withJitter=A;e.exports=a}),null);
__d("NotificationList.react",["regeneratorRuntime","Promise","Arbiter","FunnelLogger","NotificationBucketStore","NotificationConstants","NotificationHiddenState","NotificationJewelFunnelLoggingConstants","NotificationSeenState","NotificationStore","NotificationUpdates","NotificationUserActions","NotificationVPVs","NotifType","React","SubscriptionsHandler","TimeSlice","createCancelableFunction","getObjectValues","isEmpty","mapObject","retry"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_EVENT,i=b("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_NAME;a=b("React").PropTypes;var j=b("NotificationConstants").PayloadSourceType.LIVE_SEND,k=3,l="notification_clicked";function m(a){return{classification:a.classification,endpointControllerName:a.endpoint!=null?a.endpoint:"WebNotificationsPayloadPagelet",readness:a.readness}}c=babelHelpers.inherits(n,b("React").Component);g=c&&c.prototype;function n(a){__p&&__p();var c;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];(c=g.constructor).call.apply(c,[this,a].concat(e));this.$1={};this.$2=!1;this.$3=new(b("SubscriptionsHandler"))();this.$4=0;this.$9=function(){this.setState({retryLimitReached:!1}),this.$10()}.bind(this);this.$11=function(){var a={};Object.keys(this.$1).forEach(function(c){var d=b("NotificationHiddenState").isHidden(c);d!=this.state.hiddenState[c]&&(a[c]=d)}.bind(this));b("isEmpty")(a)||this.setState({hiddenState:babelHelpers["extends"]({},this.state.hiddenState,a)});this.$1={};this.$8(b("NotificationStore").getCount(m(this.props)))}.bind(this);this.$12=function(a,c,d){if(this.state.currentlyFetching||!this.state.canFetchMore)return;a&&(b("FunnelLogger").appendAction(i,h.FETCH_NEXT_SET),this.$10());this.$13(c,d)}.bind(this);this.$14=function(){this.setState({showingChevron:!0})}.bind(this);this.$15=function(){this.setState({showingChevron:!1})}.bind(this);this.$18=function(a){this.props.onClick&&this.props.onClick(a),b("Arbiter").inform(l,{endpointConfig:m(this.props),alertID:a})}.bind(this);this.$19=function(a){if(this.props.paused&&this.props.readness==="UNREAD"){var b=babelHelpers["extends"]({},this.state.readWhilePausedOrNavigating);b[a]=!0;this.setState({readWhilePausedOrNavigating:b})}}.bind(this);this.$20=function(a){this.$4=a}.bind(this);var j=m(a);b("NotificationStore").registerEndpoint(j);var k=b("NotificationStore").getAll(j);this.state={currentlyFetching:!1,canFetchMore:b("NotificationStore").canFetchMore(j),notifs:k,hiddenState:b("mapObject")(k,function(a,c){return b("NotificationHiddenState").isHidden(c)}),readState:b("mapObject")(k,function(a,c){return b("NotificationSeenState").isRead(c)}),showingChevron:!1,readWhilePausedOrNavigating:{},retryLimitReached:!1}}n.prototype.UNSAFE_componentWillMount=function(){"use strict";__p&&__p();b("FunnelLogger").appendAction(i,h.FETCH_NOTIFICATIONS),this.$3.addSubscriptions(b("NotificationUpdates").subscribe("notifications-updated",function(a,c){if(c.source==j&&!b("isEmpty")(c.updates)){this.$2=!0;a=this.props.paused;if(a){this.$1=babelHelpers["extends"]({},this.$1,c.updates);return}}this.$5(b("NotificationStore").getAll(m(this.props)))}.bind(this)),b("NotificationUpdates").subscribe(["hidden-state-updated","read-state-updated"],function(a,c){__p&&__p();if(a=="hidden-state-updated"){if(c.source!==j||!this.props.paused){a=b("mapObject")(c.updates,function(a,c){return b("NotificationHiddenState").isHidden(c)});this.setState({hiddenState:babelHelpers["extends"]({},this.state.hiddenState,a)})}}else{a=b("mapObject")(c.updates,function(a,c){return b("NotificationSeenState").isRead(c)});this.setState({readState:babelHelpers["extends"]({},this.state.readState,a)})}}.bind(this)))};n.prototype.componentWillUnmount=function(){"use strict";this.$3.release()};n.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";if(!this.$6(a)&&a.paused)return;if(this.props.enableHubView&&this.props.readness==="UNREAD")return;this.setState({readWhilePausedOrNavigating:{}})};n.prototype.$6=function(a){"use strict";return a.classification!==this.props.classification||a.readness!==this.props.readness};n.prototype.$7=function(a){"use strict";var b=Object.keys(this.state.notifs),c=Object.keys(a).filter(function(a){return!this.state.notifs[a]}.bind(this));b=b.concat(c);var d={};b.forEach(function(b){this.$1[b]?this.state.notifs[b]&&(d[b]=this.state.notifs[b]):d[b]=a[b]||this.state.notifs[b]}.bind(this));return d};n.prototype.$5=function(a){"use strict";a=b("isEmpty")(this.$1)?a:this.$7(a);var c={},d={};b("getObjectValues")(a).forEach(function(a){a=a.alert_id;c[a]=b("NotificationSeenState").isRead(a);d[a]=b("NotificationHiddenState").isHidden(a)});var e=m(this.props);this.setState({notifs:a,canFetchMore:b("NotificationStore").canFetchMore(e)||b("NotificationStore").getCount(e)!==Object.keys(a).length,readState:babelHelpers["extends"]({},this.state.readState,c),hiddenState:babelHelpers["extends"]({},this.state.hiddenState,d)})};n.prototype.$8=function(a){"use strict";__p&&__p();var c,d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:this.setState({currentlyFetching:!0});c=m(this.props);d=b("createCancelableFunction")(function(){this.setState({currentlyFetching:!1,retryLimitReached:!0})}.bind(this));this.$3.addSubscriptions({remove:function(){d.cancel()}});e=b("retry").limit(k).onError().withBackoff(2).withInterval(100).withJitter(.1);f.prev=5;f.next=8;return b("regeneratorRuntime").awrap(e.call(function(){return new(b("Promise"))(function(d,f){var g=b("NotificationStore").getNotifications(a,c,function(e){this.$5(e),Object.keys(e).length<a&&b("NotificationStore").canFetchMore(c)?f():d()}.bind(this)),h=g.remove;this.$3.addSubscriptions({remove:function(){h(),e.abort(),f()}})}.bind(this))}.bind(this)));case 8:this.setState({currentlyFetching:!1});f.next=18;break;case 11:f.prev=11;f.t0=f["catch"](5);if(!(f.t0 instanceof b("retry").RetryError)){f.next=17;break}d();f.next=18;break;case 17:throw f.t0;case 18:case"end":return f.stop()}},null,this,[[5,11]])};n.prototype.$10=function(){"use strict";if(!this.state.currentlyFetching){var a=Object.keys(this.state.notifs).length;this.$8(a+this.props.numPerPage)}};n.prototype.$13=function(a,c){"use strict";__p&&__p();if(!a||!c)return;for(var d=0,e=a.children.length;d<e;d++){var f=a.children[d];if(f){var g=f.getAttribute("data-alert-id");if(g&&!b("NotificationVPVs").hasLoggedImpression(g)){f=b("NotificationVPVs").getValidatedRectangle(f);f&&b("NotificationVPVs").areRectsOverlapping(c,f)&&b("NotificationVPVs").logImpression(g)}}}};n.prototype.$16=function(a){"use strict";a=Math.max(this.props.numPerPage,Math.ceil(this.$4));a>0&&this.$8(a)};n.prototype.$17=function(a){"use strict";var c=b("NotificationSeenState").getUnseenIDs();b("isEmpty")(this.$1)||(c=c.filter(function(a){return!this.$1[a]}.bind(this)));c.length&&(this.props.paused||this.props.enableHubView)&&b("TimeSlice").guard(function(){return b("NotificationUserActions").markNotificationsAsSeen(c)},"NotificationList _populateList markNotificationsAsSeen",{propagationType:b("TimeSlice").PropagationType.ORPHAN})();this.props.hasEverBeenOpened&&((!a||!a.hasEverBeenOpened)&&this.$16(c))};n.isReaction=function(a){"use strict";return a===b("NotifType").LIKE||a===b("NotifType").OPEN_GRAPH_ACTION_LIKE||a===b("NotifType").LIKE_TAGGED||a===b("NotifType").PAGE_FAN||a===b("NotifType").IG_MEDIA_LIKE||a===b("NotifType").FEEDBACK_REACTION_GENERIC||a===b("NotifType").FEEDBACK_REACTION_GENERIC_TAGGED||a===b("NotifType").MESSENGER_REACTIONS};n.prototype.componentDidUpdate=function(a){"use strict";__p&&__p();this.$17(a);if(a.paused&&!this.props.paused){this.$2=!1;var b=setTimeout(this.$11,0);this.$3.addSubscriptions({remove:function(){clearTimeout(b)}});return}if(this.props.paused&&this.$6(a)){var c=setTimeout(this.$11,0);this.$3.addSubscriptions({remove:function(){clearTimeout(c)}});return}};n.prototype.componentDidMount=function(){"use strict";this.$17()};n.prototype.render=function(){"use strict";__p&&__p();var a=this.props.listRenderer,c=this.state,d=c.notifs,e=c.readState,f=c.readWhilePausedOrNavigating,g={};this.props.readness==null?g=d:Object.keys(d).forEach(function(a){a=d[a];var b=a.alert_id,c=e[b];this.props.readness==="UNREAD"&&(c=!c||Object.prototype.hasOwnProperty.call(f,b));c&&(g[b]=a)}.bind(this));if(this.props.hideReactions){var h={};Object.keys(g).forEach(function(a){a=d[a];n.isReaction(a.notif_type)||(h[a.alert_id]=a)});g=h}var i=this.props.classification;i&&Object.keys(d).forEach(function(a){a=d[a];(!a.classifications||!a.classifications.includes(i))&&delete g[a.alert_id]});c=b("NotificationBucketStore").isEmptyBucketListData()?null:b("NotificationBucketStore").getBucketListData();return b("React").createElement(a,{paused:this.props.paused,isFlyoutOpened:this.props.isFlyoutOpened,target:this.props.target,tracking:this.props.tracking,shortenTimestamp:this.props.shortenTimestamp,maxHeight:this.props.maxHeight,useChevron:this.props.useChevron,chevronType:this.props.chevronType,buckets:c,notifs:g,afterScroll:this.$12,onChevronShow:this.$14,onChevronHide:this.$15,currentlyFetching:this.state.currentlyFetching,canFetchMore:this.state.canFetchMore,hiddenState:this.state.hiddenState,readState:this.state.readState,showingChevron:this.state.showingChevron,shouldScroll:this.$2,upsell:this.props.upsell||null,isRHC:this.props.isRHC,enableMarkUnread:this.props.enableMarkUnread,onClick:this.$18,onRead:this.$19,onNumNotificationsViewableChange:this.$20,onResetRetryCount:this.$9,retryLimitReached:this.state.retryLimitReached})};n.propTypes={hasEverBeenOpened:a.bool,enableHubView:a.bool,enableMarkUnread:a.bool,maxHeight:a.number,paused:a.bool,isFlyoutOpened:a.bool,tracking:a.string,useChevron:a.bool,chevronType:a.string,numPerPage:a.number.isRequired,listRenderer:a.func.isRequired,upsell:a.object,endpoint:a.string,readness:a.string,classification:a.string};e.exports=n}),null);