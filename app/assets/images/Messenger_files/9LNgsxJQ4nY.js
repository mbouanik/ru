if (self.CavalryLogger) { CavalryLogger.start_js(["AF3\/U"]); }

__d("MessengerMount",["cx","Bootloader","ChannelConnection","ChannelManager","CSS","CurrentUser","HotLikeSound","MercuryDeliveryState","MercuryOrderedThreadlist","MercuryServerPayloadPreprocessor","MercurySyncEnvironment","MercuryThreadIDMap","MercuryUnreadState","MercuryUnseenState","MercuryWorkContextInformation","MessengerActions","MessengerAsyncWrapper","MessengerAttributionTagsStore","MessengerBrowserAlerts","MessengerComposerActions","MessengerComposerStore","MessengerConfig","MessengerDialogs.bs","MessengerEnvironment","MessengerInitialDataTransformer.bs","MessengerMDotMeReferralStore","MessengerPage","MessengerParticipants.bs","MessengerPromotionDataActions","MessengerReact.bs","MessengerRTCMessageHandler","MessengerSearchConfirmationDialogReact.bs","MessengerSettingsStore","MessengerState.bs","MessengerThreadSearchStore","MessengerURIConstants","MessengerURIListener","MessengerURISerializer","MessengerURIStore","MessengerView","MNPlatformTagsDataManager","React","ReactDOM","URI","gkx","goURI","OrderedFriendsList","PageHooks"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerReact.bs").jsComponent,i=b("MessengerSearchConfirmationDialogReact.bs").jsComponent;b("OrderedFriendsList");b("PageHooks");b("ChannelManager").startChannelManager();a={initStoresAndListeners:j,dispatchInitialData:m,mount:function(a,c,d){__p&&__p();b("MessengerEnvironment").setMessengerUI(!0);b("MessengerPage").emit(b("MessengerPage").Events.JS_LOADED);d=b("CurrentUser").getID();var e=b("CurrentUser").isWorkUser();j(d);m(d,c);b("MessengerPage").emit(b("MessengerPage").Events.DATA_INITIALIZED);var f=document.documentElement;f&&b("CSS").addClass(f,"_51l0");if(document.body){f=document.body;b("CSS").addClass(f,"_z4_");b("MessengerConfig").SFFontEnabled&&b("CSS").addClass(f,"__6g");b("MessengerConfig").SegoeUIDisabled&&b("CSS").addClass(f,"_2por");b("MessengerEnvironment").facebookdotcom&&b("CSS").addClass(f,"_mvg")}b("HotLikeSound").setCheckSoundEnabledFunc(function(){return b("MessengerSettingsStore").getSettings().sound_enabled});b("ReactDOM").render(b("React").createElement(b("MessengerAsyncWrapper"),null,b("React").createElement(h,{employeeData:c.employeeData,facebookNotificationTokens:c.facebookNotificationTokens,showWorkchatUpsellBanner:c.showWorkchatUpsellBanner,isFirstRedirect:!b("gkx")("AT71LRcbgltkBEoVFCCCdNV29c5_0WezosqmKxl4WEXk8XQNpOgP_oLFicsbGWor0e-3lTCNH9el3cQIDbyD2Ry3"),viewer:d,isWorkUser:e,onMount:function(){return n(c)}})),a)}};function j(a){k(a),l(a)}function k(a){b("MercuryDeliveryState").getForFBID(a),b("MercuryOrderedThreadlist").getForFBID(a),b("MessengerParticipants.bs"),b("MessengerState.bs"),b("MercuryUnreadState").getForFBID(a),b("MercuryUnseenState").getForFBID(a),b("gkx")("AT4U12g3_bcwn6ufLpU4OEUYc1kFcjBGcKNGLrZ6ojdDQcQXRWXqnapmNxWOT3hrOPJ53IJ8NqlKsl875YQK2FZ5")&&b("MercuryWorkContextInformation").getForFBID(a),b("MessengerAttributionTagsStore"),b("MessengerComposerStore"),b("MessengerMDotMeReferralStore"),b("MessengerSettingsStore"),b("MessengerURIStore"),b("MessengerThreadSearchStore").getForFBID(a)}function l(a){b("MessengerURIListener").start(),b("MercurySyncEnvironment").setUp(),b("MessengerBrowserAlerts").init(a),b("MessengerRTCMessageHandler").init(),b("ChannelConnection")}function m(a,c){__p&&__p();a=b("MercuryServerPayloadPreprocessor").getForFBID(a);var d=c.lastReadThreadKey;if(c.graphqlPayload){var e=b("MessengerInitialDataTransformer.bs").transform(c.graphqlPayload),f=e[0];d=e[1];f.message_blocked_ids=c.mercuryPayload.message_blocked_ids;f.message_ignored_ids=c.mercuryPayload.message_ignored_ids;a.handleUpdate(f)}else a.handleUpdate(c.mercuryPayload);e=new(b("URI"))(window.location.href);f=b("MessengerURISerializer").deserialize(e);if(f.query){var g=f.masterView===b("MessengerView").MASTER.SEARCH,h=f.query;f.query=null;f.masterView=b("MessengerView").MASTER.RECENT;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{term:h,onSearch:function(){g?b("MessengerActions").changeQueryAll(h):b("MessengerActions").changeQuery(h)}})})}b("goURI")(b("MessengerURISerializer").serialize(f),!1,!0);if(e.getPath().match(b("MessengerURIConstants").COMPOSE_SUBPATH+"/?$"))return;if(f.masterView===b("MessengerView").MASTER.PAYMENT)return;b("MessengerActions").changeMDotMeReferral(c.mDotMeReferral,c.mDotMeReferralThreadKey);a=b("MercuryThreadIDMap").get();f=a.getClientIDFromServerIDNow(d);f?(b("MessengerComposerActions").exitComposeState(),b("MessengerActions").selectThread(f)):e.getPath()==="/"&&b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(c.messagingSource,c.mDotMeReferralThreadKey&&c.mDotMeReferralThreadKey.toString())}function n(a){b("MessengerPage").emit(b("MessengerPage").Events.APP_MOUNTED),a.gameData&&a.gameData.gameID&&b("Bootloader").loadModules(["MessengerGamesQuicksilverPlayerContainer.react","InstantGameContextType","QuicksilverSources"],function(c,d,e){var f=null,g=d.SOLO;a.gameData.contextSourceID&&(f=a.gameData.contextSourceID,g=d.THREAD);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(c,{initialContextSourceID:f,initialContextType:g,onHide:function(){return b("MessengerDialogs.bs").removeAllDialogs()},initialGameID:a.gameData.gameID,initialSource:e.M_ME_LINK,sourceID:null})})},"MessengerMount"),b("MessengerPromotionDataActions").setPromotionData(a.promotionData)}e.exports=a}),null);