if (self.CavalryLogger) { CavalryLogger.start_js(["R5EYM"]); }

__d("FBRTCCallConstants",[],(function(a,b,c,d,e,f){e.exports={FBRTCCallConnectionType:{MISSED_CALL:4,CONNECTED_CALL:5},FBRTCCallType:{VOICE_CALL:1,VIDEO_CALL:2,COLLAB_VIDEO_CALL:3,COLLAB_SCREEN_SHARE_CALL:4}}}),null);
__d("dangerouslyBypassDispatchError",[],(function(a,b,c,d,e,f){"use strict";function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];setTimeout(function(){a.apply(null,c)},0)}e.exports=a}),null);
__d("RTCWebUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RTCWebUserActionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RTCWebUserActionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RTCWebUserActionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setCallID=function(a){this.$1.call_id=a;return this};a.prototype.setCallType=function(a){this.$1.call_type=a;return this};a.prototype.setClientTime=function(a){this.$1.client_time=a;return this};a.prototype.setComponent=function(a){this.$1.component=a;return this};a.prototype.setConferenceName=function(a){this.$1.conference_name=a;return this};a.prototype.setConferenceState=function(a){this.$1.conference_state=a;return this};a.prototype.setErrorDomain=function(a){this.$1.error_domain=a;return this};a.prototype.setErrorType=function(a){this.$1.error_type=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setEventTimeElapsed=function(a){this.$1.event_time_elapsed=a;return this};a.prototype.setMediaType=function(a){this.$1.media_type=a;return this};a.prototype.setPage=function(a){this.$1.page=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={call_id:!0,call_type:!0,client_time:!0,component:!0,conference_name:!0,conference_state:!0,error_domain:!0,error_type:!0,event:!0,event_time_elapsed:!0,media_type:!0,page:!0,surface:!0,vc:!0};e.exports=a}),null);
__d("FavIcon",["DOM"],(function(a,b,c,d,e,f){__p&&__p();var g,h,i;function j(){var a=b("DOM").scry(document.head,"link");a&&a.forEach(function(a){(a.rel.indexOf("icon")!=-1||a.rel.indexOf("shortcut icon")!=-1)&&b("DOM").remove(a)})}a={isToggledResource:function(){return i&&g.href===i?!0:!1},set:function(a){g&&b("DOM").remove(g),j(),g=b("DOM").create("link",{type:"image/x-icon",rel:"icon",href:a}),b("DOM").appendContent(b("DOM").find(document,"head"),g)},setToggleResources:function(a,b){g=document.querySelector('link[rel*=icon][href*=".ico"]');if(!g)return;h=b||g.href;i=a},toggle:function(){if(!g||!i)return;if(g.href===h){this.set(i);return}this.set(h)},toggleSet:function(a){if(!g||!i||!h)return;a=a?i:h;g.href!==a&&this.set(a)}};e.exports=a}),null);
__d("MercuryIgnoredBlockedParticipants.bs",["bs_caml_obj","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){d=d.participants.filter(function(c){return c!==b("MercuryIDs").getParticipantIDFromUserID(a)});return d.filter(function(a){return c.has(a)!==!1})}function a(a,b,c){if(c.is_canonical)return!1;else return g(a,b,c).length>0}function c(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function d(a,c,d){var e=d.is_canonical;if(e){e=d.participants.filter(function(c){return b("bs_caml_obj").caml_notequal(c,b("MercuryIDs").getParticipantIDFromUserID(a))});return!e.every(function(a){return!c.has(a)})}else return!1}f.findIntersection=g;f.isPresentInGroupThread=a;f.participantsInGroupThread=c;f.qualifiesAs=d}),null);
__d("MercuryNotificationRenderer",["fbt","CurrentUser","MercuryAssert","MercuryIDs","MercuryMessages","MessengerParticipants.bs","MercuryViewer","MessagingGenericAdminTextType","MessengerState.bs"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("MercuryMessages").get(),i="source:messenger_growth:event_upcoming_bump";function a(a,c){__p&&__p();b("MercuryAssert").isThreadID(a),b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),a,function(d){__p&&__p();h.getThreadMessagesRange(a,0,1,function(e){__p&&__p();e=e.length&&e[e.length-1];var f=[];e.tags!==undefined&&(f=f.concat(e.tags));e.log_message_data&&(e.log_message_data.message_type==b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST||e.log_message_data.message_type==b("MessagingGenericAdminTextType").WORK_INVITE_CLAIMED)?c(g._("New contact added")):f.indexOf(i)!==-1?c(g._("You have an upcoming event.")):e&&e.author!=b("MercuryViewer").getID()?b("MessengerParticipants.bs").get(e.author,function(e){var f=e.short_name,h=d.custom_nickname;if(h){e=b("MercuryIDs").getUserIDFromParticipantID(e.id);h[e]&&(f=h[e])}d.name?c(g._("{senderName} messaged {groupName}",[g._param("senderName",f),g._param("groupName",d.name)])):b("MercuryIDs").isGroupChat(a)?c(g._("{name} messaged your group",[g._param("name",f)])):c(g._("{name} messaged you",[g._param("name",f)]))}):c(g._("New message!"))})})}e.exports={renderDocumentTitle:a}}),null);
__d("MercuryUnseenState",["KeyedCallbackManager","LogHistory","MercuryActionType","MercuryDispatcher","MercuryGlobalActionType","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInfo","MercuryThreadInformer","MercuryThreadlistConstants","MessageThreadReadStateEffect","MessagingTag","MessengerFolders.bs","MessengerState.bs","createObjectFrom","isEmpty"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessageThreadReadStateEffect").MessageThreadReadStateEffectType,h=b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT,i="unseen_thread_hash",j="unseen_thread_list",k=b("LogHistory").getInstance("mercury_unseen_state");a.getForFBID=function(a){return l.getForFBID(a)};a.get=function(){return l.get()};function a(a){this.$2=a,this.$7=b("MercuryServerRequests").getForFBID(this.$2),this.$8=b("MercuryThreadIDMap").getForFBID(this.$2),this.$9=b("MercuryThreadInformer").getForFBID(this.$2),this.$1=b("MercuryDispatcher").getForFBID(this.$2),this.$3=0,this.$4=0,this.$5=!1,this.$6=!1,this.$10=new(b("KeyedCallbackManager"))(),this.$1.subscribe("update-unseen",function(a,b){this.$11(b)}.bind(this)),this.$1.subscribe("update-thread-ids",function(a,b){this.$12(b)}.bind(this))}a.prototype.getUnseenCount=function(){if(this.exceedsMaxCount()){k.error("unguarded_unseen_count_fetch","{}");return 0}return this.$13()};a.prototype.exceedsMaxCount=function(){return this.$5||this.$13()>h};a.prototype.markAsSeen=function(){var a=this.$13();a===null?this.$6=!0:(a>0||this.$5)&&(this.$7.markSeen(),this.$14(this.$7.getLastActionTimestamp(),[]))};a.prototype.$15=function(a,b){var c;this.$16((c={},c[a]=0,c),b)};a.prototype.$17=function(a){this.$10.setResource(i,a),this.$10.setResource(j,Object.keys(a))};a.prototype.$18=function(a){a=this.$10.executeOrEnqueue(i,a);a=this.$10.getUnavailableResources(a);a.length&&this.$7.fetchUnseenThreadIDs()};a.prototype.$19=function(){return this.$10.getResource(i)};a.prototype.$13=function(){var a=this.$10.getResource(j);if(a)return a.length;else return this.$3};a.prototype.$11=function(a){__p&&__p();var c=this,d=this.$20(a);if(a.unseen_thread_fbids)a.unseen_thread_fbids.forEach(function(a){if(a.folder!=b("MessagingTag").INBOX)return;a=(a.thread_fbids||[]).concat(a.other_user_fbids||[]);a=this.$21(a);var c=d.seen_timestamp?d.seen_timestamp:this.$4;this.$14(c,a);d.unseen_count>h&&(this.$5=!0)}.bind(this));else if(d.seen_timestamp!==undefined)this.$4=d.seen_timestamp,d.unseen_count>h?(this.$5=!0,this.$17({})):(this.$3=d.unseen_count,this.$3===0&&this.$17({}));else{var e=function(){__p&&__p();(a.global_actions||[]).forEach(function(a){a.action_type===b("MercuryGlobalActionType").MARK_ALL_SEEN&&this.$14(a.timestamp,[])}.bind(c));if(c.$5)return{v:void 0};var d=a.actions;if(!d||!d.length)return{v:void 0};var e={},f={},h=function(a){__p&&__p();var h=d[a];a=h.action_type;var i=h.other_user_fbid?h.other_user_fbid:h.thread_fbid,j=h.thread_id?h.thread_id:i;if(a===b("MercuryActionType").MARK_THREAD_SEEN){c.$15(j,h.persistent);return"continue"}if(!c.$22(h))return"continue";if(h.thread_read_state_effect&&h.thread_read_state_effect!==g.MARK_UNREAD)return"continue";if(a===b("MercuryActionType").USER_GENERATED_MESSAGE||a===b("MercuryActionType").LOG_MESSAGE){i=e[j]?h.timestamp>e[j]:!1;i=i||!e[j];h.is_unread&&i&&b("MessengerState.bs").getThreadMeta(c.$2,j,function(a){!b("MercuryThreadInfo").isMuted(a)&&!(a&&a.last_read_timestamp>=h.timestamp)&&(e[j]=h.timestamp)})}else a===b("MercuryActionType").CHANGE_READ_STATUS&&h.mark_as_read&&(f[j]=h.timestamp)};for(var i=0;i<d.length;i++){var j=h(i);if(j==="continue")continue}c.$23(e);c.$16(f)}();if(typeof e==="object")return e.v}this.$6&&(this.$6=!1,this.markAsSeen())};a.prototype.$14=function(a,c){__p&&__p();var d=this.$19();if(d===undefined||a>this.$4||this.$5){this.$4=a;c=c||[];c.length<=h&&(this.$5=!1);d={};a=this.$19();for(var e in a)if(a[e]!==!0){var f=a[e];this.$24(f)&&(d[e]=f)}f=Object.assign(b("createObjectFrom")(c,!0),d);this.$17(f);this.$9.updatedUnseenState()}};a.prototype.$23=function(a){__p&&__p();if(this.$5)return;var b={},c=!1;for(var d in a){var e=a[d];this.$24(e)&&(b[d]=e,c=!0)}if(!c)return;this.$18(function(a){for(var c in b){var d=b[c];!a[c]&&this.$24(d)&&(a[c]=b[c])}this.$17(a);this.$9.updatedUnseenState()}.bind(this))};a.prototype.$16=function(a,c){b("isEmpty")(a)||this.$18(function(b){var d=!1;for(var e in a){var f=a[e],g=f>=b[e];b[e]&&(!f||g)&&(delete b[e],d=!0)}d&&(this.$17(b),this.$9.updatedUnseenState(),c&&this.$13()===0&&this.$7.markSeen())}.bind(this))};a.prototype.$24=function(a){return a>this.$4};a.prototype.$21=function(a){return a.map(this.$8.convertThreadIDIfAvailable,this.$8)};a.prototype.$12=function(a){var b=this.$19();if(!b)return;for(var c in a){var d=a[c];b[c]&&(b[d]=b[c],delete b[c])}this.$17(b)};a.prototype.$22=function(a){var c=a.thread_id?b("MessengerState.bs").getThreadMetaNow(this.$2,a.thread_id):null;c=c?b("MessengerFolders.bs").getFromMeta(c):a.folder;return c===b("MessagingTag").INBOX||c===undefined};a.prototype.$20=function(a){a=a.message_counts||[];for(var c=0;c<a.length;c++)if(a[c].folder===b("MessagingTag").INBOX)return a[c];return{}};var l=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerDesktopNotificationPermissions",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:"default",DENIED:"denied",GRANTED:"granted"});e.exports=a}),null);
__d("MessengerDesktopNotifications",["MessengerDesktopNotificationPermissions","Run","UserAgent","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=5e3,h=new Map();function a(){h.forEach(function(a,b,c){a.close&&a.close()})}c={_closeTimer:null,isSupported:function(){return!!window.Notification},checkPermission:function(){if(window.Notification)return window.Notification.permission},hasDefaultSound:function(){return b("UserAgent").isBrowser("FireFox")&&b("UserAgent").isPlatform("Mac OS X")},isDenied:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED},isGranted:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").GRANTED},requestPermission:function(a){window.Notification&&window.Notification.requestPermission(a)},showNotification:function(a){__p&&__p();if(this.isGranted()){var c=window.Notification?new window.Notification(a.title,{body:a.body,icon:a.icon,tag:a.tag,silent:a.silent}):{};h.set(a.tag,c);a.onShow&&a.onShow();c.onclick=function(){b("WorkplaceChatHelper").isDesktopChatApp()&&b("WorkplaceChatHelper").showWindow(),a.onClick()};c.onclose=function(){h["delete"](a.tag)};this._closeTimer=setTimeout(function(){c.close()},a.closeTime||g);return c}else return null}};b("Run").onUnload(a);e.exports=c}),null);
__d("XMessengerDotComSettingsEditController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/settings/edit/",{})}),null);
__d("MessengerSettingsActions",["AsyncRequest","CurrentEnvironment","MessengerDesktopNotificationPermissions","MessengerDesktopNotifications","MessengerDispatcher","MessengerURIConstants","XMessengerDotComSettingsEditController","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null});a={Types:g,changeSettings:function(a){var c=b("XMessengerDotComSettingsEditController").getURIBuilder().getURI();b("CurrentEnvironment").facebookdotcom&&c.setPath(b("MessengerURIConstants").FACEBOOK_PREFIX+c.getPath());new(b("AsyncRequest"))().setData({settings:a}).setURI(c).send();b("MessengerDispatcher").dispatch({type:g.CHANGE_SETTINGS,newSettings:a})},changeDesktopNotifs:function(a,c){a&&!b("MessengerDesktopNotifications").isGranted()?b("MessengerDesktopNotifications").requestPermission(function(d){if(d!==b("MessengerDesktopNotificationPermissions").GRANTED){b("MessengerDesktopNotifications").checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED&&(c&&c());return}b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}):b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}};e.exports=a}),null);
__d("MessengerSettingsStore",["CacheStorage","MessengerDotComSettingsInitialData","MessengerSettingsActions","MessengerStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=new(b("CacheStorage"))("localstorage"),i="desktopNotifsEnabled";c=babelHelpers.inherits(a,b("MessengerStore"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$MessengerSettingsStore1=babelHelpers["extends"]({},b("MessengerDotComSettingsInitialData"),{desktopNotifsEnabled:this.$MessengerSettingsStore2()})}a.prototype.getSettings=function(){return this.$MessengerSettingsStore1};a.prototype.$MessengerSettingsStore2=function(){return h.get(i,!1)};a.prototype.$MessengerSettingsStore3=function(a){h.set(i,a)};a.prototype.__onDispatch=function(a){switch(a.type){case b("MessengerSettingsActions").Types.CHANGE_SETTINGS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,a.newSettings);this.emitChange();break;case b("MessengerSettingsActions").Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,{desktopNotifsEnabled:a.desktopNotifsEnabled});this.$MessengerSettingsStore3(a.desktopNotifsEnabled);this.emitChange();break}};e.exports=new a()}),null);
__d("RTWebLoggingComponent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUDIO_CALL:"audio_button",VIDEO_CALL:"video_button",START_CALL:"start_call_button",END_CALL:"end_call_button",JOIN_CALL:"join_call_button",CANCEL:"cancel_button",CALL_BACK:"call_back",CALL_AGAIN:"call_again",CHAT_PANEL_MESSAGE:"chat_panel_message",REDIAL:"redial",SCREENSHARING:"screensharing",TOGGLE_VIDEO:"toggle_video",TOGGLE_AUDIO:"toggle_audio",TOGGLE_CHAT:"toggle_chat",ADD_PARTICIPANT:"add_participant",VIDEO_FILTER:"video_filter",FULLSCREEN:"fullscreen",FULLSCREEN_ENABLE:"fullscreen_enable",FULLSCREEN_DISABLE:"fullscreen_disable",CLOSE_WINDOW:"close_window",ACCEPT:"accept_button",DECLINE:"decline_button",NOT_NOW:"rating_not_now",SELF_VIEW:"self_view",SELF_VIEW_MINIMIZE:"self_view_minimize",SELF_VIEW_UNMINIMIZE:"self_view_unminimize",PARTICIPANT_ROW_SELECT:"participant_row_select",PARTICIPANT_ROW_UNSELECT:"participant_row_unselect",STAR_RATING:"star_rating",SUBMIT_FEEDBACK:"submit_feedback",SETTINGS:"settings",CLOSE_DIALOG:"close_dialog"})}),null);
__d("RTWebLoggingSurface",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL_CONTROLS:"call_controls",CHAT_PANEL:"chat_panel",CHAT_TAB:"chat_tab",MESSENGER_HEADER:"messenger_header",INCOMING_DIALOG:"incoming_call_dialog",CALL_HEADER:"call_header",GROUP_CALL_ADD_MEMBERS_DIALOG:"GROUP_CALL_ADD_MEMBERS_DIALOG",GROUP_CALL_CONTAINER:"group_call_container",GROUP_CALL_PARTICIPANT_PICKER_DIALOG:"GROUP_CALL_PARTICIPANT_PICKER_DIALOG",P2P_CALL_CONTAINER:"p2p_call_container",CALL_CONTAINER:"call_container",TIMELINE_TOP_SECTION:"timeline_top_section",DROPDOWN_CALL_MENU:"dropdown_call_menu",THREAD_LIST:"thread_list",DESKTOP_NOTIFICATION:"desktop_notification",AUDIO_FALLBACK_DIALOG:"audio_fallback_dialog",STAR_RATING_SURFACE:"star_rating_surface",MISSED_CALL_DIALOG:"missed_call_dialog"})}),null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function(a,b,c,d,e,f){__p&&__p();var g="fb_sounds_playing3";function h(){__p&&__p();var a=b("WebStorage").getLocalStorage();if(a)try{a=a[g];if(a){a=JSON.parse(a);if(Array.isArray(a))return a}}catch(a){}return[]}function i(a){var c=b("WebStorage").getLocalStorage();if(c){var d=h();d.push(a);while(d.length>5)d.shift();try{c[g]=JSON.stringify(d)}catch(a){}}}function j(a){return h().some(function(b){return b===a})}a={play:function(a,c,d){a=b("createArrayFromMixed")(a);c=c||a[0]+Math.floor(Date.now()/1e3);if(j(c))return;b("SoundPlayer").play(a,{loop:!!d});i(c)},isSupported:function(){return!!b("WebStorage").getLocalStorage()}};e.exports=a}),null);
__d("SoundRPC",["Event","FBJSON","SoundSynchronizer"],(function(a,b,c,d,e,f){__p&&__p();function g(a,c,d){b("SoundSynchronizer").play(a,c,d)}a={playLocal:g,playRemote:function(a,c,d,e){c={name:"SoundRPC",data:{paths:c,sync:d,loop:e}};a.postMessage(b("FBJSON").stringify(c),"*")},supportsRPC:function(){return!!window.postMessage},_listen:function(){b("Event").listen(window,"message",function(a){if(!/\.facebook.com$/.test(a.origin))return;var c={};try{c=b("FBJSON").parse(a.data)}catch(a){}c.name==="SoundRPC"&&g(c.data.paths,c.data.sync,c.data.loop)})}};e.exports=a}),null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","Visibility","isFacebookURI"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=!1;c={init:function(a){},play:function(a,c,d){g?b("SoundRPC").playRemote(g.contentWindow,a,c,!1):b("SoundRPC").playLocal(a,c,d),h=!0},hasPlayedSoundBefore:function(){return h},playOnlyIfImmediate:function(a,c,d){if(!h&&b("Visibility").isHidden())return;this.play(a,c,d)},stop:function(a){g||b("SoundPlayer").stop(a)}};d=new(b("URI"))(location.href);d.getSubdomain()&&d.getSubdomain()!=="www"&&d.setSubdomain("www");f=d.getDomain();function a(){if(b("UserAgent_DEPRECATED").ie()<9)return!1;return b("SoundInitialData").RPC_DISABLED?!1:b("SoundSynchronizer").isSupported()&&b("SoundRPC").supportsRPC()}b("isFacebookURI")(d)&&location.host!==f&&a()&&(g=document.createElement("iframe"),g.setAttribute("src","//"+f+"/sound_iframe.php"),g.style.display="none",document.body&&document.body.appendChild(g));e.exports=c}),null);
__d("MessengerBrowserAlerts",["fbt","Bootloader","CurrentUser","DocumentTitle","Event","FavIcon","ImageSourceRequest","ImageSourceType","MercuryAttachmentSnippetRenderer","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryLogMessageType","MercuryNotificationRenderer","MercuryThreadInfo","MercuryThreadInformer","MercuryUnseenState","MessagingTag","MessengerActions","MessengerConfig","MessengerDesktopNotifications","MessengerFaviconUrls","MessengerParticipants.bs","MessengerSettingsStore","MessengerState.bs","MessengerURIStore","PhotoResizeModeConst","RTWebLoggingComponent","RTWebLoggingSurface","Sound","UserActivity","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=8e3,i=80,j=3,k=6e5,l=new Map(),m=null,n=null;function o(){l=new Map()}function p(a){b("MessengerSettingsStore").getSettings().sound_enabled&&b("Sound").play([b("MessengerConfig")["sound.notif_ogg_url"],b("MessengerConfig")["sound.notif_mp3_url"]],a,!1)}function q(a,c,d){__p&&__p();if(!a.snippet_sender)return;var e=l.get(a.thread_id)||0;if(e>=j)return;l.set(a.thread_id,e+1);b("MessengerParticipants.bs").get(a.snippet_sender,function(e){var f=a.snippet,h=a.custom_nickname&&a.custom_nickname[b("MercuryIDs").getUserIDFromParticipantID(e.id)],i=h?h:e.short_name;!f&&a.snippet_attachments&&a.snippet_attachments.length>0&&(f=b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetRenderer").getAttachmentSnippetType(a.snippet_attachments),!1,i,a.snippet_attachments));h=h?h:e.name;a.is_canonical||(h=a.name?g._("{sender's name} to {group name}",[g._param("sender's name",i),g._param("group name",a.name)]):g._("{sender's name} to your group",[g._param("sender's name",i)]));b("MessengerDesktopNotifications").showNotification({title:h,body:f,icon:a.image_src||c||e.big_image_src||e.image_src,closeTime:null,onClick:function(){window.focus(),b("MessengerActions").selectThread(a.thread_id)},tag:d.message_id,silent:!b("MessengerSettingsStore").getSettings().sound_enabled});b("MessengerDesktopNotifications").hasDefaultSound()||p(d.timestamp)})}a={init:function(a){this._viewer=a,this._threadInformer=b("MercuryThreadInformer").getForFBID(this._viewer),this._unseenState=b("MercuryUnseenState").getForFBID(this._viewer),this._highResImageMap=new Map(),this._shouldMarkAllAsSeenWhenActive=!0,this._shouldUpdateFavicon=!0,this._shouldUpdateTitle=!0,b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6")&&b("CurrentUser").isWorkUser()&&(this._availabilityStatusStore=null,b("Bootloader").loadModules(["WorkChatAvailabilityStatusStore"],function(a){this._availabilityStatusStore=a}.bind(this),"MessengerBrowserAlerts")),b("Event").listen(window,"focus",function(){o(),clearInterval(m)}),b("Event").listen(window,"blur",function(){m=setInterval(o,k)}),this._threadInformer.subscribe("messages-received",function(a,b){for(var c in b)b[c].forEach(function(a){this.handleMessageReceived(a)}.bind(this))}.bind(this)),this._threadInformer.subscribe("unseen-updated",this._handleUnseenUpdated.bind(this))},disableMarkAllAsSeenWhenActive:function(){this._shouldMarkAllAsSeenWhenActive=!1},enableMarkAllAsSeenWhenActive:function(){this._shouldMarkAllAsSeenWhenActive=!0},disableFaviconUpdate:function(){this._shouldUpdateFavicon=!1},disableTitleUpdate:function(){this._shouldUpdateTitle=!1},enableTitleUpdate:function(){this._shouldUpdateTitle=!0},handleMessageReceived:function(a){__p&&__p();var c=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(this._viewer);if(c||a.author===this._viewer||!a.is_unread||a.thread_id===b("MessengerURIStore").getState().activeThreadID&&b("UserActivity").isOnTab()||a.folder!=b("MessagingTag").INBOX&&a.folder!=b("MessagingTag").ARCHIVED)return;b("MessengerState.bs").getThreadMeta(this._viewer,a.thread_id,function(c){__p&&__p();if(b("MercuryThreadInfo").isMuted(c))if(!b("MercuryThreadInfo").areMentionsMuted(c)){if(!a.profile_ranges||!a.profile_ranges.some||!a.profile_ranges.some(function(a){return a.id===this._viewer}.bind(this)))return}else return;var d=b("CurrentUser").getID();b("MessengerState.bs").compute(d,function(e){e=e.blocked_ids;if(b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(d,e,c))return;b("MessengerSettingsStore").getSettings().desktopNotifsEnabled&&!b("UserActivity").isOnTab()?this._attemptDesktopNotification(c,a):a.log_message_type!==b("MercuryLogMessageType").UNSUBSCRIBE&&p(a.timestamp);!b("UserActivity").isOnTab()&&this._unseenState.getUnseenCount()>0&&b("MercuryNotificationRenderer").renderDocumentTitle(a.thread_id,function(a){!n&&this._shouldUpdateTitle&&(n=b("DocumentTitle").blink(a))}.bind(this))}.bind(this))}.bind(this))},showRTCNotification:function(a,c){__p&&__p();if(b("UserActivity").isOnTab()){c(null);return}var d=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(this._viewer);if(d){c(null);return}this._highResImageMap||(this._highResImageMap=new Map());var e=a.peerID;if(!this._highResImageMap.has(e)){d=function(b,d){this._highResImageMap.set(e.toString(),d.uri),this._displayRTCDesktopNotification(d.uri,a,c)}.bind(this);new(b("ImageSourceRequest"))().setFBID(e).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(i,i).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(d.bind(null,e)).send()}else this._displayRTCDesktopNotification(this._highResImageMap.get(e),a,c)},_updateFavicon:function(a){if(!this._shouldUpdateFavicon)return;a===0?b("FavIcon").set(b("MessengerFaviconUrls")["default"]):b("FavIcon").set(b("MessengerFaviconUrls").unread)},_displayRTCDesktopNotification:function(a,c,d){__p&&__p();var e=b("MercuryIDs").getParticipantIDFromUserID(c.peerID);b("MessengerParticipants.bs").get(e,function(f){var i;c.isVideoCall?c.isGroupCall?i=g._("Incoming Group Video Chat"):i=g._("Incoming Video Call"):c.isGroupCall?i=g._("Incoming Group Call"):i=g._("Incoming Audio Call");f=g._("{caller} is calling you. Click to answer.",[g._param("caller",f.short_name)]);e=b("MessengerDesktopNotifications").showNotification({title:i,body:f,icon:a,closeTime:h,onShow:function(){b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logImpression({callID:c.callID,callType:a.getCallType(c.isGroupCall),mediaType:a.getMediaType(!c.isVideoCall),page:a.getPage(),surface:b("RTWebLoggingSurface").DESKTOP_NOTIFICATION})},"MessengerBrowserAlerts")},onClick:function(){window.focus(),b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logClick({callID:c.callID,callType:a.getCallType(c.isGroupCall),mediaType:a.getMediaType(!c.isVideoCall),page:a.getPage(),surface:b("RTWebLoggingSurface").DESKTOP_NOTIFICATION,component:b("RTWebLoggingComponent").ACCEPT})},"MessengerBrowserAlerts"),c.onNotificationClicked()}});d(e)})},_handleUnseenUpdated:function(){__p&&__p();var a=this._unseenState.getUnseenCount();if(this._shouldMarkAllAsSeenWhenActive&&b("UserActivity").isOnTab()&&b("UserActivity").isActive()&&a>0){this._updateFavicon(0);this._unseenState.markAsSeen();return}this._shouldUpdateTitle&&b("DocumentTitle").badge(a);this._updateFavicon(a);n&&a===0&&(n.stop(),n=null);this._shouldMarkAllAsSeenWhenActive&&!this._focusToken&&a>0&&(this._focusToken=b("UserActivity").subscribe(function(){b("UserActivity").isOnTab()&&(this._focusToken&&this._focusToken.unsubscribe(),this._focusToken=null,this._unseenState.markAsSeen())}.bind(this)))},_attemptDesktopNotification:function(a,c){if(!a.snippet_sender)return;if(!this._highResImageMap.has(a.snippet_sender)){var d=function(b,d){this._highResImageMap.set(a.snippet_sender,d.uri),q(a,d.uri,c)}.bind(this);new(b("ImageSourceRequest"))().setFBID(b("MercuryIDs").getUserIDFromParticipantID(a.snippet_sender)).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(i,i).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(d.bind(null,a.snippet_sender)).send()}else q(a,this._highResImageMap.get(a.snippet_sender),c)}};e.exports=a}),null);
__d("RTCSVGIcon.react",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React").Children;a=function(a){var c=a.children;a=babelHelpers.objectWithoutProperties(a,["children"]);return b("React").cloneElement(g.only(c),babelHelpers["extends"]({preserveAspectRatio:"xMidYMid meet"},a))};e.exports=a}),null);
__d("RTCAbstractButton.react",["cx","AbstractButton.react","React","RTCSVGIcon.react","joinClasses","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(event){var a=this.props.disabled;if(a){event.preventDefault();return}this.props.shouldThrottle?this.$2():this.props.onClick()}.bind(this),this.$2=b("throttle")(function(){this.props.onClick()}.bind(this),500),c}a.prototype.render=function(){var a=this.props,c=a.children,d=a.className,e=a.disabled,f=a.highlighted,g=a.title;a=babelHelpers.objectWithoutProperties(a,["children","className","disabled","highlighted","title"]);c=b("React").createElement(b("RTCSVGIcon.react"),{className:"_4uwr"},c);return b("React").createElement(b("AbstractButton.react"),babelHelpers["extends"]({"aria-disabled":e,className:b("joinClasses")(d,"_4uwq"+(!e&&f?" highlighted":"")),"data-hover":e?"none":"tooltip",image:c,label:g},a,{onClick:this.$1}))};a.defaultProps={highlighted:!1,disabled:!1,shouldThrottle:!0};e.exports=a}),null);
__d("RTCCallControlsButtonWithLabel.react",["cx","React","RTCAbstractButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props);return b("React").createElement("div",{className:"_665d"},b("React").createElement(b("RTCAbstractButton.react"),babelHelpers["extends"]({"data-hover":"none",labelIsHidden:!0},a)),b("React").createElement("div",{className:"_6jvb _6jvc _665c"},this.props.title))};function a(){h.apply(this,arguments)}a.defaultProps={highlighted:!1,disabled:!1,shouldThrottle:!0};e.exports=a}),null);
__d("RTCUICameraIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.strikeThrough;c=c===void 0?!1:c;a=babelHelpers.objectWithoutProperties(a,["strikeThrough"]);return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},c?b("React").createElement("path",{d:"M36 29h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546zM19.344 17H26c1.126 0 2 .938 2 2v10c0 .54-.225 1.047-.595 1.415L19.345 17zm-3.5 0H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h9.257l-8.413-14zm11.408 17.044l.857-.516-12.362-20.572-.857.516 12.362 20.572z"}):b("React").createElement("path",{d:"M26 17H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h11c1.126 0 2-.938 2-2V19c0-1.062-.874-2-2-2zm10 12h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546z"})))};e.exports=a}),null);
__d("RTCUIPhoneIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.variant;c=c===void 0?"start call":c;a=babelHelpers.objectWithoutProperties(a,["variant"]);return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},c==="start call"?b("React").createElement("path",{d:"M32.3 33.3c-4.2 3.5-12.6-4.7-12.8-4.9C19.4 28.3 10.9 20 14.5 15.9C17.2 12.8 17.9 14 18.3 14.3c.3 .3 2.9 4 3 4.7C21.5 19.7 20 21.5 20 22.1c.1 .6 1.8 2.5 2.6 3.3c.7 .7 2.7 2.4 3.3 2.5c.6 .1 2.4-1.4 3.1-1.3c.8 .1 4.5 2.7 4.8 3C34.2 29.9 35.4 30.7 32.3 33.3"}):b("React").createElement("path",{d:"M12.054 24.58C12.52 19.102 24.34 19.002 24.54 19c.202 0 12.024-.1 12.408 5.37.284 4.048-1.092 3.74-1.56 3.778-.41.033-4.823-.767-5.452-1.19-.63-.422-.785-2.703-1.293-3.094-.507-.39-3.092-.51-4.134-.502-1.043.01-3.63.174-4.143.572-.513.4-.702 2.683-1.337 3.117-.636.434-5.062 1.31-5.47 1.283-.47-.03-1.85.3-1.506-3.753"})))};e.exports=a}),null);
__d("RTWebLoggingEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TAP:"tap",IMPRESSION:"impression",ERROR:"error",CHAT_PANEL_END:"chat_panel_end",VIDEO_FILTER_END:"video_filter_end"})}),null);
__d("RTWebLoggingMediaType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VIDEO:"video",AUDIO:"audio",ESCALATED:"escalated"})}),null);
__d("RTWebLoggingPage",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",FACEBOOK:"facebook",FB_MESSENGER:"fb_messenger",POPUP_WINDOW:"popup_window",P2P_CALL:"p2p_call"})}),null);
__d("RTWebUserActionLogger",["FBRTCConsoleLogger","RTCCallStoreState","RTCWebUserActionsTypedLogger","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingEvent","RTWebLoggingMediaType","RTWebLoggingPage","immutable","performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").Map;function a(){this.$1=g()}a.prototype.logImpression=function(a){this.logEvent(babelHelpers["extends"]({eventName:b("RTWebLoggingEvent").IMPRESSION},a))};a.prototype.logClick=function(a){this.logEvent(babelHelpers["extends"]({eventName:b("RTWebLoggingEvent").TAP},a))};a.prototype.logError=function(a){this.logEvent(babelHelpers["extends"]({eventName:b("RTWebLoggingEvent").ERROR},a))};a.prototype.startTimer=function(a){this.$1=this.$1.set(a,b("performanceNow")()),this.$2(a,{startTime:b("performanceNow")()})};a.prototype.logStopTimer=function(a,event){event.timeElapsed=this.$3(a);event.eventName=a;this.logEvent(event);return event.timeElapsed};a.prototype.logEvent=function(event){var a=new(b("RTCWebUserActionsTypedLogger"))().setCallType(event.callType).setClientTime(Date.now()).setErrorDomain(event.errorDomain).setErrorType(event.errorType).setComponent(event.component).setConferenceState(event.conferenceState).setEvent(event.eventName).setMediaType(event.mediaType).setPage(event.page).setCallID(event.callID).setConferenceName(event.conferenceName).setSurface(event.surface).setEventTimeElapsed(event.timeElapsed),c=a.getData();this.$2(event.eventName,c);a.log()};a.prototype.getCallType=function(a,c){c===void 0&&(c=!1);if(a===null)return null;if(a)return b("RTWebLoggingCallType").MW;else if(c)return b("RTWebLoggingCallType").ESCALATED;else return b("RTWebLoggingCallType").P2P};a.prototype.getAudioVideoComponent=function(a){return a===null?null:a?b("RTWebLoggingComponent").AUDIO_CALL:b("RTWebLoggingComponent").VIDEO_CALL};a.prototype.getMediaType=function(a,c){c===void 0&&(c=!1);if(c)return b("RTWebLoggingMediaType").ESCALATED;else if(a)return b("RTWebLoggingMediaType").AUDIO;else return b("RTWebLoggingMediaType").VIDEO};a.prototype.getPage=function(){var a=window.location.hostname;if(a.search("facebook")!==-1)return b("RTWebLoggingPage").FACEBOOK;else if(a.search("messenger")!==-1)return b("RTWebLoggingPage").MESSENGER_DOT_COM;return null};a.prototype.getWebLoggerInfoFromStore=function(a){a=a.callInfo;var b=a.callID,c=a.conferenceName;a=a.conferenceState;return{callID:b,conferenceName:c,conferenceState:a}};a.prototype.$3=function(a){var c=this.$1.get(a);if(c){this.$1=this.$1.remove(a);return parseInt(b("performanceNow")()-c,10)}return null};a.prototype.$2=function(a,b){};e.exports=new a()}),null);
__d("RTCAcceptButton.react",["cx","fbt","MessengerDialogs.bs","React","RTCCallControlsButtonWithLabel.react","RTCCallStore","RTCUICameraIcon.react","RTCUIPhoneIcon.react","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("MessengerDialogs.bs").removeAllDialogs(),this.props.onAccept(),b("RTWebUserActionLogger").logClick({callID:b("RTCCallStore").getState().callInfo.callID,callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").INCOMING_DIALOG,component:b("RTWebLoggingComponent").ACCEPT})}.bind(this),c}a.prototype.componentDidMount=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logImpression(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").ACCEPT,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").INCOMING_DIALOG}))};a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButtonWithLabel.react"),{className:"_6jvd icon-40","data-testid":b("VideoCallWebDriverIDs").ANSWER_CALL_BUTTON,onClick:this.$1,isVideoCall:this.props.isVideoCall,label:h._("Accept"),title:h._("Accept")},this.props.isVideoCall?b("React").createElement(b("RTCUICameraIcon.react"),null):b("React").createElement(b("RTCUIPhoneIcon.react"),{variant:"start call"}))};e.exports=a}),null);
__d("RTCUIXIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},b("React").createElement("path",{d:"M24 25.4l-4.9 4.9c-.4 .4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4L22.6 24L17.6 19.1c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0L24 22.6l4.9-4.9c.4-.4 1-.4 1.4 0c.4 .4 .4 1 0 1.4L25.4 24l4.9 4.9c.4 .4 .4 1 0 1.4c-.4 .4-1 .4-1.4 0L24 25.4z"})))};e.exports=a}),null);
__d("RTCCloseDialogButton.react",["cx","fbt","React","RTCCallControlsButtonWithLabel.react","RTCCallStore","RTCUIXIcon.react","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){this.props.action(),b("RTWebUserActionLogger").logClick({callID:b("RTCCallStore").getState().callInfo.callID,callType:b("RTWebLoggingCallType").P2P,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").MISSED_CALL_DIALOG,component:b("RTWebLoggingComponent").CLOSE_DIALOG})}.bind(this),c}a.prototype.componentDidMount=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logImpression(babelHelpers["extends"]({},a,{callType:b("RTWebLoggingCallType").P2P,component:b("RTWebLoggingComponent").CLOSE_DIALOG,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").MISSED_CALL_DIALOG}))};a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButtonWithLabel.react"),{className:"_6jtv icon-40 icon-1","data-testid":b("VideoCallWebDriverIDs").CLOSE_CHAT_BUTTON,onClick:this.$1,label:h._("Close"),title:h._("Close")},b("React").createElement(b("RTCUIXIcon.react"),null))};e.exports=a}),null);
__d("RTCDeclineButton.react",["cx","fbt","MessengerDialogs.bs","React","RTCCallControlsButtonWithLabel.react","RTCCallStore","RTCUIXIcon.react","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("MessengerDialogs.bs").removeAllDialogs(),this.props.action(),b("RTWebUserActionLogger").logClick({callID:b("RTCCallStore").getState().callInfo.callID,callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").INCOMING_DIALOG,component:b("RTWebLoggingComponent").DECLINE})}.bind(this),c}a.prototype.componentDidMount=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logImpression(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").DECLINE,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").INCOMING_DIALOG}))};a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButtonWithLabel.react"),{className:b("joinClasses")("_6jtv icon-40 icon-1",this.props.className),"data-testid":b("VideoCallWebDriverIDs").IGNORE_CALL_BUTTON,onClick:this.$1,label:h._("Decline"),title:h._("Decline")},b("React").createElement(b("RTCUIXIcon.react"),null))};e.exports=a}),null);
__d("RTCRedialButton.react",["cx","fbt","React","RTCCallControlsButtonWithLabel.react","RTCCallStore","RTCUICameraIcon.react","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){this.props.onRedial(),b("RTWebUserActionLogger").logClick({callID:b("RTCCallStore").getState().callInfo.callID,callType:b("RTWebLoggingCallType").P2P,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").INCOMING_DIALOG,component:b("RTWebLoggingComponent").DECLINE})}.bind(this),c}a.prototype.componentDidMount=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logImpression(babelHelpers["extends"]({},a,{callType:b("RTWebLoggingCallType").P2P,component:b("RTWebLoggingComponent").REDIAL,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").INCOMING_DIALOG}))};a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButtonWithLabel.react"),{className:"_6jvj icon-40","data-testid":b("VideoCallWebDriverIDs").IGNORE_CALL_BUTTON,onClick:this.$1,label:h._("Redial"),title:h._("Redial")},b("React").createElement(b("RTCUICameraIcon.react"),null))};e.exports=a}),null);
__d("MessengerRTCIncomingDialog.react",["cx","fbt","FBRTCExperiment","ImageBlock.react","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogs.bs","MessengerSpinner.react","React","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent;a=b("React").PropTypes;var k=50;c=b("React").createClass({displayName:"MessengerRTCIncomingDialog",propTypes:{callID:a.string.isRequired,callerParticipant:a.object.isRequired,onAccept:a.func.isRequired,onDecline:a.func.isRequired,isVideoCall:a.bool.isRequired},componentDidMount:function(){b("RTWebUserActionLogger").logImpression({callID:this.props.callID,callType:b("RTWebLoggingCallType").P2P,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").INCOMING_DIALOG,mediaType:b("RTWebUserActionLogger").getMediaType(!this.props.isVideoCall)})},render:function(){var a=b("FBRTCExperiment").getIncomingCallExperiments().getBool("set_auto_focus_on_header",!1)?"autofocus":"";return b("React").createElement(b("MessengerDialog.react"),{layerHideOnBlur:!1,shown:!0,onToggle:this._handleToggle,width:400},b("React").createElement(b("MessengerDialogHeader.react"),{className:a},this._dialogTitle()),b("React").createElement(j,null,this._renderDialogBody()),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Decline"),onClick:this._handleDecline,dataTestID:b("VideoCallWebDriverIDs").IGNORE_CALL_BUTTON,type:"secondary"}),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Accept"),onClick:this._handleAccept,dataTestID:b("VideoCallWebDriverIDs").ANSWER_CALL_BUTTON,type:"primary"})))},_dialogTitle:function(){return this.props.isVideoCall?h._("Incoming Video Call"):h._("Incoming Audio Call")},_renderDialogBody:function(){var a=this.props.callerParticipant;return!a?b("React").createElement(b("MessengerSpinner.react"),null):b("React").createElement(b("ImageBlock.react"),null,b("React").createElement(i,{isMessengerUser:a.is_messenger_user,size:k,src:a.big_image_src||a.image_src}),b("React").createElement("div",{className:"_2n1r"},b("React").createElement("div",{className:"_2n1s"},h._("{caller name} is calling you.",[h._param("caller name",a.name)])),b("React").createElement("div",{className:"_2n1t"},h._("The call will start as soon as you answer."))))},_handleDecline:function(event){event.preventDefault(),b("MessengerDialogs.bs").removeAllDialogs(),this.props.onDecline(),b("RTWebUserActionLogger").logClick({callID:this.props.callID,callType:b("RTWebLoggingCallType").P2P,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").INCOMING_DIALOG,component:b("RTWebLoggingComponent").DECLINE,mediaType:b("RTWebUserActionLogger").getMediaType(!this.props.isVideoCall)})},_handleAccept:function(event){event.preventDefault(),b("MessengerDialogs.bs").removeAllDialogs(),this.props.onAccept(),b("RTWebUserActionLogger").logClick({callID:this.props.callID,callType:b("RTWebLoggingCallType").P2P,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").INCOMING_DIALOG,component:b("RTWebLoggingComponent").ACCEPT,mediaType:b("RTWebUserActionLogger").getMediaType(!this.props.isVideoCall)})},_handleToggle:function(a){a||(b("MessengerDialogs.bs").removeAllDialogs(),this.props.onDecline())}});e.exports=c}),null);
__d("FBRTCSoundController",["RTCConfig","Sound"],(function(a,b,c,d,e,f){var g=[b("RTCConfig").ringtone_mp3_url,b("RTCConfig").ringtone_ogg_url];a={playIncomingRingtone:function(a,c,d){a=["incoming_ringtone",a.toString(),c.toString()].join("_");b("Sound").play(g,a,d)},stopIncomingRingtone:function(){b("Sound").stop(g)}};e.exports=a}),null);
__d("RTCIncomingDialog.react",["cx","fbt","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogs.bs","MessengerSpinner.react","React","RTCAcceptButton.react","RTCDeclineButton.react","RTWebLoggingCallType","RTWebLoggingSurface","RTWebUserActionLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"RTCIncomingDialog",propTypes:{callID:a.string.isRequired,callerParticipant:a.object.isRequired,onAccept:a.func.isRequired,onDecline:a.func.isRequired,isVideoCall:a.bool.isRequired},componentDidMount:function(){b("RTWebUserActionLogger").logImpression({callID:this.props.callID,callType:b("RTWebLoggingCallType").P2P,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").INCOMING_DIALOG,mediaType:b("RTWebUserActionLogger").getMediaType(!this.props.isVideoCall)})},render:function(){return b("React").createElement(b("MessengerDialog.react"),{className:"_6jvl",layerHideOnBlur:!1,shown:!0,onToggle:this._handleToggle,width:260},b("React").createElement(j,null,this._renderDialogBody()),b("React").createElement("div",{className:"_6jvm"},b("React").createElement(b("RTCDeclineButton.react"),{isP2P:!0,action:this.props.onDecline}),b("React").createElement(b("RTCAcceptButton.react"),{onAccept:this.props.onAccept,isVideoCall:this.props.isVideoCall,isP2P:!0})))},_dialogTitle:function(){return this.props.isVideoCall?h._("Incoming Video Chat"):h._("Incoming Call")},_renderDialogBody:function(){var a=this.props.callerParticipant;return!a?b("React").createElement(b("MessengerSpinner.react"),null):b("React").createElement("div",null,b("React").createElement(i,{className:"_6jvn",isMessengerUser:a.is_messenger_user,size:80,src:a.big_image_src||a.image_src}),b("React").createElement("div",{className:"_6jvo"},b("React").createElement("div",{className:"_6jvp"},h._("{caller name}",[h._param("caller name",a.name)])),this._dialogTitle()))},_handleToggle:function(a){a||(b("MessengerDialogs.bs").removeAllDialogs(),this.props.onDecline())}});e.exports=c}),null);
__d("MessengerRTCIncomingDialogController",["FBRTCConstants","FBRTCSoundController","MercuryIDs","MessengerBrowserAlerts","MessengerDialogs.bs","MessengerParticipants.bs","MessengerRTCIncomingDialog.react","React","RTCIncomingDialog.react","RTWebClientFeatureGating","VideoCallTypedLogger","clearTimeout","emptyFunction","mixInEventEmitter","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=7e4;function a(a,b){this.$1=a,this.$2=b,this.$3=null,this.$4=!1}a.prototype.showIncomingDialog=function(a){this.$5=b("setTimeoutAcrossTransitions")(this.$6.bind(this),g);var c=a===b("FBRTCConstants").IncomingCallDialogTypes.VIDEO;b("FBRTCSoundController").playIncomingRingtone(this.$2,this.$1,!0);b("MessengerParticipants.bs").get(b("MercuryIDs").getParticipantIDFromUserID(this.$1.toString()),function(a){var d=b("RTWebClientFeatureGating").useNewIncomingCallDialog()?b("React").createElement(b("RTCIncomingDialog.react"),{callID:this.$2.toString(),callerParticipant:a,onAccept:this.$7.bind(this),onDecline:this.$8.bind(this),isVideoCall:c}):b("React").createElement(b("MessengerRTCIncomingDialog.react"),{callID:this.$2.toString(),callerParticipant:a,onAccept:this.$7.bind(this),onDecline:this.$8.bind(this),isVideoCall:c});b("MessengerDialogs.bs").showDialog(function(){return d})}.bind(this));this.$9(c)};a.prototype.$9=function(a){a={callID:this.$2.toString(),peerID:this.$1,onNotificationClicked:this.$7.bind(this),isVideoCall:a,isGroupCall:!1};b("MessengerBrowserAlerts").showRTCNotification(a,function(a){this.$3=a,this.$4&&this.$10()}.bind(this))};a.prototype.cancel=function(){this.$5&&b("clearTimeout")(this.$5),b("MessengerDialogs.bs").removeDialog(),b("FBRTCSoundController").stopIncomingRingtone(),this.$10(),this.$4=!0};a.prototype.isForPeer=function(a){return this.$1===a};a.prototype.isForCall=function(a){return this.$2===a};a.prototype.isForPeerAndCall=function(a,b){return this.$1===a&&this.$2===b};a.prototype.$7=function(){this.cancel(),new(b("VideoCallTypedLogger"))().setEvent("accept_call_click").log(),this.emit("answerCall")};a.prototype.$8=function(){this.cancel(),this.emit("ignoreCall")};a.prototype.$6=function(){this.cancel(),this.emit("timeout")};a.prototype.$10=function(){this.$3&&(this.$3.close(),this.$3=null)};b("mixInEventEmitter")(a,{answerCall:!0,ignoreCall:!0,timeout:!0});e.exports=a}),null);
__d("MessengerRTCMissedCallDialog.react",["cx","fbt","ImageBlock.react","MercuryIDs","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogs.bs","MessengerDialogTitle.react","MessengerParticipants.bs","MessengerSpinner.react","React","Timestamp.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent;a=b("React").PropTypes;var k=50,l=b("React").createClass({displayName:"MessengerRTCMissedCallDialog",_subscription:null,propTypes:{peerID:a.string.isRequired,timeMissed:a.number.isRequired},getInitialState:function(){return{calleeParticipant:null}},componentDidMount:function(){this._computeParticipant()},componentDidUpdate:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription);var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.peerID);if(this.state.calleeParticipant&&this.state.calleeParticipant.id===a)return;this._computeParticipant()},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},_computeParticipant:function(){var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.peerID),c=b("MessengerParticipants.bs").getNow(a);c?this.setState({calleeParticipant:c}):this._subscription=b("MessengerParticipants.bs").getMulti([a],function(b){this._subscription=null,this.setState({calleeParticipant:b[a]})}.bind(this))},render:function(){return b("React").createElement(b("MessengerDialog.react"),{layerHideOnBlur:!0,onToggle:this._handleToggle,shown:!0,width:400},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogTitle.react"),null,h._("Missed Call"))),b("React").createElement(j,null,this._renderBody()),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Close"),onClick:this._handleClose,type:"secondary"}),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Call Back"),onClick:this._handleCallBack,type:"primary"})))},_renderBody:function(){var a=this.state.calleeParticipant;return!a?b("React").createElement(b("MessengerSpinner.react"),null):b("React").createElement(b("ImageBlock.react"),null,b("React").createElement(i,{isMessengerUser:a.is_messenger_user,size:k,src:a.big_image_src||a.image_src}),b("React").createElement("div",{className:"_2r2t"},b("React").createElement("div",{className:"_2r2u"},h._("You missed a call from {caller name}",[h._param("caller name",a.name)])),b("React").createElement("div",{className:"_2r2v"},b("React").createElement(b("Timestamp.react"),{time:this.props.timeMissed,autoUpdate:!0}))))},_handleCallBack:function(event){event.preventDefault();b("MessengerDialogs.bs").removeDialog(l);var a=this.state.calleeParticipant,c=a&&a.fbid;if(!c)return;d(["FBRTCCore"],function(a){a.startOutgoingCall(c,"messenger_dot_com_missed_call_dialog",!1)})},_handleClose:function(event){event.preventDefault(),b("MessengerDialogs.bs").removeDialog(l)},_handleToggle:function(a){a||b("MessengerDialogs.bs").removeDialog(l)}});e.exports=l}),null);
__d("RTCMissedCallDialog.react",["cx","fbt","MercuryIDs","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogs.bs","MessengerParticipants.bs","MessengerSpinner.react","React","RTCCloseDialogButton.react","RTCRedialButton.react","Timestamp.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent;a=b("React").PropTypes;var k=b("React").createClass({displayName:"RTCMissedCallDialog",_subscription:null,propTypes:{peerID:a.string.isRequired,timeMissed:a.number.isRequired},getInitialState:function(){return{calleeParticipant:null}},componentDidMount:function(){this._computeParticipant()},componentDidUpdate:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription);var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.peerID);if(this.state.calleeParticipant&&this.state.calleeParticipant.id===a)return;this._computeParticipant()},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},_computeParticipant:function(){var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.peerID),c=b("MessengerParticipants.bs").getNow(a);c?this.setState({calleeParticipant:c}):this._subscription=b("MessengerParticipants.bs").getMulti([a],function(b){this._subscription=null,this.setState({calleeParticipant:b[a]})}.bind(this))},render:function(){return b("React").createElement(b("MessengerDialog.react"),{className:"_6jve",layerHideOnBlur:!0,onToggle:this._handleToggle,shown:!0,width:260},b("React").createElement(j,null,this._renderBody()),b("React").createElement("div",{className:"_6jvf"},b("React").createElement(b("RTCCloseDialogButton.react"),{action:this._Action,isP2P:!0}),b("React").createElement(b("RTCRedialButton.react"),{onRedial:this._handleCallBack})))},_renderBody:function(){var a=this.state.calleeParticipant;return!a?b("React").createElement(b("MessengerSpinner.react"),null):b("React").createElement("div",null,b("React").createElement(i,{className:"_6jvg",isMessengerUser:a.is_messenger_user,size:80,src:a.big_image_src||a.image_src}),b("React").createElement("div",{className:"_6jvh"},b("React").createElement("div",{className:"_6jvi"},h._("You missed a call from {caller name}",[h._param("caller name",a.name)])),b("React").createElement("div",{className:"_2r2v"},b("React").createElement(b("Timestamp.react"),{time:this.props.timeMissed,autoUpdate:!0}))))},_Action:function(){b("MessengerDialogs.bs").removeDialog()},_handleCallBack:function(){b("MessengerDialogs.bs").removeDialog();var a=this.state.calleeParticipant,c=a&&a.fbid;if(!c)return;d(["FBRTCCore"],function(a){a.startOutgoingCall(c,"messenger_dot_com_missed_call_dialog",!1)})},_handleToggle:function(a){a||b("MessengerDialogs.bs").removeDialog(k)}});e.exports=k}),null);
__d("MessengerRTCMissedCallDialogController",["MessengerDialogs.bs","MessengerRTCMissedCallDialog.react","React","RTCMissedCallDialog.react","RTWebClientFeatureGating"],(function(a,b,c,d,e,f){"use strict";a={onCallMissed:function(a){this._missedCallPeerID=a},showDialog:function(){if(!this._missedCallPeerID)return;var a=b("RTWebClientFeatureGating").useNewIncomingCallDialog()?b("React").createElement(b("RTCMissedCallDialog.react"),{peerID:this._missedCallPeerID.toString(),timeMissed:Date.now()}):b("React").createElement(b("MessengerRTCMissedCallDialog.react"),{peerID:this._missedCallPeerID.toString(),timeMissed:Date.now()});b("MessengerDialogs.bs").showDialog(function(){return a})},hideDialog:b("MessengerDialogs.bs").removeAllDialogs};e.exports=a}),null);
__d("FBRTCCallBlockingStore",["Arbiter","AsyncRequest","ChannelConstants","FBRTCDispatcher","FBRTCStore","VideoCallTypedLogger","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=!1,i=0,j=null,k="call_block_setting_changed";g=babelHelpers.inherits(a,b("FBRTCStore"));g&&g.prototype;a.prototype.init=function(a){this.$FBRTCCallBlockingStore1(a),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("videocall_block_setting"),this.$FBRTCCallBlockingStore2.bind(this))};a.prototype.__onDispatch=function(a){if(a.type!==k)return;this.$FBRTCCallBlockingStore1(a.data)};a.prototype.$FBRTCCallBlockingStore1=function(a){switch(a){case 0:h=!1;this.$FBRTCCallBlockingStore3();break;case-1:h=!0;this.$FBRTCCallBlockingStore3();break;default:h=!0,this.$FBRTCCallBlockingStore4(a)}this.__emitChange()};a.prototype.$FBRTCCallBlockingStore4=function(a){j===null&&(j=b("setTimeoutAcrossTransitions")(this.turnOnVideoCalling.bind(this),a*1e3))};a.prototype.getBlockingStatus=function(){return h};a.prototype.turnOnVideoCalling=function(){new(b("AsyncRequest"))("/ajax/chat/settings.php").setHandler(this.$FBRTCCallBlockingStore5.bind(this)).setData({call_blocked_until:0}).send()};a.prototype.turnOffVideoCalling=function(a){i=a,new(b("AsyncRequest"))("/ajax/chat/settings.php").setHandler(this.$FBRTCCallBlockingStore6.bind(this)).setData({call_blocked_until:a}).send()};a.prototype.$FBRTCCallBlockingStore3=function(){j&&(b("clearTimeout")(j),j=null)};a.prototype.$FBRTCCallBlockingStore5=function(){b("FBRTCDispatcher").dispatch({type:k,data:0}),new(b("VideoCallTypedLogger"))().setEvent(k).setMessage("enable").log()};a.prototype.$FBRTCCallBlockingStore6=function(){b("FBRTCDispatcher").dispatch({type:k,data:i}),new(b("VideoCallTypedLogger"))().setEvent(k).setMessage("disable_"+i).log()};a.prototype.$FBRTCCallBlockingStore2=function(a,c){b("FBRTCDispatcher").dispatch({type:k,data:c.obj.value})};function a(){g.apply(this,arguments)}e.exports=new a()}),null);
__d("FBRTCMessageDedup",[],(function(a,b,c,d,e,f){var g={};a={check:function(a,b,c){g[a]||(g[a]={});g[a][b]||(g[a][b]={});if(g[a][b][c])return!1;g[a][b][c]=!0;return!0}};e.exports=a}),null);
__d("BanzaiScribe",["Banzai"],(function(a,b,c,d,e,f){function a(a){return{log:function(c,d,e){d=[d];e!=null&&d.push(e);b("Banzai").post("scribe:"+c,d,a)}}}c=a({});c.create=a;e.exports=c}),null);
__d("SamplingPolicyBase",[],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";throw new Error("Tried to instantiate SamplingPolicyBase")}a.prototype.getName=function(){"use strict";return this.name};a.prototype.isSampled=function(){"use strict";typeof this.sampled==="undefined"&&(this.sampled=this.decideIfSampled());return this.sampled};e.exports=a}),null);
__d("FbtraceForcedByServerPolicy",["FbtraceForcedByServer","SamplingPolicyBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function h(){this.name="FbtraceForcedByServerPolicy"}h.get=function(){typeof g==="undefined"&&(g=new h());return g};function a(){return b("FbtraceForcedByServer").forced}Object.assign(h.prototype,b("SamplingPolicyBase").prototype,{decideIfSampled:a});e.exports=h}),null);
__d("guardFunction",[],(function(a,b,c,d,e,f){function a(a,b,c){return function(){a.apply(c||this,arguments)&&b.apply(c||this,arguments)}}e.exports=a}),null);
__d("Fbtrace",["Arbiter","ArtilleryTraceIDUtils","BanzaiScribe","FbtraceForcedByServer","FbtraceForcedByServerPolicy","SiteData","guardFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(){Object.assign(this,g)}Object.assign(g,{isOn:function(){return!1},replySend:function(a,b){},requestSend:function(a,b,c){l(a,b);return{metadata:function(){return undefined},replyReceive:function(a){}}}});var h=new g();function i(a,c,d){__p&&__p();if(!a)throw{name:"ArgumentError",message:"no valid service name specified"};if(!c)throw{name:"ArgumentError",message:"no valid version specified"};var e=b("BanzaiScribe"),f=0,g=b("ArtilleryTraceIDUtils").newTraceId(),h=b("ArtilleryTraceIDUtils").newObjectId(),j=b("ArtilleryTraceIDUtils").traceIdToBucket(g),k={service:a,version:c},m=function a(b){if(typeof b==="undefined")return"undefined";typeof b!=="string"&&(b=a(JSON.stringify(b)));return b},n=function(a){var b="";for(var c in a)b.length>0&&(b+="\x02"),b+=m(c)+"\x03"+m(a[c]);return b},o=function(c,b,event,a,d){f++;return[d,f,g,c,b,m(event),n(a)].join("\x01")},p=function(c,b,event,a,d){!d&&typeof d==="undefined"&&(d=Date.now()*1e3);c=o(c,b,event,a,d);e.log("fbtrace",c,j)},q=function(){return h};p(b("ArtilleryTraceIDUtils").getDummyId(),h,"#rqrecv",Object.assign(d||{},k));Object.assign(this,i,{replySend:function(c,a){a=babelHelpers["extends"]({},a,k,{success:c?"true":"false"}),p(b("ArtilleryTraceIDUtils").getDummyId(),h,"#rpsend",a)},requestSend:function(d,e,a){l(d,e);var f=q(),c=b("ArtilleryTraceIDUtils").newObjectId();a=babelHelpers["extends"]({},a,k,{op:d,"remote:service":e});p(f,c,"#rqsend",a);return{metadata:function(){return g+c},replyReceive:function(a){p(f,c,"#rprecv",Object.assign(a||{},k))},parentNode:this}}})}Object.assign(i,{isOn:function(){return!0}});function j(){return h}function k(a,c,d){d=d||{};d.init=!0;var e=b("FbtraceForcedByServerPolicy").get();if(e.isSampled())return new i(a,c,d);else return new g()}function l(a,b){if(!a)throw{name:"ArgumentError",message:"no valid operation specified"};if(!b)throw{name:"ArgumentError",message:"no valid remote:service specified"}}function a(a,b){var c=h;h=a;try{a=b()}finally{h=c}return a}c=function(a,c){__p&&__p();a=j();c=c.request;var d=!1;!a.isOn()&&b("FbtraceForcedByServer").forced&&/\/upload\/(?:composer|photos)\/|\/ajax\/composerx\/attachment\/media\//.test(c.uri.toString())&&(a=k("photo_upload_kludge",String(b("SiteData").client_revision||"dev"),{policy:"PhotoUpload"}),d=!0);if(a.isOn()){d=d?{policy:"PhotoUpload"}:{};c.userActionId&&(d.user_action_id=c.userActionId);a=a.requestSend(c.uri.toString(),"www",d);c.fbtraceRemoteNode=a;c.transport.setRequestHeader("X-Fbtrace-Meta",a.metadata())}};d=function(a,b){b.request.fbtraceRemoteNode.replyReceive({is_last:b.response.is_last,success:!0}),setTimeout(function(){b.request.fbtraceRemoteNode.parentNode.replySend(!0,{})},0)};f=function(a,b){b.request.fbtraceRemoteNode.replyReceive({is_last:b.response.is_last,success:!1,error_code:b.response.error,error_summary:b.response.errorSummary,error_description:b.response.errorDescription}),setTimeout(function(){b.request.fbtraceRemoteNode.parentNode.replySend(!1,{})},0)};var m=function(a,b){return b.request.fbtraceRemoteNode};b("Arbiter").subscribe("AsyncRequest/will_send",c);b("Arbiter").subscribe("AsyncRequest/response",b("guardFunction")(m,d));b("Arbiter").subscribe("AsyncRequest/error",b("guardFunction")(m,f));e.exports={defaultNode:j,requestReceive:k,withDefaultNode:a}}),null);
__d("RTCAppData",["FacebookAppIDs","RTWebClientFeatureGating","URI","WorkplaceChatHelper","isBonfireURI","isFacebookURI","isMessengerDotComURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getAppID:function(){return b("WorkplaceChatHelper").isDesktopChatApp()?b("WorkplaceChatHelper").getAppID()||b("FacebookAppIDs").WORKPLACE_DESKTOP:b("FacebookAppIDs").WWW},getChannelManagerAppName:function(){switch(g.getMWAppID()){case b("FacebookAppIDs").MESSENGERDOTCOM.toString():return"messenger_dot_com";case b("FacebookAppIDs").WWW.toString():return"www";case b("FacebookAppIDs").BONFIRE_FOR_WWW.toString():return"bonfire_for_www";default:return"desktop"}},getMWAppID:function(){__p&&__p();if(!b("RTWebClientFeatureGating").shouldUseRealMultiwayAppID())return b("FacebookAppIDs").CHATPROXY_WEB.toString();var a=new(b("URI"))(window.location.href),c=new(b("URI"))(window.location.href).domain;if(!c)return b("FacebookAppIDs").CHATPROXY_WEB.toString();if(b("isFacebookURI")(a)&&(c.startsWith("www")||c.startsWith("m")))return b("FacebookAppIDs").WWW.toString();else if(b("isBonfireURI")(a))return b("FacebookAppIDs").BONFIRE_FOR_WWW.toString();else if(b("isMessengerDotComURI")(a))return b("FacebookAppIDs").MESSENGERDOTCOM.toString();else return b("FacebookAppIDs").CHATPROXY_WEB.toString()}};e.exports=g}),null);
__d("XCollabCallSendMessageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/collab/sendmessage/",{recipient_id:{type:"Int",required:!0},msg_id:{type:"Int",required:!0},message_info:{type:"String",required:!0},webrtc_fbtrace:{type:"Int"}})}),null);
__d("XVideoCallSendMessageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/sendmessage/",{recipient_id:{type:"Int",required:!0},msg_id:{type:"Int",required:!0},message_info:{type:"String",required:!0},webrtc_fbtrace:{type:"Int"}})}),null);
__d("FBRTCMessageSender",["errorCode","CurrentUser","FBRTCConfig","FBRTCConstants","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCSupport","FBRTCUtils","Fbtrace","RTCAppData","SiteData","XCollabCallSendMessageController","XVideoCallSendMessageController"],(function(a,b,c,d,e,f,g){__p&&__p();var h=0;function a(){"use strict";this.onSendFailure=null,this.$1=b("FBRTCLogger").getInstance()}a.prototype.sendOffer=function(a,c,d,e,f,g){"use strict";return this.$2(b("FBRTCConstants").PayloadType.OFFER,a,c,d,e,f,null,g)};a.prototype.sendAnswer=function(a,c,d,e,f,g){"use strict";return this.$2(b("FBRTCConstants").PayloadType.ANSWER,a,c,d,e,f,g)};a.prototype.sendPCRestartOffer=function(a,c,d,e,f){"use strict";return this.$2(b("FBRTCConstants").PayloadType.PCRESTART_OFFER,a,c,d,e,f)};a.prototype.sendSdpUpdate=function(a,c,d,e,f){"use strict";return this.$2(b("FBRTCConstants").PayloadType.SDP_UPDATE,a,c,d,e,f)};a.prototype.resendSdpMessage=function(a,b){"use strict";b.flag=1,this.$3(a,b)};a.prototype.resendPayload=function(a,b){"use strict";b.flag=1,this.$4(a,b)};a.prototype.$2=function(a,c,d,e,f,g,h,i){"use strict";__p&&__p();d=this.$5(d,a);d.sdp=e;a===b("FBRTCConstants").PayloadType.OFFER&&(d.browser_supports_escalation=b("FBRTCSupport").isGroupCallWebtrcSupported(),d.handlescollision=!0,d.pranswer=!1,i&&(d.call_trigger=i));a===b("FBRTCConstants").PayloadType.ANSWER&&h&&(d.escalation_conference_name=h.escalationConferenceName,d.negotiated_escalation_support=h.negotiatedEscalationSupport);(a===b("FBRTCConstants").PayloadType.OFFER||a===b("FBRTCConstants").PayloadType.ANSWER||a===b("FBRTCConstants").PayloadType.PCRESTART_OFFER)&&(d.icerestart=!1,d.experiments=b("FBRTCConfig").supportedSignalingExperiments());d.videoon=f;d.attributes=g;d.ull=b("FBRTCConstants").convertFromUploadLogLevel(b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel());this.$3(c,d);return d};a.prototype.sendIceCandidate=function(a,c,d){"use strict";c=this.$5(c,b("FBRTCConstants").PayloadType.ICE_CANDIDATE);c.sdp_mid=d.sdpMid;c.label=d.sdpMLineIndex;c.sdp=d.candidate;this.$4(a,c)};a.prototype.sendHangup=function(a,c,d,e,f){"use strict";c=this.$5(c,b("FBRTCConstants").PayloadType.HANGUP);c.reason=b("FBRTCConstants").callEndReasonString(d);c.subreason=f||"";this.$4(a,c,e,!0)};a.prototype.sendOtherDismiss=function(a){"use strict";a=this.$5(a,b("FBRTCConstants").PayloadType.OTHER_DISMISS);this.$4(b("CurrentUser").getID(),a)};a.prototype.sendOfferAck=function(a,c,d,e){e===void 0&&(e=new Map()),this.$6(a,c,d,b("FBRTCConstants").PayloadType.OFFER_ACK,e)};a.prototype.sendOfferNack=function(a,c,d){"use strict";this.$6(a,c,d,b("FBRTCConstants").PayloadType.OFFER_NACK,new Map([["error_code",1356043]]))};a.prototype.sendAnswerAck=function(a,c,d){"use strict";this.$6(a,c,d,b("FBRTCConstants").PayloadType.ANSWER_ACK)};a.prototype.sendAck=function(a,c,d){"use strict";this.$6(a,c,d,b("FBRTCConstants").PayloadType.ACK,new Map([["ack_type",d.type]]))};a.prototype.sendMuteStateUpdate=function(a,c,d){"use strict";c=this.$5(c,b("FBRTCConstants").PayloadType.SET_VIDEO);c.videoon=d;this.$4(a,c)};a.prototype.sendVideoEscalationRequest=function(a,b,c){"use strict";return this.sendVideoRequestResponse(a,b,0,c)};a.prototype.sendVideoRequestResponse=function(a,c,d,e){"use strict";c=this.$5(c,b("FBRTCConstants").PayloadType.VIDEO_REQUEST);c.ack_id=d;c.videoon=e;c.capability=b("FBRTCSupport").getCapabilities();this.$4(a,c);return c};a.prototype.sendMsgAck=function(){"use strict"};a.prototype.sendOk=function(){"use strict"};a.prototype.sendPranswer=function(){"use strict"};a.prototype.sendIcerestartAnswer=function(){"use strict"};a.prototype.$5=function(a,c){"use strict";var d=b("FBRTCUtils").generateRandomInt();a={version:h,type:c,call_id:a,msg_id:d};this.$7(c)&&(a.supports_video_interop=!0);return a};a.prototype.$7=function(a){"use strict";return a===b("FBRTCConstants").PayloadType.OFFER||a===b("FBRTCConstants").PayloadType.ANSWER||a===b("FBRTCConstants").PayloadType.PRANSWER||a===b("FBRTCConstants").PayloadType.ICERESTART_OFFER||a===b("FBRTCConstants").PayloadType.ICERESTART_ANSWER||a===b("FBRTCConstants").PayloadType.PCRESTART_OFFER||a===b("FBRTCConstants").PayloadType.PCRESTART_ANSWER||a===b("FBRTCConstants").PayloadType.SDP_UPDATE||a===b("FBRTCConstants").PayloadType.SET_VIDEO||a===b("FBRTCConstants").PayloadType.VIDEO_REQUEST};a.prototype.$3=function(a,b){"use strict";this.$4(a,b,!1,!0,!0)};a.prototype.$6=function(a,c,d,e){"use strict";var f=(arguments.length<=4?undefined:arguments[4])||new Map(),g=this.$5(c,e);g.ack_id=d.msg_id;d.flag===1&&(g.flag=1);g.ull=b("FBRTCConstants").convertFromUploadLogLevel(b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel());f.forEach(function(a,b,c){g[b]=a});this.$4(a,g)};a.prototype.$4=function(a,c,d,e,f){"use strict";__p&&__p();var g=c.msg_id,h={peer_id:a,call_id:c.call_id,msg_id:g,msg_type:c.type},i={call_id:c.call_id,msg_id:g,user_id:b("CurrentUser").getID(),recipient_id:a,msg_type:c.type,app_id:b("RTCAppData").getAppID(),app_version:String(b("SiteData").client_revision||"dev"),op:"sendServerRequest:"+c.type,policy:"WebRTC"};i=b("Fbtrace").requestReceive("browser",String(b("SiteData").client_revision||"dev"),i);var j=b("FBRTCUtils").isPeerVCEndpoint(a);j&&b("FBRTCConfig").getMeetingID()!=null&&(c.meeting_id=b("FBRTCConfig").getMeetingID());var k=(j?b("XCollabCallSendMessageController"):b("XVideoCallSendMessageController")).getURIBuilder().setInt("recipient_id",a).setInt("msg_id",g).setString("message_info",JSON.stringify(c)).setInt("webrtc_fbtrace",i.isOn()?1:0).getURI();j=null;e&&(j=this.$4.bind(this,a,c,d,!1,f));var l=this.$8.bind(this,h),m=this.$9.bind(this,h,j,f);b("Fbtrace").withDefaultNode(i,function(){b("FBRTCUtils").sendServerRequest(k,l,m,d)});this.onMessageSent&&this.onMessageSent(a,c);this.$1.logSentMessage(a,c.call_id,c)};a.prototype.$8=function(a){"use strict";this.$1.logSentMessageSuccess(a.peer_id,a.call_id,a.msg_type,a.msg_id)};a.prototype.$9=function(a,c,d,e){"use strict";__p&&__p();var f="UNKNOWN_ERROR";e&&(f=e.getError?e.getError():e);this.$1.logSentMessageFailure(a.peer_id,a.call_id,a.msg_type,a.msg_id,f);e=null;f===1356001||f===1356049?e=b("FBRTCConstants").CallEndReason.NO_PERMISSION:f===1356046||f===1356045?e=b("FBRTCConstants").CallEndReason.CALLER_NOT_VISIBLE:(f===1356003||f===1356002||f===1356044)&&(e=b("FBRTCConstants").CallEndReason.OTHER_NOT_CAPABLE);if(!e&&c){c();return}d&&this.onSendFailure&&(e||(e=b("FBRTCConstants").CallEndReason.SIGNALING_MESSAGE_FAILED),this.onSendFailure(e,f,a.msg_type))};e.exports=a}),null);
__d("FBRTCIncomingCallController",["fbt","Cache","DocumentTitle","FBRTCCallBlockingStore","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCCallUIWrapper","FBRTCConstants","FBRTCLocalMessageQueue","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCMessage","FBRTCMessageDedup","FBRTCMessageSender","FBRTCSupport","MercuryIDs","MessengerParticipants.bs","UserActivity"],(function(a,b,c,d,e,f,g){__p&&__p();var h=30;function a(a,c,d){"use strict";this.$1=a,this.$2=c,this.$3=d,this.$4=null,this.$5=null,this.$6=new(b("FBRTCMessageSender"))(),this.$7=new(b("FBRTCLocalMessageQueue"))(),this.$8=b("FBRTCCallSummaryStore").getInstance(),this.$9=b("FBRTCLogger").getInstance(),this.$10=null,this.$11=new(b("Cache"))()}a.prototype.onMessageReceived=function(a){"use strict";__p&&__p();var c;try{c=new(b("FBRTCMessage"))(a)}catch(b){this.$9.logErrorWithoutID("Unknown data: "+JSON.stringify(a));return}if(!b("FBRTCMessageDedup").check(c.peerID,c.callID,c.msgID)){c.isOffer()&&this.$12()&&this.$6.sendOfferAck(c.peerID,c.callID,c.msg);this.$9.logInfo(c.peerID,c.callID,"Ignoring message (duplicate): "+c.msgID);return}this.$9.logReceivedMessage(c.peerID,c.callID,c.msg);b("FBRTCSupport").isWebrtcSupported()&&c.msgType!==b("FBRTCConstants").PayloadType.OFFER&&this.$7.enqueueMessage(c.peerID,c.callID,c.msgID,a);switch(c.msgType){case b("FBRTCConstants").PayloadType.OFFER:this.$13(c);break;case b("FBRTCConstants").PayloadType.HANGUP:this.$14(c);break;case b("FBRTCConstants").PayloadType.OTHER_DISMISS:this.$15(c);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:case b("FBRTCConstants").PayloadType.OFFER_ACK:case b("FBRTCConstants").PayloadType.ANSWER:case b("FBRTCConstants").PayloadType.MSG_ACK:case b("FBRTCConstants").PayloadType.OK:case b("FBRTCConstants").PayloadType.PING:case b("FBRTCConstants").PayloadType.PRANSWER:case b("FBRTCConstants").PayloadType.ICERESTART_OFFER:case b("FBRTCConstants").PayloadType.ICERESTART_ANSWER:case b("FBRTCConstants").PayloadType.PCRESTART_ANSWER:case b("FBRTCConstants").PayloadType.PCRESTART_OFFER:case b("FBRTCConstants").PayloadType.SDP_UPDATE:case b("FBRTCConstants").PayloadType.ANSWER_ACK:case b("FBRTCConstants").PayloadType.SET_VIDEO:case b("FBRTCConstants").PayloadType.OFFER_NACK:case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:case b("FBRTCConstants").PayloadType.ACK:break;default:break}};a.prototype.$13=function(a){"use strict";__p&&__p();var c=a.callID,d=a.msg,e=a.peerID;if(this.$16(c))return;if(d.calltype){this.$6.sendOfferNack(e,c,d);return}this.$12()?this.$6.sendOfferAck(e,c,d):b("FBRTCSupport").isWebrtcSupported()||this.$6.sendOfferNack(e,c,d);this.$9.logCallAction(e,c,b("FBRTCLogger").CallAction.RECEIVED_CALL);var f=this.$17(e,c,a);f.setUploadLogLevel(b("FBRTCLocalUploadLogLevel").getUploadLogLevel(b("FBRTCConstants").convertToUploadLogLevel(d.ull)));if(b("FBRTCCallBlockingStore").getBlockingStatus()){this.$18(e,c,f,b("FBRTCConstants").CallEndReason.IGNORE_CALL,!1,!1,!1,"calling disabled");return}if(this.$4&&!this.$4.isForPeer(e)){this.$18(e,c,f,b("FBRTCConstants").CallEndReason.IN_ANOTHER_CALL,!1,!1,!0);this.$3.onCallMissed(e);return}if(!b("FBRTCSupport").isWebrtcSupported()){this.$18(e,c,f,b("FBRTCConstants").CallEndReason.UNSUPPORTED_VERSION,!1,!1,!1);this.$2.showForIncomingCall(c,e);return}var g=new this.$1(e,c);this.$5=f;g.addListener("answerCall",function(){this.$19(e,c,a,f)}.bind(this));g.addListener("ignoreCall",function(){this.$20(e,c,f)}.bind(this));g.addListener("timeout",function(){this.$21(e,c,f)}.bind(this));this.$3.hideDialog();d=d.videoon?b("FBRTCConstants").IncomingCallDialogTypes.VIDEO:b("FBRTCConstants").IncomingCallDialogTypes.AUDIO;g.showIncomingDialog(d);this.$4=g;this.$9.logEvent(e,c,"Incoming call dialog shown");this.$22(e)};a.prototype.$22=function(a){"use strict";document.hasFocus()||this.$23(a)};a.prototype.$24=function(){"use strict";this.$25()};a.prototype.$23=function(a){"use strict";a=b("MercuryIDs").getParticipantIDFromUserID(a);b("MessengerParticipants.bs").get(a,function(a){if(!this.$4)return;this.$10=b("DocumentTitle").blink(g._("{name} is calling",[g._param("name",a.short_name)]))}.bind(this));b("UserActivity").subscribeOnce(this.$25.bind(this))};a.prototype.$25=function(){"use strict";this.$10&&(this.$10.stop(),this.$10=null)};a.prototype.$26=function(){"use strict";this.$4&&this.$4.cancel(),this.$4=null,this.$5=null,this.$24()};a.prototype.$14=function(a){"use strict";__p&&__p();var c=a.peerID,d=a.callID;a=a.msg;this.$27(d);if(this.$4&&this.$4.isForPeerAndCall(c,d)){a=a.reason;(typeof a==="string"||a instanceof String)&&(a=b("FBRTCConstants").endCallReasonFromString(a));this.$18(c,d,this.$5,a,!0,!0,!1);this.$26();a!==b("FBRTCConstants").CallEndReason.OTHER_INSTANCE_HANDLED&&(this.$3.onCallMissed(c),this.$3.showDialog())}};a.prototype.$12=function(){"use strict";return b("FBRTCSupport").isWebrtcSupported()};a.prototype.$15=function(a){"use strict";a=a.callID;this.$27(a);b("FBRTCSupport").isWebrtcSupported()||this.$2.dismiss();this.$4&&this.$4.isForCall(a)&&this.$26()};a.prototype.$27=function(a){"use strict";this.$11.set(a,!0,null,h)};a.prototype.$16=function(a){"use strict";return this.$11.has(a)};a.prototype.$17=function(a,c,d){"use strict";a=new(b("FBRTCCallSummary"))({peerID:a,callID:c,isCaller:!1});a.setCallTrigger("incoming_p2p_ring_dialog");a.onFullMessageReceived(d);a.onOfferAckSent(d.msg);return a};a.prototype.$19=function(a,c,d,e){"use strict";var f=!d.msg.videoon;e.onPressedAnswer();e.save(this.$8);this.$9.logCallAction(a,c,b("FBRTCLogger").CallAction.ANSWER_CALL);this.$6.sendOtherDismiss(c);this.$7.enqueueOffer(a,d.originalMessageData);b("FBRTCCallUIWrapper").openAsCallee(a,c,e,f);this.$26()};a.prototype.$20=function(a,c,d){"use strict";this.$18(a,c,d,b("FBRTCConstants").CallEndReason.IGNORE_CALL,!1,!0,!0),this.$26()};a.prototype.$21=function(a,c,d){"use strict";this.$18(a,c,d,b("FBRTCConstants").CallEndReason.NO_ANSWER_TIMEOUT,!1,!1,!1),this.$26(),this.$3.onCallMissed(a),this.$3.showDialog()};a.prototype.$18=function(a,c,d,e,f,g,h,i){i===void 0&&(i=null);h&&this.$6.sendHangup(a,c,e);g&&this.$6.sendOtherDismiss(c);d&&(d.onCallEnded(e,f,null,i),d.save(this.$8));h=b("FBRTCConstants").fullCallEndReasonString(e,f);this.$9.logCallAction(a,c,b("FBRTCLogger").CallAction.END_CALL,h)};e.exports=a}),null);
__d("XBrowserNotSupportedDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/browser_not_supported/",{is_group_call:{type:"Bool",defaultValue:!1},participants:{type:"StringVector"},user_id:{type:"Int"},warning:{type:"Bool",defaultValue:!1},call_type:{type:"Enum",defaultValue:2,enumType:0},__asyncDialog:{type:"Int"}})}),null);
__d("FBRTCUnsupportedBrowserMessage",["AsyncDialog","AsyncRequest","FBRTCCallConstants","FBRTCSoundController","XBrowserNotSupportedDialogController"],(function(a,b,c,d,e,f){__p&&__p();var g=b("FBRTCCallConstants").FBRTCCallType;a={_dialog:null,warnForOutgoingCall:function(a){var c=b("XBrowserNotSupportedDialogController").getURIBuilder().setBool("warning",!0).getURI();this._presentDialog(c,a)},showForOutgoingCall:function(){var a=b("XBrowserNotSupportedDialogController").getURIBuilder().getURI();this._presentDialog(a)},showForIncomingCall:function(a,c){b("FBRTCSoundController").playIncomingRingtone(a,c,!1);a=b("XBrowserNotSupportedDialogController").getURIBuilder().setInt("user_id",c).getURI();this._presentDialog(a)},showForIncomingGroupCall:function(a,c,d,e){b("FBRTCSoundController").playIncomingRingtone(a,e,!1);a=b("XBrowserNotSupportedDialogController").getURIBuilder().setBool("is_group_call",!0).setInt("user_id",d).setStringVector("participants",c).getURI();this._presentDialog(a)},showForOutgoingGroupCall:function(){var a=b("XBrowserNotSupportedDialogController").getURIBuilder().setBool("is_group_call",!0).getURI();this._presentDialog(a)},showForUnsupportedCollabCall:function(){var a=b("XBrowserNotSupportedDialogController").getURIBuilder().setEnum("call_type",g.COLLAB_VIDEO_CALL).getURI();this._presentDialog(a)},showForUnsupportedCollabScreenSharing:function(){var a=b("XBrowserNotSupportedDialogController").getURIBuilder().setEnum("call_type",g.COLLAB_SCREEN_SHARE_CALL).getURI();this._presentDialog(a)},dismiss:function(){this._dialog&&this._dialog.hide()},_presentDialog:function(a,c){if(this._dialog)return;a=new(b("AsyncRequest"))(a);b("AsyncDialog").send(a,function(a){this._dialog=a,a.subscribe("hide",function(){this._dialog=null,c&&c()}.bind(this))}.bind(this))}};e.exports=a}),null);