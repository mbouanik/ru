if (self.CavalryLogger) { CavalryLogger.start_js(["WL\/bR"]); }

__d("MessengerNotificationBanner.react",["cx","ix","AsyncRequest","Bootloader","CurrentUser","Image.react","MessengerButtonReact.bs","MessengerDotComPromotionActionURL","MessengerSettingsActions","MessengerSignals.bs","QuickPromotionActionType","React","XMessengerDotComNUXLoggingController","XQuickPromotionSimpleLoggingController","goURI","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerButtonReact.bs").jsComponent;c=b("React").PropTypes;var k=h("86832"),l=h("86833"),m=h("600634");d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={bannerClosed:!1},this.$5=function(){this.$6(),this.props.promotionID?(new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",this.props.promotionID).setEnum("qp_action","primary").setStringToStringMap("qp_instance_log_data",this.props.instanceLogData).getURI()).send(),this.props.primaryActionURI===b("MessengerDotComPromotionActionURL").turn_on_notification?b("MessengerSettingsActions").changeDesktopNotifs(!0):this.props.primaryActionType===b("QuickPromotionActionType").DIALOG_URL?b("Bootloader").loadModules(["AsyncDialog"],function(a){a.send(new(b("AsyncRequest"))().setURI(b("nullthrows")(this.props.primaryActionURI)))}.bind(this),"MessengerNotificationBanner.react"):window.open(this.props.primaryActionURI)):this.props.primaryActionURI?b("goURI")(this.props.primaryActionURI,!0):this.props.primaryActionCallback&&this.props.primaryActionCallback()}.bind(this),this.$2=function(){this.$6(),this.props.promotionID&&new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",this.props.promotionID).setEnum("qp_action","dismiss").setStringToStringMap("qp_instance_log_data",this.props.instanceLogData).getURI()).send()}.bind(this),this.$6=function(){this.setState({bannerClosed:!0},function(){b("MessengerSignals.bs").resize()})}.bind(this),c}a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.promotionID||this.setState({bannerClosed:!1})};a.prototype.componentDidMount=function(){if(this.$1()||!this.props.promotionID||b("CurrentUser").isWorkUser())return;new(b("AsyncRequest"))().setURI(b("XMessengerDotComNUXLoggingController").getURIBuilder().setInt("promotion_id",this.props.promotionID).setStringToStringMap("instance_log_data",this.props.instanceLogData).getURI()).send()};a.prototype.componentDidUpdate=function(){window.dispatchEvent(new Event("resize"))};a.prototype.render=function(){return this.$1()?null:b("React").createElement("div",{className:"_2cij"},b("React").createElement(b("Image.react"),{className:"_2cik",onClick:this.$2,src:k}),b("React").createElement(b("Image.react"),{className:"_2cil",src:this.$3()}),this.props.promotionContent," ",this.$4())};a.prototype.$1=function(){return this.state.bannerClosed};a.prototype.$3=function(){return(this.props.primaryActionURI||"").indexOf("/privacy/response")>-1?m:l};a.prototype.$4=function(){return b("React").createElement(j,{className:"_2cim",label:this.props.primaryActionTitle,onClick:this.$5,type:"primary"})};a.propTypes={promotionID:c.number,promotionContent:c.string,primaryActionTitle:c.string,primaryActionType:c.string,primaryActionURI:c.string,primaryActionCallback:c.func,instanceLogData:c.object};e.exports=a}),null);