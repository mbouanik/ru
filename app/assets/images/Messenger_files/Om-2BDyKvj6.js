if (self.CavalryLogger) { CavalryLogger.start_js(["slqiw"]); }

__d("MessengerThreadlistMessageRequestsRow.react",["cx","fbt","ix","CurrentUser","Image.react","ImmutableObject","Keys","LinkWithHiddenURLBar.react","MercuryConfig","MercuryIDs","MessagingTag","MessengerActions","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MNAdsLogMessageUtils","React","intlList","shallowEqual"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=50,l=i("86936");c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$3=function(a){if(this.props.aggregatedThreads.length>0){var c=this.props.aggregatedThreads,d=c.map(function(a){return a.thread_id});b("MessengerActions").selectAggregation(d);this.props.onAggregationClick&&this.props.onAggregationClick(a,c)}else a.preventDefault(),b("MessengerActions").changeFolder(b("MessagingTag").PENDING)}.bind(this),c}a.prototype.shouldComponentUpdate=function(a){return!b("shallowEqual")(this.props,a)};a.prototype.componentDidUpdate=function(a){this.props.isFocused&&(this.$1&&this.$1.focus&&this.$1.focus())};a.prototype.render=function(){var a=this.props.newMessageRequestThreads.length||this.props.aggregatedThreads.length;return a===0?null:b("React").createElement("li",{className:"_5l-3 _1ht1 _2il3 _2kt",ref:function(a){this.$1=a}.bind(this),onKeyPress:this.$2,role:"row",tabIndex:-1},b("React").createElement(b("LinkWithHiddenURLBar.react"),{tabIndex:-1,onAllClicks:this.$3,className:"_1ht5 _5l-3"},b("React").createElement("div",{className:"_5l-3 _1qt3 _5nxe"},b("React").createElement(b("Image.react"),{alt:"",height:k,src:l,width:k}),this.$4()?this.$5():null),b("React").createElement("div",{className:"_1qt4 _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1ht6 _5nxa"+(this.$4()?" _3xsd":"")},this.$6())),b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1htf"+(this.$4()?" _3xsd":"")},this.$7())))))};a.prototype.$4=function(){return this.props.pendingFolderUnseenCount!==0};a.prototype.$6=function(){var a=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads;return h._({"*":"New Message Requests","_1":"New Message Request"},[h._plural(a.length)])};a.prototype.$5=function(){return b("React").createElement("span",{className:"_3xse"})};a.prototype.componentDidMount=function(){if(this.props.aggregatedThreads&&this.props.aggregatedThreads.length>0){var a=b("CurrentUser").getID(),c=this.props.aggregatedThreads.map(function(c){return b("MercuryIDs").getThreadKeyfromThreadIDUserID(c.thread_id,a)});new(b("MessengerMessageRequestsTypedLogger"))().setAction("aggregation_unit_impression").setThreadKeyList(c.filter(function(a){return a}).join(", ")).setEntryPoint("inbox_aggregation").setSurface("inbox").setFolderType("pending").log()}};a.prototype.$8=function(){__p&&__p();var a=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads,c=h._({"*":"From people you may know","_1":"From someone you may know"},[h._plural(a.length)]),d=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),e=[];for(var f=0,g=0;g<3&&f<a.length;f++){var i=a[f].participants.find(function(a){return a!==d});if(i){i=b("MessengerParticipants.bs").getNow(i);i&&(g++,e.push(i.name.split(" ")[0]))}}if(!e||e.length==0)return c;a.length>0&&b("MNAdsLogMessageUtils").logAdsThreadListImpression(a[0]);return a.length-e.length==0?h._("From {name}",[h._param("name",b("intlList")(e,b("intlList").CONJUNCTIONS.NONE))]):h._({"*":"From {name} and {count} more"},[h._param("name",b("intlList")(e,b("intlList").CONJUNCTIONS.NONE)),h._param("count",a.length-e.length,[0])])};a.prototype.$7=function(){__p&&__p();if(b("MercuryConfig").MCMA)return this.$8();var a=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads,c=h._({"someone":"From someone you may know","people":"From people you may know"},[h._enum(a.length===1?"someone":"people",{someone:"someone",people:"people"})]),d=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),e=a[0].participants.find(function(a){return a!==d});if(!e)return c;e=b("MessengerParticipants.bs").getNow(e);if(!e||!e.name)return c;a.length>0&&b("MNAdsLogMessageUtils").logAdsThreadListImpression(a[0]);return a.length===1?h._("From {name}",[h._param("name",e.name)]):h._({"*":"From {name} and {count} more"},[h._param("name",e.name),h._param("count",a.length-1,[0])])};a.prototype.$9=function(a){a.preventDefault();a=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads;this.props.onFocus(a[0].thread_id)};a.prototype.$2=function(a){a.preventDefault();a=a.charCode;a===b("Keys").RETURN&&b("MessengerActions").changeFolder(b("MessagingTag").PENDING)};a.propTypes={onAggregationClick:c.func,isFocused:c.bool,newMessageRequestThreads:c.arrayOf(c.instanceOf(b("ImmutableObject"))).isRequired,pendingFolderUnseenCount:c.number,aggregatedThreads:c.arrayOf(c.instanceOf(b("ImmutableObject"))),viewer:c.string.isRequired};e.exports=a}),null);