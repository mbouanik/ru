if (self.CavalryLogger) { CavalryLogger.start_js(["EK3qh"]); }

__d("FBRTCDismissReason",[],(function(a,b,c,d,e,f){e.exports={CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,JOIN_APPROVAL_DENIED:8}}),null);
__d("FBRTCHangupReason",[],(function(a,b,c,d,e,f){e.exports={IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6}}),null);
__d("FBRTCMediaType",[],(function(a,b,c,d,e,f){e.exports={AUDIO:0,VIDEO:1,DATA:2}}),null);
__d("FBRTCParticipantCallState",[],(function(a,b,c,d,e,f){e.exports={UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12}}),null);
__d("FBRTCRtcResponseStatusCode",[],(function(a,b,c,d,e,f){e.exports={OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503}}),null);
__d("ChromeExtensionInstallError",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b=babelHelpers.inherits(a,Error);g=b&&b.prototype;function a(a,b,c){g.constructor.call(this,a),this.message=a,this.$ChromeExtensionInstallError3=a,this.$ChromeExtensionInstallError1=c,this.$ChromeExtensionInstallError2=b,this.name=this.constructor.name}a.prototype.toString=function(){return this.name+": "+[this.message,this.$ChromeExtensionInstallError2,this.$ChromeExtensionInstallError1].join("-")};a.prototype.getTypedMessage=function(){return this.$ChromeExtensionInstallError3};a.prototype.getInstallType=function(){return this.$ChromeExtensionInstallError2};e.exports=a}),null);
__d("ChromeExtensionInstallErrorTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHROME_WEBSTORE_UNDEFINED:"CHROME_WEBSTORE_UNDEFINED",EXTENSION_INSTALL_FAILED:"EXTENSION_INSTALL_FAILED",EXTENSION_STORE_INSTALL_TIMEOUT:"EXTENSION_STORE_INSTALL_TIMEOUT"})}),null);
__d("RTCChromeExtensionListener",["DateConsts","EventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("DateConsts").MS_PER_SEC;var h=c;d=babelHelpers.inherits(a,b("EventEmitter"));g=d&&d.prototype;function a(a){g.constructor.call(this),this.$RTCChromeExtensionListener1=!1,this.$RTCChromeExtensionListener2=null,this.$RTCChromeExtensionListener5=function(a){var b=a;if(a.type==="notificationButtonClicked"){var c=a.buttonIndex;a=a.notificationId;c!==0&&c!==1&&(b={type:"notificationClicked",notificationId:a})}this.emit(b.type,b)}.bind(this),this.$RTCChromeExtensionListener6=function(a){a.onMessage.removeListener(this.$RTCChromeExtensionListener5),this.$RTCChromeExtensionListener2=null,this.emit("portDisconnected"),this.$RTCChromeExtensionListener1===!1&&this.$RTCChromeExtensionListener7(h)}.bind(this),this.$RTCChromeExtensionListener3=a}a.prototype.$RTCChromeExtensionListener4=function(){if(this.$RTCChromeExtensionListener2==null)try{var a=window.chrome.runtime.connect(this.$RTCChromeExtensionListener3,{name:"notifications"});a.onMessage.addListener(this.$RTCChromeExtensionListener5);a.onDisconnect.addListener(this.$RTCChromeExtensionListener6);this.$RTCChromeExtensionListener2=a;this.emit("portConnected")}catch(a){this.emit("portConnectionError",a)}};a.prototype.$RTCChromeExtensionListener7=function(a){a===void 0&&(a=10),window.setTimeout(function(){this.$RTCChromeExtensionListener4()}.bind(this),a)};a.prototype.connect=function(){this.$RTCChromeExtensionListener7()};a.prototype.disconnect=function(){this.$RTCChromeExtensionListener2!=null&&(this.$RTCChromeExtensionListener1=!0,this.$RTCChromeExtensionListener2.disconnect(),this.$RTCChromeExtensionListener2=null)};e.exports=a}),null);
__d("RTCChromeScreenSharingExtension",["Promise","RTCChromeExtensionListener","uuid"],(function(a,b,c,d,e,f){__p&&__p();var g="ncfpggehkhmjpdjpefomjchjafhmbnai";function a(a){return new(b("RTCChromeExtensionListener"))(a)}function h(a,c){return new(b("Promise"))(function(b,d){window.chrome.runtime.sendMessage(c,a,function(a){if(a!=null)typeof a==="object"&&a.type==="error"?d(new Error(a.message)):b(a);else{a=window.chrome.runtime.lastError.message;d(new Error(a))}})})}function c(a,b){b===void 0&&(b=["screen","window","tab"]);return h({type:"getStreamID",sources:b},a)}function d(a,b){return h({type:"cancel",requestID:a},b)}function f(){return b("uuid")()}e.exports={EXTENSION_ID:g,connectToNotifications:a,generateNotificationID:f,getMediaSourceFromExtension:c,sendExtensionRequest:h,stopExtensionScreenSharing:d}}),null);
__d("ScreenSharingExtensionInstallationEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({STARTED:"started",INSTALLED:"installed",FAILED:"failed"})}),null);
__d("ScreenSharingExtensionInstallationType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({INLINE:"inline",STORE:"store"})}),null);
__d("ScreenSharingExtensionInstallationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:ScreenSharingExtensionInstallationLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:ScreenSharingExtensionInstallationLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ScreenSharingExtensionInstallationLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setExtensionID=function(a){this.$1.extension_id=a;return this};a.prototype.setFailReason=function(a){this.$1.fail_reason=a;return this};a.prototype.setInstallEvent=function(a){this.$1.install_event=a;return this};a.prototype.setSourceApp=function(a){this.$1.source_app=a;return this};a.prototype.setType=function(a){this.$1.type=a;return this};a.prototype.setURIPath=function(a){this.$1.uri_path=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={extension_id:!0,fail_reason:!0,install_event:!0,source_app:!0,type:!0,uri_path:!0,vc:!0};e.exports=a}),null);
__d("CollabRTCChromeScreenSharingExtension",["invariant","Promise","regeneratorRuntime","ChromeExtensionInstallError","ChromeExtensionInstallErrorTypes","DateConsts","RTCChromeScreenSharingExtension","ScreenSharingExtensionInstallationEvent","ScreenSharingExtensionInstallationType","ScreenSharingExtensionInstallationTypedLogger","URI","gkx","isFacebookURI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("DateConsts").MS_PER_MIN;var h=b("RTCChromeScreenSharingExtension").EXTENSION_ID,i=b("RTCChromeScreenSharingExtension").generateNotificationID,j=b("RTCChromeScreenSharingExtension").getMediaSourceFromExtension,k=b("RTCChromeScreenSharingExtension").sendExtensionRequest,l=b("RTCChromeScreenSharingExtension").stopExtensionScreenSharing,m="DIALOG_USER_CANCEL",n="EXTENSION_NOT_FOUND",o="MESSAGESENDER_TAB_UNDEFINED",p="REQUEST_ID_UNDEFINED",q="UNEXPECTED_ERROR",r="data-fb-only-screensharing-extension-available",s=250,t=2*c,u=2;function a(){this.DIALOG_USER_CANCEL=m,this.EXTENSION_NOT_FOUND=n,this.MESSAGESENDER_TAB_UNDEFINED=o,this.REQUEST_ID_UNDEFINED=p,this.UNEXPECTED_ERROR=q,this.$2=h}a.prototype.isInstalled=function(){var a=document;a=a.documentElement;return a!=null?a.hasAttribute(r)&&a.getAttribute(r)==="true"?!0:!1:!1};a.prototype.throwIfNotInstalled=function(){if(this.isInstalled()!==!0)throw new Error(n)};a.prototype.$3=function(a,c){__p&&__p();var d=(c=a)!=null?(c=c.chrome)!=null?c.webstore:c:c;if(d==null)return b("Promise").reject(new(b("ChromeExtensionInstallError"))(b("ChromeExtensionInstallErrorTypes").CHROME_WEBSTORE_UNDEFINED,b("ScreenSharingExtensionInstallationType").INLINE));var e=window.document.documentElement;v(this.getExtensionURL(),window.document);a!==window&&v(this.getExtensionURL(),a.document);return new(b("Promise"))(function(a,c){d.install(this.getExtensionURL(),function(){e!=null&&e.setAttribute(this.getPresenseAttr(),"true"),a()}.bind(this),function(a,d){c(new(b("ChromeExtensionInstallError"))(b("ChromeExtensionInstallErrorTypes").EXTENSION_INSTALL_FAILED,b("ScreenSharingExtensionInstallationType").INLINE,d))})}.bind(this)).then(function(){this.$4(u);return b("ScreenSharingExtensionInstallationType").INLINE}.bind(this))};a.prototype.$5=function(a){__p&&__p();if(this.isInstalled())return b("Promise").resolve(b("ScreenSharingExtensionInstallationType").STORE);v(this.getExtensionURL(),window.document);a=(a=window)!=null?(a=a.chrome)!=null?a.webstore:a:a;if(a==null)return b("Promise").reject(new(b("ChromeExtensionInstallError"))(b("ChromeExtensionInstallErrorTypes").CHROME_WEBSTORE_UNDEFINED,b("ScreenSharingExtensionInstallationType").STORE));window.open(this.getExtensionURL(),"_blank");return this.$4(t/s).then(function(){var a=window.document.documentElement;a.setAttribute(this.getPresenseAttr(),"true");return b("ScreenSharingExtensionInstallationType").STORE}.bind(this))["catch"](function(){throw new(b("ChromeExtensionInstallError"))(b("ChromeExtensionInstallErrorTypes").EXTENSION_STORE_INSTALL_TIMEOUT,b("ScreenSharingExtensionInstallationType").STORE)})};a.prototype.getPresenseAttr=function(){return r};a.prototype.isInlineInstallCapableDomain=function(){return b("isFacebookURI")(b("URI").getRequestURI())};a.prototype.install=function(a){if(this.isInstalled())return b("Promise").resolve();new(b("ScreenSharingExtensionInstallationTypedLogger"))().setInstallEvent(b("ScreenSharingExtensionInstallationEvent").STARTED).setExtensionID(this.$2).setSourceApp(a).log();return this.$6(a).then(function(c){new(b("ScreenSharingExtensionInstallationTypedLogger"))().setInstallEvent(b("ScreenSharingExtensionInstallationEvent").INSTALLED).setExtensionID(this.$2).setType(c).setSourceApp(a).setURIPath(b("URI").getRequestURI().getPath()).log()}.bind(this))["catch"](function(c){new(b("ScreenSharingExtensionInstallationTypedLogger"))().setInstallEvent(b("ScreenSharingExtensionInstallationEvent").FAILED).setExtensionID(this.$2).setFailReason(c.getTypedMessage()).setType(c.getInstallType()).setSourceApp(a).setURIPath(b("URI").getRequestURI().getPath()).log();throw c}.bind(this))};a.prototype.$6=function(a){__p&&__p();if(!this.isInlineInstallCapableDomain())return this.$5(a);if(window.opener){if(b("gkx")("AT4oK_7JC5TTZYywhfbwFBQ7pWrCP25GhIYJYeTXORatm7YiPEPnzywhysM8xfJZufAO5vBilwUW96zDpBUM53et41qE6E73Q_2-qy7gqb5uKw"))return this.$5(a);try{window.opener.document;return window.opener.closed?this.$5(a):this.$3(window.opener,a)}catch(b){return this.$5(a)}}return this.$3(window,a)};a.prototype.getSourceID=function(a){__p&&__p();var c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(this.isInstalled()){d.next=2;break}throw new Error(n);case 2:d.next=4;return b("regeneratorRuntime").awrap(j(this.$2,a));case 4:c=d.sent;d.t0=c.type;d.next=d.t0==="streamID"?8:d.t0==="canceledGetStreamID"?10:11;break;case 8:this.$1=c.requestID;return d.abrupt("return",c.streamID);case 10:throw new Error(m);case 11:throw new Error(q);case 12:case"end":return d.stop()}},null,this)};a.prototype.getExtensionID=function(){return this.$2};a.prototype.getExtensionURL=function(){return"https://chrome.google.com/webstore/detail/"+this.$2};a.prototype.stop=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(l(this.$1,this.$2));case 2:this.$1=null;case 3:case"end":return a.stop()}},null,this)};a.prototype.$4=function(a){return k({type:"ping"},this.$2)["catch"](function(b){if(a<1)throw b;return w(s).then(function(){return this.$4(a-1)}.bind(this))}.bind(this))};a.prototype.isMinimumVersionNumber=function(a,c,d){__p&&__p();var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:this.throwIfNotInstalled();l.next=3;return b("regeneratorRuntime").awrap(k({type:"ping"},this.$2));case 3:e=l.sent;f=e.version;g=f.split(".").map(function(a){return parseInt(a,10)}),h=g[0],i=g[1],j=g[2];if(!(h>=a)){l.next=10;break}if(!(i>c)){l.next=9;break}return l.abrupt("return",!0);case 9:return l.abrupt("return",i===c&&j>=d);case 10:return l.abrupt("return",!1);case 11:case"end":return l.stop()}},null,this)};a.prototype.focusTabAndWindow=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(k({type:"focusTabAndWindow"},this.$2));case 3:a=c.sent;return c.abrupt("return",{tab:a.tab,window:a.window});case 5:case"end":return c.stop()}},null,this)};a.prototype.getLastFocusedWindow=function(a){__p&&__p();var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:this.throwIfNotInstalled();d.next=3;return b("regeneratorRuntime").awrap(k({type:"getLastFocusedWindow",getInfo:a},this.$2));case 3:c=d.sent;return d.abrupt("return",c.window);case 5:case"end":return d.stop()}},null,this)};a.prototype.getTabForSender=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(k({type:"getTabForSender"},this.$2));case 3:a=c.sent;return c.abrupt("return",a.tab);case 5:case"end":return c.stop()}},null,this)};a.prototype.getTabAndWindowForSender=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(k({type:"getTabAndWindowForSender"},this.$2));case 3:a=c.sent;return c.abrupt("return",{tab:a.tab,window:a.window});case 5:case"end":return c.stop()}},null,this)};a.prototype.getWindow=function(a,c){__p&&__p();var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:this.throwIfNotInstalled();e.next=3;return b("regeneratorRuntime").awrap(k({type:"getWindow",windowId:a,getInfo:c},this.$2));case 3:d=e.sent;return e.abrupt("return",d.window);case 5:case"end":return e.stop()}},null,this)};a.prototype.updateTab=function(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:this.throwIfNotInstalled();d={type:"updateTab",updateProperties:a};c!==undefined&&(d.tabId=c);f.next=5;return b("regeneratorRuntime").awrap(k(d,this.$2));case 5:e=f.sent;return f.abrupt("return",e.tab);case 7:case"end":return f.stop()}},null,this)};a.prototype.updateWindow=function(a,c){__p&&__p();var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:this.throwIfNotInstalled();e.next=3;return b("regeneratorRuntime").awrap(k({type:"updateWindow",windowId:a,updateInfo:c},this.$2));case 3:d=e.sent;return e.abrupt("return",d.window);case 5:case"end":return e.stop()}},null,this)};a.prototype.clearNotification=function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:c=e.sent;if(!(c===!1)){e.next=5;break}throw new Error("Chrome extension notifications permission not granted");case 5:e.next=7;return b("regeneratorRuntime").awrap(k({type:"clearNotification",notificationId:a},this.$2));case 7:d=e.sent;return e.abrupt("return",d.wasCleared);case 9:case"end":return e.stop()}},null,this)};a.prototype.createNotification=function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:c=e.sent;if(!(c===!1)){e.next=5;break}throw new Error("Chrome extension notifications permission not granted");case 5:e.next=7;return b("regeneratorRuntime").awrap(k({type:"createNotification",notificationId:i(),options:a},this.$2));case 7:d=e.sent;return e.abrupt("return",d.notificationId);case 9:case"end":return e.stop()}},null,this)};a.prototype.getAllNotifications=function(){__p&&__p();var a,c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:a=d.sent;if(!(a===!1)){d.next=5;break}throw new Error("Chrome extension notifications permission not granted");case 5:d.next=7;return b("regeneratorRuntime").awrap(k({type:"getAllNotifications"},this.$2));case 7:c=d.sent;return d.abrupt("return",Object.keys(c.notifications));case 9:case"end":return d.stop()}},null,this)};a.prototype.getNotificationsPermissionLevel=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(k({type:"getNotificationsPermissionLevel"},this.$2));case 3:a=c.sent;return c.abrupt("return",a.level);case 5:case"end":return c.stop()}},null,this)};a.prototype.updateNotification=function(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:d=f.sent;if(!(d===!1)){f.next=5;break}throw new Error("Chrome extension notifications permission not granted");case 5:f.next=7;return b("regeneratorRuntime").awrap(k({type:"updateNotification",notificationId:a,options:c},this.$2));case 7:e=f.sent;return f.abrupt("return",e.wasUpdated);case 9:case"end":return f.stop()}},null,this)};a.prototype.isNotificationPermissionGranted=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:a="denied";c.prev=1;c.next=4;return b("regeneratorRuntime").awrap(this.getNotificationsPermissionLevel());case 4:a=c.sent;c.next=10;break;case 7:c.prev=7,c.t0=c["catch"](1),a="denied";case 10:c.t1=a;c.next=c.t1==="granted"?13:c.t1==="denied"?14:15;break;case 13:return c.abrupt("return",!0);case 14:return c.abrupt("return",!1);case 15:throw new Error("Received an unexpected permission level: "+a);case 16:case"end":return c.stop()}},null,this,[[1,7]])};function v(a,b){var c="chrome-webstore-item";if(!b.querySelector('link[href="'+a+'"][rel="'+c+'"]')){var d=b.createElement("link");d.setAttribute("href",a);d.setAttribute("rel",c);b.head!=null||g(0);b.head.appendChild(d)}}function w(a){return new(b("Promise"))(function(b){return setTimeout(b,a)})}e.exports=new a()}),null);
__d("CollabRTCChromeScreenSharing",["CollabRTCChromeScreenSharingExtension"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={focusTabAndWindow:function(){return b("CollabRTCChromeScreenSharingExtension").focusTabAndWindow()},getLastFocusedWindow:function(a){return b("CollabRTCChromeScreenSharingExtension").getLastFocusedWindow(a)},getTabForSender:function(){return b("CollabRTCChromeScreenSharingExtension").getTabForSender()},getTabAndWindowForSender:function(){return b("CollabRTCChromeScreenSharingExtension").getTabAndWindowForSender()},getWindow:function(a,c){return b("CollabRTCChromeScreenSharingExtension").getWindow(a,c)},getSourceID:function(a,c){return b("CollabRTCChromeScreenSharingExtension").install(c).then(function(){return b("CollabRTCChromeScreenSharingExtension").getSourceID(a)})},stop:function(){return b("CollabRTCChromeScreenSharingExtension").stop()},updateTab:function(a,c){return b("CollabRTCChromeScreenSharingExtension").updateTab(a,c)},updateWindow:function(a,c){return b("CollabRTCChromeScreenSharingExtension").updateWindow(a,c)}};e.exports=a}),null);
__d("RTCWebMediaStreamsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RTCWebMediaStreamsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RTCWebMediaStreamsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RTCWebMediaStreamsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setBytes=function(a){this.$1.bytes=a;return this};a.prototype.setCallID=function(a){this.$1.call_id=a;return this};a.prototype.setCallType=function(a){this.$1.call_type=a;return this};a.prototype.setConferenceName=function(a){this.$1.conference_name=a;return this};a.prototype.setFrameHeight=function(a){this.$1.frame_height=a;return this};a.prototype.setFrameWidth=function(a){this.$1.frame_width=a;return this};a.prototype.setFrames=function(a){this.$1.frames=a;return this};a.prototype.setFramesPerSecond=function(a){this.$1.frames_per_second=a;return this};a.prototype.setIsLocal=function(a){this.$1.is_local=a;return this};a.prototype.setJitter=function(a){this.$1.jitter=a;return this};a.prototype.setJitterBufferDelay=function(a){this.$1.jitter_buffer_delay=a;return this};a.prototype.setPackets=function(a){this.$1.packets=a;return this};a.prototype.setPacketsLost=function(a){this.$1.packets_lost=a;return this};a.prototype.setQpSum=function(a){this.$1.qp_sum=a;return this};a.prototype.setRtt=function(a){this.$1.rtt=a;return this};a.prototype.setStreamID=function(a){this.$1.stream_id=a;return this};a.prototype.setStreamType=function(a){this.$1.stream_type=a;return this};a.prototype.setTimeElapsed=function(a){this.$1.time_elapsed=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={bytes:!0,call_id:!0,call_type:!0,conference_name:!0,frame_height:!0,frame_width:!0,frames:!0,frames_per_second:!0,is_local:!0,jitter:!0,jitter_buffer_delay:!0,packets:!0,packets_lost:!0,qp_sum:!0,rtt:!0,stream_id:!0,stream_type:!0,time_elapsed:!0,vc:!0};e.exports=a}),null);
__d("RtcExpressionWWWTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RtcExpressionWWWLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RtcExpressionWWWLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RtcExpressionWWWLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAuthFlag=function(a){this.$1.auth_flag=a;return this};a.prototype.setBundleID=function(a){this.$1.bundle_id=a;return this};a.prototype.setCallID=function(a){this.$1.call_id=a;return this};a.prototype.setConferenceName=function(a){this.$1.conference_name=a;return this};a.prototype.setOsBuildNumber=function(a){this.$1.os_build_number=a;return this};a.prototype.setPeerID=function(a){this.$1.peer_id=a;return this};a.prototype.setRadioType=function(a){this.$1.radio_type=a;return this};a.prototype.setRawClientTime=function(a){this.$1.raw_client_time=a;return this};a.prototype.setRtcExpressionAction=function(a){this.$1.rtc_expression_action=a;return this};a.prototype.setRtcExpressionDuration=function(a){this.$1.rtc_expression_duration=a;return this};a.prototype.setRtcExpressionID=function(a){this.$1.rtc_expression_id=a;return this};a.prototype.setRtcExpressionIntent=function(a){this.$1.rtc_expression_intent=a;return this};a.prototype.setRtcExpressionName=function(a){this.$1.rtc_expression_name=a;return this};a.prototype.setRtcExpressionParticipantCount=function(a){this.$1.rtc_expression_participant_count=a;return this};a.prototype.setRtcExpressionType=function(a){this.$1.rtc_expression_type=a;return this};a.prototype.setSamplingFrequency=function(a){this.$1.sampling_frequency=a;return this};c={auth_flag:!0,bundle_id:!0,call_id:!0,conference_name:!0,os_build_number:!0,peer_id:!0,radio_type:!0,raw_client_time:!0,rtc_expression_action:!0,rtc_expression_duration:!0,rtc_expression_id:!0,rtc_expression_intent:!0,rtc_expression_name:!0,rtc_expression_participant_count:!0,rtc_expression_type:!0,sampling_frequency:!0};e.exports=a}),null);
__d("FBRTCIceStatsParser",[],(function(a,b,c,d,e,f){__p&&__p();var g=null;h.getInstance=function(){"use strict";g||(g=new h());return g};h.prototype.extractIceInfo=function(a){"use strict";var b=[];a=a.split("\r\n");for(var c=0;c<a.length;c++){var d=a[c];this.$1(d)&&b.push({gen:this.$2(d),type:this.$3(d)})}return b};h.prototype.$1=function(a){"use strict";return a.indexOf("candidate:")>-1};h.prototype.$2=function(a){"use strict";var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b};h.prototype.$3=function(a){"use strict";a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"};function h(){"use strict"}e.exports=h}),null);
__d("FBRTCLocalUploadLogLevel",["CurrentUser","FBRTCConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("FBRTCConstants").UploadLogLevel,h={getUploadLogLevel:function(a){return Math.max(h.getLocalUploadLogLevel(),a)},getLocalUploadLogLevel:function(){return b("CurrentUser").isEmployee()?g.LL_DEBUG:g.LL_NONE}};e.exports=h}),null);
__d("FBRTCMediaMetricTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={min:-1,max:-1,mean:-1,median:-1,total:-1,count:0};function h(){this.$1={},this.$2={},this.$3={}}h.prototype.getVideoStreamReportKeys=function(){return Object.keys(this.$3)};h.prototype.getJitterStreamReportKey=function(){return Object.keys(this.$1)};h.prototype.getAudioStreamReportKeys=function(){return Object.keys(this.$2)};h.prototype.addJitterBufferDelay=function(a,b){b!==null&&b!==undefined&&(this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b))};h.prototype.setVideoMetric=function(a,c,d){d!==null&&d!==undefined&&(this.$3[a]||(this.$3[a]={}),!this.$3[a][c]?this.$3[a][c]={first:d,startedTime:b("performanceNow")(),current:d,updatedTime:b("performanceNow")()}:(this.$3[a][c].current=d,this.$3[a][c].updatedTime=b("performanceNow")()))};h.prototype.getVideoMetric=function(a,b){return this.$3[a]?this.$3[a][b]:null};h.prototype.addMetricStat=function(a,b,c){c!==null&&c!==undefined&&(this.$2[a]||(this.$2[a]={}),!this.$2[a][b]?this.$2[a][b]={min:c,max:c,total:c,count:1,mean:c}:(this.$2[a][b].total+=c,this.$2[a][b].count+=1,this.$2[a][b].min=Math.min(this.$2[a][b].min,c),this.$2[a][b].max=Math.max(this.$2[a][b].max,c),this.$2[a][b].mean=this.$2[a][b].total/this.$2[a][b].count))};h.prototype.getMetricKeys=function(a){return!this.$2[a]?[]:Object.keys(this.$2[a])};h.prototype.getMetricStats=function(a,b){return!this.$2[a]?null:this.$2[a][b]};h.prototype.getJitterBufferStats=function(a){__p&&__p();if(!this.$1[a])return g;var b=this.$1[a].length;if(b===0)return g;this.$1[a].sort(function(a,b){return a-b});var c=this.$1[a].reduce(function(a,b){return a+b});if(b%2===0){var d=Math.floor((b-1)/2),e=Math.ceil((b-1)/2);d=(this.$1[a][d]+this.$1[a][e])/2}else d=this.$1[a][(b-1)/2];return{max:this.$1[a][b-1],min:this.$1[a][0],mean:c/b,median:d,total:c,count:b}};h.prototype.toJsonString=function(){return JSON.stringify({stats:this.$2,jitterBufferDelays:this.$1,videoMetric:this.$3})};h.fromJsonString=function(a){var b=new h();try{a=JSON.parse(a),a=a}catch(a){return b}a.stats&&(b.$2=a.stats);a.jitterBufferDelays&&(b.$1=a.jitterBufferDelays);a.videoMetric&&(b.$3=a.videoMetric);return b};e.exports=h}),null);
__d("FBRTCMediaMetricsConst",[],(function(a,b,c,d,e,f){"use strict";a={JITTER:"jitter",ACCELERATE_RATE:"accelerate_rate",DISCARD_RATE:"discard_rate",EXPAND_RATE:"expand_rate",PREEMPTIVE_RATE:"preemptive_rate",VIDEO_BYTES_RECEIVED:"video_bytes_received",VIDEO_BYTES_SENT:"video_bytes_sent",INBOUND_QP:"inbound_qp",OUTBOUND_QP:"outbound_qp",FRAMES_ENCODED:"frames_encoded",FRAMES_DECODED:"frames_decoded"};e.exports=a}),null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCIceStatsParser","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCMediaMetricsConst","FBRTCMediaMetricTracker","SiteData","UserAgentData","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g=5*60*1e3,h={CALL_STARTED:"started",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended",SENT_JOIN_REQUEST:"s_jreq",RECV_JOIN_RESPONSE:"r_jresp",PROC_JOIN_RESPONSE:"p_jresp",RECV_RING_REQUEST:"r_rreq",SENT_RING_RESPONSE:"s_rresp"},i={FELLBACK_TO_AUDIO:"f_a",MEDIA_REQUESTED:"m_r",MEDIA_SUCCEEDED:"m_s",POPUP_OPENED:"opened",PRESSED_ANSWER:"p_a"},j={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"},k={ESCALATION_INITIATION_BUTTON_CLICKED:"esc_init_button",ESCALATION_APPROVED_BUTTON_CLICKED:"esc_appr_button",ESCALATION_DECLINED_BUTTON_CLICKED:"esc_decl_button",USERMEDIA_REQUEST:"media_req",USERMEDIA_SUCCESS:"media_success",USERMEDIA_FAILURE:"media_fail",SENT_ESC_REQUEST:"s_esc_req",RECV_ESC_REQUEST:"r_esc_req",SENT_ESC_REQUEST_ACK:"s_esc_req_ack",RECV_ESC_REQUEST_ACK:"s_esc_req_ack",SENT_ESC_RESPONSE:"s_esc_rep",RECV_ESC_ACCEPT:"r_esc_accept",RECV_ESC_DECLINE:"r_esc_decl",RECV_ESC_TIMEOUT:"r_esc_timeout"};l.nullSummary=function(){"use strict";return new l({peerID:"0",callID:"0",isCaller:!1,callTrigger:"NULL_SUMMARY"})};function l(a){"use strict";this.peerID=String(a.peerID),this.callID=String(a.callID),this.$1=a.isCaller,this.$2=b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel(),this.$13=new Date().valueOf(),this.$3=a.callTrigger||null,this.$4={},this.$6={},this.$7={},this.$12={},this.$35=null,this.$36=null,this.$37=null,this.$15=0,this.$16=0,this.$34=!1,this.$23={},this.$24={},this.$8={},this.$9={},this.$10={},this.$11={},this.$25=null,this.$18=b("performanceNow")(),this.$14=0,this.$5={},this.$17=this.$18,this.$19=0,this.$20={},this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_INFO,this.$39()),this.$40(),this.$22=b("FBRTCIceStatsParser").getInstance(),this.$38=new(b("FBRTCMediaMetricTracker"))(),this.$21=b("FBRTCLogger").getInstance()}l.prototype.toJsonString=function(){"use strict";this.$16=new Date().valueOf();return JSON.stringify({version:l.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$1,uploadLogLevel:this.$2,clientVersion:this.$25,callType:this.$30,conferenceName:this.$27,joinWithSID:this.$28,activeConn:this.$26,escP2PCallID:this.$29,serverInfoData:this.$31,localVideoDuration:this.$32,remoteVideoDuration:this.$33,startTime:this.$13,trigger:this.$3,signalingTime:this.$4,escStateTimes:this.$6,applicationEventTime:this.$7,videoEscTimes:this.$12,endCallReason:this.$35,endCallSubreason:this.$36,isRemoteEnded:this.$37,lastUpdatedTime:this.$15,lastSerializedTime:this.$16,unsetOnRetrieve:this.$34,openCount:this.$19,extraInfo:this.$20,pcStats:this.$23,captureStats:this.$24,gen0IceSentCount:this.$8,gen0IceReceivedCount:this.$9,iceSentCount:this.$10,iceReceivedCount:this.$11,mediaMetricStats:this.$38.toJsonString(),newSignalingTime:this.$5,accumulatedCallTime:this.$41()})};l.fromJsonString=function(a){"use strict";__p&&__p();try{a=JSON.parse(a)}catch(a){return null}if(a.version!==l.CURRENT_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(a,"peerID")||!Object.prototype.hasOwnProperty.call(a,"callID")||!Object.prototype.hasOwnProperty.call(a,"isCaller")||!Object.prototype.hasOwnProperty.call(a,"startTime")||!Object.prototype.hasOwnProperty.call(a,"trigger")||!Object.prototype.hasOwnProperty.call(a,"signalingTime")||!Object.prototype.hasOwnProperty.call(a,"endCallReason")||!Object.prototype.hasOwnProperty.call(a,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(a,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(a,"lastSerializedTime"))return null;var c=new l({peerID:a.peerID,callID:a.callID,isCaller:a.isCaller});c.$2=a.uploadLogLevel;c.$25=a.clientVersion;c.$13=a.startTime;c.$3=a.trigger;c.$4=a.signalingTime;c.$35=a.endCallReason;c.$36=a.endCallSubreason;c.$37=a.isRemoteEnded;c.$15=a.lastUpdatedTime;c.$16=a.lastSerializedTime;c.$28=a.joinWithSID;a.callType&&(c.$30=a.callType);a.conferenceName&&(c.$27=a.conferenceName);a.escP2PCallID&&(c.$29=a.escP2PCallID);a.activeConn&&(c.$26=a.activeConn);a.serverInfoData&&(c.$31=a.serverInfoData);a.localVideoDuration&&(c.$32=a.localVideoDuration);a.remoteVideoDuration&&(c.$33=a.remoteVideoDuration);a.unsetOnRetrieve&&(c.$34=a.unsetOnRetrieve);a.openCount&&(c.$19=a.openCount);a.extraInfo&&(c.$20=a.extraInfo);a.pcStats&&(c.$23=a.pcStats);a.captureStats&&(c.$24=a.captureStats);a.gen0IceSentCount&&(c.$8=a.gen0IceSentCount);a.gen0IceReceivedCount&&(c.$9=a.gen0IceReceivedCount);a.iceSentCount&&(c.$10=a.iceSentCount);a.iceReceivedCount&&(c.$11=a.iceReceivedCount);a.newSignalingTime&&(c.$5=a.newSignalingTime);a.accumulatedCallTime&&(c.$14=a.accumulatedCallTime);a.escStateTimes&&(c.$6=a.escStateTimes);a.applicationEventTime&&(c.$7=a.applicationEventTime);a.videoEscTimes&&(c.$12=a.videoEscTimes);a.mediaMetricStats&&(c.$38=b("FBRTCMediaMetricTracker").fromJsonString(a.mediaMetricStats));return c};l.restoreOrInitialize=function(a,c,d,e,f,g){"use strict";c=String(c);d=String(d);a=a.retrieveCallSummary(c,d);!a?(a=new l({peerID:c,callID:d,isCaller:e}),f?(a.onFullMessageReceived({msg:f}),a.onOfferAckSent(f)):a.onCallStarted(g||b("FBRTCLogger").Trigger.UNKNOWN),b("FBRTCLogger").getInstance().logError(c,d,"Missing call summary from storage")):a.$34&&(a.$35=null,a.$36=null,a.$37=null,delete a.$4[h.CALL_ENDED],delete a.$5[h.CALL_ENDED],a.$34=null);return a};l.logSavedSummaries=function(a){"use strict";__p&&__p();var c=a.getLoggableSummaries(),d=c.length;if(d<=0)return;var e=b("FBRTCLogger").getInstance(),f=[];for(var g=0;g<d;g++){var h=c[g];e.logEndCallSummary(h);f.push({peerID:h.peerID,callID:h.callID})}a.removeCallSummaries(f);e.logToConsole("Logged pending summaries: "+d)};l.prototype.isNull=function(){"use strict";var a=l.CANONICAL_NULL_SUMMARY;return this.peerID===a.peerID&&this.callID===a.callID&&this.isCaller()===a.isCaller()&&this.getCallTrigger()===a.getCallTrigger()};l.prototype.save=function(a){"use strict";var c=b("performanceNow")(),d=c-this.$17;if(d>g){this.$21.logInfo(this.peerID,this.callID,"Summary too old: "+d);return}a.storeCallSummary(this.peerID,this.callID,this);this.$17=c};l.prototype.getLastUpdatedTime=function(){"use strict";return this.$15};l.prototype.setLastUpdatedTime=function(a){"use strict";this.$15=a};l.prototype.getExtraInfo=function(){"use strict";return this.$20};l.prototype.getCallTrigger=function(){"use strict";return this.$3};l.prototype.addExtraInfo=function(a,b){"use strict";this.$20[a]=b,this.$40()};l.prototype.isCaller=function(){"use strict";return this.$1};l.prototype.isNetworkReady=function(){"use strict";if(this.$4[h.NETWORK_READY])return!0;else return!1};l.prototype.isAnswerReceived=function(){"use strict";if(this.$4[h.RECV_ANSWER])return!0;else return!1};l.prototype.onCallStarted=function(a){"use strict";this.$3=a,this.$42(h.CALL_STARTED),this.$40()};l.prototype.setCallTrigger=function(a){"use strict";this.$3=a,this.$40()};l.prototype.onPopupOpened=function(){"use strict";this.$43(i.POPUP_OPENED),this.$19++,this.$40()};l.prototype.onPressedAnswer=function(){"use strict";this.$43(i.PRESSED_ANSWER),this.$40()};l.prototype.onMediaRequested=function(){"use strict";this.$43(i.MEDIA_REQUESTED),this.$40()};l.prototype.onMediaSucceeded=function(){"use strict";this.$43(i.MEDIA_SUCCEEDED),this.$40()};l.prototype.onFellbackToAudio=function(){"use strict";this.$43(i.FELLBACK_TO_AUDIO),this.$40()};l.prototype.setPcStats=function(a){"use strict";this.$23=a,this.$40()};l.prototype.setVideoCaptureStats=function(a,b){"use strict";this.$24={w:a,h:b},this.$40()};l.prototype.setUploadLogLevel=function(a){"use strict";this.$2=a,this.$40()};l.prototype.getCallType=function(){"use strict";return this.$30};l.prototype.setCallType=function(a){"use strict";this.$30=a,this.addExtraInfo("call_type",a),this.$40()};l.prototype.setVideoDurations=function(a,b){"use strict";this.$32=a,this.$33=b,this.$40()};l.prototype.setScreenDuration=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.SCREEN_DURATION,a)};l.prototype.setConferenceName=function(a){"use strict";this.$27=a,this.$40()};l.prototype.setTotalVideoFilterDuration=function(a){"use strict";this.addExtraInfo("rtc_video_duration_with_filter_enabled",Math.ceil(a).toString())};l.prototype.setCoExperienceEffectDuration=function(a){"use strict";this.addExtraInfo("rtc_effect_total_duration",Math.ceil(a).toString())};l.prototype.setEffectCount=function(a){"use strict";this.addExtraInfo("rtc_effect_count",a.toString())};l.prototype.setJoinWithSID=function(a){"use strict";this.$28=a,this.$40()};l.prototype.setServerInfoData=function(a){"use strict";this.$31=a,this.$40()};l.prototype.setActiveConnection=function(a){"use strict";this.$26=a,this.$40()};l.prototype.setEscalationP2PCallID=function(a){"use strict";this.$29=a,this.$40()};l.prototype.onOfferAckSent=function(a){"use strict";this.onMessageSent({type:b("FBRTCConstants").PayloadType.OFFER_ACK,flag:a.flag})};l.prototype.onMessageSent=function(a){"use strict";__p&&__p();var c=a.flag===1;switch(a.type){case b("FBRTCConstants").PayloadType.OFFER:this.$44(c,h.SENT_OFFER,h.SENT_RETRIED_OFFER);this.$45(a,this.$8,this.$10);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$44(c,h.SENT_ANSWER,h.SENT_RETRIED_ANSWER);this.$45(a,this.$8,this.$10);break;case b("FBRTCConstants").PayloadType.OK:this.$42(h.SENT_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$42(h.SENT_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$44(c,h.SENT_OFFER_ACK,h.SENT_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$44(c,h.SENT_ANSWER_ACK,h.SENT_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$45(a,this.$8,this.$10);break;case b("FBRTCConstants").PayloadType.ACK:a.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$46(k.SENT_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:a.ack_id?this.$46(k.SENT_ESC_RESPONSE):this.$46(k.SENT_ESC_REQUEST);break;default:}this.$40()};l.prototype.$45=function(a,b,c){"use strict";var d,e=null;a=this.$22.extractIceInfo(a.sdp);for(var f=0;f<a.length;f++)d=a[f].gen,e=a[f].type,d===0&&this.$47(b,e),this.$47(c,e)};l.prototype.$47=function(a,b){"use strict";!a[b]?a[b]=1:a[b]=a[b]+1};l.prototype.$48=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.PEER_IS_MOBILE,a.isFromMobile()?"1":"0")};l.prototype.onFullMessageReceived=function(a){"use strict";__p&&__p();var c=a.msg,d=c.flag===1;switch(c.type){case b("FBRTCConstants").PayloadType.OFFER:this.$48(a);this.$44(d,h.RECV_OFFER,h.RECV_RETRIED_OFFER);this.$45(c,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$48(a);this.$44(d,h.RECV_ANSWER,h.RECV_RETRIED_ANSWER);this.$45(c,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.OK:this.$42(h.RECV_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$42(h.RECV_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$44(d,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$44(d,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$45(c,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ACK:c.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$46(k.RECV_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:c.ack_id?c.videoon||c.reqVideoOn?this.$46(k.RECV_ESC_ACCEPT):this.$46(k.RECV_ESC_DECLINE):c.videoon||c.reqVideoOn?this.$46(k.RECV_ESC_REQUEST):this.$46(k.RECV_ESC_TIMEOUT);default:}this.$40()};l.prototype.onMsgAckReceived=function(a,b){"use strict";a=a.msg.flag===1;b?this.$44(a,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK):this.$44(a,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK)};l.prototype.onNetworkReady=function(){"use strict";this.$42(h.NETWORK_READY),this.$40()};l.prototype.onCallConnected=function(){"use strict";this.$42(h.CALL_CONNECTED),this.$40()};l.prototype.onCallEnded=function(a,b,c,d){"use strict";this.$34=c,this.$35=String(a),this.$36=d,this.$37=b,this.$42(h.CALL_ENDED),this.$40()};l.prototype.setOfferSentTime=function(){"use strict";this.$42(h.SENT_OFFER)};l.prototype.setOfferAckReceivedTime=function(){"use strict";this.$42(h.RECV_OFFER_ACK)};l.prototype.setAnswerSentTime=function(){"use strict";this.$42(h.SENT_ANSWER)};l.prototype.setAnswerReceivedTime=function(){"use strict";this.$42(h.RECV_ANSWER)};l.prototype.setJoinRequestSent=function(){"use strict";this.$42(h.SENT_JOIN_REQUEST),this.$40()};l.prototype.setJoinResponseReceived=function(){"use strict";this.$42(h.RECV_JOIN_RESPONSE),this.$40()};l.prototype.setJoinResponseProcessed=function(){"use strict";this.$42(h.PROC_JOIN_RESPONSE),this.$40()};l.prototype.setRingRequestReceived=function(){"use strict";this.$42(h.RECV_RING_REQUEST),this.$40()};l.prototype.setRingResponseSent=function(){"use strict";this.$42(h.SENT_RING_RESPONSE),this.$40()};l.prototype.setEscalationAvailable=function(){"use strict";this.$49(j.ESCALATION_IS_AVAILABLE)};l.prototype.setEscalationInitiated=function(){"use strict";this.$49(j.USER_INITIATED_REQUEST)};l.prototype.setReceivedEscalationRequest=function(){"use strict";this.$49(j.RECEIVED_INCOMING_REQUEST)};l.prototype.setInvalidP2PEscalationState=function(){"use strict";this.$49(j.REJECTED_INVALID_P2P_STATE)};l.prototype.setEscalationConnectingToMultiway=function(){"use strict";this.$49(j.CONNECTING_TO_MULTIWAY)};l.prototype.setEscalationConnectedToMultiway=function(){"use strict";this.$49(j.CONNECTED_TO_MULTIWAY)};l.prototype.setEscalationPeerConnectingToMultiway=function(){"use strict";this.$49(j.PEER_CONNECTING_TO_MULTIWAY)};l.prototype.setEscalationPeerConnectedToMultiway=function(){"use strict";this.$49(j.PEER_CONNECTED_TO_MULTIWAY)};l.prototype.setReadyToEscalate=function(){"use strict";this.$49(j.READY_TO_ESCALATE)};l.prototype.setEscalationPeerFailedToConnectToMultiway=function(){"use strict";this.$49(j.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};l.prototype.setEscalationTimedOut=function(){"use strict";this.$49(j.TIMED_OUT)};l.prototype.setVidEscalationInitClick=function(){"use strict";this.$46(k.ESCALATION_INITIATION_BUTTON_CLICKED)};l.prototype.setVidEscalationAcceptedClick=function(){"use strict";this.$46(k.ESCALATION_APPROVED_BUTTON_CLICKED)};l.prototype.setVidEscalationDeclinedClick=function(){"use strict";this.$46(k.ESCALATION_DECLINED_BUTTON_CLICKED)};l.prototype.setVidEscalationMediaRequested=function(){"use strict";this.$46(k.USERMEDIA_REQUEST)};l.prototype.setVidEscalationMediaSuccess=function(){"use strict";this.$46(k.USERMEDIA_SUCCESS)};l.prototype.setVidEscalationMediaFailed=function(){"use strict";this.$46(k.USERMEDIA_FAILURE)};l.prototype.toString=function(){"use strict";var a={};a.core_metrics=this.$50();a.time_series=null;return JSON.stringify(a)};l.prototype.$50=function(){"use strict";__p&&__p();var a={};a.ver=l.CURRENT_SUMMARY_VERSION;a.log_level=b("FBRTCConstants").uploadLogLevelString(this.$2);a.caller=this.$1;a.call_type=this.$30;a.active_conn=this.$26;a.app_event_times=this.$7;a.conf_name=this.$27;a.join_with_sid=this.$28;a.esc_p2p_call_id=this.$29;a.esc_state_times=this.$6;a.vid_esc_times=this.$12;a.serv_info=this.$31;a.conn=this.$51();a.peer_id=this.peerID;a.has_video=!0;a.open_count=this.$19;a.signaling=this.$52();a.sender=this.$53();a.receiver=this.$54();a.end=this.$55();a.video=this.$56();a.push_phase=b("SiteData").push_phase;a.client_version=this.$25;a.DebugAudioMetrics=this.$57();return a};l.prototype.$57=function(){"use strict";return{NetworkReceive:{jb_nm:this.$58()}}};l.prototype.$58=function(){"use strict";var a={},b=this.$38.getAudioStreamReportKeys().pop(),c=this.$38.getMetricKeys(b);c.forEach(function(c){var d=this.$38.getMetricStats(b,c);d&&(a[c]={m:d.min,M:d.max,avg:d.mean})}.bind(this));c=this.$38.getJitterBufferStats(b);a.neteq={maxWait:c.max,meanWait:c.mean||0,mediaWait:c.median||0,minWait:c.min};return a};l.prototype.$51=function(){"use strict";var a={dtls:1};this.$23.sender&&this.$23.sender.rtt&&(a.rtt=this.$23.sender.rtt);return a};l.prototype.$52=function(){"use strict";__p&&__p();var a={};this.$3&&(a.trigger=this.$3);a.start_time=this.$13;a.time_from_start=this.$4;a.new_time_from_start=this.$5;var b=this.$5[h.CALL_CONNECTED]||this.$5[h.NETWORK_READY],c=this.$5[h.CALL_ENDED];if(b){c||(this.$14>0?c=this.$14:c=this.$41());c=c-b;c>0&&(a.duration=c)}return a};l.prototype.$53=function(){"use strict";var a={};this.$8&&(a.ice_g0=this.$8);this.$10&&(a.ice=this.$10);this.$23.sender&&Object.assign(a,this.$23.sender);return a};l.prototype.$54=function(){"use strict";var a={};this.$9&&(a.ice_g0=this.$9);this.$11&&(a.ice=this.$11);return a};l.prototype.$55=function(){"use strict";var a={};this.$35!==null&&(a.end_call_reason_string=b("FBRTCConstants").callEndReasonString(this.$35),this.$36!==null&&(a.end_call_subreason_string=this.$36),a.remote_ended=this.$37);this.$23.end&&Object.assign(a,this.$23.end);return a};l.prototype.$56=function(){"use strict";var a={capture:{},eqp:this.$59()};this.$23.video&&this.$23.video.sender&&Object.assign(a,this.$23.video.sender);this.$24&&Object.assign(a.capture,this.$24);return{sender:a,receiver:this.$60(),ld:this.$32,rd:this.$33,bwe:{avg_enc_bitrate:this.$61()}}};l.prototype.$61=function(){"use strict";__p&&__p();var a=this.$38.getVideoStreamReportKeys(),c=null;a.some(function(a){a=this.$38.getVideoMetric(a,b("FBRTCMediaMetricsConst").VIDEO_BYTES_SENT);if(a){var d=a.current-a.first;a=a.updatedTime-a.startedTime;a>0&&(c=d*8/a*1e3);return!0}return!1}.bind(this));return c};l.prototype.$59=function(){"use strict";__p&&__p();var a=this.$38.getVideoStreamReportKeys(),c=null;a.some(function(a){var d=this.$38.getVideoMetric(a,b("FBRTCMediaMetricsConst").OUTBOUND_QP);a=this.$38.getVideoMetric(a,b("FBRTCMediaMetricsConst").FRAMES_ENCODED);if(d&&a){c=d.current/a.current;return!0}return!1}.bind(this));return c};l.prototype.$62=function(){"use strict";__p&&__p();var a=this.$38.getVideoStreamReportKeys(),c=null;a.some(function(a){var d=this.$38.getVideoMetric(a,b("FBRTCMediaMetricsConst").INBOUND_QP);a=this.$38.getVideoMetric(a,b("FBRTCMediaMetricsConst").FRAMES_DECODED);if(d&&a){c=d.current/a.current;return!0}return!1}.bind(this));return c};l.prototype.$60=function(){"use strict";__p&&__p();var a={inboundEQp:this.$62(),dec_bytes:null,dec_time:null},c=this.$38.getVideoStreamReportKeys();c.some(function(c){c=this.$38.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED);if(c){a.dec_bytes=c.current-c.first;a.dec_time=c.updatedTime-c.startedTime;return!0}return!1}.bind(this));return a};l.prototype.$63=function(){"use strict";return new Date().valueOf()-this.$13};l.prototype.$41=function(){"use strict";var a=b("performanceNow")()-this.$18;return Math.floor(this.$14+a)};l.prototype.$42=function(a){"use strict";if(this.$4[a])return;this.$4[a]=this.$63();this.$5[a]=this.$41()};l.prototype.$49=function(a){"use strict";if(this.$6[a])return;this.$6[a]=this.$63()};l.prototype.$43=function(event){"use strict";if(this.$7[event])return;this.$7[event]=this.$63()};l.prototype.$46=function(event){"use strict";if(this.$12[event])return;this.$12[event]=this.$63()};l.prototype.$44=function(a,b,c){"use strict";a?this.$42(c):this.$42(b)};l.prototype.$40=function(){"use strict";this.$15=new Date().valueOf()};l.prototype.$39=function(){"use strict";return{device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth}};l.prototype.setClientVersion=function(a){"use strict";this.$25=a};l.prototype.getCallDuration=function(){"use strict";var a=this.$52();return a.duration?a.duration:0};l.prototype.getConnectedStartTime=function(){"use strict";return this.$4[h.CALL_CONNECTED]?this.$4[h.CALL_CONNECTED]+this.$13:0};l.prototype.getMediaMetricTracker=function(){"use strict";return this.$38};l.CANONICAL_NULL_SUMMARY=Object.freeze(l.nullSummary());l.CURRENT_SUMMARY_VERSION=19;l.REPORT_KEY="reportID";e.exports=l}),null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBLogger","FBRTCCallSummary","FBRTCLogger","areEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="localstorage",h="RTC_CALL_SUMMARY_",i="summary",j=2e3,k=3,l=3*60*1e3,m=null;n.getInstance=function(){m||(m=new n());return m};function n(){this.$1=new(b("CacheStorage"))(g,h),this.$2=b("FBRTCLogger").getInstance()}n.prototype.storeCallSummary=function(a,c,d){__p&&__p();if(d.isNull()){b("FBLogger")("rtweb").mustfix("Storing invalid FBRTCCallSummary!");return}var e=this;this.$3(function(b){__p&&__p();b[a]||(b[a]={});var f=b[a][c];if(f){f=e.$4(f);if(f&&f.getLastUpdatedTime()>d.getLastUpdatedTime()){e.$2.logToConsole("Outdated summaries");return null}}b[a][c]=e.$5(d);return b},e.$2.logError.bind(e.$2,a,c))};n.prototype.retrieveCallSummary=function(a,b){var c=this.$6(),d=null;c[a]&&(d=c[a][b]);if(d)return this.$4(d);else return null};n.prototype.removeCallSummary=function(a,b){this.removeCallSummaries([{peerID:a,callID:b}])};n.prototype.removeCallSummaries=function(a){this.$3(function(b){var c=a.length;for(var d=0;d<c;d++){var e=a[d].peerID,f=a[d].callID;b[e]&&b[e][f]&&(delete b[e][f],this.$7(b[e])&&delete b[e])}return b}.bind(this),this.$2.logError.bind(this.$2,null,null))};n.prototype.getLoggableSummaries=function(){var a=this.$6(),b=[];for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))for(var d in a[c])if(Object.prototype.hasOwnProperty.call(a[c],d)){var e=this.$4(a[c][d],l);e&&b.push(e)}return b};n.prototype.$7=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0};n.prototype.$5=function(a){a={__t:Date.now(),__d:a.toJsonString()};return a};n.prototype.$4=function(a,c){return a&&(!c||Date.now()-a.__t>=c)?b("FBRTCCallSummary").fromJsonString(a.__d):null};n.prototype.$6=function(){var a=this.$1.get(i)||{};return a};n.prototype.$3=function(a,c,d,e){__p&&__p();d===void 0&&(d=k);(d===undefined||d===null)&&(d=k);var f=this.$6(),g=this.$6();f=a(f);if(f===null)return;var h=this.$6();if(b("areEqual")(g,h))this.$1.set(i,f);else if(d>0){c("Retry lock");if(e){var l=this;setTimeout(function(){l.$3(a,c,d-1,!0)},j)}else this.$3(a,c,d-1,!0)}else c("Failed to lock")};e.exports=n}),null);
__d("RTCAppDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationDispatcher"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!0})}),null);
__d("RTCEndCallReason",["fbt","FBRTCConstants","FBRTCDismissReason","FBRTCHangupReason","FBRTCRtcResponseStatusCode"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").CallEndReason,i=b("FBRTCConstants").CollabCallEndSubreason;function j(a){this.$1=-1,this.$3="local",typeof a==="string"||a instanceof String?this.$1=h.strNames.indexOf(a):this.$1=a}j.prototype.setSubreason=function(a){this.$2=a;return this};j.prototype.getSubreason=function(){return this.$2};j.prototype.setRemoteEnded=function(a){this.$3=a?"remote":"local";return this};j.prototype.getRemoteEnded=function(){return this.$3==="remote"};j.prototype.toStrName=function(a){a===void 0&&(a=!0);return a?this.$4()+"_"+this.$3:this.$4()};j.prototype.$4=function(){return this.$1<0||this.$1>h.strNames.length?"Unknown":h.strNames[this.$1]};j.prototype.getReasonID=function(){return this.$1};j.prototype.toString=function(a){a===void 0&&(a=!1);var b=(this.$5()||"").toString();return a?b+" "+this.$6():b};j.prototype.$5=function(){__p&&__p();switch(this.$1){case h.NO_ANSWER_TIMEOUT:case h.IGNORE_CALL:return g._("No Answer");case h.OTHER_NOT_CAPABLE:if(this.$2===i.MCU_INVALID_STREAM_CONFIGURATION)return g._("Too many clients connected to the room");case h.INCOMING_TIMEOUT:case h.NO_PERMISSION:case h.OTHER_CARRIER_BLOCKED:return g._("Not Reachable");case h.SIGNALING_MESSAGE_FAILED:case h.WEBRTC_ERROR:case h.NO_UI_ERROR:case h.CALLER_NOT_VISIBLE:case h.CLIENT_ERROR:return g._("Call Failed");case h.UNSUPPORTED_VERSION:return g._("Can't Connect Call");case h.IN_ANOTHER_CALL:return g._("In Another Call");case h.CARRIER_BLOCKED:return g._("Switch to Wi-Fi to complete your call");case h.CLIENT_INTERRUPTED:return g._("Call Interrupted");case h.HANGUP_CALL:case h.ACCEPT_AFTER_HANGUP:return g._("Call Ended");case h.CONNECTION_DROPPED:return g._("Connection Lost");case h.OTHER_INSTANCE_HANDLED:return null;case h.CLIENT_ENCRYPTION_ERROR:return g._("Client Encryption Error");case h.INACTIVE_TIMEOUT:return g._("Call is Inactive");default:return null}};j.prototype.$6=function(){__p&&__p();if(this.$1!==h.OTHER_NOT_CAPABLE&&this.$1!==h.SIGNALING_MESSAGE_FAILED)return"";switch(this.$2){case i.REMOTE_PEER_HANGUP:case i.REMOTE_PEER_REJECT:return"";case i.CLOSED_BY_MCU:return"- Call expired";case i.CLOSED_AS_STALE:return"- Server failed, call is stale";case i.CALL_INITIALIZATION_FAILED:return"- Call initialization to room failed";case i.SIP_CONNECTION_INITIALIZATION_FAILED:return"or No Answer";case i.LOST_MCU_CONNECTION:return"- MCU Media connection failed";case i.LOST_MCU_THRIFT_CONNECTION:return"- MCU infrastructure dropped connection";case i.LOST_SIP_ADAPTER_CONNECTION:return"- SIP infrastructure dropped connection";case i.MCU_NO_AUDIO_STREAM:return"- Invalid audio stream";case i.MCU_INVALID_STREAM_CONFIGURATION:return"- Invalid stream configuration";case i.UNKNOWN:default:return"- Unexpected call failure: "+(this.$2||"null")}};j.fromHangupReason=function(a){switch(a){case b("FBRTCHangupReason").IGNORE_CALL:return new j(h.IGNORE_CALL);case b("FBRTCHangupReason").NO_ANSWER_TIMEOUT:return new j(h.NO_ANSWER_TIMEOUT);case b("FBRTCHangupReason").HANGUP_CALL:return new j(h.HANGUP_CALL);case b("FBRTCHangupReason").CLIENT_ERROR:return new j(h.CLIENT_ERROR);case b("FBRTCHangupReason").IN_ANOTHER_CALL:return new j(h.IN_ANOTHER_CALL);case b("FBRTCHangupReason").CLIENT_INTERRUPTED:return new j(h.CLIENT_INTERRUPTED);default:return new j(h.HANGUP_CALL)}};j.fromDismissRequest=function(a){__p&&__p();if(!a)return new j(h.HANGUP_CALL);switch(a.reason){case b("FBRTCDismissReason").ANSWERED_ON_ANOTHER_DEVICE:case b("FBRTCDismissReason").REJECTED_ON_ANOTHER_DEVICE:return new j(h.OTHER_INSTANCE_HANDLED);case b("FBRTCDismissReason").CALL_ENDED:return new j(h.HANGUP_CALL);case b("FBRTCDismissReason").IN_ANOTHER_CALL:return new j(h.IN_ANOTHER_CALL);case b("FBRTCDismissReason").CONNECTION_DROPPED:return new j(h.CONNECTION_DROPPED);case b("FBRTCDismissReason").REMOVED_BY_PARTICIPANT:return new j(h.HANGUP_CALL);case b("FBRTCDismissReason").REJECTED_BY_CALLEE:return new j(h.IGNORE_CALL);case b("FBRTCDismissReason").INTERNAL_ERROR:return new j(h.SIGNALING_MESSAGE_FAILED);default:return new j(h.HANGUP_CALL)}};j.fromResponseStatusCode=function(a){switch(a){case b("FBRTCRtcResponseStatusCode").PRECONDITION_FAILURE:case b("FBRTCRtcResponseStatusCode").METHOD_NOT_ALLOWED:case b("FBRTCRtcResponseStatusCode").UNAUTHORIZED:return new j(h.NO_PERMISSION);case b("FBRTCRtcResponseStatusCode").SERVICE_UNAVAILABLE:return new j(h.SIGNALING_MESSAGE_FAILED);case b("FBRTCRtcResponseStatusCode").SERVER_INTERNAL_ERROR:case b("FBRTCRtcResponseStatusCode").BAD_REQUEST:case b("FBRTCRtcResponseStatusCode").BUSY_HERE:case b("FBRTCRtcResponseStatusCode").CONDITIONAL_REQUEST_FAILED:case b("FBRTCRtcResponseStatusCode").NOT_FOUND:return new j(h.CLIENT_ERROR);default:return new j(h.HANGUP_CALL)}};e.exports=j}),null);
__d("RTCMediaDevices",["invariant","Promise","RTCOnDeviceChangePoller"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=navigator.mediaDevices&&typeof navigator.mediaDevices.enumerateDevices==="function",i=window.MediaStreamTrack&&window.MediaStreamTrack.getSources==="function",j=1e3,k;a={addEventListener:function(a,c){if(a==="devicechange"&&b("RTCOnDeviceChangePoller").isNeeded()){k||(k=new(b("RTCOnDeviceChangePoller"))(j));k.add(c);return}var d=navigator;d=d.mediaDevices;d&&"addEventListener"in d&&d.addEventListener(a,c)},removeEventListener:function(a,c){if(a==="devicechange"&&b("RTCOnDeviceChangePoller").isNeeded()){k&&k.remove(c);return}var d=navigator;d=d.mediaDevices;d&&"removeEventListener"in d&&d.removeEventListener(a,c)},isSupported:function(a){switch(a){case"enumerateDevices":return h||i;default:return Boolean(navigator.mediaDevices)}},enumerateDevices:function(){if(h){navigator.mediaDevices||g(0);return b("Promise").resolve(navigator.mediaDevices.enumerateDevices())}else if(i)return new(b("Promise"))(function(a){return window.MediaStreamTrack.getSources(a)}).then(l);return b("Promise").reject(new Error("enumerateDevices() not supported"))},filterDevicesOfKind:function(a,b){return a.filter(function(a){return a.kind===b})}};function l(a){return a.map(function(a){var b=a.id,c=a.kind;a=a.label;return{deviceId:b,groupId:"",kind:c==="video"?"videoinput":"audioinput",label:a}})}e.exports=a}),null);
__d("RTCOnDeviceChangePoller",["Promise","FBRTCLogger","RTCMediaDevices"],(function(a,b,c,d,e,f){__p&&__p();a.isNeeded=function(){"use strict";var a=navigator;a=a.mediaDevices;return!b("RTCMediaDevices").isSupported("enumerateDevices")||a&&"ondevicechange"in a?!1:!0};function a(a){"use strict";__p&&__p();this.$1=[],this.$2="",this.$4=null,this.$7=function(){__p&&__p();b("RTCMediaDevices").enumerateDevices().then(function(a){__p&&__p();a=a.map(function(a){return a.deviceId+":"+a.label+":"+a.groupId}).sort().join("~");if(a===this.$2)return;this.$2=a;for(var a=this.$1,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;try{d()}catch(a){}}}.bind(this))["catch"](function(a){return b("Promise").resolve()}).then(function(){this.$4=setTimeout(this.$7,this.$3)}.bind(this))["catch"](function(a){})}.bind(this),this.$3=a}a.prototype.add=function(a){"use strict";this.$1.push(a),this.$5()};a.prototype.remove=function(a){"use strict";this.$1=this.$1.filter(function(b){return b!==a}),this.$6()};a.prototype.$5=function(){"use strict";if(this.$4!==null)return;this.$4=setTimeout(this.$7,0)};a.prototype.$6=function(){"use strict";if(this.$1.length>0)return;this.$4!==null&&(clearTimeout(this.$4),this.$4=null)};e.exports=a}),null);
__d("RTCUserRecord",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c=b("immutable").Record({FBID:"UNDEFINED",isMessengerUser:!1,isPartiesUser:!1,lastConnectedAt:0,meetingID:null,participantState:null,profilePictureUrl:null,profileUrl:null,roomLocation:null,screenStreams:b("immutable").Set(),streams:b("immutable").Set(),userName:"",userShortName:"",vanity:""});g=babelHelpers.inherits(a,c);g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RTCUser",["FBRTCParticipantCallState","RTCUserRecord","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(h,b("RTCUserRecord"));g&&g.prototype;h.prototype.clone=function(){return new h(this.toObject())};h.prototype.setParticipantState=function(a){return(!this.participantState||this.participantState.state!==b("FBRTCParticipantCallState").CONNECTED)&&a.state===b("FBRTCParticipantCallState").CONNECTED?this.set("participantState",a).set("lastConnectedAt",Date.now()):!this.participantState||this.participantState.state!==a.state?this.set("participantState",a):this};h.prototype.getParticipantState=function(){return this.participantState&&this.participantState.state};h.prototype.hasAudio=function(){return this.getAllStreamAudioTracks().some(function(a){return a.length>0})};h.prototype.hasVideo=function(){return this.streams.some(function(a){return a.getVideoTracks().length>0})};h.prototype.isAudioMuted=function(){return!this.hasAudio()?!0:this.getAllStreamAudioTracks().every(function(a){return this.areAllTracksMuted(a)}.bind(this))};h.prototype.isVideoMuted=function(){return!this.hasVideo()?!0:this.streams.every(function(a){return this.areAllTracksMuted(a.getVideoTracks())}.bind(this))};h.prototype.areAllTracksMuted=function(a){return!a.some(function(a){return a.enabled})};h.prototype.toggleMuteAudio=function(a){this.getAllStreamAudioTracks().forEach(function(a){return this.$RTCUser1(a)}.bind(this));return this.clone()};h.prototype.toggleMuteVideo=function(a){this.streams.forEach(function(b){return this.$RTCUser1(b.getVideoTracks(),a)}.bind(this));return this.clone()};h.prototype.getAllStreamAudioTracks=function(){return this.streams.concat(this.screenStreams).map(function(a){return a.getAudioTracks()})};h.prototype.hasStream=function(){return!this.streams.isEmpty()};h.prototype.addStream=function(a){return this.set("streams",this.streams.add(a))};h.prototype.removeStream=function(a){return this.set("streams",this.streams["delete"](a))};h.prototype.getStream=function(){return this.hasStream()?this.streams.first():null};h.prototype.replaceStream=function(a,b){return!this.streams.contains(a)?this:this.set("streams",this.streams["delete"](a).add(b))};h.prototype.removeAllStreams=function(){return this.set("streams",b("immutable").Set())};h.prototype.getScreenStream=function(){return this.screenStreams&&this.hasScreenStream()?this.screenStreams.first():null};h.prototype.hasScreenStream=function(){return!this.screenStreams.isEmpty()};h.prototype.addScreenStream=function(a){return this.set("screenStreams",this.screenStreams.add(a))};h.prototype.removeScreenStream=function(a){return this.set("screenStreams",this.screenStreams["delete"](a))};h.prototype.removeAllScreenStreams=function(){return this.set("screenStreams",b("immutable").Set())};h.prototype.replaceScreenStream=function(a,b){if(!this.screenStreams.contains(a))return this;return a===b?this:this.set("screenStreams",this.screenStreams.add(b)["delete"](a))};h.prototype.setRoomLocation=function(a){return this.set("roomLocation",a)};h.prototype.getRoomLocation=function(){return this.roomLocation};h.prototype.setMeetingID=function(a){return this.set("meetingID",a)};h.prototype.getMeetingID=function(){return this.meetingID};h.prototype.$RTCUser1=function(a,b){var c=b!=null?!b:this.areAllTracksMuted(a);a.forEach(function(a){return a.enabled=c})};function h(){g.apply(this,arguments)}e.exports=h}),null);
__d("RTCUserMediaConstraints",["FBRTCConstants","RTCConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("FBRTCConstants").RTCConstraints;var g=b("FBRTCConstants").VideoQuality,h={width:a.FHD_WIDTH,height:a.FHD_HEIGHT,frameRate:a.FRAME_RATE},i={width:a.HD_WIDTH,height:a.HD_HEIGHT,frameRate:a.FRAME_RATE},j={width:a.SD_WIDTH,height:a.SD_HEIGHT,frameRate:a.FRAME_RATE},k={width:a.LQ_WIDTH,height:a.LQ_HEIGHT,frameRate:a.LQ_FRAME_RATE},l={audio:function(a){return a?{deviceId:{exact:a}}:!0},video:function(a,c,d){d===void 0&&(d=b("RTCConfig").CollaborationCallQuality.videoToRoom);if(a===g.NO_VIDEO)return!1;c=c?{deviceId:{exact:c}}:null;if(a===g.CUSTOM_VIDEO)return babelHelpers["extends"]({},d,c);d=m(a);return babelHelpers["extends"]({width:n(d,"width"),height:n(d,"height"),frameRate:n(d,"frameRate",{frameRate:10})},c)},chromeMediaSource:function(a,b){a=a.video;a=l.chromify(a);if(typeof a!=="object")return{audio:!1,video:Boolean(a)};var c=a.mandatory;a=a.optional;a=a===void 0?[]:a;return{audio:!1,video:{mandatory:babelHelpers["extends"]({},c,{chromeMediaSource:"desktop",chromeMediaSourceId:b}),optional:[{googTemporalLayeredScreencast:!0}].concat(a)}}},chromify:function(a,b){__p&&__p();if(!a||typeof a!=="object")return Boolean(a);if(!r(a))return a;b=b?b.optionalConstraintsOnly:!1;var c=a.mandatory;c=c===void 0?{}:c;var d=a.optional;d=d===void 0?[]:d;var e=Object.entries(a);for(var f=0;f<e.length;f++){var g=e[f],h=g[0];g=g[1];if(h==="require"||h==="advanced"||h==="mediaSource")continue;g=g&&typeof g==="object"?g:{ideal:g};Number.isFinite(g.exact)&&(g.min=g.exact,g.max=g.exact);var i=g.ideal,j=g.exact;if(i!==undefined)if(Number.isFinite(i)){var k;d.push((k={},k[q(h,"min")]=i,k),(k={},k[q(h,"max")]=i,k))}else{d.push((k={},k[q(h)]=i,k))}if(!b)if(j!==undefined&&!Number.isFinite(j))c[q(h)]=j;else{i=["min","max"];for(var k=0;k<i.length;k++){j=i[k];Number.isFinite(g[j])&&(c[q(h,j)]=g[j])}}}a.advanced&&d.push.apply(d,a.advanced);j={};Object.keys(c).length>0?j.mandatory=c:b&&(j.mandatory={});d.length>0&&(j.optional=d);return j}};function m(a){switch(a){case g.FHD_VIDEO:return h;case g.HD_VIDEO:return i;case g.LQ_VIDEO:return k;case g.SD_VIDEO:return j;default:return i}}function n(a,b,c){c===void 0&&(c=o(a));var d=a[b];return{min:Math.min(c[b],d),max:Math.max(p(a)[b],d),ideal:d}}function o(a){switch(a){case h:return i;case i:return j;case j:case k:default:return k}}function p(a){switch(a){case k:return j;case j:return i;case i:case h:default:return h}}function q(b,a){return a?""+a+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b}function r(a){return Object.keys(a).some(function(a){return a!=="mandatory"&&a!=="optional"})}e.exports=l}),null);
__d("MediaRequestSourceApp",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LIVE_BROADCAST:"live_broadcast",RTC_CALL:"rtc_call",SCREEN_RECORDER:"screen_recorder",UNKNOWN:"unknown",WIRELESS_SCREEN_SHARING:"wireless_screen_sharing",WORKPLACE:"workplace"})}),null);
__d("MediaStream",[],(function(a,b,c,d,e,f){e.exports=window.MediaStream||window.webkitMediaStream}),null);
__d("RTCAudioTrackNoiseDetector",["invariant","Promise","MediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="audio track with absolute silence",i="audio track data timeout",j='wrong track type, expected "audio"',k=100;a={ABSOLUTE_SILENCE_ERROR:h,DATA_TIMEOUT_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="audio")return b("Promise").reject(new Error(j));var d=new(b("MediaStream"))();d.addTrack(a);var e=new AudioContext(),f=e.createMediaStreamSource(d),l=e.createScriptProcessor(0,1,1),m=k,n=function(){__p&&__p();l!=null||g(0);l.onaudioprocess=null;l.disconnect();l=null;f!=null||g(0);f.disconnect();f=null;d!=null||g(0);d.removeTrack(a);d=null;e!=null||g(0);return b("Promise").resolve(e.close())["catch"](function(){return b("Promise").resolve()}).then(function(){e=null})};return b("Promise").race([new(b("Promise"))(function(a,b){__p&&__p();l!=null||g(0),l.onaudioprocess=function(c){__p&&__p();c=c.inputBuffer;for(var c=c.getChannelData(0),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;if(f!==0){a();return}}m>0?m--:b(new Error(h))},f!=null||g(0),f.connect(l),e!=null||g(0),l.connect(e.destination)}),new(b("Promise"))(function(a){return setTimeout(a,c)}).then(function(){throw new Error(i)})]).then(function(){return n()})["catch"](function(a){return n().then(function(){throw a})})}};e.exports=a}),null);
__d("RTCVideoTrackActivityDetector",["invariant","Promise","MediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=window.URL||window.webkitURL,i=HTMLMediaElement&&"srcObject"in HTMLMediaElement.prototype,j="video track playback timeout",k="unexpected video track ready state",l='wrong track type, expected "video"';a={PLAYBACK_TIMEOUT_ERROR:j,WRONG_READY_STATE_ERROR:k,WRONG_TRACK_TYPE_ERROR:l,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="video")return b("Promise").reject(new Error(l));var d=document.createElement("video");d.muted=!0;var e=new(b("MediaStream"))();e.addTrack(a);var f,m=null,n=function(){clearInterval(m),d&&(d.pause(),i?d.srcObject=null:d.src&&(h.revokeObjectURL(d.src),d.src=""),d.removeEventListener("timeupdate",f),d=null),e&&(e.removeTrack(a),e=null)};return b("Promise").race([new(b("Promise"))(function(c,j){d!=null||g(0),i?d.srcObject=e:d.src=h.createObjectURL(e),f=function(b){d!=null||g(0),d.currentTime>0&&(a.readyState==="live"?(c(),n()):j(new Error(k)))},b("Promise").resolve(d.pause()).then(function(){d!=null||g(0);return d.play()}).then(function(){f(),d!=null||g(0),d.addEventListener("timeupdate",f),m=setInterval(f,50)})["catch"](function(a){return j(a)})}),new(b("Promise"))(function(a){return setTimeout(a,c)}).then(function(){throw new Error(j)})])["catch"](function(a){n();throw a})}};e.exports=a}),null);
__d("RTCMediaStreamValidator",["Promise","RTCAudioTrackNoiseDetector","RTCVideoTrackActivityDetector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="no audio tracks",h="no video tracks",i="too many audio tracks",j="too many video tracks",k="unexpected audio track(s)",l="unexpected video track(s)";a={NO_AUDIO_TRACKS_ERROR:g,NO_VIDEO_TRACKS_ERROR:h,TOO_MANY_AUDIO_TRACKS_ERROR:i,TOO_MANY_VIDEO_TRACKS_ERROR:j,UNEXPECTED_AUDIO_TRACKS_ERROR:k,UNEXPECTED_VIDEO_TRACKS_ERROR:l,validate:function(a,c,d,e){__p&&__p();d===void 0&&(d={});e===void 0&&(e={});d=d;var f=d.audio;f=f===void 0?!0:f;d=d.video;d=d===void 0?!0:d;e=e;var g=e.audio;g=g===void 0?1e3:g;e=e.video;e=e===void 0?1e3:e;return b("Promise").all([m(a,c,f,g),n(a,c,d,e)]).then(function(){return a})}};function m(a,c,d,e){var f=a.getAudioTracks();if(!c.audio)return f.length>0?b("Promise").reject(new Error(k)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(g));else if(f.length>1)return b("Promise").reject(new Error(i));return d?b("RTCAudioTrackNoiseDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}function n(a,c,d,e){var f=a.getVideoTracks();if(!c.video)return f.length>0?b("Promise").reject(new Error(l)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(h));else if(f.length>1)return b("Promise").reject(new Error(j));return d?b("RTCVideoTrackActivityDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}e.exports=a}),null);
__d("UserMediaRequestError",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=babelHelpers.inherits(h,Error);g=a&&a.prototype;function h(a,b,c){g.constructor.call(this,b),this.constraint=c,this.nativeErrorName=a,this.message=i(b),this.name=j(a)}h.createFromNative=function(a){var b=a.message,c=a.name;a=a.constraint;return new h(c,b,a||"")};h.prototype.isRecoverableError=function(){return this.name==="InvalidStateError"?!0:!1};h.prototype.getEndCallSubReason=function(){return"MediaFailed: "+this.name+", "+this.constraint};function i(a){switch(a){case"The operation is insecure.":return"The request is not allowed by the user agent or the platform in the current context.";default:return a}}function j(a){switch(a){case"ConstraintNotSatisfiedError":return"OverconstrainedError";case"NO_DEVICES_FOUND":case"DevicesNotFoundError":return"NotFoundError";case"MediaDeviceFailedDueToShutdown":case"MediaDeviceKillSwitchOn":case"TrackStartError":return"NotReadableError";case"PermissionDeniedError":case"PERMISSION_DENIED":case"PermissionDismissedError":return"NotAllowedError";default:return a}}e.exports=h}),null);
__d("RTCUtils",["invariant","Promise","CurrentUser","FBLogger","FBRTCConfig","FBRTCLogger","FBRTCSupport","FBRTCUtils","MediaRequestSourceApp","RTCAudioTrackNoiseDetector","RTCConfig","RTCEndCallReason","RTCMediaDevices","RTCMediaStreamValidator","RTCScreenSharing","RTCUser","RTCUserMediaConstraints","RTCVideoFilterRenderer","RTCVideoTrackActivityDetector","URI","UserAgent","UserMediaRequestError","randomInt"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("RTCAudioTrackNoiseDetector").DATA_TIMEOUT_ERROR,i=b("RTCVideoTrackActivityDetector").PLAYBACK_TIMEOUT_ERROR,j={generateRandomInt:function(){return b("randomInt")(0,4294967294)+1},isGroupCall:function(a){return a.split(":")[0]==="GROUP"},isMessengerCall:function(a){return a.split(":")[0]==="MESSENGER"},isBonfireCall:function(a){return!!this.parseBonfireID(a)},isAlohaCall:function(a){return a.split(":")[0]==="ALOHA"},isWatchPartyCall:function(a){return a.split(":")[0]==="WATCH"},isSupportedMWCall:function(a){return j.isGroupCall(a)||j.isMessengerCall(a)||j.isAlohaCall(a)||j.isBonfireCall(a)||j.isWatchPartyCall(a)},parseBonfireID:function(a){a=a.match(/BONFIRE:(\d+)/);return a&&a.length>1?a[1]:null},getPeerID:function(a){if(j.isGroupCall(a))throw new Error("Not a P2P call: "+a);a=a.split(":");a=a.slice(1);return a[0]===b("CurrentUser").getID()?a[1]:a[0]},getMessengerCallID:function(a){if(!j.isMessengerCall(a))throw new Error("Not a Messenger call: "+a);return Number(a.split(":")[1])},getSandboxingTierFromURIOrEmpty:function(a,b){b=b+"=";a=a.split(b);if(a[1]){b=a.pop().split("&").shift();return b}return""},createRequestHeader:function(a,b,c,d,e){__p&&__p();a={type:a,transactionId:j.generateRandomInt().toString(),retryCount:0,conferenceName:b,clientSessionId:d?d:""};b={};c&&(a.serverInfoData=c);e&&(b.esc_p2p_call_id=e);d=window.location.href;c=j.getSandboxingTierFromURIOrEmpty(d,"multiway_www_tier");e=j.getSandboxingTierFromURIOrEmpty(d,"multiway_core_tier");c&&(b.multiwayWwwTier=c);e&&(b.multiwayCoreTier=e);a.extensions=b;return a},createClientContextMessage:function(a,b){a={num_participants:a,trigger:b};b={header:{topic_DEPRECATED:"client_context",shouldSendToAllUsers:!1},body:{genericMessage:{topic:"client_context",data:JSON.stringify(a)}}};return b},createResponseHeader:function(a,b,c){b={type:a.type,transactionId:a.transactionId,retryCount:0,conferenceName:a.conferenceName,responseStatusCode:b,clientSessionId:c?c:""};a.serverInfoData&&(b.serverInfoData=a.serverInfoData);return b},maybeRemoveVideoConstraint:function(a){return b("RTCMediaDevices").enumerateDevices().then(function(b){return b.some(function(a){return a.kind==="videoinput"})?a:babelHelpers["extends"]({},a,{video:!1})})["catch"](function(){return b("Promise").resolve(a)})},getUserMediaWithAudioFallback:function(a,c){__p&&__p();return a.video?j.maybeRemoveVideoConstraint(a).then(function(a){return j.getUserMedia(a,c)})["catch"](function(c){if(a.video){if(c.name==="NotFoundError"||c.name==="StreamFailedToStart")return j.getUserMedia({video:!1,audio:a.audio});if(c.name==="OverconstrainedError"){b("FBLogger")("rtc_www").debug("OverconstrainedError: fallback to video with no constraints. Initial constraints %s",JSON.stringify(a.video));return j.getUserMedia({video:!0,audio:a.audio})}}throw c}):j.getUserMedia(a,c)},getUserMediaWithFallbackToEmptyVideoConstraints:function(a,b){return j.getUserMedia(a,b)["catch"](function(b){if(a.video&&b.name==="OverconstrainedError")return j.getUserMedia(babelHelpers["extends"]({},a,{video:!0}));throw b})},getUserScreenMedia:function(a,c,d){return b("RTCScreenSharing").getUserMedia(a,c,d)},getUserMedia:function(a,c){__p&&__p();var d=navigator,e=d.mediaDevices;if(typeof a.video==="object"&&a.video.mediaSource){b("FBLogger")("rtc_www").mustfix("Please use %s instead of %s for screen","RTCUtils.getUserScreenMedia()","RTCUtils.getUserMedia()");return b("RTCScreenSharing").getUserMedia(a,b("MediaRequestSourceApp").UNKNOWN)}d=c&&c.optionalConstraintsOnly&&a.video;var f=j._parseConstraints(a,{optionalConstraintsOnly:!!d}),g=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return new(b("Promise"))(function(a,b){e&&typeof e.getUserMedia==="function"?a(e.getUserMedia(f).then(function(a){return j._maybeSupportFilteredStreams(a,!!(c&&c.supportFilteredStreams))})):g?g.call(navigator,f,a,b):b("getUserMedia not supported")})["catch"](function(a){throw b("UserMediaRequestError").createFromNative(a)})},_parseConstraints:function(a,c){if(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")){var d=a.audio,e=a.video,f={};d!=undefined&&(f.audio=b("RTCUserMediaConstraints").chromify(d));e!=undefined&&(f.video=b("RTCUserMediaConstraints").chromify(e,c));return f}return a},_maybeSupportFilteredStreams:function(a,c){return c&&a.getVideoTracks().length>0&&b("FBRTCSupport").isVideoFilterEffectSupported()?b("RTCVideoFilterRenderer").initStreamForFilters(a):a},getUserMediaWithValidation:function(a,c,d,e){__p&&__p();c===void 0&&(c={audio:!0,video:!0});d===void 0&&(d=5);e===void 0&&(e={audio:1e3,video:1e3});return new(b("Promise"))(function(f,g){__p&&__p();var k=function d(k){j.getUserMedia(a).then(function(d){return b("RTCMediaStreamValidator").validate(d,a,c,e).then(function(a){return f({stream:a})})["catch"](function(a){if(a.message===h||a.message===i)f({stream:d,err:a});else{j.stopMediaStream(d);throw a}})},g)["catch"](function(a){k>0?d(k-1):g(a)})};k(d)})},isFullScreen:function(){return Boolean(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},requestFullScreen:function(a){a===void 0&&(a=document.documentElement),typeof a.requestFullscreen==="function"?a.requestFullscreen():typeof a.msRequestFullscreen==="function"?a.msRequestFullscreen():typeof a.mozRequestFullScreen==="function"?a.mozRequestFullScreen():typeof a.webkitRequestFullscreen==="function"&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},exitFullScreen:function(){typeof document.exitFullscreen==="function"?document.exitFullscreen():typeof document.msExitFullscreen==="function"?document.msExitFullscreen():typeof document.mozCancelFullScreen==="function"?document.mozCancelFullScreen():typeof document.webkitExitFullscreen==="function"&&document.webkitExitFullscreen()},toggleFullScreen:function(){j.isFullScreen()?j.exitFullScreen():j.requestFullScreen()},endCallReasonFromHangupReason:function(a){return b("RTCEndCallReason").fromHangupReason(a).getReasonID()},endCallReasonFromDismissRequest:function(a){return b("RTCEndCallReason").fromDismissRequest(a).getReasonID()},endCallReasonFromResponseStatusCode:function(a){return b("RTCEndCallReason").fromResponseStatusCode(a).getReasonID()},stopMediaStream:function(a){__p&&__p();if(!a.active&&"active"in a)return;for(var a=a.getTracks(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.readyState!=="ended"&&d.stop()}},transferAudioTracks:function(a,b){__p&&__p();for(var c=b.getAudioTracks(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;a.addTrack(f);b.removeTrack(f)}},payloadParticipantsToRTCUsers:function(a){return a.map(function(a){var c=a.big_image_src||a.image_src;a.fbid||g(0);return new(b("RTCUser"))({FBID:a.fbid,profileUrl:new(b("URI"))(a.href),profilePictureUrl:c,isMessengerUser:!!a.is_messenger_user,isPartiesUser:!!a.is_parties_user,userName:a.name,userShortName:a.short_name,vanity:a.vanity||""})})},getStreamVideoResolution:function(a){return new(b("Promise"))(function(c,d){var e=document.createElement("video");b("FBRTCUtils").attachMediaStream(e,a);var f=function(){e.removeEventListener("loadedmetadata",g),e.removeEventListener("error",h),b("FBRTCUtils").attachMediaStream(e,null)},g=function(){c({height:e.videoHeight,width:e.videoWidth}),f()},h=function(){d(e.error),f()};e.addEventListener("loadedmetadata",g);e.addEventListener("error",h)})},limitFrameRate:function(a){a=a.getVideoTracks();a=a[0];if(a.applyConstraints){var b=a.getConstraints();b.frameRate=15;a.applyConstraints(b)}},isScreenSharingSupported:function(){return b("UserAgent").isBrowser("Chrome")||this.isVCScreenSharingSupported()},isVCScreenSharingSupported:function(){return b("FBRTCConfig").isVCEndpointCall()&&b("RTCConfig").CollabWhitelistedBrowserGK},filterDevicesByKind:function(a,b){return a?a.filter(function(a){return a.kind===b}):[]}};e.exports=j}),null);
__d("RTCConferenceState",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AWAITING_USER_START:"AWAITING_USER_START",CONNECTED:"CONNECTED",CONNECTING:"CONNECTING",NEW:"NEW",RENEGOTIATING:"RENEGOTIATING",TERMINATED:"TERMINATED",TERMINATING:"TERMINATING"})}),null);
__d("FBRTCCallSummaryReducer",["FBRTCCallSummaryStore","FBRTCLogger","FBRTCMediaMetricParser","RTCCallActionTypes","RTCCallStore","RTCConferenceState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCLogger").Key;a={setCallSummary:function(a,c){switch(c.type){case b("RTCCallActionTypes").SET_CALL_SUMMARY:return a.set("callSummary",c.callSummary)}return a},onCallStarted:function(a,c){switch(c.type){case b("RTCCallActionTypes").INCOMING_CALL_SUCCESS:case b("RTCCallActionTypes").CALL_SUCCESS:c=function c(){var d=b("RTCCallStore").getState().callInfo.conferenceState;d!==b("RTCConferenceState").TERMINATED&&(a.callSummary.save(b("FBRTCCallSummaryStore").getInstance()),setTimeout(c,1e4))};c();b("FBRTCMediaMetricParser").startCollectingMediaStats();return a}return a},onMessageSignaling:function(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ON_JOIN_REQUEST_SENT:a.callSummary.setJoinRequestSent();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").ON_RECEIVED_JOIN_RESPONSE:a.callSummary.setJoinResponseReceived();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").ON_JOIN_RESPONSE:a.callSummary.setServerInfoData(c.serverInfoData);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").ON_PROCESSED_JOIN_RESPONSE:a.callSummary.setJoinResponseProcessed();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a},onCallEnded:function(a,c){switch(c.type){case b("RTCCallActionTypes").CALL_ERROR:case b("RTCCallActionTypes").HANGUP:case b("RTCCallActionTypes").END_CALL:a.callSummary.onCallEnded(c.endCallReason,!1,!1,c.endCallSubreason);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").DISMISS:a.callSummary.onCallEnded(c.endCallReason,!0,!1,c.endCallSubreason);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a},onSurveyResult:function(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").RATING_SHOWN:a.callSummary.addExtraInfo(g.RATING_SHOWN,"1");a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").FEEDBACK_SHOWN:a.callSummary.addExtraInfo(g.SURVEY_SHOWN,"1");a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").SUBMIT_RATING:a.callSummary.addExtraInfo(g.RATING,c.rating);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").SUBMIT_FEEDBACK:a.callSummary.addExtraInfo(g.SURVEY_DETAILS,c.feedback);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a}};e.exports=a}),null);
__d("RTCCallStoreState",["CurrentUser","FBRTCCallSummary","RTCConferenceState","RTCUser","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;d={debugID:0,callID:"",conferenceState:b("RTCConferenceState").NEW,conferenceName:"",protocol:"",serverInfoData:""};g=babelHelpers.inherits(a,b("immutable").Record(d));g&&g.prototype;function a(){g.apply(this,arguments)}f={connections:b("immutable").Set(),localUser:new(b("RTCUser"))({FBID:b("CurrentUser").getID()}),remoteUsers:b("immutable").Set(),callInfo:new a(),callSummary:b("FBRTCCallSummary").nullSummary(),mediaStatus:b("immutable").Map()};h=babelHelpers.inherits(c,b("immutable").Record(f));h&&h.prototype;function c(){h.apply(this,arguments)}e.exports=c}),null);
__d("RTCGroupCallEscalationActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP_ESCALATION_START:"GROUP_ESCALATION_START",GROUP_ESCALATION_SUCCESS:"GROUP_ESCALATION_SUCCESS",GROUP_ESCALATION_CANCEL:"GROUP_ESCALATION_CANCEL",GROUP_ESCALATION_SET_USERS_TO_RING:"GROUP_ESCALATION_SET_USERS_TO_RING",GROUP_ESCALATION_CLEAR_P2P_CONNECTION:"GROUP_ESCALATION_CLEAR_P2P_CONNECTION",GROUP_ESCALATION_SET_P2P_CALLSUMMARY:"GROUP_ESCALATION_SET_P2P_CALLSUMMARY",GROUP_ESCALATION_ADD_LOCAL_STREAM:"GROUP_ESCALATION_ADD_LOCAL_STREAM"})}),null);
__d("RTCCallReducer",["invariant","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","FBRTCParticipantCallState","FBRTCRtcResponseStatusCode","FBRTCScreenSharingUtils","FunnelLogger","RTCCallActionTypes","RTCCallStore","RTCCallStoreState","RTCConferenceState","RTCGroupCallEscalationActionTypes","RTCUser","RTCUtils","URI","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").SignalingProtocol;function a(a,c){switch(c.type){case b("RTCCallActionTypes").INIT:return a.set("callInfo",a.callInfo.set("callID",c.callID).set("conferenceName",c.conferenceName).set("serverInfoData",c.serverInfoData).set("protocol",c.protocol));case b("RTCCallActionTypes").RESET:return a.set("callInfo",a.callInfo.set("conferenceState",b("RTCConferenceState").NEW).set("conferenceName",c.conferenceName)).set("callSummary",b("FBRTCCallSummary").nullSummary()).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}))}return a}function c(a,c){switch(c.type){case b("RTCCallActionTypes").CALL:return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").CONNECTING).set("connections",a.connections.add(c.peerConnection));case b("RTCCallActionTypes").CALL_ERROR:return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").TERMINATED);case b("RTCCallActionTypes").CALL_SUCCESS:return c.connected?a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").CONNECTED):a}return a}function d(a,c){switch(c.type){case b("RTCCallActionTypes").INCOMING_CALL_SUCCESS:return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").CONNECTED)}return a}function f(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").HANGUP:a.connections.forEach(function(a){return a.close()});return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").TERMINATING).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case b("RTCCallActionTypes").DISMISS:c.transaction.sendResponse(c.request.createResponse(b("FBRTCRtcResponseStatusCode").OK,{callID:a.callInfo.callID}));case b("RTCCallActionTypes").END_CALL:a.connections.forEach(function(a){return a.close()});return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").TERMINATED).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case b("RTCCallActionTypes").HANGUP_ERROR:case b("RTCCallActionTypes").HANGUP_SUCCESS:return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").TERMINATED)}return a}function i(a,c){__p&&__p();switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CLEAR_P2P_CONNECTION:var d=b("RTCCallStore").getConnection(h.P2P);if(d){c=d.getRemoteStreams();var e=c[0];d.close();b("FunnelLogger").appendAction("WWW_MESSENGER_GROUP_ESCALATION_FUNNEL","shutdown_p2p_connection");var f=a.localUser;if(!b("FBRTCScreenSharingUtils").isGroupCallScreenSharingSupported()){c=f.getScreenStream();if(c){var g=f.getStream();g&&b("RTCUtils").transferAudioTracks(g,c);b("RTCUtils").stopMediaStream(c);f=f.removeScreenStream(c)}}return a.withMutations(function(a){a.set("connections",a.connections.remove(d)).set("localUser",f).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(e)}))})}}return a}function j(a,c){__p&&__p();switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CANCEL:var d=b("RTCCallStore").getConnection(h.MULTIWAY);if(d){var e=d.getRemoteStreams(),f=e[0],g=a.callSummary;c.p2pCallSummary&&(g=c.p2pCallSummary,b("FBRTCCallSummaryStore").getInstance().removeCallSummary(a.callSummary.peerID,a.callSummary.callID));d.close();b("FunnelLogger").appendAction("WWW_MESSENGER_GROUP_ESCALATION_FUNNEL","shutdown_mw_connection");return a.withMutations(function(a){a.set("callInfo",a.callInfo.set("conferenceState",b("RTCConferenceState").CONNECTED).set("conferenceName",g.callID).set("protocol","p2p").set("serverInfoData","")).set("callSummary",g).set("connections",a.connections.remove(d)).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(f)}))})}}return a}function k(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ON_PARTICIPANTS_ADDED:var d=a.remoteUsers.map(function(a){return a.FBID});return a.set("remoteUsers",a.remoteUsers.union(Object.keys(c.participants).filter(function(a){return!d.has(c.participants[a].fbid)}).map(function(a){var d=c.participants[a],e=d.big_image_src||d.image_src;c.images&&c.images[a]&&(e=c.images[a]);d.fbid||g(0);return new(b("RTCUser"))({FBID:d.fbid,profileUrl:new(b("URI"))(d.href),profilePictureUrl:e,isMessengerUser:!!d.is_messenger_user,isPartiesUser:!!d.is_parties_user,userName:d.name,userShortName:d.short_name,vanity:d.vanity})})))}return a}function l(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ON_CONFERENCE_STATE:var d=c.transaction,e=c.request,f=c.request.conferenceStateRequest();if(c.conferenceStateVersion>=f.version){d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a}c.resolve(f.version);var g=a.remoteUsers.map(function(a){var b=f.participantStates[a.FBID];return b?a.setParticipantState(b):a}),h=g.some(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});h=h?b("RTCConferenceState").CONNECTED:a.callInfo.conferenceState;d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a.setIn(["remoteUsers"],g).setIn(["callInfo","conferenceState"],h)}return a}function m(a,c){switch(c.type){case b("RTCCallActionTypes").ON_JOIN_RESPONSE:return a.setIn(["callInfo","serverInfoData"],c.serverInfoData)}return a}function n(a,c){switch(c.type){case b("RTCCallActionTypes").INIT_LOCAL_USER:return a.set("localUser",c.localUser);case b("RTCCallActionTypes").INIT_REMOTE_USERS:case b("RTCCallActionTypes").UPDATE_REMOTE_USERS:return a.set("remoteUsers",c.remoteUsers)}return a}function o(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ADD_LOCAL_STREAM:return a.set("localUser",a.localUser.addStream(c.stream));case b("RTCCallActionTypes").REMOVE_LOCAL_STREAM:return a.set("localUser",a.localUser.removeStream(c.stream));case b("RTCCallActionTypes").REPLACE_LOCAL_STREAM:var d=c.oldStream.getAudioTracks();d=d[0];if(d!=null)for(var e=c.newStream.getAudioTracks(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h.enabled=d.enabled}return a.set("localUser",a.localUser.replaceStream(c.oldStream,c.newStream));case b("RTCCallActionTypes").REMOVE_ALL_LOCAL_STREAMS:if(c.stopStreams)for(var h=a.localUser.streams,g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=h.length)break;e=h[f++]}else{f=h.next();if(f.done)break;e=f.value}d=e;b("RTCUtils").stopMediaStream(d)}return a.set("localUser",a.localUser.removeAllStreams())}return a}function p(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ADD_LOCAL_SCREEN_STREAM:return a.set("localUser",a.localUser.addScreenStream(c.stream));case b("RTCCallActionTypes").REMOVE_LOCAL_SCREEN_STREAM:return a.set("localUser",a.localUser.removeScreenStream(c.stream));case b("RTCCallActionTypes").REMOVE_ALL_LOCAL_SCREEN_STREAMS:if(c.stopStreams)for(var d=a.localUser.screenStreams,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b("RTCUtils").stopMediaStream(g)}return a.set("localUser",a.localUser.removeAllScreenStreams());case b("RTCCallActionTypes").REPLACE_LOCAL_SCREEN_STREAM:return a.set("localUser",a.localUser.replaceScreenStream(c.oldStream,c.newStream))}return a}function q(a,c){__p&&__p();var d;switch(c.type){case b("RTCCallActionTypes").ADD_REMOTE_STREAM:d=u(a,c);if(!d)return a;var e=a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.addStream(c.stream)));return t(e,{type:b("RTCCallActionTypes").TOGGLE_REMOTE_STREAM,mediaStatus:e.mediaStatus.toJS()});case b("RTCCallActionTypes").REMOVE_REMOTE_STREAM:d=u(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.removeStream(c.stream)));case b("RTCCallActionTypes").REMOVE_ALL_REMOTE_STREAMS:d=u(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.removeAllStreams().removeAllScreenStreams()))}return a}function r(a,c){var d;switch(c.type){case b("RTCCallActionTypes").ADD_REMOTE_TRACK:d=u(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.clone()));case b("RTCCallActionTypes").REMOVE_REMOTE_TRACK:d=u(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.clone()))}return a}function s(a,c){var d;switch(c.type){case b("RTCCallActionTypes").ADD_REMOTE_SCREEN_STREAM:d=u(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.addScreenStream(c.stream)));case b("RTCCallActionTypes").REMOVE_REMOTE_SCREEN_STREAM:d=u(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.removeScreenStream(c.stream)))}return a}function t(a,c){__p&&__p();var d;switch(c.type){case b("RTCCallActionTypes").TOGGLE_REMOTE_STREAM:return a.set("remoteUsers",Object.entries(c.mediaStatus).reduce(function(b,c){__p&&__p();var d=c[0];c=c[1];var e=b.reduce(function(b,a){var c=a.streams.map(function(a){return a.getTracks().find(function(a){return a.id===d})}).find(Boolean);return c?{user:a,track:c}:b},{}),a=e.user;e=e.track;if(a&&e){if(e.kind==="audio"&&a.isAudioMuted()===c)return b["delete"](a).add(a.toggleMuteAudio());if(e.kind==="video"&&a.isVideoMuted()===c)return b["delete"](a).add(a.toggleMuteVideo())}return b},a.remoteUsers)).set("mediaStatus",b("immutable").Map(c.mediaStatus));case b("RTCCallActionTypes").REMOTE_VIDEO_MUTED:d=u(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!0)));case b("RTCCallActionTypes").REMOTE_VIDEO_UNMUTED:d=u(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!1)))}return a}function u(a,b){return a.remoteUsers.find(function(a){return b.userID?a.FBID==b.userID:a.FBID===b.stream.id.split(":")[0]})}function v(a,c){switch(c.type){case b("RTCCallActionTypes").WAIT_FOR_USER_INPUT:return a.callInfo.conferenceState===b("RTCConferenceState").NEW?a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").AWAITING_USER_START):a}return a}e.exports={abortMultiwayEscalationProcess:j,callInit:a,callStart:c,callEnd:f,completeTransitionToMultiway:i,onParticipantsChanged:k,incomingCallStart:d,processUsers:n,processLocalStream:o,processLocalScreenStream:p,processRemoteStream:q,processRemoteScreenStream:s,processRemoteTrack:r,toggleRemoteStream:t,processConferenceState:l,processJoinResponse:m,waitForUserInput:v}}),null);
__d("RTCCoExperienceActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TOGGLE_CHAT_WINDOW:"TOGGLE_CHAT_WINDOW",SET_FILTER:"SET_FILTER"})}),null);
__d("RTCExpressionIntent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EFFECT:"effect",CHAT:"chat",SCREENSHARE:"screenshare"})}),null);
__d("RTCExpressionAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ENABLED:"enabled",DISABLED:"disabled"})}),null);
__d("RTCExpressionWWWLogger",["invariant","FBRTCConsoleLogger","FBRTCParticipantCallState","RTCCallStoreState","RTCExpressionAction","RtcExpressionWWWTypedLogger","immutable","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").Map;function a(){this.$1=h()}a.prototype.logStartTimer=function(event){var a=b("performanceNow")(),c=event.rtcExpressionIntent;this.$1=this.$1.set(c,a);event.rtcExpressionAction=b("RTCExpressionAction").ENABLED;this.logEvent(event);this.$2(c,{startTime:a})};a.prototype.$3=function(a){var c=this.$1.get(a);c||g(0);this.$1=this.$1.remove(a);return parseInt(b("performanceNow")()-c,10)};a.prototype.logStopTimer=function(event){var a=event.rtcExpressionIntent;a=this.$3(a);event.rtcExpressionDuration=a;event.rtcExpressionAction=b("RTCExpressionAction").DISABLED;this.logEvent(event);return a};a.prototype.logEvent=function(event){var a=new(b("RtcExpressionWWWTypedLogger"))().setCallID(event.callID||123).setConferenceName(event.conferenceName).setPeerID(event.peerID).setRawClientTime(b("performanceNow")()).setRtcExpressionAction(event.rtcExpressionAction).setRtcExpressionDuration(event.rtcExpressionDuration).setRtcExpressionID(event.rtcExpressionId).setRtcExpressionIntent(event.rtcExpressionIntent).setRtcExpressionName(event.rtcExpressionName).setRtcExpressionParticipantCount(event.rtcExpressionParticipantCount).setRtcExpressionType(event.rtcExpressionType),c=a.getData();this.$2(event.rtcExpressionName,c);a.log()};a.prototype.getExpressionLoggerInfoFromStore=function(a){var c=a.callInfo,d=c.callID;c=c.conferenceName;a=a.remoteUsers;a=a.filter(function(a){return a.getParticipantState()===b("FBRTCParticipantCallState").CONNECTED}).size+1;return{callID:d,conferenceName:c,rtcExpressionParticipantCount:a}};a.prototype.$2=function(a,b){};e.exports=new a()}),null);
__d("RTCCoExperienceReducer",["RTCCallActionTypes","RTCCallStore","RTCCoExperienceActionTypes","RTCCoExperienceStore","RTCExpressionIntent","RTCExpressionWWWLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){switch(c.type){case b("RTCCoExperienceActionTypes").TOGGLE_CHAT_WINDOW:c=b("RTCExpressionWWWLogger").getExpressionLoggerInfoFromStore(b("RTCCallStore").getState());a.chatWindowVisible?b("RTCExpressionWWWLogger").logStopTimer(babelHelpers["extends"]({},c,{rtcExpressionName:"chat",rtcExpressionIntent:b("RTCExpressionIntent").CHAT})):b("RTCExpressionWWWLogger").logStartTimer(babelHelpers["extends"]({},c,{rtcExpressionName:"chat",rtcExpressionIntent:b("RTCExpressionIntent").CHAT}));return a.set("chatWindowVisible",!a.chatWindowVisible);default:return a}}function c(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").HANGUP:case b("RTCCallActionTypes").END_CALL:case b("RTCCallActionTypes").HANGUP_ERROR:case b("RTCCallActionTypes").HANGUP_SUCCESS:case b("RTCCoExperienceActionTypes").SET_FILTER:var d=b("RTCExpressionWWWLogger").getExpressionLoggerInfoFromStore(b("RTCCallStore").getState()),e=a.currentVideoFilter,f=a.videoFilterHistory;if(e){var g=b("RTCExpressionWWWLogger").logStopTimer(babelHelpers["extends"]({},d,{rtcExpressionName:e,rtcExpressionIntent:b("RTCExpressionIntent").EFFECT})),h=f.get(e)||0;f=f.set(e,h+g);b("RTCCoExperienceStore").logCoExperienceDurationToSummary(f)}c.filter&&b("RTCExpressionWWWLogger").logStartTimer(babelHelpers["extends"]({},d,{rtcExpressionName:c.filter,rtcExpressionIntent:b("RTCExpressionIntent").EFFECT}));return a.set("currentVideoFilter",c.filter).set("videoFilterHistory",f);default:return a}}e.exports={processChatWindowToggle:a,processSetVideoFilter:c}}),null);
__d("RTCCallControlReducer",["RTCCallActionTypes"],(function(a,b,c,d,e,f){"use strict";function a(a,c){switch(c.type){case b("RTCCallActionTypes").AUDIO_MUTED:case b("RTCCallActionTypes").AUDIO_UNMUTED:return a.set("localUser",a.localUser.toggleMuteAudio());case b("RTCCallActionTypes").VIDEO_MUTED:case b("RTCCallActionTypes").VIDEO_UNMUTED:return a.set("localUser",a.localUser.toggleMuteVideo())}return a}e.exports={toggleLocalStream:a}}),null);
__d("RTCCallStore",["FBRTCCallSummaryReducer","FluxReduceStore","MessengerRTCFunnelLogger","RTCAppDispatcher","RTCCallControlReducer","RTCCallReducer","RTCCallStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("FBRTCCallSummaryReducer").onCallEnded,b("FBRTCCallSummaryReducer").onCallStarted,b("FBRTCCallSummaryReducer").onMessageSignaling,b("FBRTCCallSummaryReducer").onSurveyResult,b("FBRTCCallSummaryReducer").setCallSummary,b("RTCCallControlReducer").toggleLocalStream,b("RTCCallReducer").abortMultiwayEscalationProcess,b("RTCCallReducer").callEnd,b("RTCCallReducer").callInit,b("RTCCallReducer").callStart,b("RTCCallReducer").completeTransitionToMultiway,b("RTCCallReducer").incomingCallStart,b("RTCCallReducer").onParticipantsChanged,b("RTCCallReducer").processConferenceState,b("RTCCallReducer").processJoinResponse,b("RTCCallReducer").processLocalScreenStream,b("RTCCallReducer").processLocalStream,b("RTCCallReducer").processRemoteScreenStream,b("RTCCallReducer").processRemoteStream,b("RTCCallReducer").processRemoteTrack,b("RTCCallReducer").processUsers,b("RTCCallReducer").toggleRemoteStream,b("RTCCallReducer").waitForUserInput,b("MessengerRTCFunnelLogger").logRTCCallAction];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("RTCCallStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.hasRemoteVideo=function(){return this.getState().remoteUsers.some(function(a){return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())})};a.prototype.hasLocalVideo=function(){var a=this.getState();a=a.localUser;return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())};a.prototype.getConnection=function(a){var b=this.getState();b=b.connections;a&&(b=b.filter(function(b){return b.getSignalingProtocol()===a}));return b.first()};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCCoExperienceStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={chatWindowVisible:!1,currentVideoFilter:null,videoFilterHistory:b("immutable").Map()};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RTCCoExperienceStore",["FBRTCCallSummaryStore","FluxReduceStore","RTCAppDispatcher","RTCCallStore","RTCCoExperienceReducer","RTCCoExperienceStoreState","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("RTCCoExperienceReducer").processChatWindowToggle,b("RTCCoExperienceReducer").processSetVideoFilter];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("RTCCoExperienceStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.logCoExperienceDurationToSummary=function(a){var c=b("RTCCallStore").getState();c=c.callSummary;c.setEffectCount(a.size);var d=0;a.reduce(function(a,b){d+=b},0);c.setTotalVideoFilterDuration(d);c.setCoExperienceEffectDuration(d);c.save(b("FBRTCCallSummaryStore").getInstance())};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCCoExperienceActions",["RTCAppDispatcher","RTCCoExperienceActionTypes"],(function(a,b,c,d,e,f){"use strict";a={toggleChatWindow:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCoExperienceActionTypes").TOGGLE_CHAT_WINDOW})},setVideoFilter:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCoExperienceActionTypes").SET_FILTER,filter:a})},removeVideoFilter:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCoExperienceActionTypes").SET_FILTER,filter:null})}};e.exports=a}),null);
__d("RTCVideoFilterRenderer",["invariant","RTCCoExperienceActions","RTCCoExperienceStore","RTCVideoFilterConfig"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("RTCVideoFilterConfig").config,i=30;j.initStreamForFilters=function(a){a=j.initFilters(a);return a};j.applyStreamEffect=function(a){j.createEffectElement(a),b("RTCCoExperienceActions").setVideoFilter(a),j.applyFilters()};j.removeStreamEffect=function(){b("RTCCoExperienceActions").removeVideoFilter(),j.applyFilters()};j.initCanvas=function(a){__p&&__p();var b=document.createElement("canvas"),c=document.createElement("video");b.className="filteredCanvas";c.className="filteredVideo";c.src=window.URL.createObjectURL(a);c.srcObject=a;c.muted=!0;c.play();b.width=a.getVideoTracks()[0].getSettings().width;b.height=a.getVideoTracks()[0].getSettings().height;a=document;a=a.body;a!=null||g(0);a.append(b);a.append(c);return{cvs:b,vid:c}};j.initFilters=function(a){var b=null;!document.querySelector("canvas.filteredCanvas")||!document.querySelector("video.filteredVideo")?b=j.initCanvas(a).cvs:b=document.querySelector("canvas.filteredCanvas");if(b===null)return a;j.startApplyingFilters(a);a=new MediaStream([a.getAudioTracks()[0],b.captureStream(i).getVideoTracks()[0]]);return a};j.startApplyingFilters=function(a){if(window.MediaRecorder!==undefined){a=new MediaRecorder(a);a.ondataavailable=j.applyFilters;a.start(Math.floor(1e3/i))}else{a=function a(){j.applyFilters(),requestAnimationFrame(a)};a()}};j.applyFilters=function(){__p&&__p();var a=b("RTCCoExperienceStore").getState().currentVideoFilter,c=document.querySelector("canvas.filteredCanvas"),d=document.querySelector("video.filteredVideo");if(c==null||d==null)return;var e=d.videoWidth,f=d.videoHeight;if(e>0&&f>0){c=c.getContext("2d");c.drawImage(d,0,0,e,f);if(a){d=document.querySelector("video."+(a?a:""));c.drawImage(d,0,0,e,f)}else if(window.native_bindings&&window.enable_native_filter_demo){a=c.getImageData(0,0,e,f);window.native_bindings.process_frame(a.data,e,f,120);c.putImageData(a,0,0)}}};j.createEffectElement=function(a){__p&&__p();if(document.querySelector("video."+a))return null;var b=document.createElement("video");b.className=a;b.crossOrigin="anonymous";b.src=h[a].video_url;b.play();b.autoplay=!0;b.loop=!0;a=document;a=a.body;a!=null||g(0);a.append(b);return b};function j(){}e.exports=j}),null);
__d("RTCScreenSharing",["Promise","CollabRTCChromeScreenSharing","RTCUserMediaConstraints","RTCUtils","UserAgent","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="SCREEN_SHARING_NOT_SUPPORTED",h="UNEXPECTED_ERROR",i={SCREEN_SHARING_NOT_SUPPORTED:g,getUserMedia:function(a,c,d){__p&&__p();if(b("UserAgent").isBrowser("Chrome"))return(b("WorkplaceChatHelper").isDesktopChatApp()?b("WorkplaceChatHelper").getScreenSharingSourceID():b("CollabRTCChromeScreenSharing").getSourceID(d,c)).then(function(c){return b("RTCUtils").getUserMedia(b("RTCUserMediaConstraints").chromeMediaSource(a,c))}).then(function(a){__p&&__p();for(var b=a.getTracks(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.addEventListener("ended",function(b){return setTimeout(function(){a.active||i.stop()})})}return a});else if(b("RTCUtils").isVCScreenSharingSupported()&&navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia==="function")return b("Promise").resolve(navigator.mediaDevices.getUserMedia(a)["catch"](function(a){if(a.name==="NotAllowedError")throw new Error(g)}));return b("Promise").reject(new Error(g))},stop:function(){return b("UserAgent").isBrowser("Chrome")?b("WorkplaceChatHelper").isDesktopChatApp()?b("WorkplaceChatHelper").stopScreenSharing():b("CollabRTCChromeScreenSharing").stop():b("Promise").reject(new Error(h))}};e.exports=i}),null);
__d("FBRTCChromeMediaStatsReport",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b){return a&&a[b]!=null&&a[b]!==""?Number(a[b]):null}function a(a){__p&&__p();this.$1={};this.$2={};this.$3={};this.$4={};if(a)for(var a=a.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.type==="ssrc"&&d.audioOutputLevel!=null&&d.audioOutputLevel!==""?this.$1[d.id]=d:d.type==="ssrc"&&d.audioInputLevel!=null&&d.audioInputLevel!==""?this.$2[d.id]=d:d.type==="ssrc"&&d.mediaType==="video"&&(d.bytesReceived!=null?this.$3[d.id]=d:this.$4[d.id]=d)}}a.prototype.getAudioSendKeys=function(){return Object.keys(this.$2)};a.prototype.getAudioRecvKeys=function(){return Object.keys(this.$1)};a.prototype.getVideoRecvKeys=function(){return Object.keys(this.$3)};a.prototype.getVideoSendKeys=function(){return Object.keys(this.$4)};a.prototype.getAudioBytesSent=function(a){return g(this.$2[a],"bytesSent")};a.prototype.getAudioPacketsSentLost=function(a){return g(this.$2[a],"packetsLost")};a.prototype.getAudioPacketsSent=function(a){return g(this.$2[a],"packetsSent")};a.prototype.getAudioSendRtt=function(a){return g(this.$2[a],"googRtt")};a.prototype.getAudioBytesReceived=function(a){return g(this.$1[a],"bytesReceived")};a.prototype.getAudioPacketsReceived=function(a){return g(this.$1[a],"packetsReceived")};a.prototype.getAudioPacketsReceivedLost=function(a){return g(this.$1[a],"packetsLost")};a.prototype.getAudioReceivedRtt=function(a){return g(this.$1[a],"googRtt")};a.prototype.getVideoBytesReceived=function(a){return g(this.$3[a],"bytesReceived")};a.prototype.getVideoPacketsReceived=function(a){return g(this.$3[a],"packetsReceived")};a.prototype.getVideoPacketsReceivedLost=function(a){return g(this.$3[a],"packetsLost")};a.prototype.getFramesDecoded=function(a){return g(this.$3[a],"framesDecoded")};a.prototype.getInboundQpSum=function(a){return g(this.$3[a],"qpSum")};a.prototype.getVideoFrameHeightReceived=function(a){return g(this.$3[a],"googFrameHeightReceived")};a.prototype.getVideoFrameRateReceived=function(a){return g(this.$3[a],"googFrameRateReceived")};a.prototype.getVideoFrameWidthReceived=function(a){return g(this.$3[a],"googFrameWidthReceived")};a.prototype.getFramesEncoded=function(a){return g(this.$4[a],"framesEncoded")};a.prototype.getVideoBytesSent=function(a){return g(this.$4[a],"bytesSent")};a.prototype.getVideoFrameHeightSent=function(a){return g(this.$4[a],"googFrameHeightSent")};a.prototype.getVideoFrameRateSent=function(a){return g(this.$4[a],"googFrameRateSent")};a.prototype.getVideoFrameWidthSent=function(a){return g(this.$4[a],"googFrameWidthSent")};a.prototype.getVideoPacketsSent=function(a){return g(this.$4[a],"packetsSent")};a.prototype.getVideoPacketsSentLost=function(a){return g(this.$4[a],"packetsLost")};a.prototype.getVideoSentRtt=function(a){return g(this.$4[a],"googRtt")};a.prototype.getOutboundQpSum=function(a){return g(this.$4[a],"qpSum")};a.prototype.getAudioJitter=function(a){return g(this.$1[a],"googJitterReceived")};a.prototype.getJitterBufferDelay=function(a){return g(this.$1[a],"googCurrentDelayMs")};a.prototype.getAccelerateRate=function(a){return g(this.$1[a],"googAccelerateRate")};a.prototype.getPreemptiveExpandRate=function(a){return g(this.$1[a],"googPreemptiveExpandRate")};a.prototype.getExpandRate=function(a){return g(this.$1[a],"googExpandRate")};a.prototype.getDiscardRate=function(a){return g(this.$1[a],"googSecondaryDiscardedRate")};e.exports=a}),null);
__d("FBRTCMozMediaStatsReport",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b){return a&&a[b]!=null&&a[b]!==""?Number(a[b]):null}function a(a){__p&&__p();this.$1={};this.$2={};this.$3={};this.$4={};for(var a=a.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.type==="inbound-rtp"&&d.mediaType==="audio"&&d.isRemote===!1?this.$1[d.id]=d:d.type==="outbound-rtp"&&d.mediaType==="audio"&&d.isRemote===!1?this.$2[d.id]=d:d.type==="inbound-rtp"&&d.mediaType==="video"&&d.isRemote===!1?this.$3[d.id]=d:d.type==="outbound-rtp"&&d.mediaType==="video"&&d.isRemote===!1&&(this.$4[d.id]=d)}}a.prototype.getAudioSendKeys=function(){return Object.keys(this.$2)};a.prototype.getAudioRecvKeys=function(){return Object.keys(this.$1)};a.prototype.getVideoRecvKeys=function(){return Object.keys(this.$3)};a.prototype.getVideoSendKeys=function(){return Object.keys(this.$4)};a.prototype.getAudioBytesSent=function(a){return g(this.$2[a],"bytesSent")};a.prototype.getAudioPacketsSent=function(a){return g(this.$2[a],"packetsSent")};a.prototype.getAudioSendRtt=function(a){return null};a.prototype.getAudioBytesReceived=function(a){return g(this.$1[a],"bytesReceived")};a.prototype.getAudioPacketsReceived=function(a){return g(this.$1[a],"packetsReceived")};a.prototype.getAudioPacketsReceivedLost=function(a){return g(this.$1[a],"packetsLost")};a.prototype.getAudioReceivedRtt=function(a){return g(this.$1[a],"roundTripTime")};a.prototype.getFramesDecoded=function(a){return g(this.$3[a],"framesDecoded")};a.prototype.getFramesEncoded=function(a){return g(this.$4[a],"framesEncoded")};a.prototype.getVideoBytesReceived=function(a){return g(this.$3[a],"bytesReceived")};a.prototype.getVideoFrameHeightReceived=function(a){return null};a.prototype.getVideoFrameRateReceived=function(a){return g(this.$3[a],"framerateMean")};a.prototype.getVideoFrameWidthReceived=function(a){return null};a.prototype.getVideoPacketsReceived=function(a){return g(this.$3[a],"packetsReceived")};a.prototype.getVideoPacketsReceivedLost=function(a){return g(this.$3[a],"packetsLost")};a.prototype.getVideoBytesSent=function(a){return g(this.$4[a],"bytesSent")};a.prototype.getVideoFrameHeightSent=function(a){return null};a.prototype.getVideoFrameRateSent=function(a){return g(this.$4[a],"framerateMean")};a.prototype.getVideoFrameWidthSent=function(a){return null};a.prototype.getVideoPacketsSent=function(a){return g(this.$4[a],"packetsSent")};a.prototype.getAudioJitter=function(a){return g(this.$1[a],"jitter")};a.prototype.getJitterBufferDelay=function(a){return g(this.$1[a],"mozJitterBufferDelay")};a.prototype.getAudioPacketsSentLost=function(a){return null};a.prototype.getVideoPacketsSentLost=function(a){return null};a.prototype.getVideoSentRtt=function(a){return null};a.prototype.getInboundQpSum=function(a){return null};a.prototype.getOutboundQpSum=function(a){return null};a.prototype.getAccelerateRate=function(a){return null};a.prototype.getPreemptiveExpandRate=function(a){return null};a.prototype.getExpandRate=function(a){return null};a.prototype.getDiscardRate=function(a){return null};e.exports=a}),null);
__d("RTCIceCandidate",[],(function(a,b,c,d,e,f){"use strict";e.exports=window.RTCIceCandidate||window.mozRTCPeerConnection}),null);
__d("RTCPeerConnection",[],(function(a,b,c,d,e,f){"use strict";e.exports=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection}),null);
__d("RTCSessionDescription",["invariant","FBRTCConfig","FBRTCConstants","FBRTCMediaType","FBRTCSdpUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").SignalingProtocol,i=window.RTCSessionDescription||window.mozRTCSessionDescription,j=2,k="o",l="m",m="a",n="rtpmap",o="ssrc-group",p="ssrc",q="cname",r="msid",s="mslabel",t="label",u="sendonly",v="recvonly",w="sendrecv",x="inactive",y="offer",z="answer",A="=",B=" ",C=":",D="\r\n",E="audio",F="video",G="application",H=function(a,b){return a.startsWith(b+A)},I=function(a){return a.substr(j)},J=function(a,b){return a.startsWith(b+D)||a.startsWith(b+C)},K=function(a,b){return a.substr(b.length+1)};function L(a){this.$1=[],this.$2="-",this.$3="multiway",this.$4=1,this.$5="IN",this.$6="IP4",this.$7="127.0.0.1",a.forEach(function(a){if(H(a,k)){var b=I(a).split(B);b.length==6&&(this.$2=b[0],this.$3=b[1],this.$4=parseInt(b[2],10),this.$5=b[3],this.$6=b[4],this.$7=b[5])}this.$1.push(a)}.bind(this))}L.prototype.setVersion=function(a){this.$4=a};L.prototype.getVersion=function(){return this.$4};L.prototype.toSdp=function(){return this.$1.map(function(a){if(H(a,k))return k+A+this.$2+B+this.$3+B+this.$4+B+this.$5+B+this.$6+B+this.$7;else return a}.bind(this)).join(D)};function M(a,b,c){__p&&__p();c===void 0&&(c={});this.$1=[];var d={},e=[],f=[];a.forEach(function(a){__p&&__p();var b=I(a);H(a,l)&&(this.$4=b.split(B)[0]);if(H(a,m)&&J(b,n)){var c=K(b,n);c=c.split(B);var g=c[0];c=c[1];d[c]=g}H(a,m)&&J(b,p)?this.$6(b,e):H(a,m)&&J(b,o)?this.$7(b,f):H(a,m)&&(b===u||b===v||b===w||b===x)?this.$5=b:this.$1.push(a)}.bind(this));Object.keys(c).forEach(function(a){if(d[a]){var b=Object.keys(c[a]).map(function(b){return b+"="+c[a][b]}).join(";");this.$1.push("a=fmtp:"+d[a]+" "+b)}}.bind(this));this.$3={};this.$2={};e.forEach(function(a){if(Object.prototype.hasOwnProperty.call(a,q)){var b=a.cname;!this.$3[b]?this.$3[b]=[a]:this.$3[b].push(a);a=this.findSsrcGroupForSsrc(f,a.ssrc);a&&(!this.$2[b]?this.$2[b]=[a]:this.$2[b].push(a),this.removeSsrcGroup(a,f))}}.bind(this));this.$4!==G&&(b===y?e.length===0?this.$5=v:this.$5=w:b===z&&(this.$5=w))}M.prototype.getMediaType=function(){return this.$4};M.prototype.findSsrcGroupForSsrc=function(a,b){return a.find(function(a){a=a.ssrcs;return a.some(function(a){return a===b})})};M.prototype.addStreamsForEndpoint=function(a,b){this.$3[a]=b};M.prototype.addSsrcGroupsForEndpoint=function(a,b){this.$3[a].forEach(function(c){c=c.ssrc;c=this.findSsrcGroupForSsrc(b,c);c&&(!this.$2[a]?this.$2[a]=[c]:this.$2[a].push(c),this.removeSsrcGroup(c,b))}.bind(this))};M.prototype.removeSsrcGroup=function(a,b){a=b.indexOf(a);a!==-1&&b.splice(a,1)};M.prototype.$7=function(a,b){a=K(a,o);if(a){a=a.split(B);var c=a[0];a=a.slice(1);b.push({semantics:c,ssrcs:a.map(function(a){return parseInt(a,10)})})}};M.prototype.$6=function(a,b){__p&&__p();var c=a.indexOf(B),d=a.substr(0,c),e=parseInt(K(d,p),10);d=a.substr(c+1);a=b.find(function(a){return a.ssrc===e});a||(a={},a.ssrc=e,b.push(a));if(J(d,q))a.cname=K(d,q);else if(J(d,r)){c=K(d,r).split(B);a.msid={id:c[0],appdata:c[1]}}else J(d,s)?a.mslabel=K(d,s):J(d,t)&&(a.label=K(d,t))};M.prototype.toSdp=function(){__p&&__p();var a=[];this.$1.forEach(function(b){a.push(b)});for(var b in this.$2)this.$2[b].forEach(function(b){a.push(m+A+o+C+b.semantics+B+b.ssrcs.join(B))});a.push(m+A+this.$5);for(var c in this.$3)this.$3[c].forEach(function(b){b.cname&&a.push(m+A+p+C+b.ssrc+B+q+C+b.cname),b.msid&&a.push(m+A+p+C+b.ssrc+B+r+C+b.msid.id+(b.msid.appdata?B+b.msid.appdata:"")),b.mslabel&&a.push(m+A+p+C+b.ssrc+B+s+C+b.mslabel),b.label&&a.push(m+A+p+C+b.ssrc+B+t+C+b.label)});return a.join(D)};function a(a,b,c){__p&&__p();b===void 0&&(b={});c===void 0&&(c={});b=b;var d=b.type;d=d===void 0?"offer":d;b=b.sdp;b=b===void 0?"":b;this.$2=a;this.type=d;switch(a){case h.CUSTOM:this.$1=b;return;case h.MULTIWAY:this.$3(b,c);return;case h.P2P:this.$4(b,c);return}}a.prototype.$3=function(a,c){__p&&__p();this.type=="offer"&&(a=b("FBRTCSdpUtils").removeUnknownRtpHeaderExtensions(a));a=a.trim().split(D);var d=[],e=0;while(e<a.length&&!H(a[e],l))d.push(a[e]),e++;this.sessionDescription=new L(d);this.mediaDescriptions=[];while(e<a.length){d=[];d.push(a[e]);e++;while(e<a.length&&!H(a[e],l))d.push(a[e]),e++;this.mediaDescriptions.push(new M(d,this.type,c.FORMAT_PARAMETERS))}};a.prototype.$4=function(a,c){__p&&__p();var d=[function(a){return b("FBRTCSdpUtils").addIceOptionToSdp(a,"fb-force-5245")},function(a){return b("FBRTCSdpUtils").useDTLSOverCrypto(a)}];if(this.type==="offer"){c.DISABLE_VIDEO&&d.push(function(a){return b("FBRTCSdpUtils").disableVideo(a)});d.push(function(a){return b("FBRTCSdpUtils").replaceRTPSAVPFProfile(a)},function(a){return b("FBRTCSdpUtils").preferIsac(a)},function(a){return b("FBRTCSdpUtils").addSetup(a)},function(a){return b("FBRTCSdpUtils").removeUnknownRtpHeaderExtensions(a)});b("FBRTCConfig").isVCEndpointCall()||d.push(function(a){return b("FBRTCSdpUtils").removeSdparta(a)});c.ADD_AUDIO_NACK&&d.push(function(a){return b("FBRTCSdpUtils").addAudioNack(a)});if(c.FORMAT_PARAMETERS){var e=Object.entries(c.FORMAT_PARAMETERS),f=function(){__p&&__p();var a=e[h],c=a[0];a=a[1];var f=Object.entries(a);a=function(){var a=f[i],e=a[0],h=a[1];typeof h==="string"||g(0);d.push(function(a){return b("FBRTCSdpUtils").addFmtp(a,c,e,h)})};for(var i=0;i<f.length;i++)a()};for(var h=0;h<e.length;h++)f()}d.push(function(a){return b("FBRTCSdpUtils").clearFirefoxInactiveDataChannelBlock(a)})}c.ADD_FB_FEATURES!=null&&d.push(function(a){Array.isArray(c.ADD_FB_FEATURES)||g(0);return b("FBRTCSdpUtils").addFBFeatures.apply(b("FBRTCSdpUtils"),[a].concat(c.ADD_FB_FEATURES))});this.$1=d.reduce(function(a,b){return b(a)},a)};a.prototype.processServerMediaUpdate=function(a){var c=a.sourceKey,d=a.media,e=a.ssrcGroups,f=[],g=[];d.forEach(function(a){a.ssrcs.forEach(function(d){d={ssrc:d,cname:c,msid:{id:c,appdata:a.id},label:a.id,mslabel:c};b("FBRTCMediaType").AUDIO===a.type?f.push(d):b("FBRTCMediaType").VIDEO===a.type&&g.push(d)})});this.mediaDescriptions.forEach(function(a){a.getMediaType()===E?(a.addStreamsForEndpoint(c,f),a.addSsrcGroupsForEndpoint(c,e)):a.getMediaType()===F&&(a.addStreamsForEndpoint(c,g),a.addSsrcGroupsForEndpoint(c,e))})};a.prototype.toDesc=function(){return new i({type:this.type,sdp:this.toSdp()})};a.prototype.toSdp=function(){var a=this.$2;switch(a){case h.MULTIWAY:return[this.sessionDescription.toSdp(),this.mediaDescriptions.map(function(a){return a.toSdp()}).join(D),""].join(D);case h.CUSTOM:case h.P2P:default:return this.$1}};a.prototype.strongDiff=function(a){var b=this.toSdp();a=a.toSdp();return b!==a&&this.$5(b)!==this.$5(a)};a.prototype.$5=function(a){return this.$6(a).split("\r\n").filter(function(a){return!/^a=(candidate|setup):/.test(a)}).join("\r\n")};a.prototype.$6=function(a){return a.replace(/(o=\S+\s\S+)\s\S+\s/,"$1 - ")};e.exports=a}),null);
__d("FBRTCPeerConnection",["Promise","regeneratorRuntime","FBRTCConfig","FBRTCConsoleLogger","FBRTCExperiment","FBRTCSdpUtils","RTCConfig","RTCIceCandidate","RTCPeerConnection","RTCSessionDescription","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();g.isGetSendersSupported=function(){return q("getSenders")};g.isReplaceTrackSupported=function(){return typeof window.RTCRtpSender==="function"&&typeof window.RTCRtpSender.prototype.replaceTrack==="function"};function g(a,b,c){__p&&__p();b===void 0&&(b={}),c===void 0&&(c={}),this.$3=[],this.$4=[],this.$7=new Map(),this.addEventListener=function(a,b){var c=this.$7.get(a);Array.isArray(c)||(c=[],this.$7.set(a,c));c.push(b);this.$5.addEventListener(a,b)},this.removeEventListener=function(a,b){var c=this.$7.get(a);Array.isArray(c)&&(c=c.filter(function(a){return a!==b}),c.length<1?this.$7["delete"](a):this.$7.set(a,c));this.$5.removeEventListener(a,b)},this.$9=function(a){a=a.candidate;a&&this.$4.push(a)}.bind(this),this.$10=function(a){a=a.channel;this.$12(a)}.bind(this),this.$6=a,this.$1=b,this.$2=c,this.$5=this.$8()}g.prototype.$8=function(){__p&&__p();var a=new(b("RTCPeerConnection"))(this.$1,this.$2);a.addEventListener("icecandidate",this.$9);a.addEventListener("datachannel",this.$10);for(var c=this.$7.entries(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];for(var f=f,h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;a.addEventListener(g,j)}}return a};g.prototype.removeAllListeners=function(){__p&&__p();for(var a=this.$7.entries(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var e=d[0];d=d[1];for(var d=d,f=Array.isArray(d),g=0,d=f?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=d.length)break;h=d[g++]}else{g=d.next();if(g.done)break;h=g.value}h=h;this.$5.removeEventListener(e,h)}}this.$5.removeEventListener("datachannel",this.$10);this.$5.removeEventListener("icecandidate",this.$9)};g.prototype.reset=function(){__p&&__p();var a=this.$5;for(var c=this.$7.entries(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];for(var f=f,h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;a.removeEventListener(g,j)}}a.removeEventListener("datachannel",this.$10);a.removeEventListener("icecandidate",this.$9);this.$3=[];this.$4=[];this.$5=this.$8();for(var j=a.getLocalStreams(),i=Array.isArray(j),h=0,j=i?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(i){if(h>=j.length)break;f=j[h++]}else{h=j.next();if(h.done)break;f=h.value}g=f;this.$11(g,a.getSenders())&&this.addStream(g)}return b("Promise").race([new(b("Promise"))(function(b){var c=this.$5,d=function d(e){e=e.target;e.iceConnectionState!=="checking"&&e.iceConnectionState!=="new"&&(b(),c.removeEventListener("iceconnectionstatechange",d),p(a))};c.addEventListener("iceconnectionstatechange",d)}.bind(this)),new(b("Promise"))(function(a){return setTimeout(a,5e3)})])["catch"](function(a){return b("Promise").resolve()}).then(function(){p(a)})};g.prototype.$11=function(a,c){return!b("FBRTCConfig").isVCEndpointCall()||!b("RTCConfig").CollabWhitelistedBrowserGK?!0:g.isFirefoxSupportAddTrack()?a.getTracks().some(function(a){return c!=null?c.some(function(b){return b.track===a}):!1}):a.active};g.prototype.close=function(){p(this.$5)};g.prototype.getCreatedIceCandidates=function(){return this.$4};g.prototype.$12=function(a){a.addEventListener("close",function(){this.$3=this.$3.filter(function(b){return b!==a})}.bind(this)),this.$3.push(a)};g.prototype.onReceivedRemoteIceCandidate=function(a){var c=a.sdp,d=a.label;a=a.sdp_mid;d=new(b("RTCIceCandidate"))({sdpMLineIndex:d,candidate:b("FBRTCSdpUtils").fixMobileIceSdp(c),sdpMid:a});return b("Promise").resolve(this.$5.addIceCandidate(d))};g.prototype.getSignalingProtocol=function(){return this.$6};g.prototype.getLocalStreams=function(){return this.$5.getLocalStreams()};g.prototype.getRemoteStreams=function(){return this.$5.getRemoteStreams()};g.isFirefoxSupportAddTrack=function(){return b("UserAgent").isBrowser("Firefox")&&q("addTrack")&&g.isGetSendersSupported()};g.isFirefoxSupporRemoveTrack=function(){return b("UserAgent").isBrowser("Firefox")&&q("removeTrack")&&g.isGetSendersSupported()};g.prototype.addStream=function(a,b){__p&&__p();var c=this;if(g.isFirefoxSupportAddTrack()){var d=this.getSenders(),e=function(){__p&&__p();if(h){if(i>=f.length)return"break";j=f[i++]}else{i=f.next();if(i.done)return"break";j=i.value}var e=j,g=d.find(function(a){return a.track===e});g===undefined&&(g=c.$5.addTrack(e,a));b&&g&&b(g)};for(var f=a.getTracks(),h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j,k=e();if(k==="break")break}}else this.$5.addStream(a)};g.prototype.removeStream=function(a){__p&&__p();if(g.isFirefoxSupporRemoveTrack()){var b=a.getTracks(),c=this.getSenders().filter(function(a){return b.includes(a.track)});for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;this.$5.removeTrack(f)}}else this.$5.removeStream(a)};g.prototype.createOffer=function(a,c,d){__p&&__p();return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:a===void 0&&(a={});c===void 0&&(c={});d===void 0&&(d={});return e.abrupt("return",i(this.$5,a).then(function(b){return v(b,d,a)}).then(function(a){return new(b("RTCSessionDescription"))(this.$6,a,c)}.bind(this)));case 4:case"end":return e.stop()}},null,this)};g.prototype.createAnswer=function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:a===void 0&&(a={});return c.abrupt("return",j(this.$5).then(function(c){return new(b("RTCSessionDescription"))(this.$6,c,a)}.bind(this)));case 2:case"end":return c.stop()}},null,this)};g.prototype.setLocalDescription=function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:return b.abrupt("return",n(this.$5,a.toDesc()).then(function(){return a}));case 1:case"end":return b.stop()}},null,this)};g.prototype.setRemoteDescription=function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:return b.abrupt("return",o(this.$5,a.toDesc()).then(function(){return a}));case 1:case"end":return b.stop()}},null,this)};g.prototype.getLocalDescription=function(){return new(b("RTCSessionDescription"))(this.$6,this.$5.localDescription||{})};g.prototype.getRemoteDescription=function(){return new(b("RTCSessionDescription"))(this.$6,this.$5.remoteDescription||{})};g.prototype.getSignalingState=function(){return this.$5.signalingState};g.prototype.getIceGatheringState=function(){return this.$5.iceGatheringState};g.prototype.getIceConnectionState=function(){return this.$5.iceConnectionState};g.prototype.getSenders=function(){if(g.isGetSendersSupported()===!1)throw new Error("RTCPeerConnection.getSenders is not supported");return this.$5.getSenders()};g.prototype.getStats=function(a){__p&&__p();return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:if(!(a!=null)){c.next=2;break}return c.abrupt("return",b("Promise").reject(new Error("getStats() doesn't support selector (yet)")));case 2:if(!b("UserAgent").isBrowser("Edge")){c.next=4;break}return c.abrupt("return",b("Promise").resolve(new Map()));case 4:if(!b("UserAgent").isBrowser("Firefox")){c.next=6;break}return c.abrupt("return",b("Promise").resolve(this.$5.getStats()).then(function(a){return b("UserAgent").isBrowser("Firefox >= 48")?a:s(a)}).then(function(a){__p&&__p();if(b("UserAgent").isBrowser("Firefox >= 53"))return a;try{a.forEach(function(a){a.type=t(a.type)})}catch(b){if(b.name!=="TypeError")throw b;a.forEach(function(b,c){a.set(c,babelHelpers["extends"]({},b,{type:t(b.type)}))})}return a}));case 6:if(!(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera"))){c.next=8;break}return c.abrupt("return",new(b("Promise"))(function(a,b){this.$5.getStats(a,b)}.bind(this)).then(function(a){__p&&__p();var b={};for(var a=a.result(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f={id:e.id,timestamp:e.timestamp,type:t(e.type)};for(var g=e.names(),h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{i=g.next();if(i.done)break;j=i.value}j=j;f[j]=e.stat(j)}b[f.id]=f}return b}).then(s));case 8:return c.abrupt("return",b("Promise").reject(new Error("getStats() not supported")));case 9:case"end":return c.stop()}},null,this)};g.prototype.createDataChannel=function(a,b){if(this.$5.createDataChannel){a=this.$5.createDataChannel(a,b);this.$12(a);return a}return null};g.prototype.getDataChannelByLabel=function(a){return this.$3.find(function(b){return b.label===a})};var h=b("UserAgent").isBrowser("Chrome < 59")||b("UserAgent").isBrowser("Opera < 46")||b("UserAgent").isBrowser("Firefox < 37");function i(a,c){return h?new(b("Promise"))(function(b,d){return a.createOffer(b,d,l(c))}):b("Promise").resolve(a.createOffer(l(c)))}function j(a){return h?new(b("Promise"))(function(b,c){return a.createAnswer(b,c)}):b("Promise").resolve(a.createAnswer())}var k=b("UserAgent").isBrowser("Chrome < 38")||b("UserAgent").isBrowser("Opera < 26");function l(a){var b=a.offerToReceiveAudio;b=b===void 0?!0:b;var c=a.offerToReceiveVideo;c=c===void 0?!0:c;a=babelHelpers.objectWithoutProperties(a,["offerToReceiveAudio","offerToReceiveVideo"]);return k?Object.keys(a).length>0?{mandatory:{OfferToReceiveAudio:b,OfferToReceiveVideo:c},optional:babelHelpers["extends"]({},r(a))}:{mandatory:{OfferToReceiveAudio:b,OfferToReceiveVideo:c}}:babelHelpers["extends"]({offerToReceiveAudio:b,offerToReceiveVideo:c},a)}var m=b("UserAgent").isBrowser("Chrome < 51")||b("UserAgent").isBrowser("Opera < 38")||b("UserAgent").isBrowser("Firefox < 37");function n(a,c){return m?new(b("Promise"))(function(b,d){return a.setLocalDescription(c,b,d)}):b("Promise").resolve(a.setLocalDescription(c))}function o(a,c){return m?new(b("Promise"))(function(b,d){return a.setRemoteDescription(c,b,d)}):b("Promise").resolve(a.setRemoteDescription(c))}function p(a){a&&a.signalingState!=="closed"&&a.close()}function q(a){return typeof b("RTCPeerConnection").prototype[a]==="function"}function r(a){var b={},c=Object.keys(a);for(var d=0;d<c.length;d++){var e=c[d],f=""+e.substr(0,1).toUpperCase()+e.substr(1);b[f]=a[e]}return b}function s(a){return new Map(Object.keys(a).map(function(b){return[b,a[b]]}))}function t(a){switch(a){case"inbound-rtp":return"inboundrtp";case"outbound-rtp":return"outboundrtp";case"candidate-pair":return"candidatepair";case"local-candidate":return"localcandidate";case"remote-candidate":return"remotecandidate";default:return a}}function u(a,c){if(b("FBRTCConfig").isVCEndpointCall())return!1;a=a.video&&a.video.match(/H264/);if(!a&&!c.preserveH264){a=b("FBRTCExperiment").gen("rtc_browser_use_h264");return a.getParam("allow_h264","no")!=="yes"}return!1}function v(a,c,d){d===void 0&&(d={});var e=c.audio,f=c.video,g=a.sdp;a=a.type;u(c,d)&&(g=b("FBRTCSdpUtils").removeH264(g));e&&(g=b("FBRTCSdpUtils").preferCodec(g,e,!1));f&&(g=b("FBRTCSdpUtils").preferCodec(g,f,!0));return b("Promise").resolve({sdp:g,type:a})}e.exports=g}),null);
__d("RTCWebMediaLoggingStreamsTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VIDEO:"video",AUDIO:"audio"})}),null);
__d("RTWebLoggingCallType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({P2P:"p2p",MW:"mw",ESCALATED:"escalated"})}),null);
__d("FBRTCMediaMetricParser",["FBRTCCallSummary","FBRTCChromeMediaStatsReport","FBRTCConstants","FBRTCLogger","FBRTCMediaMetricsConst","FBRTCMediaMetricTracker","FBRTCMozMediaStatsReport","FBRTCPeerConnection","RTCCallStore","RTCConferenceState","RTCWebMediaLoggingStreamsTypes","RTCWebMediaStreamsTypedLogger","RTWebLoggingCallType","UserAgent","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol;function h(){if(b("gkx")("AT7wMd4ZVL2URU3KEZoUfmgBuEs-xg1FOwYHz2TSlVVttVLkQcr5tr0YOsr6qMkjbt3fdP7clb0laYlEpkrc62d5")){var a=b("RTCCallStore").getState(),c=a.callInfo;a=a.callSummary;return new(b("RTCWebMediaStreamsTypedLogger"))().setCallID(c.callID).setTimeElapsed(a.getCallDuration()).setConferenceName(c.conferenceName).setCallType(c.protocol===g.MULTIWAY?b("RTWebLoggingCallType").MW:b("RTWebLoggingCallType").P2P)}return null}function i(a,c){a.getVideoSendKeys().forEach(function(d){var e=a.getOutboundQpSum(d),f=a.getFramesEncoded(d),g=a.getVideoBytesSent(d);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").OUTBOUND_QP,e);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").FRAMES_ENCODED,f);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_BYTES_SENT,g);var i=h();i&&i.setIsLocal(!0).setStreamType(b("RTCWebMediaLoggingStreamsTypes").VIDEO).setStreamID(d).setFrames(f).setQpSum(e).setBytes(g).setPackets(a.getVideoPacketsSent(d)).setPacketsLost(a.getVideoPacketsSentLost(d)).setFrameHeight(a.getVideoFrameHeightSent(d)).setFramesPerSecond(a.getVideoFrameRateSent(d)).setFrameWidth(a.getVideoFrameWidthSent(d)).log()})}function j(a,c){a.getVideoRecvKeys().forEach(function(d){var e=a.getInboundQpSum(d),f=a.getFramesDecoded(d),g=a.getVideoBytesReceived(d);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED,g);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").INBOUND_QP,e);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").FRAMES_DECODED,f);var i=h();i&&i.setIsLocal(!1).setStreamType(b("RTCWebMediaLoggingStreamsTypes").VIDEO).setStreamID(d).setBytes(g).setFrames(f).setQpSum(e).setPackets(a.getVideoPacketsReceived(d)).setPacketsLost(a.getVideoPacketsReceivedLost(d)).setFrameHeight(a.getVideoFrameHeightReceived(d)).setFramesPerSecond(a.getVideoFrameRateReceived(d)).setFrameWidth(a.getVideoFrameWidthReceived(d)).log()})}function k(a){a.getAudioSendKeys().forEach(function(c){var d=h();d&&d.setIsLocal(!0).setStreamType(b("RTCWebMediaLoggingStreamsTypes").AUDIO).setStreamID(c).setBytes(a.getAudioBytesSent(c)).setPackets(a.getAudioPacketsSent(c)).setRtt(a.getAudioSendRtt(c)).setPacketsLost(a.getAudioPacketsSentLost(c)).log()})}function l(a,c){__p&&__p();a.getAudioRecvKeys().forEach(function(d){var e=a.getJitterBufferDelay(d),f=a.getAudioJitter(d),g=a.getAccelerateRate(d),i=a.getExpandRate(d),j=a.getPreemptiveExpandRate(d),k=a.getDiscardRate(d);c.addJitterBufferDelay(d,e);c.addMetricStat(d,b("FBRTCMediaMetricsConst").JITTER,f);c.addMetricStat(d,b("FBRTCMediaMetricsConst").ACCELERATE_RATE,g);c.addMetricStat(d,b("FBRTCMediaMetricsConst").DISCARD_RATE,k);c.addMetricStat(d,b("FBRTCMediaMetricsConst").EXPAND_RATE,i);c.addMetricStat(d,b("FBRTCMediaMetricsConst").PREEMPTIVE_RATE,j);g=h();g&&g.setIsLocal(!1).setStreamType(b("RTCWebMediaLoggingStreamsTypes").AUDIO).setStreamID(d).setJitter(f).setJitterBufferDelay(e).setBytes(a.getAudioBytesReceived(d)).setPackets(a.getAudioPacketsReceived(d)).setRtt(a.getAudioReceivedRtt(d)).setPacketsLost(a.getAudioPacketsReceivedLost(d)).log()})}var m={parseStats:function(a,c){__p&&__p();a.getStats().then(function(a){var d=null;b("UserAgent").isBrowser("Chrome")?d=new(b("FBRTCChromeMediaStatsReport"))(a):b("UserAgent").isBrowser("Firefox")&&(d=new(b("FBRTCMozMediaStatsReport"))(a));if(d){a=c.getMediaMetricTracker();l(d,a);k(d);j(d,a);i(d,a)}})["catch"](function(a){b("FBRTCLogger").getInstance().logToConsole("error parsing RTCStatsReport")})},startCollectingMediaStats:function(){var a=b("RTCCallStore").getState().callInfo.conferenceState,c=b("RTCCallStore").getState().callSummary,d=b("RTCCallStore").getState().connections.first();a!==b("RTCConferenceState").TERMINATED&&(d&&m.parseStats(d,c),setTimeout(m.startCollectingMediaStats,5e3))}};e.exports=m}),null);
__d("VideoCallWebDriverIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACCEPT_ESCALATION_CALL_BUTTON:"acceptEscalationButton",ADD_GROUP_MEMBERS_BUTTON:"addGroupMembersButton",ANSWER_CALL_BUTTON:"answerCallButton",DOMINANT_SPEAKER_SWITCH_BUTTON:"dominantSpeakerSwitchButton",END_CALL_BUTTON:"endCallButton",ESCALATE_CALL_BUTTON:"escalateCallButton",FULL_SCREEN_BUTTON:"fullScreenButton",GRID_SWITCH_BUTTON:"gridSwitchButton",IGNORE_CALL_BUTTON:"ignoreCallButton",INCALL_VIDEO_CONTAINER:"incallVideoContainer",REDIAL_BUTTON:"rediallButton",REMOTE_VIEW_THUMBNAIL:"remoteViewThumbnail",RTC_APP_VIEW_START_CALL_BUTTON:"RTCAppViewStartCallButton",RTC_INCALL_VIDEO:"RTCIncallVideo",RTC_PICKER_DIALOG_CALL_BUTTON:"RTCPickerDialogCallButton",RTC_PICKER_DIALOG_CANCEL_BUTTON:"RTCPickerDialogCancelButton",RTC_PICKER_DIALOG_CONTACT_LIST_ITEM:"RTCPickerDialogContactListItem",RTC_PICKER_DIALOG_RING_BUTTON:"RTCPickerDialogRingButton",RTC_SELF_VIEW:"RTCSelfView",STAR_RATING_VIEW:"starRatingView",START_VIDEO_CALL:"startVideoCall",START_VOICE_CALL:"startVoiceCall",TOGGLE_AUDIO_BUTTON:"toggleAudioButton",TOGGLE_VIDEO_BUTTON:"toggleVideoButton",TOGGLE_CHAT_BUTTON:"toggleChatButton",CLOSE_CHAT_BUTTON:"closeChatButton",PROFILE_VIDEO_CALL_BUTTON:"profileVideoCall"})}),null);
__d("MessengerLightweightActionUtils",["MercuryAttachmentType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return!!(a&&a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.target&&a.share.target.lwa_type)}function a(a){a=a.attachments;return!!(a&&a.length===1&&g(a[0]))}function c(a){return a.attachments[0].share.title}function d(a){return a[0].share.title}e.exports={isLWAMessage:a,isLWAAttachment:g,getCollapsedLWAText:c,getLWASnippetText:d}}),null);