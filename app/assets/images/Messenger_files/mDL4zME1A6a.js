if (self.CavalryLogger) { CavalryLogger.start_js(["\/FxUx"]); }

__d("MessengerPlatformBubbleAspectRatio",[],(function(a,b,c,d,e,f){e.exports={IMAGE_ASPECT_RATIO_HORIZONTAL:1.91,IMAGE_ASPECT_RATIO_SQUARE:1}}),null);
__d("FileInput.react",["cx","invariant","FileInput","InlineBlock.react","React","ReactDOM","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.getFileInput=function(){return this.$1}.bind(this),this.focus=function(){var a=b("ReactDOM").findDOMNode(this.refs.fileInput);a.disabled||a.focus()}.bind(this),c}a.prototype.render=function(){"use strict";var a=b("joinClasses")("_m",this.props.containerClassName),c="container",d=b("React").createElement("input",babelHelpers["extends"]({},this.props,{type:"file",className:b("joinClasses")(this.props.className,"_n"),ref:"fileInput"}),undefined);if(this.props.display==="block")return b("React").createElement("div",{className:a,ref:c},this.props.children,d);else if(this.props.display==="inline-block")return b("React").createElement(b("InlineBlock.react"),{className:a,ref:c},this.props.children,d);else return b("React").createElement("span",{className:a,ref:c},this.props.children,d)};a.prototype.componentDidMount=function(){"use strict";var a=b("ReactDOM").findDOMNode(this.refs.fileInput),c=b("ReactDOM").findDOMNode(this.refs.container),d=c.firstChild;d.nodeName==="A"||h(0);d.setAttribute("rel","ignore");this.$1=new(b("FileInput"))(c,d,a)};a.prototype.componentWillUnmount=function(){"use strict";this.$1.destroy(),this.$1=null};a.propTypes={containerClassName:c.string,display:c.oneOf(["block","inline-block","inline"])};a.defaultProps={display:"inline-block"};e.exports=a}),null);
__d("PageProductTransactionPaymentTypeDataKey",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACCOUNT_NAME:"account_name",ACCOUNT_NO:"account_no"})}),null);
__d("XOmnipickerPhotoUploadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/omnipicker/upload/file/photo/",{source:{type:"Enum",required:!0,enumType:0},waterfall_id:{type:"String"},vault_fbid:{type:"String"}})}),null);
__d("CommerceContactMerchantManualPaymentSection.react",["cx","fbt","FBPaymentsStringHelper","FileInput.react","FileInputUploader","Image.react","PageProductTransactionPaymentTypeDataKey","React","ReactDOM","XOmnipickerPhotoUploadController","XUIButton.react","XUIGrayText.react","XUISpinner.react","XUIText.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=29,k=120;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(a){__p&&__p();i.constructor.call(this,a),this.$6=function(event,a){a=a.response.getPayload()[0];this.setState({photoUploading:!1,receiptPhotoID:a.fbid,receiptPhotoURL:a.src});this.props.onReceiptUpdated(a.fbid,a.src)}.bind(this),this.$2=function(a){a=b("XOmnipickerPhotoUploadController").getURIBuilder().setEnum("source",j).getURI();var c=this.refs.fileInput;a=new(b("FileInputUploader"))(b("ReactDOM").findDOMNode(c)).setURI(a);a.subscribe("failure",this.$5);a.subscribe("success",this.$6);a.send();c.getFileInput().clear();this.setState({photoUploading:!0})}.bind(this),this.state={receiptPhotoID:null,receiptPhotoURL:null,photoUploading:!1}}a.prototype.render=function(){var a=this.props.paymentOptionDetails,c=a[b("PageProductTransactionPaymentTypeDataKey").ACCOUNT_NAME],d=a[b("PageProductTransactionPaymentTypeDataKey").ACCOUNT_NO];a=b("FBPaymentsStringHelper").stringToMarkup(a.description);d=d==null?null:b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"dark",size:"meta1",className:"_3-8m"},h._("Account Number"),": ",d);c=c==null?null:b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"dark",size:"meta1",className:"_3-8m"},h._("Name on Account"),": ",c);return b("React").createElement("div",{className:"_2ph-"},b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"light",size:"meta1"},this.$1()),b("React").createElement(b("XUIText.react"),{display:"block",weight:"bold",size:"meta1",className:"_3-8m"},this.props.paymentOptionDetails.name),d,c,b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"dark",size:"meta1",className:"_3-8m"},a),b("React").createElement(b("XUIGrayText.react"),{className:"_3-97",display:"block",size:"meta1"},h._("Order #{order_number}",[h._param("order_number",this.props.invoiceID)])),b("React").createElement("div",null,b("React").createElement(b("XUISpinner.react"),{className:"_3-9c"+(this.state.photoUploading?"":" hidden_elem")}),b("React").createElement("div",{className:(this.state.photoUploading?"hidden_elem":"")+" _3-96"},b("React").createElement(b("FileInput.react"),{name:"file",multiple:!1,ref:"fileInput",accept:"image/*",onChange:this.$2},b("React").createElement(b("XUIButton.react"),{href:{url:"#"},label:this.$3()})))),this.$4())};a.prototype.$4=function(){return!this.state.receiptPhotoURL?null:b("React").createElement(b("Image.react"),{src:this.state.receiptPhotoURL,height:k,width:k})};a.prototype.$3=function(){return this.state.receiptPhotoID?h._("Attach Different Receipt"):h._("Attach Receipt")};a.prototype.$1=function(){return h._("Payment instructions from seller")};a.prototype.$5=function(a){};a.propTypes={paymentOptionDetails:c.object.isRequired,invoiceID:c.string.isRequired,onReceiptUpdated:c.func.isRequired};e.exports=a}),null);
__d("FBAccordion.react",["cx","invariant","React","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){var c=0,d=this.state?this.state.expandedSectionKey:null,e=null;b("React").Children.forEach(a.children,function(a,b){a=a.props.expanded;e=d===b?d:e;a&&d===null?(c===0||h(0),c++,e=b):e===null&&(e=b)});return e}.bind(this),this.$2=function(a){this.state.expandedSectionKey!==a&&this.setState({expandedSectionKey:a})}.bind(this),this.state={expandedSectionKey:this.$1(this.props)},c}a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";a=this.$1(a);this.state.expandedSectionKey!==a&&this.setState({expandedSectionKey:a})};a.prototype.render=function(){"use strict";var a=b("React").Children.map(this.props.children,function(a,c){return b("React").cloneElement(a,{isExpanded:this.state.expandedSectionKey===c,onSectionClick:this.$2,sectionKey:c})}.bind(this));return b("React").createElement("div",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_5ygd")}),a)};e.exports=a}),null);
__d("FBAccordionSection.react",["cx","React","ShimButton.react","emptyFunction"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.onClick=function(){this.props.onSectionClick(this.props.sectionKey),this.props.onClick(this.props.sectionKey)}.bind(this),b}a.prototype.render=function(){"use strict";var a=this.props.maxHeight||"100%";return b("React").createElement("div",{className:"_4r-a"+(this.props.isExpanded?" _3uxn":"")},b("React").createElement(b("ShimButton.react"),{className:"_5yg8",onClick:this.onClick},this.props.header),b("React").createElement("div",{className:"_1flr",style:{maxHeight:this.props.isExpanded?a:0}},this.props.children))};a.propTypes={expanded:c.bool,header:c.node.isRequired,maxHeight:c.number,onClick:c.func};a.defaultProps={expanded:!1,onClick:b("emptyFunction")};e.exports=a}),null);
__d("XUIButtonGroup.react",["cx","invariant","React","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){"use strict";this.validateButtonSize();var a="_51xa"+(this.props.isOverlay?" _51xb":"");return b("React").createElement("div",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,a)}),this.props.children)};a.prototype.validateButtonSize=function(){"use strict";__p&&__p();if(!this.props.isOverlay){var a;b("React").Children.forEach(this.props.children,function(b){if(b){b.type.getButtonSize||h(0);b=b.type.getButtonSize(b.props);!a?a=b:b===a||h(0)}})}};function a(){"use strict";i.apply(this,arguments)}a.propTypes={isOverlay:c.bool};e.exports=a}),null);
__d("ContextualLayerPositionClassOnContext",["cx","CSS"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){"use strict";this._layer=a}a.prototype.enable=function(){"use strict";this._subscription=this._layer.subscribe("reposition",this._updateClassName.bind(this)),this._layer.isShown()&&this._updateClassName()};a.prototype.disable=function(){"use strict";this._subscription.unsubscribe(),this._subscription=null,this._prevClassName&&(b("CSS").removeClass(this._layer.getContext(),this._prevClassName),this._prevClassName=null)};a.prototype._updateClassName=function(a,c){"use strict";__p&&__p();a=this._layer.getContext();c=h(c);if(this._prevClassName){if(this._prevClassName===c)return;b("CSS").removeClass(a,this._prevClassName)}b("CSS").addClass(a,c);this._prevClassName=c};function h(a){__p&&__p();var b=a.getAlignment();a=a.getPosition();if(a==="below")if(b==="left")return"_nk";else if(b==="right")return"_nl";else return"_nm";else if(a==="above")if(b==="left")return"_nn";else if(b==="right")return"_no";else return"_np";else if(a==="left")return"_nq";else return"_nr"}Object.assign(a.prototype,{_subscription:null,_prevClassName:null});e.exports=a}),null);
__d("XUISelectorButton.react",["invariant","React","XUIPopoverButton.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";this.props.theme&&g(0);return b("React").createElement(b("XUIPopoverButton.react"),babelHelpers["extends"]({},this.props,{theme:"dark"}))};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("XUISelector.react",["invariant","AbstractSelector.react","ContextualLayerPositionClassOnContext","React","ReactXUIMenu","XUISelectorButton.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("ReactXUIMenu").SelectableMenu;a=b("ReactXUIMenu").SelectableItem;c=b("React").PropTypes;d=b("React").createClass({displayName:"ReactXUISelector",propTypes:{customButton:c.element,layerBehaviors:c.array,maxheight:c.number,multiple:c.bool,position:c.oneOf(["above","below","left","right"]),disabled:c.bool,haschevron:c.bool,maxwidth:c.number,size:c.oneOf(["small","medium","large","xlarge","xxlarge"]),suppressed:c.bool,use:c.oneOf(["default","special","confirm"])},statics:{getButtonSize:function(a){return a.size||"medium"}},getDefaultProps:function(){return{haschevron:!0,layerBehaviors:[],multiple:!1}},render:function(){var a,c=[];b("React").Children.forEach(this.props.children,function(a){a&&c.push(a)});this.props.customButton?a=this.props.customButton:c[0]&&c[0].type===b("XUISelectorButton.react")?(a=c[0],c=c.slice(1)):a=b("React").createElement(b("XUISelectorButton.react"),{ref:"button",haschevron:this.props.haschevron,disabled:this.props.disabled,use:this.props.use,size:this.props.size,suppressed:this.props.suppressed,maxwidth:this.props.maxwidth});a={button:a,menu:b("React").createElement(h,{maxheight:this.props.maxheight,multiple:this.props.multiple}),layerBehaviors:this.props.layerBehaviors.concat([b("ContextualLayerPositionClassOnContext")])};return b("React").createElement(b("AbstractSelector.react"),babelHelpers["extends"]({},this.props,{ref:"abstractSelector",config:a}),c)},showMenu:function(){this.isMounted()||g(0),this.refs.abstractSelector.showMenu()},showAndFocusMenu:function(){this.isMounted()||g(0),this.refs.abstractSelector.showAndFocusMenu()},hideMenu:function(){this.isMounted()||g(0),this.refs.abstractSelector.hideMenu()}});d.Option=a;e.exports=d}),null);
__d("XUIRadioButtonGroup.react",["Focus","React","ReactDOM","RTLKeys","XUIButtonGroup.react"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"XUIRadioButtonGroup",propTypes:{onValueChange:a.func,selectedValue:a.any,selectedUse:a.oneOf(["default","special","confirm"]),selectedDepressed:a.bool},UNSAFE_componentWillMount:function(){this.radioChildComponents=[]},render:function(){var a=this,c=b("React").Children.toArray(this.props.children).some(function(a){return this.props.selectedValue===a.props.value}.bind(this)),d=b("React").Children.map(this.props.children,function(d,e){var f=this.props.selectedValue===d.props.value,g=f&&"selectedDepressed"in this.props?this.props.selectedDepressed:d.props.depressed,h=f?"0":"-1";!f&&!c&&e===0&&(h="0");h={role:"radio","aria-checked":f?"true":"false",tabIndex:h,onKeyDown:a._onKeyDown};f=babelHelpers["extends"]({onClick:this._getClickHandler(d.props.value,d.props.onClick),use:f&&"selectedUse"in this.props?this.props.selectedUse:d.props.use,depressed:g,ref:function(a){this.radioChildComponents[e]=a}.bind(this)},h);return b("React").cloneElement(d,f)}.bind(this),this),e={role:"radiogroup"};return b("React").createElement(b("XUIButtonGroup.react"),babelHelpers["extends"]({},this.props,e),d)},_getClickHandler:function(a,b){var c=this.props;return function(){c.onValueChange&&c.onValueChange(a),b&&b.apply(this,arguments)}},_onKeyDown:function(event){__p&&__p();var a=this;switch(Event.getKeyCode(event)){case b("RTLKeys").UP:case b("RTLKeys").getLeft():c(-1);break;case b("RTLKeys").DOWN:case b("RTLKeys").getRight():c(1);break;case b("RTLKeys").SPACE:c(0);break}function c(c){c=d(c);var e=b("React").Children.toArray(a.props.children)[c];a._getClickHandler(e.props.value,e.props.onClick)();e=b("ReactDOM").findDOMNode(a.radioChildComponents[c]);b("Focus").set(e)}function d(c){var d=a.props,e=b("React").Children.toArray(d.children),f=d.selectedValue;d=e.filter(function(a){return a.props.value===f})[0];d=e.indexOf(d);d=d===-1?0:d+c;d<0&&(d=0);d>e.length-1&&(d=e.length-1);return d}}});e.exports=c}),null);
__d("FBPaymentsAddressLabelFormField_DEPRECATED.react",["cx","fbt","React","XUISelector.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("XUISelector.react").Option;c=b("React").PropTypes;var k=[h._("Home"),h._("Work"),h._("Other")];d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={value:k[0].toString()},this.handleChange=function(a){a=a.value;this.setState({value:a});this.triggerChange(a)}.bind(this),this.triggerChange=function(a){var b=this.props.onChange;typeof b==="function"&&b(this.props.name,a,!0,!1)}.bind(this),this.renderSelectorOptions=function(){return k.map(function(a,c){return b("React").createElement(j,{key:c,value:a.toString()},a)})},c}a.prototype.componentDidMount=function(){this.triggerChange(this.state.value)};a.prototype.render=function(){return b("React").createElement(b("XUISelector.react"),{className:b("joinClasses")(this.props.className,"_e-n"),onChange:this.handleChange,name:this.props.name,value:this.state.value},this.renderSelectorOptions())};a.propTypes={onChange:c.func,name:c.string.isRequired};e.exports=a}),null);
__d("FBPaymentsAddressForm_DEPRECATED.react",["cx","fbt","FBPaymentsAddressCountrySelectorFormField_DEPRECATED.react","FBPaymentsAddressLabelFormField_DEPRECATED.react","FBPaymentsForm_DEPRECATED.react","FBPaymentsFormField_DEPRECATED.react","React","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={formData:{},isValid:!1},this.handleValidation=function(a,b){this.setState({formData:b,isValid:a}),this.props.onValidation(a,b)}.bind(this),b}a.prototype.render=function(){var a=!!(this.props.prefilledFormData&&this.props.prefilledFormData.care_of),c=this.props.showAddressLabelSelector?b("React").createElement(b("FBPaymentsAddressLabelFormField_DEPRECATED.react"),{className:"_3-96",name:"label",ignoreStyling:!0,required:!0}):null;return b("React").createElement(b("FBPaymentsForm_DEPRECATED.react"),{errorTitle:h._("Problem Saving Address"),prefilledFormData:this.props.prefilledFormData,onValidation:this.handleValidation,saveErrors:this.props.saveErrors,useGutters:!0},c,b("React").createElement(b("FBPaymentsFormField_DEPRECATED.react"),{initiallyFocused:!a,name:"care_of",onChange:b("emptyFunction"),placeholder:h._("Your Name"),required:!0,width:100}),b("React").createElement(b("FBPaymentsFormField_DEPRECATED.react"),{initiallyFocused:a,name:"street1",onChange:b("emptyFunction"),placeholder:h._("Street Address"),required:!0,width:100}),b("React").createElement(b("FBPaymentsFormField_DEPRECATED.react"),{name:"street2",onChange:b("emptyFunction"),placeholder:h._("Street Address Continued (optional)"),width:100}),b("React").createElement(b("FBPaymentsFormField_DEPRECATED.react"),{name:"city",onChange:b("emptyFunction"),placeholder:h._("City\/District"),required:!0,width:50}),b("React").createElement(b("FBPaymentsFormField_DEPRECATED.react"),{name:"state",onChange:b("emptyFunction"),placeholder:h._("State\/Province\/Region"),required:!0,width:50}),b("React").createElement(b("FBPaymentsFormField_DEPRECATED.react"),{name:"zip",onChange:b("emptyFunction"),placeholder:h._("ZIP\/Postal Code"),width:50}),b("React").createElement(b("FBPaymentsAddressCountrySelectorFormField_DEPRECATED.react"),{name:"country",onChange:b("emptyFunction"),required:!0,size:"xlarge",width:50}))};a.propTypes={onValidation:c.func.isRequired,prefilledFormData:c.object,saveErrors:c.object,showAddressLabelSelector:c.bool};a.defaultProps={onValidation:b("emptyFunction"),prefilledFormData:{},saveErrors:null,showAddressLabelSelector:!0};e.exports=a}),null);
__d("FBPaymentsBankDetailsShape_DEPRECATED",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=a.shape({code:a.string.isRequired,image:a.string,name:a.string.isRequired});e.exports=c}),null);
__d("FBPaymentsBankSelector_DEPRECATED.react",["ix","cx","fbt","FBPaymentsBankDetailsShape_DEPRECATED","Image.react","React","XUIPopoverButton.react","XUISingleSelector.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("XUISingleSelector.react").Option;c=b("React").PropTypes;var l="data:image/png;base64,";d=480;f=babelHelpers.inherits(a,b("React").Component);j=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.onChange=function(a){this.props.onBankSelected(this.props.banks.find(function(b){return b.code===a.value}))}.bind(this),b}a.prototype.renderBankIcon=function(a){return!a.image?null:b("React").createElement(b("Image.react"),{className:"_4e1_",src:l+a.image})};a.prototype.renderCustomButton=function(){var a=b("React").createElement(b("Image.react"),{className:"_4e20",src:g("127625")});return b("React").createElement(b("XUIPopoverButton.react"),{chevron:a,className:"_4e22",maxwidth:0,size:"large"})};a.prototype.renderDefaultOption=function(){return b("React").createElement(k,{className:"_4e23","default":!0,key:"default"},i._("Select your bank"))};a.prototype.render=function(){return b("React").createElement(b("XUISingleSelector.react"),{className:"_4e2g",customButton:this.renderCustomButton(),maxheight:this.props.maxheight,maxwidth:0,onChange:this.onChange,size:"large"},this.renderDefaultOption(),this.props.banks.map(function(a){return b("React").createElement(k,{className:"_4e23",icon:this.renderBankIcon(a),key:a.code,value:a.code},a.name)}.bind(this)))};a.propTypes={banks:c.arrayOf(b("FBPaymentsBankDetailsShape_DEPRECATED")).isRequired,maxheight:c.number,onBankSelected:c.func.isRequired};a.defaultProps={maxheight:d};e.exports=a}),null);
__d("FBPaymentsPaymentMethodShape_DEPRECATED",["FBPaymentsMethodType","React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=a.shape({title:a.string,type:a.oneOf(Object.values(b("FBPaymentsMethodType"))).isRequired});e.exports=c}),null);
__d("FBPaymentsChoosePaymentMethodForm_DEPRECATED.react",["cx","fbt","FBAccordion.react","FBAccordionSection.react","FBPaymentsBankSelector_DEPRECATED.react","FBPaymentsCreditCardForm_DEPRECATED.react","FBPaymentsMethodType","FBPaymentsPaymentMethodShape_DEPRECATED","Link.react","P2PCreditCardDetails.react","P2PLinkConstants","P2PText.react","React","XUIRadioList.react","emptyFunction","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("XUIRadioList.react").Item;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(a){__p&&__p();i.constructor.call(this,a),this.handleBankSelected=function(a){this.props.onPaymentMethodConfigured({bank:a,isValid:!!a,type:b("FBPaymentsMethodType").NET_BANKING})}.bind(this),this.handleCreditCardFormValidation=function(a,c){this.props.onPaymentMethodConfigured({isValid:a,formData:c,type:b("FBPaymentsMethodType").NEW_CREDIT_CARD})}.bind(this),this.renderPaymentMethodItem=function(a,c){__p&&__p();var d=null,e=null;switch(a.type){case b("FBPaymentsMethodType").GENERIC_CARD:d=b("React").createElement(b("P2PCreditCardDetails.react"),{creditCard:a.creditCard});break;case b("FBPaymentsMethodType").NEW_CREDIT_CARD:d=h._("Credit or Debit Card");e=this.renderCreditCardFormSection(c);break;case b("FBPaymentsMethodType").NET_BANKING:d=h._("Online Banking");e=this.renderBankSelectorSection(a);break;case b("FBPaymentsMethodType").PAY_OVER_COUNTER:d=h._("Payment at Store Counter");break;case b("FBPaymentsMethodType").MANUAL_TRANSFER:d=a.title;break;default:d=a.title?a.title:a.type;e=b("React").createElement(b("P2PText.react"),{type:"primary"},"Expanded content for ",d);break}e=e?b("React").createElement("div",{className:"_51c-"},e):null;a=b("React").createElement(j,{className:"_51c_",selectedValue:this.state.selectedKey,value:c},b("React").createElement(b("P2PText.react"),{type:"primary"},d));return b("React").createElement(b("FBAccordionSection.react"),{header:a,key:c,onClick:this.onSectionClick.bind(this)},e)}.bind(this),this.state={selectedKey:0}}a.prototype.UNSAFE_componentWillMount=function(){b("setImmediate")(function(){return this.onSectionClick(this.state.selectedKey)}.bind(this))};a.prototype.onSectionClick=function(a){__p&&__p();this.setState({selectedKey:a});a=this.props.paymentMethods[a];this.props.onPaymentMethodSelected(a);switch(a.type){case b("FBPaymentsMethodType").PAY_OVER_COUNTER:this.props.onPaymentMethodConfigured({isValid:!0,type:a.type});break;case b("FBPaymentsMethodType").MANUAL_TRANSFER:var c=a.manual_transfer_info&&a.manual_transfer_info.id;this.props.onPaymentMethodConfigured({isValid:!0,type:a.type,optionId:c});break;case b("FBPaymentsMethodType").GENERIC_CARD:this.props.onPaymentMethodConfigured({isValid:!0,creditCard:a.creditCard,type:a.type});break}};a.prototype.getSections=function(){return this.props.paymentMethods.map(this.renderPaymentMethodItem,this)};a.prototype.renderCreditCardFormSection=function(a){return a!==this.state.selectedKey?null:b("React").createElement("div",null,b("React").createElement(b("FBPaymentsCreditCardForm_DEPRECATED.react"),{onValidation:this.handleCreditCardFormValidation,saveErrors:this.props.saveErrors,showIcons:!1,showSecondaryIcons:!0,showZipCodeField:!1,useGutters:!0}),b("React").createElement(b("P2PText.react"),{className:"_3-8y",type:"secondary"},h._("Your payment info is stored securely. {Link with text that goes to learn more page}",[h._param("Link with text that goes to learn more page",b("React").createElement(b("Link.react"),{href:b("P2PLinkConstants").securePayInfoLearnMoreURI,target:"_blank"},h._("Learn More")))])))};a.prototype.renderBankSelectorSection=function(a){return b("React").createElement(b("FBPaymentsBankSelector_DEPRECATED.react"),{banks:a.banks,onBankSelected:this.handleBankSelected})};a.prototype.render=function(){return b("React").createElement("ul",{className:"_51d0"},b("React").createElement(b("FBAccordion.react"),null,this.getSections()))};a.propTypes={onPaymentMethodConfigured:c.func.isRequired,onPaymentMethodSelected:c.func.isRequired,paymentMethods:c.arrayOf(b("FBPaymentsPaymentMethodShape_DEPRECATED")).isRequired,saveErrors:c.object};a.defaultProps={onPaymentMethodConfigured:b("emptyFunction")};e.exports=a}),null);
__d("FBPaymentsLegalDisclaimer_DEPRECATED.react",["fbt","FBPaymentsLinkHelper","FBPaymentsMethodType","Link.react","P2PText.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.getLegalDisclaimerText=function(){var a=b("FBPaymentsLinkHelper").getPayTermsAndPoliciesURI(this.props.paymentType),c=g._("By clicking Complete Purchase, you agree to Facebook's {=terms and policies}",[g._param("=terms and policies",b("React").createElement(b("Link.react"),{href:a,target:"_blank"},"terms and policies"))]),d=g._("By clicking Pay, you agree to Facebook's and 2C2P's {=terms and policies}",[g._param("=terms and policies",b("React").createElement(b("Link.react"),{href:a,target:"_blank"},"terms and policies"))]),e=g._("By clicking Log In and Pay, you agree to Facebook's and 2C2P's {=terms and policies}",[g._param("=terms and policies",b("React").createElement(b("Link.react"),{href:a,target:"_blank"},"terms and policies"))]);a=g._("By clicking Continue to Pay, you agree to Facebook's and 2C2P's {=terms and policies}",[g._param("=terms and policies",b("React").createElement(b("Link.react"),{href:a,target:"_blank"},"terms and policies"))]);switch(this.props.paymentMethodType){case b("FBPaymentsMethodType").GENERIC_CARD:return d;case b("FBPaymentsMethodType").NET_BANKING:return e;case b("FBPaymentsMethodType").PAY_OVER_COUNTER:return a;case b("FBPaymentsMethodType").MANUAL_TRANSFER:return c;default:return null}};a.prototype.render=function(){return b("React").createElement(b("P2PText.react"),{type:"secondary"},this.getLegalDisclaimerText())};function a(){h.apply(this,arguments)}a.propTypes={paymentMethodType:c.string.isRequired,paymentType:c.string.isRequired};a.defaultProps={paymentType:""};e.exports=a}),null);
__d("FBPaymentsCreditCardVerificationDialog_DEPRECATED.react",["cx","fbt","CreditCardFormParam","FBPaymentsCreditCardVerificationForm_DEPRECATED.react","P2PButton.react","P2PCreditCard","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLoadingMask.react","P2PText.react","PaymentMethodUtils","React","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={cscInput:null,isValid:!1},this.handleValidation=function(a,c){this.setState({cscInput:c[b("CreditCardFormParam").CSC],isValid:a})}.bind(this),this.handleConfirmClick=function(){this.props.onConfirm(this.state.cscInput)}.bind(this),this.getMaxCSCLength=function(){var a=this.props.creditCard.getCardType();return b("PaymentMethodUtils").getCardTypeFromCode(a).cscDigits}.bind(this),this.getMessage=function(){if(this.getMaxCSCLength()===3)return h._("Please re-enter your card's three-digit security code.");else return h._("Please re-enter your card's four-digit security code.")}.bind(this),this.renderFooter=function(){var a=h._("Cancel");a=this.props.showCancelButton?b("React").createElement(b("P2PButton.react"),{label:a,onClick:this.props.onCancel,use:"default"}):null;return b("React").createElement(b("P2PDialogFooter.react"),{className:"_3-8-",leftContent:this.props.leftContent},a,b("React").createElement(b("P2PButton.react"),{disabled:!this.state.isValid,label:this.props.primaryButtonText,onClick:this.handleConfirmClick,use:"confirm"}))}.bind(this),c}a.prototype.render=function(){var a={};a[b("CreditCardFormParam").CARD_NUMBER]=this.props.creditCard.getCreditCardNumberMask();a[b("CreditCardFormParam").CARD_EXPIRATION]=this.props.creditCard.getExpFormattedShort();return b("React").createElement(b("P2PDialog.react"),{layerHideOnBlur:!1,repositionOnUpdate:!0,shown:!0},b("React").createElement(b("P2PDialogTitle.react"),null,h._("Enter Security Code")),b("React").createElement(b("P2PDialogBody.react"),null,b("React").createElement(b("FBPaymentsCreditCardVerificationForm_DEPRECATED.react"),{cscMaxLength:this.getMaxCSCLength(),onValidation:this.handleValidation,prefilledFormData:a}),b("React").createElement(b("P2PText.react"),{className:"_3-8y",type:"secondary"},this.getMessage())),this.renderFooter(),b("React").createElement(b("P2PLoadingMask.react"),{visible:this.props.loading}))};a.propTypes={creditCard:c.instanceOf(b("P2PCreditCard")).isRequired,leftContent:c.node,loading:c.bool,onCancel:c.func,onConfirm:c.func.isRequired,primaryButtonText:c.node,showCancelButton:c.bool};a.defaultProps={loading:!1,onCancel:b("emptyFunction"),onConfirm:b("emptyFunction"),primaryButtonText:h._("Confirm"),showCancelButton:!0};e.exports=a}),null);
__d("BrowserExtensionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:BrowserExtensionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:BrowserExtensionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:BrowserExtensionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAPIEndpoint=function(a){this.$1.api_endpoint=a;return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setClientUserID=function(a){this.$1.client_userid=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setDeviceid=function(a){this.$1.deviceid=a;return this};a.prototype.setErrorCode=function(a){this.$1.error_code=a;return this};a.prototype.setErrorMessage=function(a){this.$1.error_message=a;return this};a.prototype.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};a.prototype.setIsemployee=function(a){this.$1.isemployee=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setSessionid=function(a){this.$1.sessionid=a;return this};a.prototype.setStartURL=function(a){this.$1.start_url=a;return this};a.prototype.setStringPageID=function(a){this.$1.string_page_id=a;return this};a.prototype.setThreadID=function(a){this.$1.thread_id=a;return this};a.prototype.setWebsiteURL=function(a){this.$1.website_url=a;return this};c={api_endpoint:!0,appid:!0,appversion:!0,client_userid:!0,clienttime:!0,country:!0,deviceid:!0,error_code:!0,error_message:!0,extra_client_data:!0,isemployee:!0,name:!0,sessionid:!0,start_url:!0,string_page_id:!0,thread_id:!0,website_url:!0};e.exports=a}),null);
__d("MNContentSubscriptionMessageUserEngagementTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MNContentSubscriptionMessageUserEngagementLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MNContentSubscriptionMessageUserEngagementLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MNContentSubscriptionMessageUserEngagementLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setBroadcastUnitID=function(a){this.$1.broadcast_unit_id=a;return this};a.prototype.setClientUserID=function(a){this.$1.client_userid=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setCommerceItemID=function(a){this.$1.commerce_item_id=a;return this};a.prototype.setCommerceMessageType=function(a){this.$1.commerce_message_type=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setDeviceid=function(a){this.$1.deviceid=a;return this};a.prototype.setInterface=function(a){this.$1["interface"]=a;return this};a.prototype.setMessageID=function(a){this.$1.message_id=a;return this};a.prototype.setMessageTs=function(a){this.$1.message_ts=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};c={appid:!0,appversion:!0,broadcast_unit_id:!0,client_userid:!0,clienttime:!0,commerce_item_id:!0,commerce_message_type:!0,country:!0,deviceid:!0,"interface":!0,message_id:!0,message_ts:!0,name:!0,page_id:!0};e.exports=a}),null);
__d("MNPlatformMessageUserEngagementTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MNPlatformMessageUserEngagementLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MNPlatformMessageUserEngagementLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MNPlatformMessageUserEngagementLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setClientUserID=function(a){this.$1.client_userid=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setCommerceItemID=function(a){this.$1.commerce_item_id=a;return this};a.prototype.setCommerceMessageType=function(a){this.$1.commerce_message_type=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setDeviceid=function(a){this.$1.deviceid=a;return this};a.prototype.setInterface=function(a){this.$1["interface"]=a;return this};a.prototype.setMessageID=function(a){this.$1.message_id=a;return this};a.prototype.setMessageTs=function(a){this.$1.message_ts=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};c={appid:!0,appversion:!0,client_userid:!0,clienttime:!0,commerce_item_id:!0,commerce_message_type:!0,country:!0,deviceid:!0,"interface":!0,message_id:!0,message_ts:!0,name:!0,page_id:!0};e.exports=a}),null);
__d("MercuryAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function(a,b,c,d,e,f){"use strict";a={renderVideo:function(a){b("Bootloader").loadModules(["MessagingVideoViewer.react","MessagingForwardAttachmentDialog.react"],function(c,d){b("MessagesViewer").renderVideo(b("React").createElement(c,babelHelpers["extends"]({},a,{forwardDialogComponent:d})))},"MercuryAttachmentViewer")},bootstrapWithConfig:function(a,c){b("Bootloader").loadModules(["SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],function(d,e){b("MessagesViewer").renderSpotlight(a,c,d,e)},"MercuryAttachmentViewer")},preload:function(){b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],b("emptyFunction"),"MercuryAttachmentViewer")})}};e.exports=a}),null);
__d("MNCommerceOrderConfigActions",["MessengerDispatcher","MNCommerceActionTypes"],(function(a,b,c,d,e,f){"use strict";a={itemLoaded:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").RETAIL_ITEM.LOADED,item:a})},itemLoadError:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").RETAIL_ITEM.LOAD_ERROR,itemID:a})},itemReload:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").RETAIL_ITEM.RELOAD,itemID:a})}};e.exports=a}),null);
__d("MNCommerceBubbleImage.react",["cx","React","cssURL","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:b("joinClasses")("_4y9n"+(this.props.isSquare?" _2j_n":"")+(this.props.isSquare?"":" _2j_r"),this.props.className),style:{backgroundImage:b("cssURL")(this.props.source)}})};function a(){h.apply(this,arguments)}a.propTypes={location:c.string,source:c.string.isRequired,width:c.number,isSquare:c.bool};e.exports=a}),null);
__d("MNCommerceCheckoutButton.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i="medium";h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.getButtonSize=function(a){return i};a.prototype.render=function(){var a="_48a0"+(this.props.disabled?" _48a1":"")+(this.props.use==="default"?" _48a2":"")+(this.props.use==="confirm"&&!this.props.disabled?" _48a3":"");return b("React").createElement("span",{className:b("joinClasses")(this.props.className,a),use:"default"},this.props.children)};function a(){h.apply(this,arguments)}a.propTypes={disabled:c.bool,use:c.oneOf(["default","confirm"])};e.exports=a}),null);
__d("MNCommerceCheckoutOrderConfigReactShape",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=a.shape({allVariantOptions:a.object,id:a.string,initialVariantOptions:a.object,itemIDToItem:a.object,logo:a.string,name:a.string,optionToItems:a.object,ordered_product_items:a.array,product_item_id:a.string,variant_labels:a.array});e.exports=c}),null);
__d("MNCommerceCheckoutOrderConfigUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={DELIMITER:"!@*",addVariantOptions:function(a){__p&&__p();a=a;var b=this._buildItemMaps(a),c=b.optionToItems,d=b.itemIDToItem;b=b.variantToItemID;var e=this._getVariantOptionsAndEligibleItems(a,c,d),f=e.allVariantOptions;e=e.initialVariantOptions;a.itemIDToItem=d;a.optionToItems=c;a.variantToItemID=b;a.allVariantOptions=f;a.initialVariantOptions=e;return a},_buildItemMaps:function(a){__p&&__p();var b=new Map(),c=new Map(),d=new Map();a.ordered_product_items.forEach(function(a){__p&&__p();var e=a.variant_values,f=[];Object.keys(e).forEach(function(a){f.push(e[a])});var h=f.join(g.DELIMITER);d.set(h,a.item_id);b.set(a.item_id,a);for(var h=0;h<f.length;h++){c.has(h)||c.set(h,new Map());var i=f[h],j=c.get(h);!j.has(i)?j.set(i,new Set([a.item_id])):j.get(i).add(a.item_id)}});return{itemIDToItem:b,optionToItems:c,variantToItemID:d}},_getVariantOptionsAndEligibleItems:function(a,b,c){__p&&__p();var d={},e={};for(var f=0;f<a.variant_labels.length;f++){d[f]={};var g=[];b.get(f).forEach(function(h,i){__p&&__p();h=new Map();g.push({label:i,available:!0});for(var j=0;j<a.variant_labels.length;j++){if(f===j)continue;var k=[];b.get(j).forEach(function(a,d){a=this._getIntersection(a,b.get(f).get(i));var e=!1;a.size>0&&(e=this._isInStock(a,c));k.push({label:d,available:e})}.bind(this),this);h.set(j,k)}d[f][i]=h;e[f]=g}.bind(this),this)}return{allVariantOptions:d,initialVariantOptions:e}},_getIntersection:function(a,b){var c=new Set([]);a.forEach(function(a){b.has(a)&&c.add(a)});return c},_isInStock:function(a,b){var c=!1;a.forEach(function(a){a=b.get(a);a.commerce_inventory>0&&(c=!0)});return c}};e.exports=g}),null);
__d("MNCommerceLogoHeaderReact.bs",["cx","React","ImageReact.bs","ReasonReact.bs","bs_js_primitive"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="24px",i="12px",j=b("ReasonReact.bs").statelessComponent("MNCommerceLogoHeader");function k(a,c,d,e){__p&&__p();var f=function(){__p&&__p();if(a){var c=a[0],d=c.src;if(d==null)return null;else{var e=c.width/c.height;e=Math.abs(3-e)<=.75?i:h;return b("React").createElement("div",{key:"logo",className:"_b0-"},b("React").createElement("div",{className:"_fz0"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(["_56rs"],0,0,0,[d],[c.height],0,[c.width],[{maxHeight:e}],[]))))}}else return null};return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){__p&&__p();var g=f(0);if(e.length!==0){var h=b("React").createElement("div",{key:"children",className:"_fy-"+((c?!1:!0)?" _fy_":"")},b("React").createElement("div",{className:"_56rv"},e));if(a){var i=a[0].src;i=i==null?[!0,[h]]:c?[!1,[h,g]]:[!1,[g,h]]}else i=[!0,[h]];return b("React").createElement("div",{className:(i[0]&&(d?!0:!1)?"_fy_":"")+" _56rt"},i[1])}else return g},j[9],j[10],j[11],j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){var c=a.children;return k(b("bs_js_primitive").null_undefined_to_opt(a.logo),a.logoPosition==="right"?1:0,a.childPosition==="right"?1:0,c==null?[]:[].concat(c))});c=3;d=.75;f.defaultMaxHeight=h;f.defaultHalfMaxHeight=i;f.defaultAspectRatio=c;f.aspectRatioMargin=d;f.component=j;f.make=k;f.jsComponent=a}),null);
__d("MNCommerceItemTextReact.bs",["cx","fbt","React","Utils.bs","ReasonReact.bs","joinClasses","MNCommerceOrderItemsStatus"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MNCommerceItemText");function a(a,c,d,e,f,g,j,k){__p&&__p();var l=function(a){if(f)return null;else{a=a?a[0]:null;if(g&&g[0]===b("MNCommerceOrderItemsStatus").CANCELED)return b("React").createElement("div",undefined,b("React").createElement("span",{className:"__hz"},h._("Canceled")," \xb7"),a);else return b("React").createElement("div",undefined,a)}},m=function(a){if(a)return b("React").createElement("div",undefined,a[0]);else return null},n=function(){if(d){var a=d[0];return b("React").createElement("div",undefined,m(a[0]),m(a[1]),l(a[2]))}else return null};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){return b("React").createElement("div",{className:b("joinClasses")(b("Utils.bs").$pipe$unknown(a,""),"_swr"+((f?!0:!1)?" _sws":"")),style:{left:c,paddingLeft:e},title:b("Utils.bs").$pipe$unknown(j,"")},b("React").createElement("div",{className:"_51fw"},j?j[0]:null),b("React").createElement("div",{className:"_2y0f"},n(0)))},i[9],i[10],i[11],i[12]]}f.component=i;f.make=a}),null);
__d("MNCommerceSingleListItemReact.bs",["cx","React","Utils.bs","ImageReact.bs","ReasonReact.bs","joinClasses","bs_js_primitive","MNCommerceItemTextReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MNCommerceSingleListItem");function i(a,c,d,e,f,g,i,j,k){var l=function(){if(c)return b("React").createElement("div",{className:"_1fld"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(["_1fle"],0,0,0,[c[0]],[d],0,[d],0,[])));else return null};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("React").createElement("div",{className:b("joinClasses")(b("Utils.bs").$pipe$unknown(a,""),"_39q_"),style:{height:String(d)+"px",width:b("Utils.bs").$pipe$unknown(g,"auto")}},l(0),b("ReasonReact.bs").element(0,0,b("MNCommerceItemTextReact.bs").make(["_1flf"],c?String(d)+"px":"auto",i,c?"6px":"auto",e,f,j,[])))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){var c=a.width,d=a.metalines;return i(b("bs_js_primitive").null_undefined_to_opt(a.className),b("bs_js_primitive").null_undefined_to_opt(a.thumbURL),a.imageDimension,a.size==="large"?0:1,b("bs_js_primitive").null_undefined_to_opt(a.statusType),c==null?0:[String(c)+"px"],d==null?0:[[b("bs_js_primitive").null_undefined_to_opt(d.metaline_1),b("bs_js_primitive").null_undefined_to_opt(d.metaline_2),b("bs_js_primitive").null_undefined_to_opt(d.metaline_3)]],b("bs_js_primitive").null_undefined_to_opt(a.title),[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MNCommerceCheckoutOrderConfigDialog.react",["cx","fbt","MessengerEnvironment","MNCommerceButton.react","MNCommerceCheckoutButton.react","MNCommerceCheckoutOrderConfigReactShape","MNCommerceCheckoutOrderConfigUtils","MNCommerceDetailsDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceLogoHeaderReact.bs","MNCommerceSingleListItemReact.bs","React","XUIRadioButtonGroup.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MNCommerceLogoHeaderReact.bs").jsComponent,k=b("MNCommerceSingleListItemReact.bs").jsComponent;c=b("React").PropTypes;var l=18,m="\xb7";d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(a,c){__p&&__p();i.constructor.call(this,a,c),this.$1=function(a){a=a||this.props;a=a.checkoutOrderConfig;return!a?{}:{variantOptions:a.initialVariantOptions,variants:[]}}.bind(this),this.$9=function(a,b){__p&&__p();var c=this.props.checkoutOrderConfig;if(!c)return null;var d=[],e=[],f=c.allVariantOptions[a][b];for(var g=0;g<c.variant_labels.length;g++)if(g===a)d.push(b),e.push(this.state.variantOptions[g]);else{var h=this.state.variants.filter(function(a){return a});c.variant_labels.length<=2||h.length<2?h=f.get(g):h=this.$10(a,b,g);e.push(h);d.push(this.state.variants[g])}return{variants:d,variantOptions:e}}.bind(this),this.$6=function(a){a=this.props.checkoutOrderConfig;if(!a||this.state.variants.some(function(a){return!a}))return;var c=a.seller_id,d=this.state.variants.join(b("MNCommerceCheckoutOrderConfigUtils").DELIMITER);a=a.variantToItemID.get(d);this.props.onContinue(a,c,this.state.variants.join(" "+m+" "));this.props.onToggle(!1)}.bind(this),this.$4=function(a){this.props.onToggle(!1)}.bind(this),this.$12=function(a,c,d){a=a.map(function(a,c){return b("React").createElement(b("MNCommerceCheckoutButton.react"),{key:c,disabled:a.available===!1,use:"default",value:a.label},a.label)});return b("React").createElement(b("XUIRadioButtonGroup.react"),{onValueChange:c,selectedValue:d,selectedUse:"confirm"},a)},this.state=this.$1()}a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.setState(this.$1(a))};a.prototype.render=function(){var a=h._("Your item couldn't be shown.");return b("React").createElement(b("MNCommerceDetailsDialog.react"),babelHelpers["extends"]({errorMessage:a},this.props),this.$2())};a.prototype.$2=function(){__p&&__p();if(this.props.error||this.props.loading)return null;var a=h._("Continue"),c=h._("Cancel"),d=this.props.checkoutOrderConfig,e=null,f=this.$3(),g=d&&d.ordered_product_items;if(f&&f.size){f=f.values().next().value;f=d&&d.itemIDToItem.get(f);e=f&&f.images}else g&&g.length&&(e=g[0].images);f=this.state.variants.filter(function(a){return a}).join(" "+m+" ");g=f?{metaline_1:f}:null;f=this.state.variants;var i=d&&d.variant_labels;f=d&&(!i||i.length===0||f.length>0&&f.every(function(a){return a}));var n={src:d?d.logo:"",width:l,height:l};c=b("React").createElement(b("MNCommerceButton.react"),{className:"_23qd",label:c,onClick:this.$4,use:"default"});c=b("MessengerEnvironment").messengerui?null:c;i=d&&i&&i.length>0;return b("React").createElement("div",{className:"_vg4"},b("React").createElement(b("MNCommerceDialogBody.react"),null,b("React").createElement("div",{className:i?"_vg5":""},b("React").createElement(j,{className:"_vg6",logo:n,logoPosition:"left"}),b("React").createElement("div",{className:"_vg7"},b("React").createElement(k,{imageDimension:60,metalines:g,size:"large",thumbURL:e,title:d&&d.name}))),this.$5()),b("React").createElement(b("MNCommerceDialogFooter.react"),null,c,b("React").createElement(b("MNCommerceButton.react"),{className:"_23qe",disabled:!f,label:a,onClick:this.$6,use:"default"})))};a.prototype.$3=function(a){__p&&__p();var c=this.props.checkoutOrderConfig;if(!c)return null;a=a||this.state.variants;c=c.optionToItems;var d=null;for(var e=0;e<a.length;e++){var f=a[e];if(f){var g=c.get(e);g=g&&g.get(f);!d?d=g:d=b("MNCommerceCheckoutOrderConfigUtils").$7(d,g)}}return d};a.prototype.$8=function(a,b){this.setState(this.$9(a,b))};a.prototype.$10=function(a,c,d){__p&&__p();var e=this.props.checkoutOrderConfig;if(!e)return null;var f=this.state.variants.slice();this.state.variants[a]!==c&&(f[a]=c,f[d]=null);var g=this.$3(f),h=[];a=e.optionToItems;var i=e.itemIDToItem;a.get(d).forEach(function(a,c){a=b("MNCommerceCheckoutOrderConfigUtils").$7(a,g?g:new Set());var d=!1;a.size>0&&(d=b("MNCommerceCheckoutOrderConfigUtils").$11(a,i));h.push({label:c,available:d})},this);return h};a.prototype.$5=function(){var a=this.props.checkoutOrderConfig;if(!a)return null;var c=h._("Select");a=a.variant_labels.map(function(a,d){return b("React").createElement("div",{key:d},b("React").createElement("div",{className:"_vg8"},c+" "+a),b("React").createElement("div",{className:"_vg9"},this.$12(this.state.variantOptions[d],this.$8.bind(this,d),this.state.variants[d])))}.bind(this));return a};a.propTypes={error:c.object,checkoutOrderConfig:b("MNCommerceCheckoutOrderConfigReactShape"),loading:c.bool.isRequired,onContinue:c.func.isRequired,onTryAgain:c.func,shown:c.bool.isRequired,statusType:c.number};a.defaultProps={shown:!1};e.exports=a}),null);
__d("XMNCommerceCheckoutOrderConfigController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/checkout_order_config/",{item_id:{type:"String",required:!0},owner_id:{type:"String",required:!0}})}),null);
__d("MNCommerceOrderConfigDataManager",["AsyncRequest","MNCommerceOrderConfigActions","XMNCommerceCheckoutOrderConfigController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.fetchItem=function(a,c){a=b("XMNCommerceCheckoutOrderConfigController").getURIBuilder().setString("item_id",a).setString("owner_id",c).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(this.$1).setErrorHandler(this.$2).send()};a.prototype.$1=function(a){b("MNCommerceOrderConfigActions").itemLoaded(a.payload)};a.prototype.$2=function(a){a=a.getRequest().uri.getQueryData();a=a.item_id;b("MNCommerceOrderConfigActions").itemLoadError(a)};function a(){}e.exports=new a()}),null);
__d("MNCommerceOrderConfigStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits","MNCommerceCheckoutOrderConfigUtils","MNCommerceOrderConfigDataManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("MessengerDispatcher")),this.$MNCommerceOrderConfigStore1=new(b("Cache"))()}a.prototype.__onDispatch=function(a){__p&&__p();var c=a.type,d=a.item?a.item.id:a.itemID;switch(c){case b("MNCommerceActionTypes").RETAIL_ITEM.LOADED:c=a.item;c=b("MNCommerceCheckoutOrderConfigUtils").addVariantOptions(c);this.$MNCommerceOrderConfigStore1.set(d,b("LoadObject").empty().setValue(c),null,b("MNCommerceCacheTimeoutLimits").SUCCESS_TIMEOUT);this.__emitChange();break;case b("MNCommerceActionTypes").RETAIL_ITEM.LOAD_ERROR:this.$MNCommerceOrderConfigStore1.set(d,b("LoadObject").empty().setError(new Error("Unable to load item: "+d)),null,b("MNCommerceCacheTimeoutLimits").ERROR_TIMEOUT);this.__emitChange();break;case b("MNCommerceActionTypes").RETAIL_ITEM.RELOAD:d&&(this.$MNCommerceOrderConfigStore1.set(d,b("LoadObject").loading()),b("MNCommerceOrderConfigDataManager").fetchItem(d));this.__emitChange();break}};a.prototype.getItem=function(a,c){a&&!this.$MNCommerceOrderConfigStore1.has(a)&&(this.$MNCommerceOrderConfigStore1.set(a,b("LoadObject").loading().setValue({itemID:a})),b("MNCommerceOrderConfigDataManager").fetchItem(a,c));return this.$MNCommerceOrderConfigStore1.get(a)||b("LoadObject").empty()};a.__moduleID=e.id;e.exports=new a()}),null);
__d("MNCommerceCheckoutOrderConfigDialogContainer.react",["BanzaiLogger","MNCommerceCheckoutOrderConfigDialog.react","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceLoggerEvents","MNCommerceLoggingConstants","MNCommerceOrderConfigActions","MNCommerceOrderConfigStore","PureStoreBasedStateMixin","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").createClass({displayName:"MNCommerceCheckoutOrderConfigDialogContainer",mixins:[b("PureStoreBasedStateMixin")(b("MNCommerceOrderConfigStore"))],statics:{calculateState:function(){var a=b("MNCommerceDialogStateStore").getState(),c=null,d=null,e=null;a&&(c=a.itemID,d=a.ownerID,e=a.onContinue);d=b("MNCommerceOrderConfigStore").getItem(c,d);d.isLoading()||b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:d.hasError()?b("MNCommerceLoggerEvents").DIALOG_LOAD_ERROR:b("MNCommerceLoggerEvents").DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.CHECKOUT_ORDER_CONFIG,item_id:c})});return{shown:!!a,loading:d.isLoading(),itemID:c,checkoutOrderConfig:d.getValue(),onContinue:e,error:d.getError()}}},render:function(){return b("React").createElement(b("MNCommerceCheckoutOrderConfigDialog.react"),{error:this.state.error,checkoutOrderConfig:this.state.loading?null:this.state.checkoutOrderConfig,loading:this.state.loading,onContinue:this.state.onContinue,onToggle:this._onToggle,onTryAgain:this._onTryAgainClick,shown:this.state.shown})},_onToggle:function(a){a||(b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:b("MNCommerceLoggerEvents").DIALOG_CLOSED,debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.CHECKOUT_ORDER_CONFIG,item_id:this.state.itemID})}),b("MNCommerceDialogStateActions").hideDialog())},_onTryAgainClick:function(){b("MNCommerceOrderConfigActions").itemReload(this.state.itemID)}});e.exports=a}),null);
__d("errorDesc",["fbt","invariant"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){h(0)}a.withParams=function(a,b){h(0)};a._=function(a,b){return a(g,b)};e.exports=a}),null);
__d("BrowserExtensionsErrorHandler",["errorCode","errorDesc"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={getExternalError:function(a){__p&&__p();switch(a){case 2018062:return{code:2018062,message:h._(function(a,b){return a._("The URL provided is not whitelisted for messenger extensions")},{})};case 2018067:return{code:2018067,message:h._(function(a,b){return a._("Pages using Messenger Extensions must use https and not include any port.")},{})};case 2018164:return{code:2018164,message:h._(function(a,b){return a._("Please pass in a valid app ID.")},{})};case 2018166:return{code:2018166,message:h._(function(a,b){return a._("Permission not valid to call the SDK API.")},{})};case 2018159:return{code:2018159,message:h._(function(a,b){return a._("Invalid payload were passed to the share flow.")},{})};case 2018160:return{code:2018160,message:h._(function(a,b){return a._("The provided open graph template is not supported.")},{})};case 2018161:return{code:2018161,message:h._(function(a,b){return a._("Open graph URL in the preview content does not match the one in share content.")},{})};case 2018053:return{code:2018053,message:h._(function(a,b){return a._("Element button title cannot be empty.")},{})};case 2018125:return{code:2018125,message:h._(function(a,b){return a._("Invalid URL button fields provided. Please check documentation for details.")},{})};case 2018041:return{code:2018041,message:h._(function(a,b){return a._("Web url cannot be empty for url type button")},{})};case 2018158:return{code:2018158,message:h._(function(a,b){return a._("There was a problem creating the share attachment. Please try again later.")},{})};case 2018142:return{code:2018142,message:h._(function(a,b){return a._("Beginshare parameters are not valid.")},{})};case 2018034:return{code:2018034,message:h._(function(a,b){return a._("Message cannot be empty, must provide valid attachment or text")},{})};case 2018167:return{code:2018167,message:h._(function(a,b){return a._("Another API operation is in progress.")},{})};case 2018012:return{code:2018012,message:h._(function(a,b){return a._("Unexpected internal error")},{})};case 2018162:return{code:2018162,message:h._(function(a,b){return a._("This feature is currently not available")},{})};case 2018154:default:return{code:2018154,message:h._(function(a,b){return a._("Messenger Extensions unexpected error.")},{})}}}};e.exports=a}),null);
__d("MessengerPlatformBeginShareMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1467034453348931"};c.getQueryID=function(){"use strict";return"294980674291966"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("BrowserExtensionsShareChatTabDialog.react",["cx","fbt","AbstractTextArea.react","AsyncRequest","BrowserExtensionsErrorHandler","CurrentUser","Image.react","MessengerComposeViewHeader.react","MessengerPlatformBeginShareMutationWebGraphQLMutation","MessengerTextWithEntities.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react","XUISpinner.react","emptyFunction","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j="broadcast";d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={isSending:!1,message:"",recipients:b("immutable").List()},this.$3=function(a){this.setState({recipients:this.state.recipients.push(a)})}.bind(this),this.$4=function(a){var b=this.state.recipients;this.setState({recipients:b["delete"](b.indexOf(a))})}.bind(this),this.$2=function(){this.setState({recipients:b("immutable").List()})}.bind(this),this.$6=function(){__p&&__p();this.setState({isSending:!0});var a=this.state.recipients.map(function(a){return a.getUniqueID()}).toArray();a=b("MessengerPlatformBeginShareMutationWebGraphQLMutation").getURI({content_for_preview:{button_url:this.props.buttonUrl,button_title:this.props.buttonTitle,image_url:this.props.imageUrl,item_url:this.props.itemUrl,open_graph_url:this.props.openGraphUrl,preview_type:this.props.previewType,subtitle:this.props.subtitle,target_display:this.props.targetDisplay,title:this.props.title,attachment_id:this.props.attachmentID,facebook_media_url:this.props.facebookMediaUrl,media_type:this.props.mediaType},content_for_share:this.props.contentForShare,message_text:this.state.message,page_id:this.props.pageID,thread_ids:this.props.sharingType===j?a:this.props.threadID,trigger:this.props.sharingType===j?"JS_BRIDGE_BROADCAST":"JS_BRIDGE_DIRECT"});new(b("AsyncRequest"))(a).setHandler(function(a){this.$1&&this.setState({isSending:!1});a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(a){a=a?a.code:null;this.props.errorCallback(b("BrowserExtensionsErrorHandler").getExternalError(a))}else this.props.successCallback({is_sent:!0})}.bind(this)).send()}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=!0};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.render=function(){var a=this.props.sharingType===j?h._("Share"):h._("Send To Current Thread"),c=this.props.sharingType===j?this.state.recipients.size!==0:!0,d=this.props.sharingType===j?b("React").createElement(b("MessengerComposeViewHeader.react"),{className:"_189v",forceHideClearButton:!1,onClear:this.$2,onAddRecipient:this.$3,onRemoveRecipient:this.$4,onResize:b("emptyFunction"),recipients:this.state.recipients,viewer:b("CurrentUser").getID()}):null,e=this.props.sharingType===j?b("React").createElement("div",{className:"_4te6"},b("React").createElement(b("AbstractTextArea.react"),{autoFocus:!0,className:"_4te8",disabled:this.state.isSending,onChange:function(a){return this.setState({message:a.target.value})}.bind(this),placeholder:h._("Type a message..."),rows:2,value:this.state.message})):null,f=this.state.isSending?b("React").createElement(b("XUISpinner.react"),{size:"large"}):null,g=this.props.imageUrl?this.props.imageUrl:this.props.facebookMediaPreviewUrl;return b("React").createElement("div",null,b("React").createElement(b("XUIDialogHeader.react"),null,b("React").createElement(b("XUIDialogHeaderTitle.react"),null,a)),b("React").createElement(b("XUIDialogBody.react"),{className:"_189w"},d,e,b("React").createElement("div",{className:"_5l-3"},b("React").createElement("div",{className:"_4tea"},b("React").createElement(b("Image.react"),{src:g})),b("React").createElement("div",{className:"_4tef"},b("React").createElement("div",{style:{fontWeight:"bold"}},this.$5(this.props.title)),b("React").createElement("div",null,this.$5(this.props.subtitle)),b("React").createElement("div",null,this.$5(this.props.targetDisplay))))),b("React").createElement(b("XUIDialogFooter.react"),{leftContent:f},b("React").createElement(b("XUIDialogCancelButton.react"),null),b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",disabled:this.state.isSending||!c,label:h._("Send"),onClick:this.$6,use:"default"})))};a.prototype.$5=function(a){return b("React").createElement(b("MessengerTextWithEntities.react"),{renderEmoji:!0,text:a||""})};a.propTypes={buttonTitle:c.string,buttonUrl:c.string,contentForShare:c.string,imageUrl:c.string,itemUrl:c.string,openGraphUrl:c.string,facebookMediaUrl:c.string,facebookMediaPreviewUrl:c.string,attachmentID:c.string,mediaType:c.string,previewType:c.string,subtitle:c.string,targetDisplay:c.string,title:c.string,sharingType:c.string.isRequired,pageID:c.string.isRequired,threadID:c.string.isRequired,successCallback:c.func.isRequired,errorCallback:c.func.isRequired};e.exports=a}),null);
__d("BrowserExtensionsShareMessengerDialog.react",["cx","fbt","AbstractTextArea.react","AsyncRequest","BrowserExtensionsErrorHandler","CurrentUser","Image.react","LayerFadeOnHide","MessengerComposeViewHeader.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogs.bs","MessengerDialogTitle.react","MessengerPlatformBeginShareMutationWebGraphQLMutation","MessengerSpinner.react","MessengerTextWithEntities.react","React","emptyFunction","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerDialogBodyReact.bs").jsComponent;c=b("React").PropTypes;var k="broadcast";d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={clickedSend:!1,isSending:!1,message:"",recipients:b("immutable").List()},this.$3=function(a){this.setState({recipients:this.state.recipients.push(a)})}.bind(this),this.$4=function(a){var b=this.state.recipients;this.setState({recipients:b["delete"](b.indexOf(a))})}.bind(this),this.$2=function(){this.setState({recipients:b("immutable").List()})}.bind(this),this.$7=function(){__p&&__p();this.setState({clickedSend:!0,isSending:!0});var a=this.state.recipients.map(function(a){return a.getUniqueID()}).toArray();a=b("MessengerPlatformBeginShareMutationWebGraphQLMutation").getURI({content_for_preview:{button_url:this.props.buttonUrl,button_title:this.props.buttonTitle,image_url:this.props.imageUrl,item_url:this.props.itemUrl,open_graph_url:this.props.openGraphUrl,preview_type:this.props.previewType,subtitle:this.props.subtitle,target_display:this.props.targetDisplay,title:this.props.title,attachment_id:this.props.attachmentID,facebook_media_url:this.props.facebookMediaUrl,media_type:this.props.mediaType},content_for_share:this.props.contentForShare,message_text:this.state.message,page_id:this.props.pageID,thread_ids:this.props.sharingType===k?a:this.props.threadID,trigger:this.props.sharingType===k?"JS_BRIDGE_BROADCAST":"JS_BRIDGE_DIRECT"});new(b("AsyncRequest"))(a).setHandler(function(a){this.$1&&this.setState({isSending:!1},function(){b("MessengerDialogs.bs").removeDialog()});a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(a){a=a?a.code:null;this.props.errorCallback(b("BrowserExtensionsErrorHandler").getExternalError(a))}else this.props.successCallback({is_sent:!0})}.bind(this)).send()}.bind(this),this.$5=function(a){a||(this.state.clickedSend||this.props.successCallback({is_sent:!1}),b("MessengerDialogs.bs").removeDialog())}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=!0};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.render=function(){var a=this.props.sharingType===k?h._("Share"):h._("Send To Current Thread"),c=this.props.sharingType===k?this.state.recipients.size!==0:!0,d=this.props.sharingType===k?b("React").createElement(b("MessengerComposeViewHeader.react"),{className:"_189v",forceHideClearButton:!1,onClear:this.$2,onAddRecipient:this.$3,onRemoveRecipient:this.$4,onResize:b("emptyFunction"),recipients:this.state.recipients,viewer:b("CurrentUser").getID()}):null,e=this.props.sharingType===k?b("React").createElement("div",{className:"_4te6"},b("React").createElement(b("AbstractTextArea.react"),{autoFocus:!0,className:"_4te8",disabled:this.state.isSending,onChange:function(a){return this.setState({message:a.target.value})}.bind(this),placeholder:h._("Type a message..."),rows:2,value:this.state.message})):null,f=this.state.isSending?b("React").createElement(b("MessengerSpinner.react"),null):null,g=this.props.imageUrl?this.props.imageUrl:this.props.facebookMediaPreviewUrl;return b("React").createElement(b("MessengerDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},hideOnEscape:!0,onToggle:this.$5,shown:!0,width:500},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogTitle.react"),null,a)),b("React").createElement(j,{className:"_189w"},d,e,b("React").createElement("div",{className:"_5l-3"},b("React").createElement("div",{className:"_4tea"},b("React").createElement(b("Image.react"),{src:g})),b("React").createElement("div",{className:"_4tef"},b("React").createElement("div",{style:{fontWeight:"bold"}},this.$6(this.props.title)),b("React").createElement("div",null,this.$6(this.props.subtitle)),b("React").createElement("div",null,this.$6(this.props.targetDisplay))))),b("React").createElement(b("MessengerDialogFooter.react"),{leftContent:f},b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(b("MessengerDialogButton.react"),{action:"confirm",disabled:this.state.isSending||!c,label:h._("Send"),onClick:this.$7,type:"primary"})))};a.prototype.$6=function(a){return b("React").createElement(b("MessengerTextWithEntities.react"),{renderEmoji:!0,text:a||""})};a.propTypes={buttonTitle:c.string,buttonUrl:c.string,contentForShare:c.string,imageUrl:c.string,itemUrl:c.string,openGraphUrl:c.string,facebookMediaUrl:c.string,facebookMediaPreviewUrl:c.string,attachmentID:c.string,mediaType:c.string,previewType:c.string,subtitle:c.string,targetDisplay:c.string,title:c.string,sharingType:c.string.isRequired,pageID:c.string.isRequired,threadID:c.string.isRequired,successCallback:c.func.isRequired,errorCallback:c.func.isRequired};e.exports=a}),null);
__d("MessengerPlatformMediaAttachmentPreviewWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1480172682071484"};c.getQueryID=function(){"use strict";return"1145458142265315"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("XShareScrapeAttachmentAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/message_share_attachment/fromURI/",{})}),null);
__d("BrowserExtensionsBeginShareHelper",["AsyncRequest","BrowserExtensionsErrorHandler","BrowserExtensionsShareChatTabDialog.react","BrowserExtensionsShareMessengerDialog.react","DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerHideOnBlur","MessengerDialogs.bs","MessengerEnvironment","MessengerPlatformMediaAttachmentPreviewWebGraphQLQuery","React","WebGraphQL","XShareScrapeAttachmentAsyncController","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="OPEN_GRAPH",h=150,i=150;function j(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){__p&&__p();if(b("MessengerEnvironment").messengerui)b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("BrowserExtensionsShareMessengerDialog.react"),{buttonTitle:a,buttonUrl:c,contentForShare:d,imageUrl:e,itemUrl:f,openGraphUrl:g,facebookMediaUrl:h,facebookMediaPreviewUrl:i,attachmentID:j,mediaType:k,previewType:l,subtitle:m,targetDisplay:n,title:o,sharingType:p,pageID:q,threadID:r,successCallback:s,errorCallback:t})});else{var u={width:500,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerFadeOnHide"),b("LayerHideOnBlur")]},v=b("React").createElement(b("BrowserExtensionsShareChatTabDialog.react"),{buttonTitle:a,buttonUrl:c,contentForShare:d,imageUrl:e,itemUrl:f,openGraphUrl:g,facebookMediaUrl:h,facebookMediaPreviewUrl:i,attachmentID:j,mediaType:k,previewType:l,subtitle:m,targetDisplay:n,title:o,sharingType:p,pageID:q,threadID:r,successCallback:s,errorCallback:t}),w=new(b("DialogX"))(u,v);w.subscribe("confirm",function(){w.hide()});w.subscribe("cancel",function(){s({is_sent:!1})});w.show()}}a={beginShareFlow:function(a,c,d,e,f,k,l){__p&&__p();if(f.preview_type===g){var m=b("XShareScrapeAttachmentAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setMethod("POST").setURI(m).setData({image_height:h,image_width:i,uri:f.open_graph_url}).setHandler(function(b){var g,h;h=(h=b)!=null?(h=h.payload)!=null?(h=h.media)!=null?h.image:h:h:h;g=(g=b)!=null?(g=g.payload)!=null?g.title:g:g;b=(b=b)!=null?(b=b.payload)!=null?(b=b.target)!=null?(b=b.artists)!=null?b[0]:b:b:b:b;j(f.button_title,f.button_url,e,h,f.item_url,f.open_graph_url,null,null,null,null,f.preview_type,b,f.target_display,g,d,a,c,k,l)}).send()}else!f.image_url?b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerPlatformMediaAttachmentPreviewWebGraphQLQuery"))({params:{attachment_id:f.attachment_id,page_id:a,url:f.facebook_media_url,media_type:f.media_type}})),function(b){b=b.messenger_platform_media_attachment_preview_info;j(f.button_title,f.button_url,e,null,f.item_url,f.open_graph_url,f.facebook_media_url,b.media_attachment.image.uri,f.attachment_id,f.media_type,f.preview_type,f.subtitle,f.target_display,f.title,d,a,c,k,l)},function(a){a=(a=a)!=null?(a=a.errors)!=null?(a=a[0])!=null?a.code:a:a:a;l(b("BrowserExtensionsErrorHandler").getExternalError(a))}):j(f.button_title,f.button_url,e,f.image_url,f.item_url,f.open_graph_url,f.facebook_media_url,null,f.attachment_id,f.media_type,f.preview_type,f.subtitle,f.target_display,f.title,d,a,c,k,l)}};e.exports=a}),null);
__d("BrowserExtensionsAskPermissionsChatTabDialog.react",["cx","BrowserExtensionsPermissionsHelper","BrowserExtensionsTypedLogger","Image.react","React","URI","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement("div",null,b("React").createElement(b("Image.react"),{className:"_5_jw",src:this.props.profileImageUrl})),this.props.message),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:this.props.rejectButtonTitle,onClick:function(){this.$1(!1)}.bind(this)}),b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:this.props.confirmButtonTitle,onClick:function(){this.$1(!0),b("BrowserExtensionsPermissionsHelper").grantPermissions(this.props.pageID,this.props.threadID,this.props.permissionToGrant,this.props.successCallback,this.props.errorCallback)}.bind(this),use:"confirm"})))};a.prototype.$1=function(a){new(b("BrowserExtensionsTypedLogger"))().setAPIEndpoint("askPermission").setExtraClientData(JSON.stringify({source:"platform_api",extension_type:"messenger_extension",permission_requested:this.props.permissionToGrant,permission_accepted:a})).setName("browser_extensions_permission_dialog_action").setWebsiteURL(this.props.thirdPartyURI.toString()).setStartURL(this.props.thirdPartyURI.toString()).setStringPageID(this.props.pageID).setThreadID(this.props.threadID).log()};function a(){h.apply(this,arguments)}a.propTypes={thirdPartyURI:c.instanceOf(b("URI")).isRequired,pageID:c.string.isRequired,threadID:c.string.isRequired,message:c.string.isRequired,profileImageUrl:c.string.isRequired,confirmButtonTitle:c.string.isRequired,rejectButtonTitle:c.string.isRequired,permissionToGrant:c.string.isRequired,successCallback:c.func.isRequired,errorCallback:c.func.isRequired};e.exports=a}),null);
__d("BrowserExtensionsAskPermissionsMessengerDialog.react",["cx","BrowserExtensionsPermissionsHelper","BrowserExtensionsTypedLogger","Image.react","LayerFadeOnHide","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogs.bs","React","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerDialogBodyReact.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={clickedConfirm:!1},this.$1=function(a){a||(this.state.clickedConfirm||this.props.successCallback({permissions:this.props.grantedPermissions}),b("MessengerDialogs.bs").removeDialog())}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},hideOnEscape:!0,onToggle:this.$1,shown:!0},b("React").createElement(i,null,b("React").createElement("div",null,b("React").createElement(b("Image.react"),{className:"_5_jw",src:this.props.profileImageUrl})),this.props.message),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogCancelButton.react"),{label:this.props.rejectButtonTitle,onClick:function(){this.$2(!1)}.bind(this)}),b("React").createElement(b("MessengerDialogButton.react"),{action:"confirm",label:this.props.confirmButtonTitle,onClick:function(){this.setState({clickedConfirm:!0},function(){this.$2(!0),b("MessengerDialogs.bs").removeDialog(),b("BrowserExtensionsPermissionsHelper").grantPermissions(this.props.pageID,this.props.threadID,this.props.permissionToGrant,this.props.successCallback,this.props.errorCallback)}.bind(this))}.bind(this),type:"primary"})))};a.prototype.$2=function(a){new(b("BrowserExtensionsTypedLogger"))().setAPIEndpoint("askPermission").setExtraClientData(JSON.stringify({source:"platform_api",extension_type:"messenger_extension",permission_requested:this.props.permissionToGrant,permission_accepted:a})).setName("browser_extensions_permission_dialog_action").setWebsiteURL(this.props.thirdPartyURI.toString()).setStartURL(this.props.thirdPartyURI.toString()).setStringPageID(this.props.pageID).setThreadID(this.props.threadID).log()};a.propTypes={thirdPartyURI:c.instanceOf(b("URI")).isRequired,pageID:c.string.isRequired,threadID:c.string.isRequired,message:c.string.isRequired,profileImageUrl:c.string.isRequired,confirmButtonTitle:c.string.isRequired,rejectButtonTitle:c.string.isRequired,permissionToGrant:c.string.isRequired,grantedPermissions:c.arrayOf(c.string).isRequired,successCallback:c.func.isRequired,errorCallback:c.func.isRequired};e.exports=a}),null);
__d("MessengerPlatformGrantPermissionsMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1544630875548192"};c.getQueryID=function(){"use strict";return"611085139087610"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerPlatformPermissionWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1068951296538364"};c.getQueryID=function(){"use strict";return"1526731417350771"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("BrowserExtensionsPermissionsHelper",["AsyncRequest","BrowserExtensionsAskPermissionsChatTabDialog.react","BrowserExtensionsAskPermissionsMessengerDialog.react","BrowserExtensionsErrorHandler","BrowserExtensionsTypedLogger","DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerHideOnBlur","MessengerDialogs.bs","MessengerEnvironment","MessengerPlatformGrantPermissionsMutationWebGraphQLMutation","MessengerPlatformPermissionWebGraphQLQuery","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e,f,g,h,i,j,k,l){__p&&__p();if(b("MessengerEnvironment").messengerui)b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("BrowserExtensionsAskPermissionsMessengerDialog.react"),{thirdPartyURI:a,pageID:c,threadID:d,message:e,profileImageUrl:f,confirmButtonTitle:g,rejectButtonTitle:h,permissionToGrant:i,grantedPermissions:j,successCallback:k,errorCallback:l})});else{var m={width:400,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerFadeOnHide"),b("LayerHideOnBlur")]},n=b("React").createElement(b("BrowserExtensionsAskPermissionsChatTabDialog.react"),{thirdPartyURI:a,pageID:c,threadID:d,message:e,profileImageUrl:f,confirmButtonTitle:g,rejectButtonTitle:h,permissionToGrant:i,successCallback:k,errorCallback:l});m=new(b("DialogX"))(m,n);var o=!1;m.subscribe("confirm",function(){o=!0});m.subscribe("hide",function(){o||k({permissions:j})});m.show()}new(b("BrowserExtensionsTypedLogger"))().setAPIEndpoint("askPermission").setName("browser_extensions_permission_dialog_shown").setWebsiteURL(a.toString()).setStartURL(a.toString()).setStringPageID(c).setThreadID(d).log()}a={askPermissions:function(a,c,d,e,f,h){__p&&__p();var i=b("MessengerPlatformPermissionWebGraphQLQuery").getURI({params:{page_id:c,thread_id:d},selected_permissions:[e]});new(b("AsyncRequest"))().setURI(i).setHandler(function(i){__p&&__p();var j,k;k=(k=i)!=null?(k=k.payload)!=null?(k=k.data)!=null?(k=k.messenger_platform_permission)!=null?(k=k.selected_permission_infos)!=null?k[0]:k:k:k:k:k;j=(j=i)!=null?(j=j.payload)!=null?(j=j.data)!=null?(j=j.messenger_platform_permission)!=null?j.granted_permission_infos:j:j:j:j;i=(i=i)!=null?(i=i.payload)!=null?(i=i.errors)!=null?i[0]:i:i:i;if(!j){i=i?i.code:null;h(b("BrowserExtensionsErrorHandler").getExternalError(i))}else{i=j.map(function(a){return a.permission_type});if(!k||k.is_granted)f({permissions:i});else{j=k.dialog_info;g(a,c,d,j.title,j.profile_image.uri,j.confirm_button_text,j.reject_button_text,e,i,f,h)}}}).send()},grantPermissions:function(a,c,d,e,f){__p&&__p();a=b("MessengerPlatformGrantPermissionsMutationWebGraphQLMutation").getURI({page_id:a,thread_id:c,permissions:[d]});new(b("AsyncRequest"))().setURI(a).setHandler(function(a){__p&&__p();var c;c=(c=a)!=null?(c=c.payload)!=null?(c=c.data)!=null?(c=c.messenger_platform_grant_permissions)!=null?c.granted_permission_infos:c:c:c:c;a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(c){c=c.map(function(a){return a.permission_type});e({permissions:c})}else{c=a?a.code:null;f(b("BrowserExtensionsErrorHandler").getExternalError(c))}}).send()}};e.exports=a}),null);
__d("JSONRPC",["Log"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=0,this.$2={},this.remote=function(a){this.$3=a;return this.remote}.bind(this),this.local={},this.$4=a}a.prototype.stub=function(a){"use strict";this.remote[a]=function(){var b={jsonrpc:"2.0",method:a};for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];typeof d[d.length-1]==="function"&&(b.id=++this.$1,this.$2[b.id]=d.pop());b.params=d;this.$4(JSON.stringify(b),this.$3||{method:a})}.bind(this)};a.prototype.read=function(a,c){"use strict";__p&&__p();a=JSON.parse(a);var d=a.id;if(!a.method){if(!this.$2[d]){b("Log").warn("Could not find callback %s",d);return}var e=this.$2[d];delete this.$2[d];delete a.id;delete a.jsonrpc;e(a);return}var f=this;e=this.local[a.method];var g;d?g=function(a,b){var e={jsonrpc:"2.0",id:d};e[a]=b;setTimeout(function(){f.$4(JSON.stringify(e),c)},0)}:g=function(){};if(!e){b("Log").error('Method "%s" has not been defined',a.method);g("error",{code:-32601,message:"Method not found",data:a.method});return}a.params.push(g.bind(null,"result"));a.params.push(g.bind(null,"error"));try{e=e.apply(c||null,a.params);typeof e!=="undefined"&&g("result",e)}catch(c){b("Log").error("Invokation of RPC method %s resulted in the error: %s",a.method,c.message),g("error",{code:-32603,message:"Internal error",data:c.message})}};e.exports=a}),null);
__d("MessengerPlatformGetContextMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1350985785027565"};c.getQueryID=function(){"use strict";return"182243942324918"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("WorkChatPlatformGetContextMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1471152822996828"};c.getQueryID=function(){"use strict";return"172454613443187"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("BrowserExtensionsDesktopController",["errorCode","AsyncRequest","BrowserExtensionsBeginShareHelper","BrowserExtensionsErrorHandler","BrowserExtensionsPermissionsHelper","BrowserExtensionsTypedLogger","CurrentUser","DOMEventListener","JSONRPC","MessengerPlatformGetContextMutationWebGraphQLMutation","MessengerPlatformPermissionWebGraphQLQuery","WorkChatPlatformGetContextMutationWebGraphQLMutation"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="MESSENGER_EXTENSIONS_RPC:";function i(a,c,d,e,f,g,h){__p&&__p();e=b("CurrentUser").isWorkUser()?b("WorkChatPlatformGetContextMutationWebGraphQLMutation").getURI({actor_id:e,app_id:f,page_id:c,thread_id:d,extension_uri:a.getOrigin()}):b("MessengerPlatformGetContextMutationWebGraphQLMutation").getURI({actor_id:e,app_id:f,page_id:c,thread_id:d,extension_uri:a.getOrigin()});new(b("AsyncRequest"))().setURI(e).setHandler(function(a){var c;c=(c=a)!=null?(c=c.payload)!=null?(c=c.data)!=null?c.messenger_platform_get_context:c:c:c;a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(c)g(c);else{c=a?a.code:null;h(b("BrowserExtensionsErrorHandler").getExternalError(c))}}).send()}function j(a,c,d,e){__p&&__p();a=b("MessengerPlatformPermissionWebGraphQLQuery").getURI({params:{page_id:a,thread_id:c}});new(b("AsyncRequest"))().setURI(a).setHandler(function(a){__p&&__p();var c;c=(c=a)!=null?(c=c.payload)!=null?(c=c.data)!=null?(c=c.messenger_platform_permission)!=null?c.granted_permission_infos:c:c:c:c;a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(c){c=c.map(function(a){return a.permission_type});d({permissions:c})}else{c=a?a.code:null;e(b("BrowserExtensionsErrorHandler").getExternalError(c))}}).send()}function k(a,b,c){a(b)}function a(a,c,d,e,f,g){__p&&__p();var l=new(b("JSONRPC"))(function(b){var d=a instanceof HTMLIFrameElement?a.contentWindow:a;d.postMessage(h+b,c.getOrigin())});this.$1=b("DOMEventListener").add(window,"message",function(event){if(typeof event.data!=="string"||!event.data.startsWith(h))return;l.read(event.data.substring(h.length))},!1);function m(a){new(b("BrowserExtensionsTypedLogger"))().setAPIEndpoint(a).setName("browser_extensions_native_bridge_called").setWebsiteURL(c.toString()).setStartURL(c.toString()).setStringPageID(d).setThreadID(e).log()}l.local.askPermission=function(a,f,g){if(b("CurrentUser").isWorkUser()){g(b("BrowserExtensionsErrorHandler").getExternalError(2018162));return}m("askPermission");b("BrowserExtensionsPermissionsHelper").askPermissions(c,d,e,a,f,g)};l.local.beginShareFlow=function(a,c,f,g,h){m("beginShareFlow"),b("BrowserExtensionsBeginShareHelper").beginShareFlow(d,e,a,c,f,g,h)};l.local.getContext=function(a,b,g){m("getContext"),i(c,d,e,f,a,b,g)};l.local.getGrantedPermissions=function(a,b){m("getGrantedPermissions"),j(d,e,a,b)};l.local.requestCloseBrowser=function(a,b){m("requestCloseBrowser"),k(g,a,b)}}a.prototype.getListener=function(){return this.$1};e.exports=a}),null);
__d("BrowserExtensionsDesktopCoordinator",["BrowserExtensionsDesktopController"],(function(a,b,c,d,e,f){"use strict";var g;a={setActiveBridge:function(a,c,d,e,f,h){g&&g.remove();a=new(b("BrowserExtensionsDesktopController"))(a,c,d,e,f,h);g=a.getListener()}};e.exports=a}),null);
__d("XConsentCookieController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/cookie/consent/",{})}),null);
__d("DeferredCookie",["Cookie","Env","SubscriptionList","XAsyncRequest","XConsentCookieController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();a={shouldAddDefaultListener:!0,defaultHandler:null,autoFlushCookies:!1,sentConsentToServer:!1,callbacks:new(b("SubscriptionList"))(),addToQueue:function(a,c,d,e,f,h,i){if(this.autoFlushCookies){f?b("Cookie").setWithoutChecksIfFirstPartyContext(a,c,d,e,i):b("Cookie").setWithoutChecks(a,c,d,e,i);return}if(g.has(a))return;g.set(a,{name:a,value:c,nMilliSecs:d,path:e,firstPartyOnly:f,secure:i});h&&this.addDefaultInteractionListener()},flushAllCookiesWithoutRequestingConsentSeePrivacyXFNBeforeUsing:function(){delete b("Env").defer_cookies,g.forEach(function(a,c){a.firstPartyOnly?b("Cookie").setWithoutChecksIfFirstPartyContext(a.name,a.value,a.nMilliSecs,a.path,a.secure):b("Cookie").setWithoutChecks(a.name,a.value,a.nMilliSecs,a.path,a.secure)}),this.callbacks.fireCallbacks(),this.autoFlushCookies=!0,g=new Map(),this.removeDefaultInteractionListener()},flushAllCookies:function(){this.flushAllCookiesWithoutRequestingConsentSeePrivacyXFNBeforeUsing();if(!this.sentConsentToServer){this.sentConsentToServer=!0;var a=b("XConsentCookieController").getURIBuilder().getURI();new(b("XAsyncRequest"))(a).send()}},removeDefaultInteractionListener:function(){this.defaultHandler&&(window.removeEventListener?window.removeEventListener("click",this.defaultHandler,!0):document.detachEvent&&document.detachEvent("onclick",this.defaultHandler),this.defaultHandler=null)},addDefaultInteractionListener:function(){this.shouldAddDefaultListener&&(this.shouldAddDefaultListener=!1,this.defaultHandler=this.baseInteractionHandler.bind(this),window.addEventListener?window.addEventListener("click",this.defaultHandler,!0):document.attachEvent&&document.attachEvent("onclick",this.defaultHandler))},registerCallbackOnCookieFlush:function(a){this.autoFlushCookies?a():this.callbacks.add(a)},baseInteractionHandler:function(){this.flushAllCookies()},canEmbedThirdPartyPixel:function(){return b("Env").no_cookies||b("Env").defer_cookies?!1:this.autoFlushCookies||g.size===0}};e.exports=a}),null);
__d("XRefererFrameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/common/referer_frame.php",{})}),null);
__d("isDevelopersURI",["isFacebookURI"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("isFacebookURI")(a)&&a.getSubdomain()==="developers"}e.exports=a}),null);
__d("isOculusDotComURI",["URI"],(function(a,b,c,d,e,f){var g=new RegExp("(^|\\.)oculus\\.com$","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.indexOf(a.getProtocol())!==-1&&g.test(a.getDomain())}e.exports=a}),null);
__d("ControlledReferer",["Bootloader","DeferredCookie","URI","UserAgent","XRefererFrameController","isBonfireURI","isDevelopersURI","isMessengerDotComURI","isOculusDotComURI","lowerFacebookDomain"],(function(a,b,c,d,e,f){__p&&__p();var g={useFacebookReferer:function(a,c,d){__p&&__p();if(!b("DeferredCookie").canEmbedThirdPartyPixel()){b("Bootloader").loadModules(["BanzaiODS"],function(a){a.bumpEntityKey("defer_cookies","block_controlled_referer_iframe")},"ControlledReferer");return}var e=!1;function f(){if(e)return;var b=a.contentWindow.location.pathname;if(b!=="/intern/common/referer_frame.php"&&b!=="/common/referer_frame.php")return;e=!0;a.contentWindow.document.body.style.margin=0;c()}var g;b("isMessengerDotComURI")(b("URI").getRequestURI())||b("isBonfireURI")(b("URI").getRequestURI())?g=b("XRefererFrameController").getURIBuilder().getURI().toString():b("isOculusDotComURI")(b("URI").getRequestURI())?g="/common/referer_frame.php":!b("lowerFacebookDomain").isValidDocumentDomain()?g="/intern/common/referer_frame.php":b("UserAgent").isBrowser("Opera")&&!b("isDevelopersURI")(b("URI").getRequestURI())?g=b("XRefererFrameController").getURIBuilder().getURI().toString():g=b("XRefererFrameController").getURIBuilder().getURI().qualify().setProtocol("https").setSubdomain("staticxx").toString();d&&(g+="?fb_source="+d);a.onload=f;a.src=g},useFacebookRefererHtml:function(a,b,c){g.useFacebookReferer(a,function(){a.contentWindow.document.body.innerHTML=b},c)}};e.exports=g}),null);
__d("StaticContainer.react",["React"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.shouldComponentUpdate=function(a){"use strict";return!!a.shouldUpdate};a.prototype.render=function(){"use strict";var a=this.props.children;return a===null||a===!1?null:b("React").Children.only(a)};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("ControlledRefererIFrame.react",["ControlledReferer","ControlledRefererIFrameConfig","React","StaticContainer.react","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.mountFrameRef=function(a){this.frame=a};a.prototype.updateFrame=function(){__p&&__p();var a=this.frame;if(!a)return;b("ControlledReferer").useFacebookReferer(a,function(){__p&&__p();var c=a.contentWindow.document;c.body.innerHTML='\n        <form method="GET" id="theform"></form>\n        '+b("ControlledRefererIFrameConfig").additional_markup+"\n      ";var d=new(b("URI"))(this.props.src).qualify(),e=c.getElementById("theform");e.action=d.toString();d=d.getQueryData();for(var f in d)if(Object.prototype.hasOwnProperty.call(d,f)){var g=c.createElement("input");g.name=f;g.setAttribute("value",d[f]);g.autocomplete="off";g.type="hidden";e.appendChild(g)}c.body.innerHTML+='\n        <iframe\n          frameborder="0"\n          width="1"\n          height="1"\n          onload="document.getElementById(\'theform\').submit()"\n        />\n      '}.bind(this))};a.prototype.componentDidMount=function(){this.updateFrame()};a.prototype.componentDidUpdate=function(a){a.src!==this.props.src&&this.updateFrame()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){var b=this.frame;b&&(a.width!==this.props.width||a.height!==this.props.height)&&(a.width!=null&&(b.width=""+a.width),a.height!=null&&(b.height=""+a.height))};a.prototype.render=function(){var a=this.props;a.src;a=babelHelpers.objectWithoutProperties(a,["src"]);return b("React").createElement(b("StaticContainer.react"),null,b("React").createElement("iframe",babelHelpers["extends"]({},a,{ref:function(a){return this.mountFrameRef(a)}.bind(this)})))};a.prototype.postMessage=function(a,b){this.frame&&this.frame.contentWindow.postMessage(a,b)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("BrowserExtensionsIframe.react",["BrowserExtensionsDesktopCoordinator","BrowserExtensionsTypedLogger","ControlledRefererIFrame.react","React","URI","isFacebookURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.componentDidMount=function(){this.refs.iframeRef&&(b("BrowserExtensionsDesktopCoordinator").setActiveBridge(this.refs.iframeRef,this.props.thirdPartyURI,this.props.pageID,this.props.threadID,this.props.userID,this.props.closeDialogHandler),new(b("BrowserExtensionsTypedLogger"))().setName("browser_extensions_browser_open").setWebsiteURL(this.props.thirdPartyURI.toString()).setStartURL(this.props.thirdPartyURI.toString()).setStringPageID(this.props.pageID).setThreadID(this.props.threadID).log())};a.prototype.componentWillUnmount=function(){new(b("BrowserExtensionsTypedLogger"))().setName("browser_extensions_browser_closed").setWebsiteURL(this.props.thirdPartyURI.toString()).setStartURL(this.props.thirdPartyURI.toString()).setStringPageID(this.props.pageID).setThreadID(this.props.threadID).log()};a.prototype.render=function(){var a=new(b("URI"))(window.location.href),c=this.props.thirdPartyURI;a={ref:"iframeRef",src:c.addQueryData("fb_iframe_origin",a.getOrigin()).toString(),name:b("isFacebookURI")(a)?"facebook_ref":"messenger_ref",style:{border:0,height:this.props.height,width:this.props.width}};return b("isFacebookURI")(c)?b("React").createElement("iframe",a):b("React").createElement(b("ControlledRefererIFrame.react"),a)};function a(){g.apply(this,arguments)}a.propTypes={thirdPartyURI:c.instanceOf(b("URI")).isRequired,pageID:c.string.isRequired,threadID:c.string.isRequired,userID:c.string.isRequired,height:c.number.isRequired,width:c.number.isRequired,closeDialogHandler:c.func.isRequired};e.exports=a}),null);
__d("MessengerConstants",[],(function(a,b,c,d,e,f){"use strict";a={NEW_THREAD_KEY:"new",BROWSER_EXTENSIONS_DIALOG_DIMENSIONS:{HEIGHT:604,WIDTH:405}};e.exports=a}),null);
__d("MessengerPageInfoWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1340699622714874"};c.getQueryID=function(){"use strict";return"794225320759977"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("BrowserExtensionsChatTabDialog.react",["cx","fbt","AsyncRequest","BrowserExtensionsIframe.react","Image.react","MessengerConstants","MessengerPageInfoWebGraphQLQuery","React","URI","XUICloseButton.react","XUIDialogBody.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("MessengerConstants").BROWSER_EXTENSIONS_DIALOG_DIMENSIONS;d=b("React").PropTypes;f=babelHelpers.inherits(a,b("React").Component);i=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={profilePicUrl:null,title:null},b}a.prototype.componentDidMount=function(){var a=b("MessengerPageInfoWebGraphQLQuery").getURI({node_id:this.props.pageID});new(b("AsyncRequest"))().setURI(a).setHandler(function(a){var b;b=(b=a)!=null?(b=b.payload)!=null?(b=b.data)!=null?(b=b.node)!=null?(b=b.profile_picture)!=null?b.uri:b:b:b:b:b;a=(a=a)!=null?(a=a.payload)!=null?(a=a.data)!=null?(a=a.node)!=null?a.name:a:a:a:a;this.setState({profilePicUrl:b,title:a})}.bind(this)).send()};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement("div",{className:"_4-i0"},b("React").createElement("div",{className:"_5l-3 _3qur"},b("React").createElement("div",{className:"_3o_f"},b("React").createElement(b("Image.react"),{className:"_3o_g",src:this.state.profilePicUrl})),b("React").createElement("div",{className:"_3o_i"},this.state.title),b("React").createElement("div",{className:"_3qus"},b("React").createElement(b("XUICloseButton.react"),{className:"layerCancel _51-t",label:h._("Close")})))),b("React").createElement(b("XUIDialogBody.react"),{className:"_3o_l"},b("React").createElement(b("BrowserExtensionsIframe.react"),{thirdPartyURI:this.props.thirdPartyURI,pageID:this.props.pageID,threadID:this.props.threadID,userID:this.props.userID,height:this.props.height,width:this.props.width,closeDialogHandler:this.props.closeDialogHandler})))};a.defaultProps={height:c.HEIGHT,width:c.WIDTH};a.propTypes={thirdPartyURI:d.instanceOf(b("URI")).isRequired,pageID:d.string.isRequired,threadID:d.string.isRequired,userID:d.string.isRequired,height:d.number,width:d.number,closeDialogHandler:d.func.isRequired};e.exports=a}),null);
__d("BrowserExtensionsMessengerDialog.react",["cx","AsyncRequest","BrowserExtensionsIframe.react","Image.react","LayerFadeOnHide","MessengerConstants","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogHeader.react","MessengerDialogs.bs","MessengerPageInfoWebGraphQLQuery","React","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("MessengerConstants").BROWSER_EXTENSIONS_DIALOG_DIMENSIONS;var i=b("MessengerDialogBodyReact.bs").jsComponent;d=b("React").PropTypes;f=babelHelpers.inherits(a,b("React").Component);h=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={profilePicUrl:null,title:null,shown:!0},this.$3=function(a){this.setState({shown:!1},a)}.bind(this),b}a.prototype.componentDidMount=function(){var a=b("MessengerPageInfoWebGraphQLQuery").getURI({node_id:this.props.pageID});this.$1=new(b("AsyncRequest"))().setURI(a).setHandler(function(a){var b;b=(b=a)!=null?(b=b.payload)!=null?(b=b.data)!=null?(b=b.node)!=null?(b=b.profile_picture)!=null?b.uri:b:b:b:b:b;a=(a=a)!=null?(a=a.payload)!=null?(a=a.data)!=null?(a=a.node)!=null?a.name:a:a:a:a;this.setState({profilePicUrl:b,title:a})}.bind(this));this.$1.send()};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.abandon()};a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},hideOnEscape:!0,onToggle:this.$2,shown:this.state.shown,type:"default",width:this.props.width},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement("div",{className:"_5l-3 _3o_e"},b("React").createElement("div",{className:"_3o_f"},b("React").createElement(b("Image.react"),{className:"_3o_g",src:this.state.profilePicUrl})),b("React").createElement("div",{className:"_3o_i"},this.state.title),b("React").createElement("div",{className:"_3o_f"},b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",className:"_3o_k",label:"",type:"primary",use:"default"})))),b("React").createElement(i,{className:"_3o_l"},b("React").createElement(b("BrowserExtensionsIframe.react"),{thirdPartyURI:this.props.thirdPartyURI,pageID:this.props.pageID,threadID:this.props.threadID,userID:this.props.userID,height:this.props.height,width:this.props.width,closeDialogHandler:this.$3})))};a.prototype.$2=function(a){a||b("MessengerDialogs.bs").removeDialog()};a.defaultProps={height:c.HEIGHT,width:c.WIDTH};a.propTypes={thirdPartyURI:d.instanceOf(b("URI")).isRequired,pageID:d.string.isRequired,threadID:d.string.isRequired,userID:d.string.isRequired,height:d.number,width:d.number};e.exports=a}),null);
__d("BrowserExtensionsDialog",["BrowserExtensionsChatTabDialog.react","BrowserExtensionsMessengerDialog.react","DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerHideOnBlur","MessengerConstants","MessengerDialogs.bs","MessengerEnvironment","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerConstants").BROWSER_EXTENSIONS_DIALOG_DIMENSIONS,h={show:function(a,c,d,e){if(b("MessengerEnvironment").messengerui)b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("BrowserExtensionsMessengerDialog.react"),{thirdPartyURI:a,pageID:c,threadID:d,userID:e})});else{var f,i={width:g.WIDTH,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerFadeOnHide"),b("LayerHideOnBlur")]},j=b("React").createElement(b("BrowserExtensionsChatTabDialog.react"),{thirdPartyURI:a,pageID:c,threadID:d,userID:e,closeDialogHandler:function(a){return h.hideChatTabDialog(f,a)}});f=new(b("DialogX"))(i,j);f.show()}},hideChatTabDialog:function(a,b){a&&(a.hide(),b())}};e.exports=h}),null);
__d("MessengerPlatformGenericItemMercuryAttachment.react",["cx","fbt","AsyncDialog","AsyncRequest","Banzai","Bootloader","BrowserExtensionsDialog","CurrentUser","FBConfirmDialog.react","FBPaymentsCheckoutV2FlowContainer.react","FBPaymentsSerializableCheckoutConfigurationParser","Image.react","LazyComponent.react","Link.react","LoadOnRender.react","MercuryAttachmentViewer","MercuryIDs","MercuryShareAttachmentRenderLocations","MessageShareType","MessagingForwardAttachmentDialog.react","MessengerAdsWebTypedLogger","MessengerDialogs.bs","MessengerEnvironment","MessengerForwardAttachmentDialogReact.bs","MessengerPhotoViewCloseLink.react","MessengerPlatformBubbleAspectRatio","MessengerPlatformPostbackFailedDialog.react","MessengerVideoPlayer.react","MNAdsLoggerEventEnum","MNCommerceBubbleImage.react","MNCommerceCallToActionHandlerMap","MNCommerceCallToActionType","MNCommerceCTAProcessor","MNCommerceMessageType","MNCommercePostbackCTADataManager","MNCommercePromotionReactShapes","MNContentSubscriptionMessageUserEngagementTypedLogger","React","SpotlightMessengerSharedMediaViewer.react","SpotlightViewer","SpotlightViewerImage","SpotlightViewport","Tooltip","URI","Vector","joinClasses","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerForwardAttachmentDialogReact.bs").jsComponent,k=181,l="_4-og";c=b("React").PropTypes;var m=function(a){b("Bootloader").loadModules(["MessengerPreviewDialogReact.bs"],function(b){b=b.jsComponent;return a(b)},"MessengerPlatformGenericItemMercuryAttachment.react")};function n(a){if(a!==undefined){a=a.match(/\d+/);if(a!==undefined&&a!==null)return a[0]}return null}d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={showDialog:!1,showShare:!1,showPaymentCheckoutDialog:!1,showImageFullScreen:!1},this.$12=function(){var a=this.props,c=a.pageID;a=a.retailItem;a=(a=a)!=null?(a=a.media_blob_attachments)!=null?a[0]:a:a;if(!a)return;var d=a.legacy_attachment_id?a.legacy_attachment_id:a.id,e=a.__typename==="MessageVideo"?new(b("Vector"))(a.original_dimensions.x,a.original_dimensions.y):new(b("Vector"))(a.width,a.height);a=a.playable_url;b("MercuryAttachmentViewer").renderVideo({pageID:parseInt(c,10),videoID:d,videoSize:e,videoURI:a})}.bind(this),this.$8=function(a,event){event&&event.target instanceof HTMLElement&&event.target.className===l&&this.$6()}.bind(this),this.$25=function(){this.setState({showShare:!0})}.bind(this),this.$24=function(){this.setState({showShare:!1})}.bind(this),this.$11=function(){this.setState({showImageFullScreen:!0})}.bind(this),this.$6=function(){this.setState({showImageFullScreen:!1})}.bind(this),this.$23=function(){this.setState({showPaymentCheckoutDialog:!0})}.bind(this),this.$26=function(){this.setState({showPaymentCheckoutDialog:!1})}.bind(this),this.onConfirm=function(){this.setState({showDialog:!0})}.bind(this),this.onCancel=function(){this.setState({showDialog:!1})}.bind(this),c}a.prototype.render=function(){var a={},c=this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT;c&&this.props.width&&(a.width=this.props.width);return this.props.isButtonList?b("React").createElement("div",{className:"_3cn0",style:a},b("React").createElement("div",{className:(c?"_4id8":"")+(c?"":" _4ida")},this.$1())):b("React").createElement("div",{className:"_3cn0",style:a},this.$2(),b("React").createElement("div",{className:(c?"_4id8":"")+(c?"":" _4ida")},this.$3(),this.$1()))};a.prototype.$2=function(){if(this.props.isMediaAttachment)return this.$4();else return this.$5()};a.prototype.$4=function(){__p&&__p();var a,c=this.props.retailItem;if(!c)return null;a=(a=c)!=null?(a=a.media_blob_attachments)!=null?(a=a[0])!=null?a.large_preview:a:a:a;if(a)if(this.state.showImageFullScreen)return b("React").createElement(b("SpotlightViewer"),{className:"_53vs",onHide:this.$6,open:!0,ref:"spotlightViewer"},b("React").createElement(b("SpotlightViewport"),{active:!1,fadeInNOut:!0,media:this.$7(a),onClick:this.$8,ref:"viewport",showLoadingIndicator:!0,stageDimensions:this.$9(),useWidth:!0}),b("React").createElement(b("MessengerPhotoViewCloseLink.react"),{onClick:this.$6}));else{var d=this.$10({height:a.height,width:a.width});return b("React").createElement(b("Image.react"),{className:"_4idc _urh",height:d.y,width:d.x,src:a.uri,onClick:this.$11})}a=(d=c)!=null?(d=d.media_blob_attachments)!=null?(d=d[0])!=null?d.playable_url:d:d:d;if(a){a=b("nullthrows")((d=c)!=null?(d=d.media_blob_attachments)!=null?d[0]:d:d);c=a.legacy_attachment_id?a.legacy_attachment_id:a.id;d={};d.legacy_attachment_id=c;a.__typename==="MessageVideo"?d.original_dimensions=this.$10({width:a.original_dimensions.x,height:a.original_dimensions.y}):(d.original_dimensions=this.$10({width:a.width,height:a.height}),d.is_share=!0);d.start_muted=!0;d.no_fullscreen=!b("MessengerEnvironment").messengerui;d.hide_controls_on_finish=!0;d.url=a.playable_url;if(this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER)return b("React").createElement(b("MessengerVideoPlayer.react"),{attachment:a,videoData:d,isInThread:!0,isVisible:!0,className:"_ccq _4tsk _3o67"});else return b("React").createElement(b("MessengerVideoPlayer.react"),{attachment:a,videoData:d,isInThread:!0,isVisible:!0,onClick:this.$12,className:"_n4o _3_om _1wno"})}return null};a.prototype.$10=function(a){__p&&__p();if(this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT){var c=k;if(a.width<=c)return a;else{c=c/a.width;return{x:Math.round(a.width*c),y:Math.round(a.height*c)}}}c=window.innerHeight*.7;var d=window.innerWidth*.4,e=181,f=a.width;a=a.height;var g=1;g=Math.min(g,Math.min(d/f,c/a));g=Math.max(g,e/f);f=Math.round(f*g);a=Math.round(a*g);return{x:f,y:a}};a.prototype.$7=function(a){var c=b("SpotlightMessengerSharedMediaViewer.react").getImageDimensionsForStage(new(b("Vector"))(a.width,a.height),this.$9());return b("React").createElement(b("SpotlightViewerImage"),{dimensions:c,ref:"image",src:a.uri})};a.prototype.$9=function(){return new(b("Vector"))(b("Vector").getViewportDimensions().x,b("Vector").getViewportDimensions().y)};a.prototype.$5=function(){__p&&__p();var a,c=this.props,d=c.isSubattachment;c=c.retailItem;if(!c)return null;a=c.thumb_url?c.thumb_url:(a=c)!=null?(a=a.media_blob_attachments)!=null?(a=a[0])!=null?(a=a.image)!=null?a.uri:a:a:a:a;if(!a)return null;d=b("React").createElement(b("MNCommerceBubbleImage.react"),{className:(d?"":"_3_om")+(d?"":" _4j39"),location:this.props.location,source:a,width:this.props.width,isSquare:c.image_aspect_ratio===b("MessengerPlatformBubbleAspectRatio").IMAGE_ASPECT_RATIO_SQUARE});a=null;var e=c.default_action;if(e){c=(c=e)!=null?(c=c.webview_metadata)!=null?c.messenger_extensions:c:c;c?a=b("React").createElement(b("Link.react"),{onClick:function(){this.$13(),this.$14(e)}.bind(this)},d):a=b("React").createElement(b("Link.react"),{href:e.action_link,onClick:function(){this.$13()}.bind(this),target:"_blank"},d)}else a=d;c=b("React").createElement("div",{className:"_3cn2",key:"image"},a);return c};a.prototype.$13=function(){if(this.props.mnMessageType==b("MNCommerceMessageType").CONTENT_SUBSCRIPTION){var a=n(this.props.pageID),c=this.props.retailItem&&this.props.retailItem.id;new(b("MNContentSubscriptionMessageUserEngagementTypedLogger"))().setPageID(a).setMessageID(this.props.messageID).setCommerceItemID(c).setName("mn_platform_msg_click").log();b("Banzai").post("mn_platform_message_click_setsuna",{page_id:a,item_id:c})}};a.prototype.$3=function(){var a=this.props.retailItem;return!a||!a.name?null:b("React").createElement("div",{className:"_3cne"},b("React").createElement("div",{className:"_3cnf"},b("React").createElement("div",{className:"_3cng"},b("React").createElement("div",{className:"_3cnh"},this.props.longestName),b("React").createElement("div",{className:this.props.longestName?"_3cni":""},a.name)),this.$15(),this.$16()))};a.prototype.$17=function(){return this.props.isSponsored?null:b("React").createElement("div",{className:"_3cnj"},b("React").createElement("span",{className:"_3cnk"}),this.$18())};a.prototype.$18=function(){var a=this.props.label;if(a===0)return h._("Promoted");else if(a===1)return h._("Sponsored");return null};a.prototype.$15=function(){var a=this.props.retailItem&&this.props.retailItem.metalines;if(!a)return null;a=Object.keys(a).filter(function(b){return a&&a[b]}).map(function(c,d){d=a&&a[c];return b("React").createElement("div",{className:"_3cnl",key:c},b("React").createElement("div",{className:"_3cnh"},this.props.longestMetaline),b("React").createElement("div",{className:this.props.longestMetaline?"_3cni":""},d))}.bind(this));return a};a.prototype.$16=function(){var a=this.props.retailItem&&this.props.retailItem.item_url;if(!this.props.isSponsored&&a){var c=document.createElement("a");c.href=a;c=c.hostname;this.props.retailItem&&this.props.retailItem.source&&(c=this.props.retailItem.source);return b("React").createElement("div",{className:"_3cnn"},b("React").createElement("a",{href:a,target:"_blank"},c))}else return null};a.prototype.$1=function(){__p&&__p();var a=this.props.retailItem,c=this.props.callToActions,d=this.props.threadID;if(!c||!c.length)return null;var e=function(a,b){var c=h._("The feature has been disabled.");return g(a,b,c)},f=function(a,b){var c=h._("To use this feature, use the Messenger app.");return g(a,b,c)},g=function(a,c,d){return b("React").createElement("div",babelHelpers["extends"]({className:b("joinClasses")(c,"_3cno"),"data-tooltip-alignh":"center","data-tooltip-position":"above",key:a.title},b("Tooltip").propsFor(d)),a.translated_title||a.title)},i=function(a,c){return b("React").createElement("div",{key:a.id},b("React").createElement(b("Link.react"),{className:c,onClick:function(){this.$14(a)}.bind(this)},a.title))}.bind(this);c=c.filter(function(a){return a.action_link}).map(function(c,g){__p&&__p();var k="_3cnp"+(g===0&&!a?" _3cnq":"");if(c.is_disabled)return e(c,k);switch(c.action_type){case b("MNCommerceCallToActionType").POSTBACK:var l=function(a){this.onCancel(),this.$19(c.id),c.is_mutable_by_server?b("MNCommercePostbackCTADataManager").send(c.id,function(a){a.error&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("MessengerPlatformPostbackFailedDialog.react"),null)})},null,this.props.messageID):b("MNCommercePostbackCTADataManager").sendAndConfirm(c.id,c.title,d,null,function(a){a.error&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("MessengerPlatformPostbackFailedDialog.react"),null)})},null,[],this.props.messageID)}.bind(this),n=null;this.state.showDialog&&c.should_show_user_confirmation&&(n=b("React").createElement(b("FBConfirmDialog.react"),{title:c.confirmation_title,shown:!0,onConfirm:l,onCancel:this.onCancel,confirmButtonText:c.confirmation_continue_label,cancelButtonText:c.confirmation_cancel_label,content:c.confirmation_message}));l=c.should_show_user_confirmation?this.onConfirm:l;return b("React").createElement("div",{key:g},b("React").createElement(b("Link.react"),{className:k,onClick:l},c.translated_title||c.title),n);case b("MNCommerceCallToActionType").OPEN_URL:return b("MNCommerceCallToActionHandlerMap").getHandler(c.action_link).setFallbackOnClick(this.$20.bind(this,c.id)).setThreadID(d).renderForWebLink(c,k);case b("MNCommerceCallToActionType").OPEN_CANCEL_RIDE_MUTATION:return f(c,k);case b("MNCommerceCallToActionType").OPEN_NATIVE:n=(l=c)!=null?(l=l.webview_metadata)!=null?l.messenger_extensions:l:l;return n?i(c,k):b("MNCommerceCallToActionHandlerMap").getHandler(c.action_link).setFallbackOnClick(this.$20.bind(this,c.id)).setThreadID(d).renderForNativeLink(c,k);case b("MNCommerceCallToActionType").PAYMENT:l="_idv";n="_idw";return b("React").createElement("div",{key:g},this.$21(c),b("React").createElement(b("Link.react"),{className:k,onClick:function(){this.$22(c),this.$23()}.bind(this)},b("React").createElement("div",{className:l},c.payment_metadata.total_price),b("React").createElement("div",{className:n},c.translated_title||c.title)));case b("MNCommerceCallToActionType").SHARE:l=b("MessengerEnvironment").messengerui?j:b("MessagingForwardAttachmentDialog.react");n=h._("Share in Separate messages");l=b("React").createElement(l,{attachmentID:c.id,messageID:this.props.messageID,onClose:this.$24,shown:this.state.showShare,title:n,shareType:b("MessageShareType").PLATFORM_SHARE_CTA});return b("React").createElement("div",{key:g},b("React").createElement(b("Link.react"),{className:k,onClick:this.$25},c.title),l);case b("MNCommerceCallToActionType").EXTENSIBLE_SHARE:n=h._("Share in Separate messages");return b("React").createElement("div",{key:g},b("React").createElement(b("Link.react"),{className:k,onClick:this.$25},c.title),b("React").createElement(b("LoadOnRender.react"),{key:"dialog",component:b("React").createElement(b("LazyComponent.react"),{attachmentID:c.id,image_url:c.action_objects[0].image_url,messageID:this.props.messageID,onClose:this.$24,pageID:this.props.pageID,preview_title:c.action_objects[0].preview_title,preview_subtitle:c.action_objects[0].preview_subtitle,shown:this.state.showShare,target_display:c.action_objects[0].target_display,title:n,threadID:this.props.threadID}),loader:m,placeholder:b("React").createElement("span",null)}));case b("MNCommerceCallToActionType").ACCOUNT_LINK:l=function(a){b("MNCommerceCTAProcessor").process(c.id,this.props.messageID)}.bind(this);return b("React").createElement(b("Link.react"),{className:k,key:g,onClick:l},c.translated_title||c.title);case b("MNCommerceCallToActionType").FACEBOOK_REPORT_A_PROBLEM:n=function(a){b("AsyncDialog").send(new(b("AsyncRequest"))("/ajax/bugs/report"))};return b("React").createElement(b("Link.react"),{className:k,key:g,onClick:n},c.translated_title||c.title);default:return f(c,k)}}.bind(this));var k=this.props.longestCTAs,l=[];if(k&&k>c.length){for(var n=0;n<k-c.length;n++)l.push(b("React").createElement("div",{className:"_3cnh _3cnp",key:"placeholder"+n},"CTA placeHolder"));n=l.concat(c);return b("React").createElement("div",{className:"_3cnr"},n)}return b("React").createElement("div",{className:"_3cnr"},c)};a.prototype.$20=function(a,event){this.$19(a)};a.prototype.$19=function(a){this.props.isSponsored&&new(b("MessengerAdsWebTypedLogger"))().setActionID(a).setEvent(b("MNAdsLoggerEventEnum").LINK_CLICK_CTA).setIsSponsored(this.props.isSponsored).setItemID(this.props.retailItem&&this.props.retailItem.id).setMessageID(this.props.messageID).setPageID(this.props.pageID).log()};a.prototype.$21=function(a){if(this.state.showPaymentCheckoutDialog){a=b("FBPaymentsSerializableCheckoutConfigurationParser").parse(this.$27(a.payment_metadata.payment_module_config),!0);var c=a.contentConfiguration.confirmationConfiguration||{};a.contentConfiguration.confirmationConfiguration=c;return b("React").createElement(b("FBPaymentsCheckoutV2FlowContainer.react"),{configuration:a,onCheckoutClosed:this.$26,onConfirmationClosed:this.$26})}return null};a.prototype.$27=function(a){var b="";try{b=JSON.parse(a)}catch(b){return a}b.checkout_configuration&&b.checkout_configuration.payment_info&&b.checkout_configuration.payment_info.extra_data&&(b.checkout_configuration.payment_info.extra_data.message_id=this.props.messageID);return JSON.stringify(b)};a.prototype.$14=function(a){b("BrowserExtensionsDialog").show(new(b("URI"))(a.action_link),b("MercuryIDs").getThreadFBIDFromThreadID(this.props.pageID),b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID),b("CurrentUser").getID()),this.$22(a)};a.prototype.$22=function(a){b("MNCommerceCTAProcessor").postHandle(a.id,this.props.messageID)};a.propTypes={callToActions:b("MNCommercePromotionReactShapes").CallToActions,isMediaAttachment:c.bool,isSponsored:c.bool,isSubattachment:c.bool,label:c.number,logo:c.object,location:c.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),longestCTAs:c.number,longestMetaline:c.string,longestName:c.string,messageID:c.string,mnMessageType:c.string,pageID:c.string,retailItem:b("MNCommercePromotionReactShapes").RetailItem,url:c.string,width:c.number,threadID:c.string};e.exports=a}),null);
__d("P2PAddressStore",["EventEmitter","ImmutableObject","P2PActionConstants","P2PAPI","P2PDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").List,i=h(),j=!1,k=!1,l={},m,n=null,o=!1;function p(a,c){a&&(l[a]=new(b("ImmutableObject"))(c))}function q(a,b){n=b,a&&(l[a]={error:b})}c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),j=!1,k=!1,i=h(),l={},m=b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){__p&&__p();var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").ADDRESS_SAVING:this.handleAddressSaving(c);this.emit("change");break;case b("P2PActionConstants").ADDRESSES_UPDATED:this.handleAddressesUpdated(c);this.emit("change");break;case b("P2PActionConstants").ADDRESS_ADDED:this.handleAddressAdded(c);this.emit("change");break;case b("P2PActionConstants").ADDRESS_ADDED_ERROR:this.handleAddressAddedError(c);this.emit("change");break;case b("P2PActionConstants").ADDRESS_ADDED_ERROR_CLEARED:this.handleAddressAddedErrorCleared();this.emit("change");break}};a.prototype.getAsyncRequestState=function(){return l};a.prototype.isAddressesFetchComplete=function(){return j};a.prototype.handleAddressSaving=function(){o=!0,n=null};a.prototype.handleAddressesUpdated=function(a){j=!0,a=a.map(function(a){return new(b("ImmutableObject"))(a)}),i=h(a)};a.prototype.handleAddressAdded=function(a){o=!1,p(a.requestID,a),this.getAddressByID(a.id)||(i=i.push(new(b("ImmutableObject"))(a)))};a.prototype.handleAddressAddedError=function(a){o=!1,q(a.requestID,a.errors)};a.prototype.handleAddressAddedErrorCleared=function(){n=null};a.prototype.getAll=function(a){k||(k=!0,b("P2PAPI").getAddresses());return a?i.filter(function(a){return a.isVerified}):i};a.prototype.getAddressByID=function(a){return i.find(function(b){return b.id===a})};a.prototype.getDispatchToken=function(){return m};a.prototype.getSaveErrors=function(){return n};a.prototype.isSaving=function(){return o};e.exports=new a()}),null);
__d("P2PAddressShape",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=a.shape({label:a.string,care_of:a.string,city:a.string,id:a.string,state:a.string,street1:a.string,street2:a.string,zip:a.string});e.exports=c}),null);
__d("P2PAddressDetails.react",["P2PAddressShape","P2PText.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=this.props.address,c=[a.city,a.state],d,e,f,g={display:"block",type:"primary"},h=a.zip?" "+a.zip:"",i=a.country?" "+a.country:"";c=c.join(", ")+h+i;a.streeet2&&(d=b("React").createElement(b("P2PText.react"),g,a.street2));a.label&&(e=b("React").createElement(b("P2PText.react"),g,a.label));a.care_of&&(f=b("React").createElement(b("P2PText.react"),g,a.care_of));return b("React").createElement("div",null,e,f,b("React").createElement(b("P2PText.react"),g,a.street1),d,b("React").createElement(b("P2PText.react"),g,c))};function a(){g.apply(this,arguments)}a.propTypes={address:b("P2PAddressShape").isRequired};e.exports=a}),null);
__d("P2PAddressForm.react",["cx","fbt","FBPaymentsAddressLabelFormField_DEPRECATED.react","FBPaymentsForm_DEPRECATED.react","FBPaymentsFormField_DEPRECATED.react","FBPaymentsFormFieldUtils_DEPRECATED","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={formData:{},isValid:!1},this.handleValidation=function(a,b){this.setState({formData:b,isValid:a}),this.props.onValidation(a,b)}.bind(this),b}a.prototype.render=function(){var a=!!(this.props.prefilledFormData&&this.props.prefilledFormData.care_of);return b("React").createElement(b("FBPaymentsForm_DEPRECATED.react"),{errorTitle:h._("Problem Saving Address"),prefilledFormData:this.props.prefilledFormData,onValidation:this.handleValidation,saveErrors:this.props.saveErrors},b("React").createElement(b("FBPaymentsAddressLabelFormField_DEPRECATED.react"),{className:"_3-96",name:"label",ignoreStyling:!0,required:!0}),b("React").createElement(b("FBPaymentsFormField_DEPRECATED.react"),{name:"care_of",initiallyFocused:!a,placeholder:h._("Name"),required:!0,width:100}),b("React").createElement(b("FBPaymentsFormField_DEPRECATED.react"),{name:"street1",initiallyFocused:a,placeholder:h._("Street"),required:!0,width:100}),b("React").createElement(b("FBPaymentsFormField_DEPRECATED.react"),{name:"street2",placeholder:h._("Street 2"),width:100}),b("React").createElement(b("FBPaymentsFormField_DEPRECATED.react"),{name:"city",placeholder:h._("City"),required:!0,width:50}),b("React").createElement(b("FBPaymentsFormField_DEPRECATED.react"),{formatValue:function(a){a=b("FBPaymentsFormFieldUtils_DEPRECATED").stripNonAlpha(a);return a.toUpperCase()},limit:2,name:"state",placeholder:h._("State"),required:!0,width:25}),b("React").createElement(b("FBPaymentsFormField_DEPRECATED.react"),{formatValue:b("FBPaymentsFormFieldUtils_DEPRECATED").stripNonDigits,limit:5,name:"zip",placeholder:h._("ZIP"),required:!0,width:25}))};a.propTypes={onValidation:c.func.isRequired,prefilledFormData:c.object,saveErrors:c.object};a.defaultProps={editMode:!1,prefilledFormData:{},saveErrors:null};e.exports=a}),null);
__d("P2PCheckoutConfigSection.react",["cx","fbt","LeftRight.react","Link.react","React","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.renderChangeLink=function(){return this.props.showEditOptions||!this.props.hasOptions?null:b("React").createElement(b("Link.react"),{className:"_nb2",href:"#",onClick:this.props.onChangeClicked},h._("Change"))}.bind(this),this.renderContent=function(){var a=this.props,c,d;a.showEditOptions?c=this.renderSelector():a.hasOptions&&(c=this.renderCurrentItem());a.showForm&&(d=this.renderForm());return b("React").createElement("div",null,c,d)}.bind(this),this.renderForm=function(){var a;if(!this.props.renderFormComponent)return null;this.props.renderFormFooterMessage&&(a=b("React").createElement("div",{className:"_nb4"},this.props.renderFormFooterMessage()));return b("React").createElement("div",{className:"_nb3",key:"form"},this.props.renderFormComponent(),a)}.bind(this),this.renderSelector=function(){return b("React").createElement("div",{className:"_nb5",key:"selector"},this.props.renderSelectorComponent())}.bind(this),this.renderCurrentItem=function(){return!this.props.renderSelectedRow?null:b("React").createElement("div",{className:"_nb6",key:"currentItem"},this.props.renderSelectedRow())}.bind(this),c}a.prototype.render=function(){return b("React").createElement("div",{className:"_nb7"},b("React").createElement(b("LeftRight.react"),{className:"_nb8"},b("React").createElement("div",{className:"_nb9"},this.props.title),this.renderChangeLink()),b("React").createElement("div",{className:"_nba"},this.renderContent()))};a.propTypes={onChangeClicked:c.func,hasOptions:c.bool,showEditOptions:c.bool,showForm:c.bool,renderFormComponent:c.func,renderFormFooterMessage:c.func,renderSelectedRow:c.func,renderSelectorComponent:c.func.isRequired,title:c.string.isRequired};a.defaultProps={onChangeClicked:b("emptyFunction"),renderFormFooterMessage:b("emptyFunction"),renderFormComponent:b("emptyFunction"),renderSelectedRow:b("emptyFunction")};e.exports=a}),null);
__d("P2PChooseAddressForm.react",["cx","fbt","P2PAddressDetails.react","P2PAddressShape","P2PText.react","React","XUIRadioList.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("immutable").List;var j=b("XUIRadioList.react").Item;d=b("React").PropTypes;var k="add_address";f=babelHelpers.inherits(a,b("React").Component);i=f&&f.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={selectedValue:this.props.selectedAddress.id},this.getselectedAddress=function(){return this.props.addresses.filter(function(a){return a.id===this.state.selectedValue}.bind(this)).first()}.bind(this),this.handleChange=function(a){var b;a===k?(this.props.onNewAddressOptionSelected(),this.setState({selectedValue:a})):(b=this.props.addresses.filter(function(b){return b.id===a}).first(),this.setState({selectedValue:b.id}),this.props.onChange(b))}.bind(this),this.renderAddressItem=function(a){return b("React").createElement(j,{className:"_54sy",key:a.id,value:a.id},b("React").createElement(b("P2PAddressDetails.react"),{address:a}))},this.renderAddNewAddressItem=function(){return b("React").createElement(j,{className:"_54sy",key:k,value:k},b("React").createElement(b("P2PText.react"),{type:"primary"},h._("Add New Address")))},this.getRadioListItems=function(){var a=this.props.addresses;a=a.map(this.renderAddressItem).concat(this.renderAddNewAddressItem());return a}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("XUIRadioList.react"),{className:"_1ck2",onValueChange:this.handleChange,selectedValue:this.state.selectedValue},this.getRadioListItems())};a.propTypes={addresses:d.instanceOf(c),onChange:d.func.isRequired,onNewAddressOptionSelected:d.func.isRequired,selectedAddress:b("P2PAddressShape")};e.exports=a}),null);
__d("P2PAddressConfigSection.react",["fbt","FBPaymentsAddressForm_DEPRECATED.react","MessengerEnvironment","P2PAddressDetails.react","P2PAddressForm.react","P2PAddressShape","P2PCheckoutConfigSection.react","P2PChooseAddressForm.react","P2PText.react","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i="P2PAddressConfigSection_learnMoreSentenceID";d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.renderFormComponent=function(){var a=this.props;return a.acceptInternational?b("React").createElement(b("FBPaymentsAddressForm_DEPRECATED.react"),{onValidation:a.onValidation,prefilledFormData:{care_of:this.props.buyerName},saveErrors:a.saveErrors}):b("React").createElement(b("P2PAddressForm.react"),{onValidation:a.onValidation,prefilledFormData:{care_of:this.props.buyerName},saveErrors:a.saveErrors})}.bind(this),this.renderSelectedRow=function(){var a=this.props.selectedAddress;return!a?null:b("React").createElement(b("P2PAddressDetails.react"),{address:a})}.bind(this),this.renderSelectorComponent=function(){var a=this.props;return b("React").createElement(b("P2PChooseAddressForm.react"),{addresses:a.addresses,onChange:this.props.onAddressSelected,onNewAddressOptionSelected:this.props.onNewAddressSelected,selectedAddress:a.selectedAddress})}.bind(this),this.renderFormFooterMessage=function(){return b("React").createElement(b("P2PText.react"),{id:i,type:"secondary"},g._("Your shipping address will be stored securely for future purchases on Facebook."))},this.getTitle=function(){return b("MessengerEnvironment").messengerui?g._("Shipping Address"):g._("SHIPPING ADDRESS")},c}a.prototype.render=function(){var a=this.props;return b("React").createElement(b("P2PCheckoutConfigSection.react"),{hasOptions:a.addresses.count()!==0,showEditOptions:a.showEditOptions,showForm:a.showForm,onChangeClicked:a.onChangeClicked,renderFormComponent:this.renderFormComponent,renderFormFooterMessage:this.renderFormFooterMessage,renderSelectedRow:this.renderSelectedRow,renderSelectorComponent:this.renderSelectorComponent,title:this.getTitle()})};a.propTypes={acceptInternational:c.bool,addresses:c.instanceOf(b("immutable").List).isRequired,buyerName:c.string,showEditOptions:c.bool,showForm:c.bool,onAddressSelected:c.func.isRequired,onChangeClicked:c.func.isRequired,onNewAddressSelected:c.func.isRequired,onValidation:c.func.isRequired,selectedAddress:b("P2PAddressShape"),saveErrors:c.object};e.exports=a}),null);
__d("P2PCreditCardConfigSection.react",["fbt","Link.react","MessengerEnvironment","MessengerPaymentProductType","P2PCheckoutConfigSection.react","P2PChooseCreditCardForm.react","P2PCreditCard","P2PCreditCardDetails.react","P2PCreditCardForm.react","P2PLinkConstants","P2PText.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i="P2PCreditCardConfigSection_learnMoreSentenceID";d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.renderFormComponent=function(){var a=this.props;return b("React").createElement(b("P2PCreditCardForm.react"),{onValidation:a.onValidation,saveErrors:a.saveErrors,productType:b("MessengerPaymentProductType").MESSENGER_COMMERCE})}.bind(this),this.renderSelectedRow=function(){var a=this.props.selectedCreditCard;return!a?null:b("React").createElement(b("P2PCreditCardDetails.react"),{creditCard:a})}.bind(this),this.renderSelectorComponent=function(){var a=this.props;return b("React").createElement(b("P2PChooseCreditCardForm.react"),{addCardOptionText:g._("Add New Card"),creditCards:a.creditCards,onAddDebitCardOptionSelected:this.props.onNewCreditCardSelected,onChange:this.props.onCreditCardSelected,selectedCard:a.selectedCreditCard,showAddDebitCardOption:!0})}.bind(this),this.renderFormFooterMessage=function(){return b("React").createElement(b("P2PText.react"),{id:i,type:"secondary"},g._("Your payment info is stored securely."),b("React").createElement("div",null,b("React").createElement(b("Link.react"),{"aria-describedby":i,href:b("P2PLinkConstants").addDebitCardHelpURI,target:"_blank"},g._("Learn More"))))},this.getTitle=function(){return b("MessengerEnvironment").messengerui?g._("Payment Information"):g._("PAYMENT INFORMATION")},c}a.prototype.render=function(){var a=this.props;return b("React").createElement(b("P2PCheckoutConfigSection.react"),{hasOptions:a.creditCards.length!==0,showEditOptions:a.showEditOptions,showForm:a.showForm,onChangeClicked:a.onChangeClicked,renderFormComponent:this.renderFormComponent,renderFormFooterMessage:this.renderFormFooterMessage,renderSelectedRow:this.renderSelectedRow,renderSelectorComponent:this.renderSelectorComponent,title:this.getTitle()})};a.propTypes={creditCards:c.arrayOf(c.instanceOf(b("P2PCreditCard"))).isRequired,showEditOptions:c.bool,showForm:c.bool,onCreditCardSelected:c.func.isRequired,onChangeClicked:c.func.isRequired,onNewCreditCardSelected:c.func.isRequired,onValidation:c.func.isRequired,selectedCreditCard:c.instanceOf(b("P2PCreditCard")),saveErrors:c.object};e.exports=a}),null);
__d("P2PPaymentMethodConfigSection.react",["fbt","FBPaymentsChoosePaymentMethodForm_DEPRECATED.react","FBPaymentsMethodType","FBPaymentsPaymentMethodShape_DEPRECATED","MessengerEnvironment","P2PCheckoutConfigSection.react","P2PCreditCardDetails.react","P2PText.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.renderFormComponent=function(){return b("React").createElement(b("FBPaymentsChoosePaymentMethodForm_DEPRECATED.react"),{onPaymentMethodConfigured:this.props.onPaymentMethodConfigured,onPaymentMethodSelected:this.props.onPaymentMethodSelected,paymentMethods:this.props.paymentMethods})}.bind(this),this.renderSelectedRow=function(){__p&&__p();var a=this.props.confirmedPaymentMethod;if(!a)return null;switch(a.type){case b("FBPaymentsMethodType").GENERIC_CARD:return b("React").createElement(b("P2PCreditCardDetails.react"),{creditCard:a.creditCard});case b("FBPaymentsMethodType").MANUAL_TRANSFER:return b("React").createElement(b("P2PText.react"),{type:"primary"},g._("Transfer at ATM or Bank"));case b("FBPaymentsMethodType").NET_BANKING:var c=a.bank.name;return b("React").createElement(b("P2PText.react"),{type:"primary"},g._("{bank_name} (Online Banking)",[g._param("bank_name",c)]));case b("FBPaymentsMethodType").PAY_OVER_COUNTER:return b("React").createElement(b("P2PText.react"),{type:"primary"},g._("Payment at Store Counter"));default:return b("React").createElement("div",null,a?a.toString():"")}}.bind(this),this.renderSelectorComponent=function(){return this.renderFormComponent()}.bind(this),c}a.prototype.getTitle=function(){return b("MessengerEnvironment").messengerui?g._("Payment Method"):g._("PAYMENT METHOD")};a.prototype.render=function(){var a=this.props;return b("React").createElement(b("P2PCheckoutConfigSection.react"),{hasOptions:!!a.confirmedPaymentMethod,showEditOptions:a.showEditOptions,showForm:a.showForm,onChangeClicked:a.onChangeClicked,renderFormComponent:this.renderFormComponent,renderSelectedRow:this.renderSelectedRow,renderSelectorComponent:this.renderSelectorComponent,title:this.getTitle()})};a.propTypes={confirmedPaymentMethod:c.shape(b("FBPaymentsPaymentMethodShape_DEPRECATED")),onChangeClicked:c.func.isRequired,onPaymentMethodConfigured:c.func.isRequired,onPaymentMethodSelected:c.func.isRequired,paymentMethods:c.arrayOf(b("FBPaymentsPaymentMethodShape_DEPRECATED")).isRequired,showEditOptions:c.bool,showForm:c.bool};e.exports=a}),null);
__d("P2PPlatformContextBannerShape",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=a.shape({shouldShowToBuyer:a.bool,shouldShowToSeller:a.bool,shouldShowPayNux:a.bool});e.exports=c}),null);
__d("P2PPlatformContextShippingOptionShape",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=a.shape({formattedShippingPrice:a.string,formattedSubtotal:a.string,formattedTax:a.string,formattedTotal:a.string,id:a.string,rawTotal:a.string,title:a.string});e.exports=c}),null);
__d("P2PPlatformContextShape",["P2PPlatformContextBannerShape","P2PPlatformContextProductItemShape","P2PPlatformContextShippingOptionShape","React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=a.shape({id:a.string,banner:b("P2PPlatformContextBannerShape"),buyerID:a.string,product:b("P2PPlatformContextProductItemShape"),sellerID:a.string,shippingOptions:a.arrayOf(b("P2PPlatformContextShippingOptionShape"))});e.exports=c}),null);
__d("P2PChooseShippingOptionForm.react",["cx","P2PPlatformContextShippingOptionShape","P2PText.react","React","XUIRadioList.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("XUIRadioList.react").Item;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={selectedValue:this.props.selectedShippingOption.id},this.handleChange=function(a){var b=this.props.shippingOptions.filter(function(b){return b.id===a})[0];this.setState({selectedValue:b.id});this.props.onChange(b)}.bind(this),this.renderShippingOptionItem=function(a){return b("React").createElement(i,{className:"_2i8o",key:a.id,value:a.id},b("React").createElement(b("P2PText.react"),{type:"primary"},a.title))},this.getRadioListItems=function(){return this.props.shippingOptions.map(this.renderShippingOptionItem)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("XUIRadioList.react"),{className:"_2i8p",onValueChange:this.handleChange,selectedValue:this.state.selectedValue},this.getRadioListItems())};a.propTypes={shippingOptions:c.arrayOf(b("P2PPlatformContextShippingOptionShape")).isRequired,onChange:c.func.isRequired,selectedShippingOption:b("P2PPlatformContextShippingOptionShape")};e.exports=a}),null);
__d("P2PShippingOptionsConfigSection.react",["fbt","MessengerEnvironment","P2PCheckoutConfigSection.react","P2PChooseShippingOptionForm.react","P2PPlatformContextShippingOptionShape","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.renderSelectorComponent=function(){var a=this.props;return b("React").createElement(b("P2PChooseShippingOptionForm.react"),{shippingOptions:a.shippingOptions,onChange:this.props.onShippingOptionSelected,selectedShippingOption:a.selectedShippingOption})}.bind(this),this.getTitle=function(){return b("MessengerEnvironment").messengerui?g._("Shipping Options"):g._("SHIPPING OPTIONS")},c}a.prototype.render=function(){return b("React").createElement(b("P2PCheckoutConfigSection.react"),{hasOptions:!0,showEditOptions:!0,showForm:!1,renderSelectorComponent:this.renderSelectorComponent,title:this.getTitle()})};a.propTypes={onShippingOptionSelected:c.func.isRequired,selectedShippingOption:b("P2PPlatformContextShippingOptionShape"),shippingOptions:c.arrayOf(b("P2PPlatformContextShippingOptionShape"))};e.exports=a}),null);
__d("P2PCheckoutDialog.react",["cx","csx","fbt","CommerceContactMerchantManualPaymentSection.react","CSS","DOMQuery","FBPaymentsLegalDisclaimer_DEPRECATED.react","FBPaymentsMethodType","MessengerEnvironment","P2PActions","P2PAddressConfigSection.react","P2PAddressShape","P2PButton.react","P2PCheckoutPriceDetails.react","P2PCreditCard","P2PCreditCardConfigSection.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLoadingMask.react","P2PPaymentMethodConfigSection.react","P2PPlatformContextShape","P2PPlatformContextShippingOptionShape","P2PPlatformProductItemDetails.react","P2PShippingOptionsConfigSection.react","React","immutable"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"P2PCheckoutDialog",propTypes:{acceptInternationalAddresses:a.bool,addresses:a.instanceOf(b("immutable").List).isRequired,addressFormData:a.object,addressFormValid:a.bool,addressSaveErrors:a.object,asyncPaymentDetails:a.object,buyer:a.object,configuredPaymentMethod:a.object,confirmedPaymentMethod:a.object,creditCardFormData:a.object,creditCardFormValid:a.bool,creditCardSaveErrors:a.object,creditCards:a.arrayOf(a.instanceOf(b("P2PCreditCard"))).isRequired,customCheckoutDetails:a.node,editingPaymentMethod:a.bool,paymentMethods:a.array,paymentProductType:a.string,initialDataLoaded:a.bool,onClose:a.func.isRequired,onCompleteManualPayment:a.func.isRequired,onConfirmSelectedPaymentMethod:a.func.isRequired,onPlaceOrder:a.func.isRequired,onSaveAddress:a.func.isRequired,onSaveCreditCard:a.func.isRequired,onSetAddress:a.func.isRequired,orderID:a.string,platformContext:b("P2PPlatformContextShape"),receiptAttached:a.bool,saving:a.bool,selectedAddress:b("P2PAddressShape"),selectedCreditCard:a.instanceOf(b("P2PCreditCard")),selectedPaymentMethod:a.object,selectedShippingOption:b("P2PPlatformContextShippingOptionShape"),showAddressEditOptions:a.bool,showAsyncPaymentDetails:a.bool,showCreditCardEditOptions:a.bool,showPaymentMethodEditOptions:a.bool,showAddressForm:a.bool,showCreditCardForm:a.bool,showPaymentMethodForm:a.bool,showTaxField:a.bool,shippingOptions:a.arrayOf(b("P2PPlatformContextShippingOptionShape")),usePaymentMethods:a.bool},_toggledCreditCard:null,_toggledAddress:null,handleToggle:function(a){a||this.props.onClose(),this.cleanup()},handleCloseDialog:function(){this.props.onClose(),this.cleanup()},componentDidMount:function(){setTimeout(function(){if(this.isMounted()){var a=b("DOMQuery").find(document,"div._ugr");a&&b("CSS").addClass(a,"_225w")}}.bind(this),200)},getProductFromPlatformContext:function(){var a=this.props.platformContext;return a?a.product:null},renderPriceDetails:function(){var a=this.getProductFromPlatformContext(),c=this.props.selectedShippingOption,d,e,f,g;a&&(d=a.formattedAmount,g=d);c&&(d=c.formattedSubtotal,f=c.formattedShippingPrice,e=c.formattedTax,g=c.formattedTotal);return b("React").createElement(b("P2PCheckoutPriceDetails.react"),{shipping:f,subtotal:d,tax:e,total:g,showShippingField:!this.props.showAsyncPaymentDetails,showSubtotalField:!this.props.showAsyncPaymentDetails,showTaxField:this.props.showTaxField&&!this.props.showAsyncPaymentDetails})},renderItemSection:function(){var a=this.getProductFromPlatformContext();if(!a)return null;var c;this.props.customCheckoutDetails&&(c=b("React").createElement("div",{className:"_145w"},this.props.customCheckoutDetails));return b("React").createElement("div",null,b("React").createElement("div",{className:"_4oyy"},b("React").createElement(b("P2PPlatformProductItemDetails.react"),{configSelections:this.props.configSelections,item:a,size:"medium"})),c,b("React").createElement("div",{className:"_4oz5"},this.renderPriceDetails()))},renderRightPanel:function(){var a=!this.props.showAsyncPaymentDetails;return b("React").createElement("div",{className:(a?"_4oz9":"")+(a?"":" _334")},a?this.renderConfigSection():this.renderAsyncPaymentDetailsSection(),this.renderDialogFooter())},renderConfigSection:function(){if(!this.props.initialDataLoaded)return null;var a,c=b("React").createElement("div",{className:"_4gf2",key:"addressConigSection"},b("React").createElement(b("P2PAddressConfigSection.react"),{acceptInternational:this.props.acceptInternationalAddresses,addresses:this.props.addresses,buyerName:this.props.buyer&&this.props.buyer.name,onAddressSelected:this.handleAddressSelected,onChangeClicked:this.handleAddressChangeClicked,onNewAddressSelected:this.handleNewAddressSelected,onValidation:this.handleAddressFormValidation,saveErrors:this.props.addressSaveErrors,selectedAddress:this.props.selectedAddress,showEditOptions:this.props.showAddressEditOptions,showForm:this.props.showAddressForm})),d=this.props.usePaymentMethods?b("React").createElement("div",{className:"_4gf2",key:"paymentMethodConfigSection"},b("React").createElement(b("P2PPaymentMethodConfigSection.react"),{confirmedPaymentMethod:this.props.confirmedPaymentMethod,onPaymentMethodConfigured:this.handlePaymentMethodConfigured,onPaymentMethodSelected:this.handlePaymentMethodSelected,onChangeClicked:this.handlePaymentMethodChangeClicked,paymentMethods:this.props.paymentMethods,showEditOptions:this.props.showPaymentMethodEditOptions,showForm:this.props.showPaymentMethodForm})):b("React").createElement("div",{className:"_4gf2",key:"creditCardConfigSection"},b("React").createElement(b("P2PCreditCardConfigSection.react"),{creditCards:this.props.creditCards,onCreditCardSelected:this.handleCreditCardSelected,onChangeClicked:this.handleCreditCardChangeClicked,onNewCreditCardSelected:this.handleNewCreditCardSelected,onValidation:this.handleCreditCardFormValidation,saveErrors:this.props.creditCardSaveErrors,selectedCreditCard:this.props.selectedCreditCard,showEditOptions:this.props.showCreditCardEditOptions,showForm:this.props.showCreditCardForm}));this.props.shippingOptions&&this.props.shippingOptions.length&&this.props.selectedShippingOption&&(a=b("React").createElement("div",{className:"_4gf2",key:"shippingConfigSection"},b("React").createElement(b("P2PShippingOptionsConfigSection.react"),{onShippingOptionSelected:this.handleShippingOptionSelected,shippingOptions:this.props.shippingOptions,selectedShippingOption:this.props.selectedShippingOption})));(this.props.showAddressEditOptions||this.props.showAddressForm)&&(d=null,a=null);(this.props.showPaymentMethodEditOptions||this.props.showCreditCardEditOptions)&&(c=null,a=null);return b("React").createElement("div",null,c,a,d)},renderAsyncPaymentDetailsSection:function(){var a=this.props.asyncPaymentDetails,c=this.props.orderID;return!a||!c?null:b("React").createElement(b("CommerceContactMerchantManualPaymentSection.react"),{paymentOptionDetails:a,invoiceID:c,onReceiptUpdated:function(a,c){b("P2PActions").checkoutManualPaymentReceiptUpdated({receiptFbid:a})}})},renderDialogFooter:function(){__p&&__p();if(!this.props.initialDataLoaded)return null;var a,c=i._("Cancel"),d=i._("Continue"),e;b("MessengerEnvironment").messengerui&&(e=b("React").createElement(b("P2PButton.react"),{label:c,onClick:this.props.onClose}));var f=this.props.editingPaymentMethod;if(f&&this.props.selectedPaymentMethod)switch(this.props.selectedPaymentMethod.type){case b("FBPaymentsMethodType").NEW_CREDIT_CARD:d=i._("Add Card");break;case b("FBPaymentsMethodType").NET_BANKING:d=i._("Confirm Bank");break}f=this.props.showCreditCardEditOptions||f||this.props.showAddressEditOptions||this.props.showAddressForm;f?c=b("React").createElement("div",null,b("React").createElement(b("P2PButton.react"),{label:c,onClick:this.handleEditCancelClicked}),b("React").createElement(b("P2PButton.react"),{disabled:this.isSaveDisabled(),label:d,onClick:this.handleContinueClicked,use:"confirm"})):this.props.showAsyncPaymentDetails?c=b("React").createElement("div",null,b("React").createElement(b("P2PButton.react"),{disabled:!this.props.receiptAttached,label:i._("Complete Purchase"),onClick:this.handleCompleteManualPaymentClicked,use:"confirm"})):(a=this.getLegalDisclaimerSection(),c=b("React").createElement("div",{className:"_35cu"},e,b("React").createElement(b("P2PButton.react"),{className:this.props.usePaymentMethods?"_35cv":"",disabled:this.isSaveDisabled(),label:this.getCheckoutButtonLabel(),onClick:this.handlePlaceOrderClicked,use:"confirm"})));return b("React").createElement("div",{className:"_35cw"},b("React").createElement(b("P2PDialogFooter.react"),{className:"_ugq"+(f?" _35cx":"")},a,c))},isSaveDisabled:function(){var a=this.props.configuredPaymentMethod&&this.props.configuredPaymentMethod.isValid&&this.isConfiguredPaymentMethodSelected();return!!this.props.showCreditCardForm&&!this.props.creditCardFormValid||!!this.props.editingPaymentMethod&&!a||!!this.props.showAddressForm&&!this.props.addressFormValid},isConfiguredPaymentMethodSelected:function(){return!!this.props.configuredPaymentMethod&&!!this.props.selectedPaymentMethod&&this.props.configuredPaymentMethod.type===this.props.selectedPaymentMethod.type},getCheckoutButtonLabel:function(){__p&&__p();if(!this.props.usePaymentMethods)return i._("Place Order");var a=this.props.confirmedPaymentMethod,c=i._("Complete Purchase");if(!a)return c;switch(a.type){case b("FBPaymentsMethodType").NET_BANKING:return i._("Log In and Pay");case b("FBPaymentsMethodType").GENERIC_CARD:return i._("Pay");case b("FBPaymentsMethodType").PAY_OVER_COUNTER:return i._("Continue to Pay");default:return c}},getLegalDisclaimerSection:function(){return!this.props.usePaymentMethods||!this.props.confirmedPaymentMethod?null:b("React").createElement("div",{className:"_35d1"},b("React").createElement(b("FBPaymentsLegalDisclaimer_DEPRECATED.react"),{paymentMethodType:this.props.confirmedPaymentMethod.type,paymentType:this.props.paymentProductType}))},handleShippingOptionSelected:function(a){b("P2PActions").checkoutShippingOptionSelected(a.id)},handleCreditCardFormValidation:function(a,c){b("P2PActions").checkoutCreditCardFormValidated(a,c)},handleCreditCardChangeClicked:function(){b("P2PActions").checkoutCreditCardEditOptionsToggled(!0)},handlePaymentMethodChangeClicked:function(){b("P2PActions").checkoutPaymentMethodEditOptionsToggled(!0)},handleCreditCardSelected:function(a){this._toggledCreditCard=a,b("P2PActions").checkoutCreditCardFormToggled(!1)},handleNewCreditCardSelected:function(){b("P2PActions").addCreditCardErrorCleared(),b("P2PActions").checkoutCreditCardFormToggled(!0)},saveCreditCard:function(){this.props.onSaveCreditCard()},handlePaymentMethodSelected:function(a){b("P2PActions").checkoutPaymentMethodSelected(a)},handlePaymentMethodConfigured:function(a){b("P2PActions").checkoutPaymentMethodConfigured(a)},handleAddressFormValidation:function(a,c){b("P2PActions").checkoutAddressFormValidated(a,c)},handleAddressChangeClicked:function(){b("P2PActions").checkoutAddressEditOptionsToggled(!0)},handleAddressSelected:function(a){this._toggledAddress=a,b("P2PActions").checkoutAddressFormToggled(!1)},handleNewAddressSelected:function(){b("P2PActions").addAddressErrorCleared(),b("P2PActions").checkoutAddressFormToggled(!0)},saveAddress:function(){this.props.onSaveAddress()},handleEditCancelClicked:function(){(!this.props.addresses.count()||this.props.showPaymentMethodForm)&&this.props.onClose(),this.cleanup()},cleanup:function(){b("P2PActions").addCreditCardErrorCleared(),b("P2PActions").addAddressErrorCleared(),b("P2PActions").checkoutEditCompleted()},handleContinueClicked:function(){var a=this._toggledAddress;this.props.showCreditCardForm?this.saveCreditCard():this.props.showAddressForm?this.saveAddress():this.props.showCreditCardEditOptions?this._toggledCreditCard?(b("P2PActions").checkoutCreditCardSelected(this._toggledCreditCard.getCredentialId()),this._toggledCreditCard=null):this.handleEditCancelClicked():this.props.editingPaymentMethod?this.isConfiguredPaymentMethodSelected()&&this.props.onConfirmSelectedPaymentMethod():this.props.showAddressEditOptions&&(a?(b("P2PActions").checkoutAddressSelected(a.id),this.props.platformContext&&this.props.onSetAddress(a.id),this._toggledAddress=null):this.handleEditCancelClicked())},handleCompleteManualPaymentClicked:function(){this.props.onCompleteManualPayment()},handlePlaceOrderClicked:function(){this.props.onPlaceOrder()},render:function(){var a,c=b("MessengerEnvironment").messengerui,d=c?720:680;c||(a=b("React").createElement(b("P2PDialogTitle.react"),null,i._("Checkout")));return b("React").createElement(b("P2PDialog.react"),{className:"_ugr",hideOnEscape:!0,layerHideOnBlur:c,onToggle:this.handleToggle,repositionOnUpdate:!0,shown:!0,width:d},a,b("React").createElement(b("P2PDialogBody.react"),{className:"_4oz6"+(this.props.initialDataLoaded?" _3t72":"")},b("React").createElement("div",{className:"_4oz7"},b("React").createElement("div",{className:"_4oz8"},this.renderItemSection()),this.renderRightPanel()),b("React").createElement(b("P2PLoadingMask.react"),{visible:!this.props.initialDataLoaded||this.props.saving})))}});e.exports=c}),null);
__d("P2PPaymentMethodStore",["CreditCardFormParam","EventEmitter","FBPaymentsMethodType","P2PActionConstants","P2PCreditCard","P2PDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$P2PPaymentMethodStore1=b("P2PDispatcher").register(this.onEventDispatched.bind(this)),this.$P2PPaymentMethodStore2=new Map(),this.$P2PPaymentMethodStore3=new Map(),this.$P2PPaymentMethodStore4=new Map()}a.prototype.onEventDispatched=function(a){var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").PAYMENT_METHODS_UPDATED:this.handlePaymentMethodsUpdated(c);this.emit("change");break;case b("P2PActionConstants").PAYMENT_METHODS_UPDATED_ERROR:this.handlePaymentMethodsUpdatedError(c),this.emit("change")}};a.prototype.handlePaymentMethodsUpdated=function(a){__p&&__p();var c=a.id;a=a.paymentMethodsData;var d=a.available_payment_methods_details;a=a.existing_payment_methods;a&&(a=a.map(function(a){var c=a.data;c[b("CreditCardFormParam").CARD_NUMBER]=a.data.ccNumber;c[b("CreditCardFormParam").CREDENTIAL_ID]=a.id;return{creditCard:new(b("P2PCreditCard"))(c),type:b("FBPaymentsMethodType").GENERIC_CARD}}),d=a.concat(d));this.$P2PPaymentMethodStore3["delete"](c);this.$P2PPaymentMethodStore2.set(c,d);this.$P2PPaymentMethodStore4.set(c,a[0])};a.prototype.handlePaymentMethodsUpdatedError=function(a){this.$P2PPaymentMethodStore3.set(a.id,a.error)};a.prototype.getPreviousPaymentMethod=function(a){return a&&this.$P2PPaymentMethodStore4.has(a)?this.$P2PPaymentMethodStore4.get(a):null};a.prototype.getDispatchToken=function(){return this.$P2PPaymentMethodStore1};a.prototype.failedPaymentMethodsFetch=function(a){return this.$P2PPaymentMethodStore3.has(a)};a.prototype.getPaymentMethodsFetchError=function(a){return this.$P2PPaymentMethodStore3.get(a)};e.exports=new a()}),null);
__d("P2PCheckoutStore",["CreditCardFormParam","EventEmitter","MessengerPaymentProductType","P2PActionConstants","P2PAddressStore","P2PAPI","P2PCreditCardStore","P2PDispatcher","P2PPaymentMethodStore","P2PPlatformContextStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=null,i=null,j=!1,k=!1,l=!1,m=!1,n=!1,o=!1,p=!1,q=null,r=!1,s=null,t=!1,u=null,v=null,w=!1,x=null,y=null,z=null,A=null,B=null,C=!1,D=null;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$P2PCheckoutStore1=b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.getDispatchToken=function(){return this.$P2PCheckoutStore1};a.prototype.onEventDispatched=function(a){__p&&__p();var c=a.data;a=a.type;b("P2PDispatcher").waitFor([b("P2PAddressStore").getDispatchToken(),b("P2PCreditCardStore").getDispatchToken(),b("P2PPlatformContextStore").getDispatchToken()]);switch(a){case b("P2PActionConstants").CREDIT_CARD_UPDATED:case b("P2PActionConstants").CREDIT_CARD_VERIFIED:this.handleCreditCardUpdated(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_CART_INITIATED:this.handleCheckoutCartInitiated();this.emit("change");break;case b("P2PActionConstants").CHECKOUT_CART_CREATED:this.handleCheckoutCartCreated(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_ADDRESS_SELECTED:this.handleAddressSelected(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_SHIPPING_OPTION_SELECTED:this.handleShippingOptionSelected(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_CREDIT_CARD_SELECTED:this.handleCreditCardSelected(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_ADDRESS_FORM_TOGGLED:this.handleAddressFormToggled(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_CREDIT_CARD_FORM_TOGGLED:this.handleCreditCardFormToggled(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED:this.handleAddressEditOptionsToggled(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED:this.handleCreditCardEditOptionsToggled(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_EDIT_OPTIONS_TOGGLED:this.handlePaymentMethodEditOptionsToggled(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_CONFIGURED:this.handlePaymentMethodConfigured(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_CONFIRMED:this.handlePaymentMethodConfirmed(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_SELECTED:this.handlePaymentMethodSelected(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_ADDRESS_FORM_VALIDATED:this.handleAddressFormValidated(c.isValid,c.formData);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_CREDIT_CARD_FORM_VALIDATED:this.handleCreditCardFormValidated(c.isValid,c.formData);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_EDIT_COMPLETED:this.handleCheckoutEditCompleted();this.emit("change");break;case b("P2PActionConstants").CHECKOUT_PROCESSING:this.handleCheckoutProcessing(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_BUYER_PROFILE_UPDATED:this.handleCheckoutBuyerProfileUpdated(c);this.emit("change");break;case b("P2PActionConstants").CHECKOUT_MANUAL_PAYMENT_RECEIPT_UPDATED:this.handleManualPaymentReceiptUpdated(c);this.emit("change");break}};a.prototype.handleCreditCardUpdated=function(a){var c=this.getSelectedCreditCard();c&&c.getCredentialId()===a[b("CreditCardFormParam").CREDENTIAL_ID]&&(i=b("P2PCreditCardStore").getCreditCardByCredentialID(c.getCredentialId()))};a.prototype.handleCheckoutCartInitiated=function(){u=null,B=null,z=null,h=null,v=null,D=null,C=!1};a.prototype.handleCheckoutCartCreated=function(a){u=a.sellerID,B=a.invoiceID,C=!!a.acceptInternationalAddresses};a.prototype.handleCheckoutProcessing=function(a){t=a};a.prototype.handleAddressSelected=function(a){var c=b("P2PAddressStore").getAll(!C);c=c.find(function(b){return b.id===a});h=c;v=null;this.handleCheckoutEditCompleted()};a.prototype.handleShippingOptionSelected=function(a){var b=this.getPlatformContext();b=b&&b.shipping&&b.shipping.shippingOptions;var c;b&&(c=b.filter(function(b){return b.id===a})[0]);v=c};a.prototype.handleCreditCardSelected=function(a){var c=b("P2PCreditCardStore").getAll(b("MessengerPaymentProductType").MESSENGER_COMMERCE);c=c.filter(function(b){return b.getCredentialId()===a})[0];i=c;this.handleCheckoutEditCompleted()};a.prototype.handleAddressFormToggled=function(a){j=a,this.handleAddressFormValidated(!1,null)};a.prototype.handleCreditCardFormToggled=function(a){k=a,this.handleCreditCardFormValidated(!1,null)};a.prototype.handlePaymentMethodFormToggled=function(a){l=a};a.prototype.handleAddressEditOptionsToggled=function(a){m=a};a.prototype.handleAddressFormValidated=function(a,b){p=a,q=b};a.prototype.handleCreditCardFormValidated=function(a,b){r=a,s=b};a.prototype.handleCheckoutEditCompleted=function(){this.handleAddressFormValidated(!1,null),this.handleAddressEditOptionsToggled(!1),this.handleAddressFormToggled(!1),this.handleCreditCardFormValidated(!1,null),this.handleCreditCardEditOptionsToggled(!1),this.handleCreditCardFormToggled(!1),this.handlePaymentMethodSelected(null),this.handlePaymentMethodConfigured(null),this.handlePaymentMethodFormToggled(!1),this.handlePaymentMethodEditOptionsToggled(!1)};a.prototype.handleCreditCardEditOptionsToggled=function(a){n=a};a.prototype.handlePaymentMethodEditOptionsToggled=function(a){o=a};a.prototype.handleCheckoutBuyerProfileUpdated=function(a){x=a,w=!0};a.prototype.handleManualPaymentReceiptUpdated=function(a){D=a.receiptFbid};a.prototype.handlePaymentMethodConfigured=function(a){y=a};a.prototype.handlePaymentMethodConfirmed=function(a){z=a,this.handleCheckoutEditCompleted()};a.prototype.handlePaymentMethodSelected=function(a){A=a};a.prototype.isAddressFormShown=function(){return!b("P2PAddressStore").getAll(!C).count()||j};a.prototype.isCreditCardFormShown=function(){var a=b("P2PCreditCardStore").getAll(b("MessengerPaymentProductType").MESSENGER_COMMERCE);return!this.isAddressFormShown()&&(!a.length||k)};a.prototype.isPaymentMethodFormShown=function(){var a=!this.isAddressFormShown()&&(!this.getConfirmedPaymentMethod()||l);return a};a.prototype.isAddressEditOptionsShown=function(){return m};a.prototype.isCreditCardEditOptionsShown=function(){return n};a.prototype.isPaymentMethodEditOptionsShown=function(){return o};a.prototype.isEditingPaymentMethod=function(){return this.isPaymentMethodFormShown()||this.isPaymentMethodEditOptionsShown()};a.prototype.getConfirmedPaymentMethod=function(){return z||b("P2PPaymentMethodStore").getPreviousPaymentMethod(this.getInvoiceID())};a.prototype.getConfiguredPaymentMethod=function(){return y};a.prototype.getSelectedPaymentMethod=function(){return A};a.prototype.getAttachedReceiptFbid=function(){return D};a.prototype.getSelectedAddress=function(){__p&&__p();var a=this.getPlatformContext(),c=b("P2PAddressStore").getAll(!C),d;if(h)return h;if(a&&a.shipping&&a.shipping.selectedShippingAddressID){d=c.find(function(b){return a&&b.id===a.shipping.selectedShippingAddressID});if(d)return d}return c.first()};a.prototype.getSelectedShippingOption=function(){__p&&__p();var a=this.getPlatformContext();a=a&&a.shipping;var b=a&&a.selectedShippingOptionID;a=a&&a.shippingOptions;var c;if(v)return v;if(a&&a.length){c=a.filter(function(a){return a.id===b})[0];if(c)return c}return a&&a[0]};a.prototype.getSelectedCreditCard=function(){var a=b("P2PCreditCardStore").getAll(b("MessengerPaymentProductType").MESSENGER_COMMERCE);return i||a[0]};a.prototype.isAddressFormValid=function(){return p};a.prototype.getAddressFormData=function(){return q};a.prototype.isCreditCardFormValid=function(){return r};a.prototype.getCreditCardFormData=function(){return s};a.prototype.isProcessing=function(){return t};a.prototype.isBuyerProfileFetchComplete=function(){return w};a.prototype.getPlatformContext=function(){if(u)return b("P2PPlatformContextStore").getPlatformContextByOtherUserID(u)};a.prototype.getInvoiceID=function(){return B};a.prototype.getPlaceOrderFormData=function(){var a=this.getPlatformContext(),c=this.getSelectedShippingOption(),d=this.getSelectedAddress(),e=this.getSelectedCreditCard(),f=b("CreditCardFormParam").CREDENTIAL_ID,g={};g[f]=e&&e.getCredentialId();g=babelHelpers["extends"]({},g,{amount:c&&c.rawTotal,platform_context_id:a&&a.id,receiverId:a&&a.sellerID,shippingAddressID:d&&d.id,shippingOptionID:c&&c.id});return g};a.prototype.getBuyerProfileData=function(){if(x)return x;x={};b("P2PAPI").getCurrentUserProfileData()};e.exports=new a()}),null);
__d("P2PCheckoutDialogContainer.react",["fbt","invariant","Arbiter","FBPaymentsCreditCardVerificationDialog_DEPRECATED.react","FBPaymentsMethodType","Link.react","P2PActions","P2PAddressStore","P2PAPI","P2PAPIUtils","P2PCheckoutDialog.react","P2PCheckoutStore","P2PCreditCardStore","P2PDispatcher","P2PEditCreditCardDialog.react","P2PErrorDialog.react","P2PLogger","P2PPasswordProtectionNUXDialog.react","P2PPasswordProtectionStatusTypes","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PPlatformContextShape","P2PSuccessDialog.react","P2PText.react","P2PVerifyCreditCardDialog.react","React","ReactLayeredComponentMixin_DEPRECATED","StoreAndPropBasedStateMixin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i="fbpay_login_and_pay",j="about:blank";c=b("React").createClass({displayName:"P2PCheckoutDialogContainer",mixins:[b("ReactLayeredComponentMixin_DEPRECATED"),b("StoreAndPropBasedStateMixin")(b("P2PAddressStore"),b("P2PCheckoutStore"),b("P2PCreditCardStore"))],propTypes:{acceptInternationalAddresses:a.bool,asyncPaymentDetails:a.object,onCheckoutSuccess:a.func,onClose:a.func.isRequired,onSeeReceiptClick:a.func,configSelections:a.string,customCheckoutDetails:a.node,paymentMethods:a.array,paymentMethodsFetchError:a.object,paymentProductType:a.string,platformContext:b("P2PPlatformContextShape"),platformContextSaveError:a.object,productItemID:a.string,showAsyncPaymentDetails:a.bool,showTaxField:a.bool,usePaymentMethods:a.bool},getInitialState:function(){return{creditCardVerificationDialogShown:!1,editCreditCardDialogShown:!1,openedWindow:null,passwordProtectionNUXShown:!1,successDialogShown:!1,transferError:null,verifyCreditCardDialogShown:!1}},statics:{calculateState:function(a){return{addresses:b("P2PAddressStore").getAll(!a.acceptInternationalAddresses),addressFormData:b("P2PCheckoutStore").getAddressFormData(),addressFormValid:b("P2PCheckoutStore").isAddressFormValid(),addressSaveErrors:b("P2PAddressStore").getSaveErrors(),buyer:b("P2PCheckoutStore").getBuyerProfileData(),configuredPaymentMethod:b("P2PCheckoutStore").getConfiguredPaymentMethod(),confirmedPaymentMethod:b("P2PCheckoutStore").getConfirmedPaymentMethod(),creditCardAsyncRequestState:b("P2PCreditCardStore").getAsyncRequestState(),creditCardFormData:b("P2PCheckoutStore").getCreditCardFormData(),creditCardFormValid:b("P2PCheckoutStore").isCreditCardFormValid(),creditCards:b("P2PCreditCardStore").getAll(a.paymentProductType),creditCardSaveErrors:b("P2PCreditCardStore").getSaveErrors(),editingPaymentMethod:b("P2PCheckoutStore").isEditingPaymentMethod()&&a.usePaymentMethods,initialDataLoaded:a.platformContext&&(!!a.asyncPaymentDetails||b("P2PAddressStore").isAddressesFetchComplete()&&b("P2PCreditCardStore").isCreditCardsFetchComplete()&&b("P2PCheckoutStore").isBuyerProfileFetchComplete()&&(!a.usePaymentMethods||!!a.paymentMethods)),orderID:b("P2PCheckoutStore").getInvoiceID(),receiptAttached:!!b("P2PCheckoutStore").getAttachedReceiptFbid(),saving:b("P2PCheckoutStore").isProcessing()||b("P2PCreditCardStore").isSaving()||b("P2PAddressStore").isSaving(),selectedAddress:b("P2PCheckoutStore").getSelectedAddress(),selectedCreditCard:b("P2PCheckoutStore").getSelectedCreditCard(),selectedPaymentMethod:b("P2PCheckoutStore").getSelectedPaymentMethod(),selectedShippingOption:b("P2PCheckoutStore").getSelectedShippingOption(),shippingOptions:a.platformContext&&a.platformContext.shipping?a.platformContext.shipping.shippingOptions:null,showAddressForm:b("P2PCheckoutStore").isAddressFormShown(),showCreditCardForm:b("P2PCheckoutStore").isCreditCardFormShown()&&!a.usePaymentMethods,showAddressEditOptions:b("P2PCheckoutStore").isAddressEditOptionsShown(),showCreditCardEditOptions:b("P2PCheckoutStore").isCreditCardEditOptionsShown()&&!a.usePaymentMethods,showPaymentMethodEditOptions:b("P2PCheckoutStore").isPaymentMethodEditOptionsShown()&&a.usePaymentMethods,showPaymentMethodForm:b("P2PCheckoutStore").isPaymentMethodFormShown()&&a.usePaymentMethods}}},_paymentMethodAddCardRequestId:"",UNSAFE_componentWillMount:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_CHECKOUT),b("P2PDispatcher").explicitlyRegisterStores([b("P2PCheckoutStore")])},componentWillUnmount:function(){this._passwordCancelSubscribeToken!==null&&(b("Arbiter").unsubscribe(this._passwordCancelSubscribeToken),this._passwordCancelSubscribeToken=null)},componentDidUpdate:function(a,b){this._trackEvents(a,b)},log:function(a,c){var d=this.props.platformContext,e={};d&&(e=d.product.rawAmount);b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:b("P2PPaymentLoggerEventFlow").UI_FLOW_CHECKOUT,raw_amount:e.amount,currency:e.currency,object_id:this.props.productItemID},c))},_placeOrderPending:!1,_passwordCancelSubscribeToken:null,_passwordProtectionNUXPending:!1,handleCancel:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_CANCEL),this.props.onClose()},handleSuccess:function(a){a===void 0&&(a=!0),this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_SUCCESS),a&&this.props.onClose()},handleSaveAddress:function(){this.saveAddress()},closeOpenedWindow:function(){this.state.openedWindow&&this.state.openedWindow.close()},saveAddress:function(){b("P2PAPI").addAddress(babelHelpers["extends"]({},this.state.addressFormData,{platformContext:this.props.platformContext,onSuccess:this.handleSaveAddressSuccess,onError:this.handleSaveAddressError})),this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_ADDRESS_DETAILS)},handleSaveAddressSuccess:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_ADD_ADDRESS_SUCCESS)},handleSaveAddressError:function(a){a=a.errors,this.log(b("P2PPaymentLoggerEvent").UI_ACTN_ADD_ADDRESS_FAIL,{message:a&&a.general?a.general.message:""})},handleSaveCreditCard:function(){this.saveCreditCard()},saveCreditCard:function(){b("P2PAPI").addCreditCard(babelHelpers["extends"]({product_type:this.props.paymentProductType},this.state.creditCardFormData,{hasPlatformContext:!!this.props.platformContext,onSuccess:this.handleSaveCreditCardSuccess,onError:this.handleSaveCreditCardError})),this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_CARD_DETAILS)},handleSaveCreditCardSuccess:function(){this._placeOrderPending&&(this._placeOrderPending=!1,this.placeOrder()),this.log(b("P2PPaymentLoggerEvent").UI_ACTN_ADD_CARD_SUCCESS)},handleSaveCreditCardError:function(a){a=a.errors,this.log(b("P2PPaymentLoggerEvent").UI_ACTN_ADD_CARD_FAIL,{message:a&&a.general?a.general.message:""})},handleConfirmPaymentMethod:function(){var a=this.state.configuredPaymentMethod;switch(a.type){case b("FBPaymentsMethodType").NEW_CREDIT_CARD:var c=b("P2PAPIUtils").genRequestID();this._paymentMethodAddCardRequestId=c;b("P2PAPI").addCreditCard(babelHelpers["extends"]({product_type:this.props.paymentProductType,requestID:c},a.formData,{hasPlatformContext:!!this.props.platformContext,onSuccess:this.handleConfirmPaymentMethodSuccess}));break;case b("FBPaymentsMethodType").GENERIC_CARD:case b("FBPaymentsMethodType").PAY_OVER_COUNTER:case b("FBPaymentsMethodType").MANUAL_TRANSFER:case b("FBPaymentsMethodType").NET_BANKING:this.handleConfirmPaymentMethodSuccess();break}},handleConfirmPaymentMethodSuccess:function(){var a=this.state.configuredPaymentMethod;switch(a.type){case b("FBPaymentsMethodType").NEW_CREDIT_CARD:this.handleConfirmPaymentMethodAddCardSuccess();break;default:b("P2PActions").checkoutPaymentMethodConfirmed(a)}},handleConfirmPaymentMethodAddCardSuccess:function(){var a=b("P2PCreditCardStore").getAsyncRequestState();a=a[this._paymentMethodAddCardRequestId];if(!a)return;a=b("P2PCreditCardStore").getCreditCardByCredentialID(a.credential_id);a={creditCard:a,type:b("FBPaymentsMethodType").GENERIC_CARD};this._paymentMethodAddCardRequestId="";b("P2PActions").checkoutPaymentMethodConfirmed(a)},handlePlaceOrder:function(){if(this.props.usePaymentMethods){this.completePaymentMethodCheckout();return}this.state.showCreditCardForm?(this._placeOrderPending=!0,this.saveCreditCard()):this.placeOrderWithExistingCard()},handleCompleteManualPayment:function(){var a=this.state.orderID,c=this.props.asyncPaymentDetails&&this.props.asyncPaymentDetails.id;a&&c||h(0);b("P2PAPI").completeReceiptUploadCheckout({onSuccess:function(){this.setState({successDialogShown:!0})}.bind(this),onError:function(a){this.setState({transferError:a})}.bind(this),receiptImageID:b("P2PCheckoutStore").getAttachedReceiptFbid(),invoiceID:a,selectedPaymentOptionID:c})},placeOrderWithExistingCard:function(){__p&&__p();var a=b("P2PCheckoutStore").getSelectedCreditCard();a||h(0);if(!a.getIsVerified()){this.setState({verifyCreditCardDialogShown:!0});return}else if(a.isExpired()){this.setState({editCreditCardDialogShown:!0});return}this.placeOrder()},placeOrder:function(){b("P2PActions").checkoutProcessing(!0),this.setState({transferError:null}),this._passwordCancelSubscribeToken=b("Arbiter").subscribeOnce("PasswordReauthDialogCancelClick",function(){this._passwordCancelSubscribeToken=null,b("P2PActions").checkoutProcessing(!1)}.bind(this)),b("P2PAPI").createTransaction({error:this.handlePlaceOrderError,formData:b("P2PCheckoutStore").getPlaceOrderFormData(),success:this.handlePlaceOrderSuccess}),this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_CONFIRM)},handlePlaceOrderError:function(a){b("P2PActions").checkoutProcessing(!1),this.setState({transferError:a})},handlePlaceOrderSuccess:function(a){b("P2PActions").checkoutProcessing(!1);a=a.passwordProtection===b("P2PPasswordProtectionStatusTypes").NOT_SET;a?this.setState({passwordProtectionNUXShown:!0}):this.handleSuccess()},completePaymentMethodCheckout:function(){var a=this.state.confirmedPaymentMethod;switch(a.type){case b("FBPaymentsMethodType").NET_BANKING:case b("FBPaymentsMethodType").PAY_OVER_COUNTER:var c=window.open(j,i);this.setState({openedWindow:c});break;case b("FBPaymentsMethodType").GENERIC_CARD:a.creditCard.getCSC()?this.completeNMORCheckout({securityCode:a.creditCard.getCSC()}):this.setState({creditCardVerificationDialogShown:!0});return}this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_CONFIRM);this.completeNMORCheckout()},completeNMORCheckout:function(a){__p&&__p();var c=this.props.platformContext;c||h(0);var d=this.state.confirmedPaymentMethod;d||h(0);var e=d.type,f=null,g=null;switch(e){case b("FBPaymentsMethodType").GENERIC_CARD:e="cc";g=d.creditCard.getCredentialId();a&&a.securityCode||h(0);break;case b("FBPaymentsMethodType").NET_BANKING:f={bank_code:d.bank.code};break;case b("FBPaymentsMethodType").MANUAL_TRANSFER:f={receipt_image_id:d.receiptFbid,transfer_option_id:d.optionId};break}d=babelHelpers["extends"]({amount:this.state.selectedShippingOption.rawTotal,currency:c.product.rawAmount.currency,nmorOrderType:this.props.paymentProductType,receiverID:c.sellerID,orderID:this.state.orderID,paymentMethodType:e,paymentMethodData:f,credentialId:g,shippingAddressID:this.state.selectedAddress.id,shippingOptionID:this.state.selectedShippingOption.id,error:this.handleCompletePaymentMethodCheckoutError,success:this.handleCompletePaymentMethodCheckoutSuccess},a);b("P2PActions").checkoutProcessing(!0);b("P2PAPI").completeNMORCheckout(d)},handleCreditCardVerificationCancel:function(){this.setState({creditCardVerificationDialogShown:!1})},handleVerifyCreditCardAndCompleteCheckout:function(a){this.completeNMORCheckout({securityCode:a})},handleCompletePaymentMethodCheckoutError:function(a){b("P2PActions").checkoutProcessing(!1),this.setState({transferError:a}),this.closeOpenedWindow()},handleCompletePaymentMethodCheckoutSuccess:function(a,c){__p&&__p();b("P2PActions").checkoutProcessing(!1);this.setState({creditCardVerificationDialogShown:!1});var d=this.props.onCheckoutSuccess;d&&d(a,c);d=this.state.confirmedPaymentMethod;switch(d.type){case b("FBPaymentsMethodType").NET_BANKING:c&&c.net_banking_info||h(0);a=c.net_banking_info.redirect_url;window.open(a,i);this.handleSuccess();break;case b("FBPaymentsMethodType").PAY_OVER_COUNTER:c&&c.pay_over_counter_info||h(0);d=c.pay_over_counter_info.instructions_url;window.open(d,i);this.handleSuccess();break;case b("FBPaymentsMethodType").MANUAL_TRANSFER:this.handleSuccess(!1);break;default:this.handleSuccess(!1),this.setState({successDialogShown:!0})}},handleSetAddress:function(a){var c=this.props.platformContext;c||h(0);b("P2PAPI").setPlatformContextShippingAddress({platformContextID:c.id,shippingAddressID:a})},renderLayers:function(){var a={};this.props.platformContextSaveError?a.error=b("React").createElement(b("P2PErrorDialog.react"),{title:g._("Problem with purchase"),onOKClick:this.handleCancel,error:this.props.platformContextSaveError}):this.props.paymentMethodsFetchError?a.error=b("React").createElement(b("P2PErrorDialog.react"),{title:g._("Sorry, Something Went Wrong"),onOKClick:this.handleCancel,error:g._("We can't load the available payment methods at this time. Please try again later.")}):this.state.transferError?a.error=b("React").createElement(b("P2PErrorDialog.react"),{title:g._("Problem with purchase"),onOKClick:this.handleCancel,error:this.state.transferError}):this.state.verifyCreditCardDialogShown?a.verificationDialog=b("React").createElement(b("P2PVerifyCreditCardDialog.react"),{creditCard:this.state.selectedCreditCard,asyncRequestState:this.state.creditCardAsyncRequestState,isSending:!0,onCancel:function(){this.setState({verifyCreditCardDialogShown:!1}),b("P2PActions").checkoutProcessing(!1)}.bind(this),onSuccess:function(){this.setState({verifyCreditCardDialogShown:!1}),this.placeOrderWithExistingCard()}.bind(this)}):this.state.editCreditCardDialogShown&&(a.editCreditCardDialog=b("React").createElement(b("P2PEditCreditCardDialog.react"),{asyncRequestState:this.state.creditCardAsyncRequestState,creditCard:this.state.selectedCreditCard,onCancel:function(){this.setState({editCreditCardDialogShown:!1}),b("P2PActions").checkoutProcessing(!1)}.bind(this),onSuccess:function(){this.setState({editCreditCardDialogShown:!1}),this.placeOrderWithExistingCard()}.bind(this)}));return a},render:function(){__p&&__p();if(this.state.passwordProtectionNUXShown)return b("React").createElement(b("P2PPasswordProtectionNUXDialog.react"),{onComplete:this.handleSuccess});else if(this.state.creditCardVerificationDialogShown){var a=this.state.confirmedPaymentMethod.creditCard,c=b("React").createElement(b("P2PText.react"),{size:"small",type:"secondary"},b("React").createElement(b("Link.react"),{onClick:this.handleCreditCardVerificationCancel,size:"small"},g._("Use Different Payment Method"))),d=g._("Pay");return b("React").createElement(b("FBPaymentsCreditCardVerificationDialog_DEPRECATED.react"),{creditCard:a,leftContent:c,loading:this.state.saving,onConfirm:this.handleVerifyCreditCardAndCompleteCheckout,primaryButtonText:d,showCancelButton:!1})}else if(this.state.successDialogShown){a=g._("Your purchase is complete. You'll receive a confirmation email soon.");this.props.asyncPaymentDetails&&(a=g._("Your proof of payment has been sent. The seller will verify your payment soon."));return b("React").createElement(b("P2PSuccessDialog.react"),{buttonLabel:g._("See Receipt"),buttonUse:"confirm",onOKClick:this.props.onSeeReceiptClick||this.handleSuccess,onToggle:function(){this.handleSuccess()}.bind(this),showCloseButton:!0,title:g._("Confirmation")},b("React").createElement(b("P2PText.react"),{type:"secondary",style:{textAlign:"center"}},a))}return b("React").createElement(b("P2PCheckoutDialog.react"),babelHelpers["extends"]({},this.props,this.state,{onClose:this.handleCancel,onCompleteManualPayment:this.handleCompleteManualPayment,onConfirmSelectedPaymentMethod:this.handleConfirmPaymentMethod,onPlaceOrder:this.handlePlaceOrder,onSaveAddress:this.handleSaveAddress,onSaveCreditCard:this.handleSaveCreditCard,onSetAddress:this.handleSetAddress}))},_trackEvents:function(a,c){__p&&__p();!a.platformContextSaveError&&this.props.platformContextSaveError&&this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_CART_CREATION_FAIL);if(!this.state.initialDataLoaded)return;!c.initialDataLoaded&&this.state.initialDataLoaded&&this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_CART_CREATION_SUCCESS);!c.showCreditCardForm&&this.state.showCreditCardForm&&this.log(b("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_ADD_CARD);c.showCreditCardForm&&!this.state.showCreditCardForm&&this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_ADD_CARD);!c.showCreditCardEditOptions&&this.state.showCreditCardEditOptions&&this.log(b("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_CHOOSE_CARD);!c.showAddressForm&&this.state.showAddressForm&&this.log(b("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_ADD_ADDRESS);c.showAddressForm&&!this.state.showAddressForm&&this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_ADD_ADDRESS);!c.showAddressEditOptions&&this.state.showAddressEditOptions&&this.log(b("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_CHOOSE_ADDRESS);!c.verifyCreditCardDialogShown&&this.state.verifyCreditCardDialogShown&&this.log(b("P2PPaymentLoggerEvent").UI_ACTN_VERIFY_CSC);!c.editCreditCardDialogShown&&this.state.editCreditCardDialogShown&&this.log(b("P2PPaymentLoggerEvent").UI_ACTN_EDIT_CARD);!c.transferError&&this.state.transferError&&this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_FAIL)}});e.exports=c}),null);
__d("P2PMCCartCreationDialogContainer.react",["MessengerPaymentProductType","P2PActions","P2PAPI","P2PCheckoutDialogContainer.react","P2PCheckoutStore","P2PPlatformContextStore","React","StoreAndPropBasedStateMixin"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"P2PMCCartCreationDialogContainer",mixins:[b("StoreAndPropBasedStateMixin")(b("P2PCheckoutStore"),b("P2PPlatformContextStore"))],propTypes:{configSelections:a.string,productItemID:a.string.isRequired,sellerID:a.string.isRequired},statics:{calculateState:function(a){return{platformContext:b("P2PCheckoutStore").getPlatformContext(),platformContextSaveError:b("P2PPlatformContextStore").getSaveError(a.productItemID)}}},UNSAFE_componentWillMount:function(){b("P2PAPI").createMCCart({productItemID:this.props.productItemID,sellerID:this.props.sellerID})},handleClose:function(){b("P2PActions").clearPlatformContextSaveErrors(this.props.productItemID),b("P2PActions").hideDialog()},render:function(){return b("React").createElement(b("P2PCheckoutDialogContainer.react"),{onClose:this.handleClose,configSelections:this.props.configSelections,paymentProductType:b("MessengerPaymentProductType").MESSENGER_COMMERCE,platformContext:this.state.platformContext,platformContextSaveError:this.state.platformContextSaveError,productItemID:this.props.productItemID})}});e.exports=c}),null);
__d("MNCommercePromotionMercuryShareAttachment.react",["Banzai","MercuryFallbackShareAttachment.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MessengerAdsWebTypedLogger","MessengerPlatformGenericItemMercuryAttachment.react","MNAdsLoggerEventEnum","MNCommerceCheckoutOrderConfigDialogContainer.react","MNCommerceDialogStateActions","MNCommerceMessageType","MNContentSubscriptionMessageUserEngagementTypedLogger","MNPlatformMessageUserEngagementTypedLogger","P2PActions","P2PMCCartCreationDialogContainer.react","React","StoryAttachmentStyle","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;function h(a){if(a!==undefined){a=a.match(/\d+/);if(a!==undefined&&a!==null)return a[0]}return null}function i(a,event){__p&&__p();var c=h(a.props.pageID),d=a.getRetailItem(a.props.attachment.target);d=d&&d.id;if(a.props.mnMessageType==b("MNCommerceMessageType").CONTENT_SUBSCRIPTION){new(b("MNContentSubscriptionMessageUserEngagementTypedLogger"))().setPageID(c).setMessageID(a.props.messageID).setCommerceItemID(d).setName(event).log();switch(event){case"mn_platform_msg_imp":b("Banzai").post("mn_platform_message_imp_setsuna",{page_id:c,item_id:d});break;case"mn_platform_msg_click":b("Banzai").post("mn_platform_message_click_setsuna",{page_id:c,item_id:d});break;default:break}}new(b("MNPlatformMessageUserEngagementTypedLogger"))().setPageID(c).setMessageID(a.props.messageID).setCommerceItemID(d).setName(event).log()}d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$4=function(){__p&&__p();var a=this.props.attachment&&this.props.attachment.target;if(!a)return;a=this.getRetailItem(a);a=a&&a.id;this.props.isSponsored&&new(b("MessengerAdsWebTypedLogger"))().setEvent(b("MNAdsLoggerEventEnum").LINK_CLICK_CTA).setIsSponsored(this.props.isSponsored).setItemID(a).setMessageID(this.props.messageID).setPageID(this.props.pageID).log();i(this,"mn_platform_msg_click");var c=this.props.pageID,d=function(a,c,d){return b("P2PActions").showDialog(b("P2PMCCartCreationDialogContainer.react"),{productItemID:a,sellerID:c,configSelections:d})};b("MNCommerceDialogStateActions").showDialog(b("MNCommerceCheckoutOrderConfigDialogContainer.react"),{onContinue:d,itemID:a,ownerID:c})}.bind(this),c}a.prototype.componentDidMount=function(){i(this,"mn_platform_msg_imp")};a.prototype.render=function(){var a=this.props.attachment&&this.props.attachment.target;if(!a)return b("React").createElement(b("MercuryFallbackShareAttachment.react"),this.props);var c=this.props.attachment&&this.props.attachment.uri,d=this.props.attachment&&this.props.attachment.label,e=this.$1(),f=this.getRetailItem(a),g;f&&f.call_to_actions&&f.call_to_actions.length>0?g=f.call_to_actions:g=a.call_to_actions;return b("React").createElement(b("MessengerPlatformGenericItemMercuryAttachment.react"),{callToActions:this.$2(g),isMediaAttachment:this.$3(),isSponsored:this.props.isSponsored,isSubattachment:this.props.isSubattachment,itemID:f&&f.id,label:d,location:this.props.location,longestCTAs:this.props.longestCTAs,longestMetaline:this.props.longestMetaline,longestName:this.props.longestName,messageID:this.props.messageID,mnMessageType:this.props.mnMessageType,pageID:this.props.pageID,threadID:this.props.threadID,retailItem:f,url:c,width:this.props.maxWidth,isButtonList:e})};a.prototype.$2=function(a){a=a||[];a=a.map(function(a){var c=a.action_link&&(a.action_link.startsWith("fb-messenger://payments/buy/mc?")||a.action_link.startsWith("fb-messenger://business/commerce/"));if(c)return b("gkx")("AT4VcZ2n8GFrD7MjVVAjcX0NmvwopB7f803i8mNRrJiQunF1FwYQ1kl6EgxABUzgu-ERWV--QUw6PQC9d4CFCek0")?babelHelpers["extends"]({onClick:this.$4},a):null;else return a}.bind(this));return a.filter(function(a){return a})};a.prototype.$1=function(){var a=this.props.attachment;a=a&&a.style_list;return a&&a.length&&a[0]===b("StoryAttachmentStyle").MESSENGER_PLATFORM_BUTTON_LIST?!0:!1};a.prototype.$3=function(){var a=this.props.attachment;a=a&&a.style_list;return a&&a.length&&a[0]===b("StoryAttachmentStyle").MESSENGER_PLATFORM_MEDIA_ATTACHMENT?!0:!1};a.prototype.getRetailItem=function(a){var b=this.$1();if(b)return a;if(a&&a.items)if(a.items.length)return a.items[0];else return null;return a};a.propTypes={attachment:b("MercuryShareAttachmentReactShape"),isSponsored:c.bool,isSubattachment:c.bool,location:c.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),maxWidth:c.number,messageID:c.string,mnMessageType:c.string,pageID:c.string,threadID:c.string,longestCTAs:c.number,longestMetaline:c.string,longestName:c.string};e.exports=a}),null);