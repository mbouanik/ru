if (self.CavalryLogger) { CavalryLogger.start_js(["BkYx5"]); }

__d("P2PAcceptMoneyDialog.react",["cx","BootloadedComponent.react","Bootloader","JSResource","MessengerEnvironment","P2PDialog.react","P2PLoadingMask.react","React","Run"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i=b("MessengerEnvironment").messengerui;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(){return b("React").createElement(b("P2PDialog.react"),{className:"_309"+(i?" _5ktw":""),layerHideOnBlur:!1,repositionOnUpdate:!0,shown:!0,width:i?400:350},b("React").createElement("div",{className:"_3w2b"},b("React").createElement(b("P2PLoadingMask.react"),{visible:!0})))},c}a.preload=function(){b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["P2PAcceptMoneyDialogImpl.react"],function(){},"P2PAcceptMoneyDialog.react")})};a.prototype.render=function(){return b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({bootloadLoader:b("JSResource")("P2PAcceptMoneyDialogImpl.react").__setRef("P2PAcceptMoneyDialog.react"),bootloadPlaceholder:this.$1()},this.props))};a.propTypes={creditCards:c.array.isRequired,useRedesignForm:c.bool,onClose:c.func,transfer:c.object};e.exports=a}),null);
__d("P2PMercuryAttachmentBubble.react",["cx","fbt","BackgroundImage.react","Link.react","MessengerEnvironment","P2PBigAmount.react","P2PGKValues","React","URI","formatDate","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.renderBigAmount=function(){return b("React").createElement(b("P2PBigAmount.react"),{amount:this.props.amount,className:"_3oh-",currencyCode:this.props.currencyCode,isPending:this.props.isPending})};a.prototype.renderStatusFooter=function(){var a;b("MessengerEnvironment").messengerui?a=h._("Status"):a=h._("STATUS");return b("React").createElement("div",{className:"_5qco"},this.renderMemoFooter(),b("React").createElement("div",{className:"_5qcp"},b("React").createElement("div",{className:"_5qcq"},a),this.renderStatusWithDate()))};a.prototype.renderBannerFooter=function(){return!this.props.bannerContent?null:b("React").createElement("div",{className:"_5qco"},this.props.bannerContent)};a.prototype.renderStatusWithDate=function(){var a=this.props.date,c=this.props.statusText;if(a){a=b("formatDate")(a,"M jS, g:ia");return b("React").createElement("div",null,b("React").createElement("div",{className:"_5qcr"},c),b("React").createElement("div",{className:"_5qcs"},"\xb7"),b("React").createElement("div",{className:"_5qct"},a))}return b("React").createElement("div",null,c)};a.prototype.renderMemoFooter=function(){var a=this.props.memoText,c;if(!a)return null;b("MessengerEnvironment").messengerui?c=h._("For"):c=h._("FOR");return b("React").createElement("div",{className:"_5qcp _3-94"},b("React").createElement("div",{className:"_5qcq"},c),b("React").createElement("div",{className:"_5qd0"},a))};a.prototype.renderMemoPhoto=function(){var a=this.props.memoPhotoURLs&&this.props.memoPhotoURLs[0];if(!b("P2PGKValues").P2PWWWMemoPhotoEligible||!a)return null;var c=192,d=100;this.props.isMessagesView?(c=220,d=110):b("MessengerEnvironment").messengerui&&(c=350,d=120);return b("React").createElement(b("BackgroundImage.react"),{className:"_rou",width:c,height:d,backgroundSize:"cover",src:a})};a.prototype.renderStandaloneMemoSection=function(){var a=this.renderMemoFooter();return!a?null:b("React").createElement("div",{className:"_nvv"},a)};a.prototype.renderTopSection=function(){return!this.props.topContent?null:b("React").createElement("div",{className:"_5qd1"},this.props.topContent)};a.prototype.renderReceiverText=function(){if(!this.props.isGroupThread)return null;return this.props.isPaymentRequest?b("React").createElement("div",{className:"_nvw"},h._("From {Name of the person receiving money}",[h._param("Name of the person receiving money",this.props.receiverName)])):b("React").createElement("div",{className:"_nvw"},h._("Sent to {Name of the person receiving money}",[h._param("Name of the person receiving money",this.props.receiverName)]))};a.prototype.render=function(){var a=this.renderBannerFooter(),c;!a?c=this.renderStatusFooter():this.props.forceMemoTextShown&&(c=this.renderStandaloneMemoSection());return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_5qd2"+(this.props.isSender?" _5qd3":"")+(this.props.isMessagesView?" _5qd4":"")+(b("MessengerEnvironment").messengerui?" _5qd5":"")+(this.props.viewerIsThirdParty?" _5qd6":""))},b("React").createElement("div",{className:"_5qd7"},b("React").createElement(b("Link.react"),{className:"_5qd8",href:this.props.detailsURI,onClick:this.props.onClick,target:"_blank"},this.renderMemoPhoto(),this.renderTopSection(),b("React").createElement("div",{className:"_5qd9"},this.renderBigAmount(),this.renderReceiverText()),c),a))};function a(){i.apply(this,arguments)}a.propTypes={amount:c.string.isRequired,currencyCode:c.string.isRequired,bannerContent:c.object,date:c.number,detailsURI:c.instanceOf(b("URI")),forceMemoTextShown:c.bool,isGroupThread:c.bool,isMessagesView:c.bool,isPending:c.bool,isPaymentRequest:c.bool,isSender:c.bool,memoText:c.string,memoPhotoURLs:c.arrayOf(c.string),onClick:c.func.isRequired,receiverName:c.string,statusText:c.node,topContent:c.object};e.exports=a}),null);
__d("P2PMercuryAttachmentGroupBubble.react",["cx","fbt","BackgroundImage.react","FacepileRounded.react","Link.react","MessengerEnvironment","Middot.react","P2PAcceptMoneyDialog.react","P2PActions","P2PBigAmount.react","P2PEncryptedText.react","P2PGKValues","P2PPaymentRequestStatus","P2PText.react","React","ServerHTML.react","XUIText.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=3,k=j+1,l=[b("P2PPaymentRequestStatus").TRANSFER_COMPLETED,b("P2PPaymentRequestStatus").DECLINED,b("P2PPaymentRequestStatus").INITED,b("P2PPaymentRequestStatus").EXPIRED];c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.onAcceptMoneyClick=function(){b("P2PActions").showDialog(b("P2PAcceptMoneyDialog.react"),{creditCards:[],onClose:this.onAcceptMoneyDialogClose,transfer:this.props.pendingTransfer})}.bind(this),c}a.prototype.getMemoPhotoURL=function(){return this.props.memoPhotoURLs&&this.props.memoPhotoURLs[0]};a.prototype.getRequestProfile=function(a){a=a.requestee||{};return{image_src:a.picture,name:a.full_name}};a.prototype.getStatusMap=function(){var a;return this.props.individualRequests.reduce(function(a,c){switch(c.currentStatus){case b("P2PPaymentRequestStatus").EXPIRED:case b("P2PPaymentRequestStatus").DECLINED:case b("P2PPaymentRequestStatus").TRANSFER_COMPLETED:a[c.currentStatus]++;break;default:a[b("P2PPaymentRequestStatus").INITED]++;break}return a},(a={},a[b("P2PPaymentRequestStatus").DECLINED]=0,a[b("P2PPaymentRequestStatus").EXPIRED]=0,a[b("P2PPaymentRequestStatus").INITED]=0,a[b("P2PPaymentRequestStatus").TRANSFER_COMPLETED]=0,a))};a.prototype.isPendingPush=function(){return!b("P2PGKValues").P2PGroupRequestAcceptMoneyEnabled?!1:!!this.props.isSender&&!!this.props.pendingTransfer};a.prototype.paidReuqestFilter=function(a){return a.currentStatus===b("P2PPaymentRequestStatus").TRANSFER_COMPLETED};a.prototype.renderBigAmount=function(){return b("React").createElement("div",{className:"_3-96 _3-8w _52jv"},b("React").createElement(b("P2PBigAmount.react"),{amount:this.props.amount,className:"_3oh-",currencyCode:this.props.currencyCode,isPending:this.props.isPending}))};a.prototype.onAcceptMoneyDialogClose=function(){b("P2PActions").hideDialog()};a.prototype.renderBannerFooter=function(a){if(a)return b("React").createElement(b("Link.react"),{className:"_5qd8",onClick:this.onAcceptMoneyClick},b("React").createElement(b("XUIText.react"),{className:"_4o8z",display:"block",size:"header3"},h._("Accept Money")));return!this.props.bannerContent?null:b("React").createElement("div",{className:"_5qco"},this.props.bannerContent)};a.prototype.renderDescription=function(){var a;a=(a=this.props)!=null?(a=a.statusDescription)!=null?a.markup:a:a;return!a?null:b("React").createElement(b("P2PText.react"),{className:"_2pi9 _3-8o _52jv",type:"primary"},b("React").createElement(b("ServerHTML.react"),{blob:a}))};a.prototype.renderEncryptedText=function(a){return!a?null:b("React").createElement(b("P2PText.react"),{className:"_52jv _2pi8",shade:"light",type:"secondary"},b("React").createElement(b("P2PEncryptedText.react"),{showPasswordProtected:!0}))};a.prototype.renderMemoPhoto=function(){var a=this.getMemoPhotoURL();if(!b("P2PGKValues").P2PWWWMemoPhotoEligible||!a)return null;var c=192,d=100;this.props.isMessagesView?(c=220,d=110):b("MessengerEnvironment").messengerui&&(c=350,d=120);return b("React").createElement(b("BackgroundImage.react"),{className:"_1krf",width:c,height:d,backgroundSize:"cover",src:a})};a.prototype.renderPaidPeople=function(){var a=this.props.individualRequests.filter(this.paidReuqestFilter).map(this.getRequestProfile),c=a.length===k;c=c?k:j;return b("React").createElement(b("FacepileRounded.react"),{hoverBehavior:"name",imageSize:16,numProfilesToDisplay:c,profiles:a})};a.prototype.renderStatus=function(){__p&&__p();var a=this.props.status,c=this.props.individualRequests.length>1;if(!c||a===b("P2PPaymentRequestStatus").CANCELED)return this.renderStatusText();var d=this.getStatusMap();c=l.filter(function(a){return d[a]>0}).reduce(function(c,a,e){c.length>0&&c.push(b("React").createElement(b("Middot.react"),{key:"middot-"+e}));c.push(this.renderStatusCount(a,d[a]));return c}.bind(this),[]);return b("React").createElement(b("P2PText.react"),{className:"_52jv _2pi8",shade:"light",type:"secondary"},c)};a.prototype.renderStatusCount=function(a,c){switch(a){case b("P2PPaymentRequestStatus").DECLINED:return h._("{count} Declined",[h._param("count",c)]);case b("P2PPaymentRequestStatus").EXPIRED:return h._("{count} Expired",[h._param("count",c)]);case b("P2PPaymentRequestStatus").INITED:return h._("{count} Pending",[h._param("count",c)]);case b("P2PPaymentRequestStatus").TRANSFER_COMPLETED:return b("React").createElement("span",{key:"status-paid"},this.renderPaidPeople(),this.renderPaidText(c));default:return null}};a.prototype.renderPaidText=function(a){a=a===1?"":a;return this.props.isSender?h._("{count} Completed",[h._param("count",a)]):h._("{count} Paid",[h._param("count",a)])};a.prototype.renderStatusText=function(){return b("React").createElement(b("P2PText.react"),{className:"_52jv",shade:"light",type:"secondary"},this.renderPaidPeople(),this.props.statusText)};a.prototype.renderViewRequest=function(a){return a||this.props.bannerContent?null:b("React").createElement(b("XUIText.react"),{className:"_4o8z",display:"block",size:"header3"},h._("See Details"))};a.prototype.render=function(){var a=!!this.getMemoPhotoURL(),c=this.props.isMessagesView,d=this.isPendingPush(),e=this.props.viewerIsThirdParty;return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_5qd2"+(this.props.isSender?" _5qd3":"")+(c?" _5qd4":"")+" _33x2"+(a?" _nvj":"")+(e?" _5qd6":""))},b("React").createElement(b("Link.react"),{className:"_5qd8",href:this.props.detailsURI,onClick:this.props.onClick,target:"_blank"},b("React").createElement("div",{className:"_33x3"},this.renderMemoPhoto(),this.renderBigAmount(),this.renderDescription(),this.renderStatus(),this.renderEncryptedText(d)),this.renderViewRequest(d)),this.renderBannerFooter(d))};e.exports=a}),null);
__d("P2PPaymentRequest",["P2PPaymentRequestStatus","immutable"],(function(a,b,c,d,e,f){"use strict";var g;c=Math.round(Date.now()/1e3);g=babelHelpers.inherits(a,b("immutable").Record({amount:"",amountWithSymbol:"",creationTime:c,currency:"",currentStatus:b("P2PPaymentRequestStatus").INITED,groupThreadFBID:"",id:"",individualRequests:[],memoText:"",requestee:{},requester:{},statusDescription:"",transfer:{},transferID:"",updatedTime:c}));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("P2PPaymentRequestsStore",["Arbiter","ChannelConstants","CurrentUser","EventEmitter","ImmutableObject","P2PActionConstants","P2PActions","P2PAPI","P2PChannelType","P2PDispatcher","P2PPaymentRequest","P2PPaymentRequestStatus","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").List,i=null,j=!1,k=null,l=!1,m=null,n=h(),o=!1,p=!1;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType(b("P2PChannelType").PAYMENT_REQUEST_STATUS_CHANGED),this.handleChannelPaymentRequestStatusChanged.bind(this)),b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){__p&&__p();var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").PAYMENT_REQUEST_INITIATED:o=!0;m=null;this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_INITIATED_COMPLETE:o=!1;this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_CREATED:this.handlePaymentRequestCreated(c);this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_CREATED_ERROR:m=new(b("ImmutableObject"))(c.error);this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_UPDATED:this.handlePaymentRequestUpdated(c);this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_DECLINE_INITIATED:l=!0;k=null;this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_DECLINED:l=!1;k=null;this.handlePaymentRequestDeclined(c);this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_DECLINE_ERROR:l=!1;k=new(b("ImmutableObject"))(c.error);this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_CANCEL_INITIATED:j=!0;i=null;this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_CANCELED:j=!1;i=null;this.handlePaymentRequestCanceled(c);this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUEST_CANCEL_ERROR:j=!1;i=new(b("ImmutableObject"))(c.error);this.emit("change");break;case b("P2PActionConstants").DIALOG_CLOSED:k=null;this.emit("change");break;case b("P2PActionConstants").PAYMENT_REQUESTS_FETCHED:this.handlePaymentRequestsFetched(c);this.emit("change");break}};a.prototype.handlePaymentRequestCreated=function(a){var c=n.toArray();c.push(new(b("P2PPaymentRequest"))(a));c.sort(function(a,b){return a.creationTime-b.creationTime});n=h(c)};a.prototype.handlePaymentRequestUpdated=function(a){a.groupRequestID&&this.updateIndividualRequest(a),delete a.groupRequestID,this.updateRequest(a.id,a)};a.prototype.handlePaymentRequestDeclined=function(a){this.updateRequest(a,{currentStatus:b("P2PPaymentRequestStatus").DECLINED})};a.prototype.handlePaymentRequestCanceled=function(a){this.updateRequest(a,{currentStatus:b("P2PPaymentRequestStatus").CANCELED})};a.prototype.handleChannelPaymentRequestStatusChanged=function(a,c){a=c.obj;b("P2PActions").paymentRequestUpdated({id:a.id,currentStatus:a.current_status,groupRequestID:a.group_request_id,transfer:a.transfer})};a.prototype.handlePaymentRequestsFetched=function(a){this.$P2PPaymentRequestsStore1(a)};a.prototype.$P2PPaymentRequestsStore1=function(a){a=a.sort(function(a,b){return a.creationTime-b.creationTime});a.forEach(function(a,c){this.getPaymentRequestByID(a.id)||(n=n.push(new(b("P2PPaymentRequest"))(a)))}.bind(this));a=n.toArray();a.sort(function(a,b){return a.creationTime-b.creationTime});n=h(a)};a.prototype.isPaymentRequestInitiated=function(){return o};a.prototype.isPaymentRequestDeclining=function(){return l};a.prototype.isPaymentRequestCanceling=function(){return j};a.prototype.getPaymentRequestByID=function(a){return n.find(function(b){return a===b.id})};a.prototype.getPaymentRequestError=function(){return m};a.prototype.getPaymentRequestDeclineError=function(){return k};a.prototype.getPaymentRequestCancelError=function(){return i};a.prototype.getPendingPaymentRequest=function(){p||(p=!0,b("P2PAPI").getPendingPaymentRequests());return n.filter(function(a){return a.requestee.id===b("CurrentUser").getID()&&a.currentStatus===b("P2PPaymentRequestStatus").INITED}).last()};a.prototype.updateRequest=function(a,b){n.forEach(function(c,d){a===c.id&&(n=n.set(d,c.merge(c,b)))})};a.prototype.updateIndividualRequest=function(a){var b=a.id,c=a.groupRequestID,d=n.findIndex(function(a){return c===a.id}),e=n.get(d),f=e.individualRequests.findIndex(function(a){return b===a.id}),g=e.individualRequests.slice(0),h=g[f];h=babelHelpers["extends"]({},h,a);g[f]=h;e=e.set("individualRequests",g);n=n.set(d,e)};a.prototype.getPaymentRequests=function(){return n};e.exports=new a()}),null);
__d("P2PSimpleDialog.react",["fbt","FBPaymentsErrorNotice_DEPRECATED.react","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLoadingMask.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.handleToggle=function(a){a||this.props.onCancel()}.bind(this),b}a.prototype.render=function(){var a;this.props.error&&(a=b("React").createElement(b("FBPaymentsErrorNotice_DEPRECATED.react"),{error:this.props.error}));return b("React").createElement(b("P2PDialog.react"),{behaviors:this.props.behaviors,layerHideOnBlur:!1,onToggle:this.handleToggle,repositionOnUpdate:!0,shown:!0,width:this.props.width},b("React").createElement(b("P2PDialogTitle.react"),null,this.props.title),b("React").createElement(b("P2PDialogBody.react"),null,a,this.props.bodyText,b("React").createElement(b("P2PLoadingMask.react"),{visible:this.props.loading})),b("React").createElement(b("P2PDialogFooter.react"),null,b("React").createElement(b("P2PButton.react"),{disabled:this.props.loading,label:this.props.cancelButtonText,onClick:this.props.onCancel,size:"medium"}),b("React").createElement(b("P2PButton.react"),{disabled:this.props.loading,label:this.props.confirmButtonText,onClick:this.props.onConfirm,size:"medium",use:"confirm"})))};a.propTypes={bodyText:c.string.isRequired,cancelButtonText:c.string,confirmButtonText:c.string,error:c.object,loading:c.bool,onCancel:c.func.isRequired,onConfirm:c.func.isRequired,title:c.string.isRequired,width:c.number};a.defaultProps={cancelButtonText:g._("Cancel"),confirmButtonText:g._("Confirm"),width:300};e.exports=a}),null);
__d("P2PPaymentRequestCancelDialogContainer.react",["fbt","P2PActions","P2PAPI","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PPaymentRequest","P2PPaymentRequestsStore","P2PSimpleDialog.react","React","StoreAndPropBasedStateMixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"P2PPaymentRequestCancelDialogContainer",mixins:[b("StoreAndPropBasedStateMixin")(b("P2PPaymentRequestsStore"))],propTypes:{paymentRequest:a.instanceOf(b("P2PPaymentRequest")).isRequired},statics:{calculateState:function(a){return{error:b("P2PPaymentRequestsStore").getPaymentRequestCancelError(),loading:b("P2PPaymentRequestsStore").isPaymentRequestCanceling()}}},log:function(a,c){b("P2PLogger").log(a,{www_event_flow:b("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_REQUEST,request_id:this.props.paymentRequest.id})},componentDidMount:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_CANCEL_REQUEST)},handleCancel:function(){b("P2PActions").hideDialog()},handleConfirm:function(){b("P2PAPI").cancelPaymentRequest({error:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_REQUEST_FAIL)}.bind(this),paymentRequestID:this.props.paymentRequest.id,success:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_REQUEST_SUCCESS)}.bind(this)}),this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_CANCEL_REQUEST)},renderBodyText:function(){var a=this.props.paymentRequest.requestee.name;return g._("{Name of requestee} will be notified that the request was canceled.",[g._param("Name of requestee",a)])},render:function(){return b("React").createElement(b("P2PSimpleDialog.react"),{bodyText:this.renderBodyText(),error:this.state.error,loading:this.state.loading,cancelButtonText:g._("Back"),confirmButtonText:g._("Cancel"),onCancel:this.handleCancel,onConfirm:this.handleConfirm,title:g._("Cancel Request?")})}});e.exports=c}),null);
__d("P2PPaymentRequestDeclineDialogContainer.react",["fbt","P2PActions","P2PAPI","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PPaymentRequest","P2PPaymentRequestsStore","P2PSimpleDialog.react","React","StoreAndPropBasedStateMixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"P2PPaymentRequestDeclineDialogContainer",mixins:[b("StoreAndPropBasedStateMixin")(b("P2PPaymentRequestsStore"))],propTypes:{paymentRequest:a.instanceOf(b("P2PPaymentRequest")).isRequired},statics:{calculateState:function(a){return{error:b("P2PPaymentRequestsStore").getPaymentRequestDeclineError(),loading:b("P2PPaymentRequestsStore").isPaymentRequestDeclining()}}},log:function(a,c){b("P2PLogger").log(a,{www_event_flow:b("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_REQUEST,request_id:this.props.paymentRequest.id})},componentDidMount:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_DECLINE_REQUEST)},handleCancel:function(){b("P2PActions").hideDialog()},handleConfirm:function(){b("P2PAPI").declinePaymentRequest({error:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_DECLINE_REQUEST_FAIL)}.bind(this),paymentRequestID:this.props.paymentRequest.id,success:function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_DECLINE_REQUEST_SUCCESS)}.bind(this)}),this.log(b("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_DECLINE_REQUEST)},renderBodyText:function(){var a=this.props.paymentRequest.requester.name;return g._("{Name of requester} will be notified that the request was declined.",[g._param("Name of requester",a)])},render:function(){return b("React").createElement(b("P2PSimpleDialog.react"),{bodyText:this.renderBodyText(),error:this.state.error,loading:this.state.loading,cancelButtonText:g._("Back"),confirmButtonText:g._("Decline"),onCancel:this.handleCancel,onConfirm:this.handleConfirm,title:g._("Decline Request?")})}});e.exports=c}),null);
__d("P2PPaymentRequestActionHelper",["fbt","MercuryIDs","P2PActions","P2PPaymentRequest","P2PPaymentRequestCancelDialogContainer.react","P2PPaymentRequestDeclineDialogContainer.react","P2PPaymentRequestStatus","P2PTransferParam","P2PTransferStatus"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=function(a){switch(a){case b("P2PTransferStatus").CANCELED_DECLINED:return b("P2PPaymentRequestStatus").DECLINED;case b("P2PTransferStatus").CANCELED_EXPIRED:return b("P2PPaymentRequestStatus").EXPIRED;case b("P2PTransferStatus").CANCELED_RECIPIENT_RISK:case b("P2PTransferStatus").CANCELED_SAME_CARD:case b("P2PTransferStatus").CANCELED_SENDER_RISK:case b("P2PTransferStatus").CANCELED_SYSTEM_FAIL:return b("P2PPaymentRequestStatus").CANCELED;case b("P2PTransferStatus").COMPLETED:return b("P2PPaymentRequestStatus").TRANSFER_COMPLETED;case b("P2PTransferStatus").INTERMEDIATE_PROCESSING:case b("P2PTransferStatus").PENDING_PUSH_FAIL:case b("P2PTransferStatus").PENDING_SENDER_INITED:case b("P2PTransferStatus").PENDING_RECIPIENT_NUX:case b("P2PTransferStatus").PENDING_SENDER_VERIFICATION:case b("P2PTransferStatus").PENDING_SENDER_MANUAL_REVIEW:case b("P2PTransferStatus").PENDING_RECIPIENT_PROCESSING:case b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION:case b("P2PTransferStatus").PENDING_RECIPIENT_MANUAL_REVIEW:case b("P2PTransferStatus").PENDING_SENDER_VERIFICATION_PROCESSING:case b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION_PROCESSING:default:return b("P2PPaymentRequestStatus").TRANSFER_INITED}};a={initDeclinePaymentRequestFlow:function(a){b("P2PActions").showDialog(b("P2PPaymentRequestDeclineDialogContainer.react"),{paymentRequest:a})},initPayForPaymentRequestFlow:function(a,c){var d=[],e=a.groupThreadFBID,f;e?(d.push(a.requester.id),f=b("MercuryIDs").getThreadIDFromThreadFBID(e)):f=b("MercuryIDs").getThreadIDFromUserID(a.requester.id);b("P2PActions").chatSendViewOpened({amount:a.amount,memoText:a.memoText,paymentRequestID:a.id,threadID:f,useModal:!0,referrer:c,groupSendRecipientUserIDs:d,groupThreadFBID:e})},initCancelPaymentRequestFlow:function(a){b("P2PActions").showDialog(b("P2PPaymentRequestCancelDialogContainer.react"),{paymentRequest:a})},getPaymentRequest:function(a){return new(b("P2PPaymentRequest"))({amount:a.amount,amountWithSymbol:a.amountWithSymbol,creationTime:a.creationTime,currency:a.currency,currentStatus:h(a[b("P2PTransferParam").STATUS]),groupThreadFBID:a.groupThreadFBID,individualRequests:[],memoText:a.memoText,requestee:a.sender,requester:a.receiver,statusDescription:a.statusDescription,trnasfer:a,transferID:a[b("P2PTransferParam").TRANSFER_ID],updatedTime:a.updatedTime})},getStatusText:function(a){__p&&__p();a=a.currentStatus;var c=g._("Canceled"),d=g._("Paid"),e=g._("Declined"),f=g._("Pending"),h;switch(a){case b("P2PPaymentRequestStatus").DECLINED:h=e;break;case b("P2PPaymentRequestStatus").CANCELED:case b("P2PPaymentRequestStatus").TRANSFER_FAILED:h=c;break;case b("P2PPaymentRequestStatus").TRANSFER_COMPLETED:h=d;break;default:h=f;break}return h}};e.exports=a}),null);
__d("P2PMercuryAttachment.react",["cx","fbt","CurrentUser","P2PAcceptMoneyDialog.react","P2PActions","P2PButton.react","P2PCreditCardStore","P2PEncryptedText.react","P2PGKValues","P2PGroupSendReceiptDialog.react","P2PLinkConstants","P2PMercuryAttachmentBubble.react","P2PMercuryAttachmentGroupBubble.react","P2PNUXRendererUtils","P2PPaymentRequestActionHelper","P2PTransferParam","P2PTransferStatus","P2PVerificationFlowHelper","React","URI","XP2PTransactionDetailController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.handleConfirmInfoButtonClicked=function(){b("P2PVerificationFlowHelper").startVerificationFlow(this.props.transfer[b("P2PTransferParam").TRANSFER_ID],!1)}.bind(this),this.handleAddCardButtonClicked=function(){b("P2PActions").showDialog(b("P2PAcceptMoneyDialog.react"),{creditCards:this.props.creditCards,onClose:this.handleAcceptMoneyDialogClose,transfer:this.props.transfer})}.bind(this),this.handleBubbleClick=function(){this.viewerIsThirdParty()&&b("P2PActions").showDialog(b("P2PGroupSendReceiptDialog.react"),{amount:this.props.transfer.amount,onClose:this.handleGroupSendReceiptClosed,receiver:this.props.transfer.receiver,sender:this.props.transfer.sender})}.bind(this),c}a.prototype.viewerIsSender=function(){return b("CurrentUser").getID()===this.props.transfer.sender.id};a.prototype.viewerIsReceiver=function(){return b("CurrentUser").getID()===this.props.transfer.receiver.id};a.prototype.viewerIsThirdParty=function(){return!this.viewerIsSender()&&!this.viewerIsReceiver()};a.prototype.getStatus=function(){var a=h._("Paid"),c=h._("Pending"),d=h._("Completed"),e=h._("Canceled"),f=h._("Sent"),g=this.viewerIsSender(),i=this.viewerIsThirdParty();switch(this.props.transfer[b("P2PTransferParam").STATUS]){case b("P2PTransferStatus").PENDING_RECIPIENT_PROCESSING:case b("P2PTransferStatus").INTERMEDIATE_PROCESSING:case b("P2PTransferStatus").PENDING_RECIPIENT_NUX:case b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION:case b("P2PTransferStatus").PENDING_RECIPIENT_MANUAL_REVIEW:case b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION_PROCESSING:case b("P2PTransferStatus").PENDING_PUSH_FAIL:case b("P2PTransferStatus").PENDING_SENDER_INITED:return g||i?f:c;case b("P2PTransferStatus").PENDING_SENDER_MANUAL_REVIEW:case b("P2PTransferStatus").PENDING_SENDER_VERIFICATION:case b("P2PTransferStatus").PENDING_SENDER_VERIFICATION_PROCESSING:return c;case b("P2PTransferStatus").CANCELED_SENDER_RISK:case b("P2PTransferStatus").CANCELED_DECLINED:case b("P2PTransferStatus").CANCELED_RECIPIENT_RISK:case b("P2PTransferStatus").CANCELED_SYSTEM_FAIL:case b("P2PTransferStatus").CANCELED_EXPIRED:case b("P2PTransferStatus").CANCELED_SAME_CARD:return e;case b("P2PTransferStatus").COMPLETED:return g||i?a:d;default:return c}};a.prototype.isGrayStatus=function(){switch(this.props.transfer[b("P2PTransferParam").STATUS]){case b("P2PTransferStatus").INTERMEDIATE_PROCESSING:case b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION:case b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION_PROCESSING:case b("P2PTransferStatus").PENDING_RECIPIENT_MANUAL_REVIEW:case b("P2PTransferStatus").PENDING_RECIPIENT_NUX:case b("P2PTransferStatus").PENDING_RECIPIENT_PROCESSING:case b("P2PTransferStatus").PENDING_PUSH_FAIL:return this.viewerIsReceiver();case b("P2PTransferStatus").PENDING_SENDER_MANUAL_REVIEW:case b("P2PTransferStatus").PENDING_SENDER_VERIFICATION:case b("P2PTransferStatus").PENDING_SENDER_VERIFICATION_PROCESSING:case b("P2PTransferStatus").CANCELED_SENDER_RISK:case b("P2PTransferStatus").CANCELED_DECLINED:case b("P2PTransferStatus").CANCELED_RECIPIENT_RISK:case b("P2PTransferStatus").CANCELED_SYSTEM_FAIL:case b("P2PTransferStatus").CANCELED_EXPIRED:case b("P2PTransferStatus").CANCELED_SAME_CARD:return!0;case b("P2PTransferStatus").COMPLETED:case b("P2PTransferStatus").PENDING_SENDER_INITED:return!1;default:return!1}};a.prototype.shouldRenderBannerFooter=function(){return b("P2PNUXRendererUtils").doesNUXNeedCreditCards(this.props.transfer)&&!b("P2PCreditCardStore").isCreditCardsFetchComplete()||this.viewerIsThirdParty()?!1:b("P2PNUXRendererUtils").isRecipientActionableStatus(this.props.transfer)};a.prototype.handleAcceptMoneyDialogClose=function(){b("P2PActions").hideDialog()};a.prototype.renderInlineBanner=function(){var a=this.props.transfer[b("P2PTransferParam").STATUS];switch(a){case b("P2PTransferStatus").PENDING_RECIPIENT_NUX:return this.renderPendingRecipientNUX();case b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION:return this.renderPendingRecipientVerification();case b("P2PTransferStatus").PENDING_PUSH_FAIL:return this.renderPendingPushFail();default:return null}};a.prototype.renderPendingRecipientNUX=function(){var a=this.props.transfer;return b("React").createElement("div",null,b("React").createElement("div",{className:"_3asc"},h._("{sender_name} Sent You Money!",[h._param("sender_name",a.sender.name)])),b("React").createElement("div",{className:"_3asd"},h._("It's free to accept it. Just add a debit card."),b("React").createElement("div",{className:"_2pic"},b("React").createElement(b("P2PEncryptedText.react"),{showPasswordProtected:!0}))),b("React").createElement("div",{className:"_5abs"},b("React").createElement(b("P2PButton.react"),{use:"confirm",size:"medium",label:h._("Add Debit Card"),type:"primary",onClick:this.handleAddCardButtonClicked})))};a.prototype.renderPendingRecipientVerification=function(){return b("React").createElement("div",null,b("React").createElement("div",{className:"_3asc"},h._("Please Confirm Your Info")),b("React").createElement("div",{className:"_3asd"},h._("To accept the money {sender_name} sent you, please confirm your information.",[h._param("sender_name",this.props.transfer.sender.name)])),b("React").createElement("div",{className:"_5abs"},b("React").createElement(b("P2PButton.react"),{use:"confirm",size:"medium",label:h._("Confirm Info"),type:"primary",onClick:this.handleConfirmInfoButtonClicked})))};a.prototype.renderPendingPushFail=function(){var a=this.props.transfer;return b("React").createElement("div",null,b("React").createElement("div",{className:"_3asc"},h._("Update Your Card")),b("React").createElement("div",{className:"_3asd"},h._("{currency}{amount} from {sender_name} couldn't be deposited using your debit card.",[h._param("currency",a.currency),h._param("amount",a.amount),h._param("sender_name",a.sender.name)])),b("React").createElement("div",{className:"_5abs"},b("React").createElement(b("P2PButton.react"),{use:"confirm",size:"medium",label:h._("Learn More"),type:"primary",href:new(b("URI"))(b("P2PLinkConstants").helpTransferPushFailURI),target:"_blank"})))};a.prototype.getTransferStatusDate=function(){var a,c=this.props.transfer[b("P2PTransferParam").STATUS];switch(c){case b("P2PTransferStatus").COMPLETED:a=this.props.transfer.completedTime;break;case b("P2PTransferStatus").CANCELED_SENDER_RISK:case b("P2PTransferStatus").CANCELED_DECLINED:case b("P2PTransferStatus").CANCELED_RECIPIENT_RISK:case b("P2PTransferStatus").CANCELED_SYSTEM_FAIL:case b("P2PTransferStatus").CANCELED_EXPIRED:case b("P2PTransferStatus").CANCELED_SAME_CARD:a=this.props.transfer.updatedTime;break}a||(a=this.props.transfer.creationTime);return a};a.prototype.getTransferDetailsURI=function(){return this.viewerIsThirdParty()?null:b("XP2PTransactionDetailController").getURIBuilder().setString("id",this.props.transfer[b("P2PTransferParam").TRANSFER_ID]).getURI()};a.prototype.handleGroupSendReceiptClosed=function(){b("P2PActions").hideDialog()};a.prototype.render=function(){var a=this.shouldRenderBannerFooter(),c=a?this.renderInlineBanner():null,d=this.props.transfer,e=d.memoText,f=d.memoPhotoURLs;a=a?d:null;var g=!!(e&&c);if(b("P2PGKValues").P2PV2Bubble){var h=b("P2PPaymentRequestActionHelper").getPaymentRequest(d);return b("React").createElement(b("P2PMercuryAttachmentGroupBubble.react"),{amount:d.amount,currencyCode:d.currencyCode,className:this.props.className,date:this.getTransferStatusDate(),detailsURI:this.getTransferDetailsURI(),bannerContent:c,forceMemoTextShown:g,individualRequests:[h],isGroupThread:!!d.groupThreadFBID,isMessagesView:this.props.theme==="messages",isPending:this.isGrayStatus(),isSender:this.viewerIsSender(),memoText:e,memoPhotoURLs:f,pendingTransfer:a,status:h.currentStatus,statusDescription:d.statusDescription,statusText:this.getStatus(),onClick:this.handleBubbleClick})}return b("React").createElement("div",{className:this.props.className},b("React").createElement(b("P2PMercuryAttachmentBubble.react"),{amount:d.amount,currencyCode:d.currencyCode,className:this.props.className,date:this.getTransferStatusDate(),detailsURI:this.getTransferDetailsURI(),bannerContent:c,forceMemoTextShown:g,isGroupThread:!!d.groupThreadFBID,isMessagesView:this.props.theme==="messages",isPending:this.isGrayStatus(),isSender:this.viewerIsSender(),memoText:e,memoPhotoURLs:f,onClick:this.handleBubbleClick,receiverName:d.receiver.full_name,statusText:this.getStatus()}))};e.exports=a}),null);
__d("P2PMercuryShareAttachmentContainer.react",["cx","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","P2PActions","P2PCreditCardStore","P2PMercuryAttachment.react","P2PNUXRendererUtils","P2PTransferStore","React","StoreAndPropBasedStateMixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"P2PMercuryShareAttachmentContainer",propTypes:{attachment:b("MercuryShareAttachmentReactShape"),location:a.oneOf(b("MercuryShareAttachmentRenderLocations").getValues())},mixins:[b("StoreAndPropBasedStateMixin")(b("P2PTransferStore"),b("P2PCreditCardStore"))],statics:{calculateState:function(a){var c=[];a=a.attachment.target;a=a&&b("P2PTransferStore").getTransferByID(a.transfer_id);a&&b("P2PNUXRendererUtils").doesNUXNeedCreditCards(a)&&(c=b("P2PCreditCardStore").getAll());return{creditCardAsyncRequestState:b("P2PCreditCardStore").getAsyncRequestState(),creditCards:c,transfer:a}}},UNSAFE_componentWillMount:function(){var a=this.props.attachment.target;a&&!b("P2PTransferStore").getTransferByID(a.transfer_id)&&b("P2PActions").transferAdded(a)},render:function(){var a=this.state.transfer;if(!a)return b("React").createElement("span",null);a={creditCards:this.state.creditCards,creditCardAsyncRequestState:this.state.creditCardAsyncRequestState,transfer:a};this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER&&(a.theme="messenger");return b("React").createElement(b("P2PMercuryAttachment.react"),babelHelpers["extends"]({},a,{className:"_3fyk _60m8"}))}});e.exports=c}),null);
__d("P2PPaymentRequestMercuryShareAttachment.react",["cx","fbt","CurrentUser","P2PButton.react","P2PGKValues","P2PMercuryAttachmentBubble.react","P2PMercuryAttachmentGroupBubble.react","P2PPaymentRequestActionHelper","P2PPaymentRequestStatus","P2PText.react","React","XP2PPaymentRequestReceiptController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.handleDeclineClick=function(){b("P2PPaymentRequestActionHelper").initDeclinePaymentRequestFlow(this.props.paymentRequest)}.bind(this),this.handlePayClick=function(){b("P2PPaymentRequestActionHelper").initPayForPaymentRequestFlow(this.props.paymentRequest,"bubble")}.bind(this),this.handleClick=function(){(this.isThirdParty()||this.isGroupPaymentRequest())&&this.props.viewReceipt()}.bind(this),c}a.prototype.isSender=function(){var a;a=(a=this.props)!=null?(a=a.paymentRequest)!=null?(a=a.requester)!=null?a.id:a:a:a;return b("CurrentUser").getID()===a};a.prototype.isReceiver=function(){var a,c=b("CurrentUser").getID(),d=this.props.paymentRequest;a=(a=d)!=null?(a=a.requestee)!=null?a.id:a:a;if(c===a)return!0;a=d.individualRequests.find(function(a){return c===((a=a)!=null?(a=a.requestee)!=null?a.id:a:a)});return!!a};a.prototype.isThirdParty=function(){return!this.isSender()&&!this.isReceiver()};a.prototype.renderBannerContent=function(){var a=this.props.paymentRequest.currentStatus,c=this.isReceiver();return!c||a!==b("P2PPaymentRequestStatus").INITED?null:b("React").createElement("div",{className:"_2v-"},b("React").createElement("div",{className:"_2v_"},b("React").createElement(b("P2PButton.react"),{className:"_2w2",label:h._("Decline"),onClick:this.handleDeclineClick,size:"medium",type:"primary"})),b("React").createElement("div",{className:"_2v_"},b("React").createElement(b("P2PButton.react"),{className:"_2w2",label:h._("Pay"),onClick:this.handlePayClick,size:"medium",type:"primary",use:"confirm"})))};a.prototype.renderStatusText=function(){var a=this.props.paymentRequest;return this.isReceiver()&&a.currentStatus===b("P2PPaymentRequestStatus").INITED?null:b("P2PPaymentRequestActionHelper").getStatusText(a)};a.prototype.renderTopContent=function(){return this.isSender()?b("React").createElement(b("P2PText.react"),{type:"primary",weight:"bold"},h._("You requested")):b("React").createElement(b("P2PText.react"),{type:"primary",weight:"bold"},h._("{Name of user} requested",[h._param("Name of user",this.props.paymentRequest.requester.name)]))};a.prototype.getDetailsURI=function(){return this.isThirdParty()||this.isGroupPaymentRequest()?null:b("XP2PPaymentRequestReceiptController").getURIBuilder().setString("id",this.props.paymentRequest.id).getURI()};a.prototype.getDate=function(){var a=this.props.paymentRequest,c=a.currentStatus,d;switch(c){case b("P2PPaymentRequestStatus").DECLINED:case b("P2PPaymentRequestStatus").CANCELED:case b("P2PPaymentRequestStatus").TRANSFER_FAILED:case b("P2PPaymentRequestStatus").TRANSFER_INITED:case b("P2PPaymentRequestStatus").TRANSFER_COMPLETED:d=a.updatedTime;break;default:d=a.creationTime;break}return d};a.prototype.getIndividualRequests=function(){var a=this.props.paymentRequest,b=a.individualRequests;return b.length>1?b:[a]};a.prototype.isGroupPaymentRequest=function(){var a=this.props.paymentRequest.individualRequests||[];return!!a.length};a.prototype.render=function(){__p&&__p();var a=this.props;a=a.paymentRequest;var c=this.isGroupPaymentRequest();if(c||b("P2PGKValues").P2PV2Bubble){c=this.getIndividualRequests();var d=!0;for(var e=c,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;if(h.currentStatus===b("P2PPaymentRequestStatus").TRANSFER_COMPLETED){d=!1;break}}return b("React").createElement(b("P2PMercuryAttachmentGroupBubble.react"),{amount:a.amount,currencyCode:a.currency,date:this.getDate(),detailsURI:this.getDetailsURI(),bannerContent:this.renderBannerContent(),forceMemoTextShown:!0,individualRequests:c,isGroupThread:!!a.groupThreadFBID,isMessagesView:!1,isPending:d,isSender:this.isSender(),memoText:a.memoText,pendingTransfer:this.props.pendingTransfer,status:a.currentStatus,statusDescription:a.statusDescription,statusText:this.renderStatusText(),onClick:this.handleClick})}return b("React").createElement(b("P2PMercuryAttachmentBubble.react"),{amount:a.amount,currencyCode:a.currency,date:this.getDate(),detailsURI:this.getDetailsURI(),bannerContent:this.renderBannerContent(),forceMemoTextShown:!0,isGroupThread:!!a.groupThreadFBID,isMessagesView:!1,isPaymentRequest:!0,isPending:!0,isSender:this.isSender(),memoText:a.memoText,onClick:this.handleClick,receiverName:a.requestee.full_name,statusText:this.renderStatusText(),topContent:this.renderTopContent()})};e.exports=a}),null);
__d("P2PPaymentRequestMercuryShareAttachmentContainer.react",["cx","MercuryFallbackShareAttachment.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","P2PActions","P2PGroupPaymentRequestReceiptDialog.react","P2PPaymentRequestMercuryShareAttachment.react","P2PPaymentRequestsStore","P2PTransferStatus","P2PTransferStore","React","StoreAndPropBasedStateMixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=b("React").createClass({displayName:"P2PPaymentRequestMercuryShareAttachmentContainer",propTypes:{attachment:b("MercuryShareAttachmentReactShape"),location:a.oneOf(b("MercuryShareAttachmentRenderLocations").getValues())},mixins:[b("StoreAndPropBasedStateMixin")(b("P2PPaymentRequestsStore"),b("P2PTransferStore"))],statics:{calculateState:function(a){a=(a=a)!=null?(a=a.attachment)!=null?(a=a.target)!=null?a.id:a:a:a;if(!a)return{};a=b("P2PPaymentRequestsStore").getPaymentRequestByID(a);return{paymentRequest:a,pendingTransfer:h.getPendingTransfer(a)}},getPendingTransfer:function(a){__p&&__p();if(!a)return null;a=a.individualRequests||[];return a.map(function(a){__p&&__p();a=a.transfer;if(!a)return null;var c=a.transfer_id;c=b("P2PTransferStore").getTransferByID(c);if(!c){b("P2PActions").transferAdded(a);return a}return c}).find(function(a){a=a&&a.status||0;return a===b("P2PTransferStatus").PENDING_PUSH_FAIL||a===b("P2PTransferStatus").PENDING_RECIPIENT_NUX})}},UNSAFE_componentWillMount:function(){var a=this.props.attachment.target||{};b("P2PPaymentRequestsStore").getPaymentRequestByID(a.id)||b("P2PActions").paymentRequestCreated(a);a=a.individualRequests||[];a.forEach(function(a){a=a.transfer;a&&!b("P2PTransferStore").getTransferByID(a.transfer_id)&&b("P2PActions").transferAdded(a)})},shouldComponentUpdate:function(a,b){if(this.props.location!==a.location)return!0;return this.state.paymentRequest!==b.paymentRequest?!0:!!this.state.pendingTransfer===!!b.pendingTransfer},viewReceipt:function(){var a=this.state.paymentRequest;b("P2PActions").showDialog(b("P2PGroupPaymentRequestReceiptDialog.react"),{amount:a.amount,currencyCode:a.currency,individualRequests:a.individualRequests,requestee:a.requestee,requester:a.requester})},render:function(){var a=this.state.paymentRequest;if(!a)return b("React").createElement(b("MercuryFallbackShareAttachment.react"),{attachment:this.props.attachment,location:this.props.location});var c=a.individualRequests&&a.individualRequests.length>1;return b("React").createElement("div",{className:c?"":"_3fyk"},b("React").createElement(b("P2PPaymentRequestMercuryShareAttachment.react"),{location:this.props.location,viewReceipt:this.viewReceipt,paymentRequest:a,pendingTransfer:this.state.pendingTransfer}))}});e.exports=h}),null);