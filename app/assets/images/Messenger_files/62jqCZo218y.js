if (self.CavalryLogger) { CavalryLogger.start_js(["Yi8hc"]); }

__d("createEmojiElement",["cx","JSXDOM"],(function(a,b,c,d,e,f,g){function a(a,c,d){d=d||16;return b("JSXDOM").span({className:"_5mfr _47e3"},[b("JSXDOM").img({"aria-hidden":!0,className:"img",height:d,src:c,width:d}),b("JSXDOM").span({className:"_7oe"},a)])}e.exports=a}),null);
__d("DOMEmoji",["cx","EmojiImageURL","EmojiRenderer","FBEmojiUtils","JSXDOM","createEmojiElement","flattenArray","gkx","isElementNode"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={MAX_ITEMS:40,transform:function(a,c){c=c||{};var d=c.size||16;return b("flattenArray")(a.map(function(a){if(!b("isElementNode")(a))return b("EmojiRenderer").render(a,function(a){var c=b("FBEmojiUtils").getSupportedKey(a);return c?b("createEmojiElement")(a.join(""),b("EmojiImageURL").getFBEmojiURL(c,d),d):b("JSXDOM").span({className:"_4ay8"+(d===16?" _3kkw":"")},a.join(""))},this.MAX_ITEMS);else return a}.bind(this)))},params:function(a){if(!a)return this;var b=this;return{__params:!0,obj:b,params:a}}};e.exports=a}),null);
__d("TransformTextToDOMMixin",["flattenArray","isElementNode"],(function(a,b,c,d,e,f){__p&&__p();var g=3;a={transform:function(a,c){__p&&__p();return b("flattenArray")(a.map(function(a){__p&&__p();if(!b("isElementNode")(a)){var d=a,e=[],f=this.MAX_ITEMS||g;while(f--){var h=c?[d].concat(c):[d];h=this.match.apply(this,h);if(!h)break;e.push(d.substring(0,h.startIndex));e.push(h.element);d=d.substring(h.endIndex)}d&&e.push(d);return e}return a}.bind(this)))},params:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=this;return{__params:!0,obj:d,params:b}}};e.exports=a}),null);
__d("DOMEmote",["cx","fbt","EmojiImageURL","EmoticonEmojiList","EmoticonsList","JSXDOM","SupportedFBEmoji","TransformTextToDOMMixin","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={MAX_ITEMS:40,match:function(a,c){var d=c&&c.getMessengerEmote;a=d?b("EmoticonEmojiList").regexp.exec(a):b("EmoticonsList").regexp.exec(a);if(!a||!a.length)return!1;var e=a[2];a=a.index+a[1].length;d=d?b("EmoticonEmojiList").names[e]:b("EmoticonsList").emotes[e];return{startIndex:a,endIndex:a+e.length,element:this._element(e,d,c)}},_element:function(a,c,d){d=b("EmoticonsList").emoji[c];var e=null;d?e=b("JSXDOM").img({"aria-hidden":!0,className:"img",height:16,src:b("SupportedFBEmoji")[d]?b("EmojiImageURL").getFBEmojiURL(d):b("EmojiImageURL").getFBEmojiExtendedURL(d),width:16}):e=b("JSXDOM").span({"aria-hidden":!0,className:"emoticon emoticon_"+c});d=h._("{emoticonName} emoticon",[h._param("emoticonName",c)]);return b("JSXDOM").span({className:"_47e3 _5mfr",title:d},[e,b("JSXDOM").span({"aria-hidden":!0,className:"_7oe"},a)])}};e.exports=Object.assign(a,b("TransformTextToDOMMixin"))}),null);
__d("P2PTriggersUtils",["P2PGKValues"],(function(a,b,c,d,e,f){var g=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/;a={canSeeTriggers:function(a){return!b("P2PGKValues").P2PEnabled?!1:!0},getMatches:function(a){return a.match(g)}};e.exports=a}),null);
__d("DOMP2PTrigger",["cx","JSXDOM","MessengerEnvironment","P2PAmountUtils","P2PTriggersUtils","TransformTextToDOMMixin"],(function(a,b,c,d,e,f,g){__p&&__p();a={MAX_ITEMS:40,match:function(a){a=b("P2PTriggersUtils").getMatches(a);if(!a||!a.length)return!1;var c=a[0];if(!b("P2PAmountUtils").isValidSendAmount(c))return!1;a=a.index;return{startIndex:a,endIndex:a+c.length,element:this._element(c)}},_element:function(a){return b("JSXDOM").a({href:"#",className:"_35i0"+(b("MessengerEnvironment").messengerui?"":" _4g4e"),"data-p2p-trigger":a},a)}};e.exports=Object.assign(a,b("TransformTextToDOMMixin"))}),null);
__d("transformTextToDOM",["createArrayFromMixed"],(function(a,b,c,d,e,f){function a(a,c){var d=[a];c=b("createArrayFromMixed")(c);c.forEach(function(a){var b,c=a;a.__params&&(b=a.params,c=a.obj);d=c.transform(d,b)});return d}e.exports=a}),null);
__d("p2pTriggerJSXDOMToString",["DOMEmoji","DOMEmote","DOMP2PTrigger","JSXDOM","transformTextToDOM"],(function(a,b,c,d,e,f){a=function(a,c,d,e,f,g){var h=[];e&&h.push(b("DOMP2PTrigger"));c&&(f?h.push(b("DOMEmoji").params({isSupportedEmoji:f})):h.push(b("DOMEmoji")));d&&(g?h.push(b("DOMEmote").params({getMessengerEmote:g})):h.push(b("DOMEmote")));return b("JSXDOM").span(null,b("transformTextToDOM")(a,h)).innerHTML};e.exports=a}),null);
__d("P2PTriggers.react",["DOM","Event","MercuryIDs","P2PActions","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PUserEligibilityStore","React","ReactDOM","StoreAndPropBasedStateMixin","nullthrows","p2pTriggerJSXDOMToString"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"P2PTriggers",mixins:[b("StoreAndPropBasedStateMixin")(b("P2PUserEligibilityStore"))],propTypes:{getMessengerEmote:a.func,isSupportedEmoji:a.func,renderEmoji:a.bool,renderEmoticons:a.bool,text:a.string.isRequired,threadID:a.string.isRequired},getInitialState:function(){return{amount:""}},statics:{calculateState:function(a){var c=b("MercuryIDs").isGroupChat(a.threadID)||b("P2PUserEligibilityStore").getEligibilityByThreadID(a.threadID);return{isThreadEligible:c,otherUserID:b("MercuryIDs").getUserIDFromThreadID(a.threadID)}}},_clickListeners:null,componentDidMount:function(){this._clickListeners=[],this.bindClickListeners()},componentWillUnmount:function(){this.unbindClickListeners()},log:function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:b("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_SEND,object_id:this.state.otherUserID},c))},bindClickListeners:function(){var a=b("nullthrows")(this._clickListeners);if(!a.length){var c=b("DOM").scry(b("ReactDOM").findDOMNode(this),"[data-p2p-trigger]");for(var d=0,e=c.length;d<e;d++)a.push(b("Event").listen(c[d],"click",this.handleTriggerClick))}},unbindClickListeners:function(){var a;if(this._clickListeners){for(var b=0,c=this._clickListeners.length;b<c;b++)a=this._clickListeners[b],a&&a.remove();this._clickListeners=[]}},componentDidUpdate:function(a,b){!b.isThreadEligible&&this.state.isThreadEligible&&this.bindClickListeners()},getAmountFromTriggerClickEvent:function(a){a=a.target.getAttribute("data-p2p-trigger")||"";return a.replace(/[^0-9\.]+/g,"")},handleTriggerClick:function(a){a.preventDefault();a=this.getAmountFromTriggerClickEvent(a);this.setState({amount:a});this.openSendView();this.log(b("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_SEND_TRIGGER,{raw_amount:this.state.amount,currency:"USD"})},openSendView:function(){b("P2PActions").chatSendViewOpened({threadID:this.props.threadID,amount:this.state.amount})},render:function(){var a=b("p2pTriggerJSXDOMToString")(this.props.text,this.props.renderEmoji,this.props.renderEmoticons,this.state.isThreadEligible,this.props.isSupportedEmoji,this.props.getMessengerEmote);return b("React").createElement("span",{dangerouslySetInnerHTML:{__html:a}})}});e.exports=c}),null);
__d("TextWithEntitiesAndP2P.react",["BaseTextWithEntities.react","Link.react","P2PTriggers.react","React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createClass({displayName:"TextWithEntitiesAndP2P",_renderText:function(a){return b("React").createElement(b("P2PTriggers.react"),{getMessengerEmote:this.props.getMessengerEmote,isSupportedEmoji:this.props.isSupportedEmoji,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji,text:a,threadID:this.props.threadID})},_renderRange:function(a,c){if(this.props.interpolator)return this.props.interpolator(a,c);else return b("React").createElement(b("Link.react"),{href:c.entity},a)},render:function(){return b("React").createElement(b("BaseTextWithEntities.react"),babelHelpers["extends"]({},this.props,{textRenderer:this._renderText,rangeRenderer:this._renderRange,ranges:this.props.ranges,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:this.props.text}))}});e.exports=a}),null);