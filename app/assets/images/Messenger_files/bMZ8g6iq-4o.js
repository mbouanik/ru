if (self.CavalryLogger) { CavalryLogger.start_js(["zTXKH"]); }

__d("MessengerThreadSearchActions",["MessengerDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirror")({CHANGE_RESULT_INDEX:null,GET_MORE_CONTEXT:null,GET_MORE_THREADS:null,UPDATE_THREAD_STATE:null});a={Types:g,selectPrevious:function(){b("MessengerDispatcher").dispatch({type:g.CHANGE_RESULT_INDEX,delta:1})},selectNext:function(){b("MessengerDispatcher").dispatch({type:g.CHANGE_RESULT_INDEX,delta:-1})},getMoreSearchContext:function(a,c){b("MessengerDispatcher").dispatch({type:g.GET_MORE_CONTEXT,direction:a,threadID:c})},updateThreadState:function(a,c){b("MessengerDispatcher").dispatch({type:g.UPDATE_THREAD_STATE,threadID:a,mid:c})},loadMoreThreads:function(){b("MessengerDispatcher").dispatch({type:g.GET_MORE_THREADS})}};e.exports=a}),null);
__d("MessengerContentSearchFunnelLoggerConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({BROWSE_MESSAGE_IN_THREAD:"browse_message_in_thread",CHANGE_QUERY:"change_query",END_CONTENT_SEARCH:"end_content_search",INITIATE_CONTENT_SEARCH:"initiate_content_search",LOAD_MORE_THREADS:"load_more_threads",NUM_BROWSE_ACTIONS_WITHIN_THREAD:"num_browse_actions_within_thread",SELECT_THREAD:"select_thread",THREAD_IMPRESSIONS:"thread_impressions",LOAD_MESSAGE_IN_THREAD:"load_message_in_thread",BROWSE_CONTEXT:"browse_context"});b=Object.freeze({SEARCH_WITHIN_THREAD:"search_within_thread",SEARCH_ALL_THREADS:"search_all_threads",END_WITH_DONE_BUTTON:"end_with_done_button",END_WITH_X_BUTTON:"end_with_x_button",END_WITH_BACK_BUTTON:"end_with_back_button"});e.exports={FUNNEL_NAME:"WWW_MESSENGER_CONTENT_SEARCH_FUNNEL",FUNNEL_LOGGER_EVENTS:a,FUNNEL_LOGGER_TAGS:b}}),null);
__d("MessengerThreadSearchContainer.react",["cx","fbt","AbstractTextInput.react","Bootloader","MessengerActions","MessengerButtonReact.bs","MessengerContentSearchFunnelLoggerConstants","MessengerSpinner.react","MessengerThreadSearchActions","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerButtonReact.bs").jsComponent;c=b("React").PropTypes;var k=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_TAGS.END_WITH_DONE_BUTTON,l=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS.CHANGE_QUERY;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={currentQuery:undefined},this.$5=function(){this.$4({name:l,query:this.refs.input.getValue()}),b("MessengerActions").changeQuery(this.refs.input.getValue())}.bind(this),this.$6=function(a){this.setState({currentQuery:a.target.value})}.bind(this),c}a.prototype.componentDidMount=function(){this.refs.input&&this.refs.input.focusInput()};a.prototype.render=function(){var a=h._("Previous result"),c=h._("Next result"),d=this.props.query||!this.state.currentQuery;return b("React").createElement("div",{className:"_33p7",onClick:this.$1,role:"presentation"},b("React").createElement(j,{"aria-label":a,className:"_-19 _b-u",disabled:this.props.selectedIndex>=this.props.totalCount-1,label:"",onClick:b("MessengerThreadSearchActions").selectPrevious,role:"button",tabIndex:0,title:a,type:"primary"}),b("React").createElement(j,{"aria-label":c,className:"_-19 _b-v",disabled:this.props.selectedIndex===0,label:"",onClick:b("MessengerThreadSearchActions").selectNext,role:"button",tabIndex:0,title:c,type:"primary"}),this.props.query?this.$2():this.$3(),b("React").createElement("div",{className:"_2krq"},this.props.loading?b("React").createElement(b("MessengerSpinner.react"),null):null),b("React").createElement(j,{className:"__h6",label:d?h._("Done"):h._("Search"),onClick:function(){d?(this.$4({name:k}),this.state.currentQuery?(this.setState({currentQuery:undefined}),b("MessengerActions").changeQuery("")):b("MessengerActions").changeQuery(null)):this.$5()}.bind(this),ref:"threadNameDoneButton",role:"button",tabIndex:0,type:"primary"}))};a.prototype.$2=function(){return b("React").createElement("div",{className:"_3jv8"},this.props.totalCount===0?h._("No results found for \"{query_name}\"",[h._param("query_name",this.props.query)]):h._("{selected_index} of {total_count} results for \"{query_name}\"",[h._param("selected_index",this.props.selectedIndex+1),h._param("total_count",this.props.totalCount),h._param("query_name",this.props.query)]))};a.prototype.$3=function(){return b("React").createElement("div",{className:"_3jv8 _5iwm _5iwn _150g"},b("React").createElement(b("AbstractTextInput.react"),{onChange:this.$6,className:"_3jv9",defaultValue:"",onEnter:this.$5,placeholder:h._("Search messages"),ref:"input"}))};a.prototype.$1=function(a){a.stopPropagation()};a.prototype.$4=function(event){b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(a){if(event)switch(event.name){case k:a.endFunnel(k);break;case l:a.logChangeQuery(event.query);break}},"MessengerThreadSearchContainer.react")};a.propTypes={query:c.string,selectedIndex:c.number.isRequired,totalCount:c.number.isRequired};e.exports=a}),null);
__d("MessengerContentSearchFunnelLogger",["FunnelLogger","MessengerContentSearchFunnelLoggerConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_NAME,h=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS,i=null,j=0,k=0,l=new Set(),m=0,n=0;function a(a,c){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),i=null,j=0,k=0,n=0,l.clear(),m=Date.now(),b("FunnelLogger").startFunnel(g),c&&b("FunnelLogger").addFunnelTag(g,c),b("FunnelLogger").setFunnelTimeout(g,86400),b("FunnelLogger").appendActionWithPayloadIfNew(g,h.INITIATE_CONTENT_SEARCH,{query:a})}function c(a){b("FunnelLogger").appendActionWithPayload(g,h.CHANGE_QUERY,{query:a})}function d(a){b("FunnelLogger").appendActionWithPayload(g,h.THREAD_IMPRESSIONS,{impressionList:a,latency:Date.now()-m})}function f(a,c){b("FunnelLogger").appendActionWithPayload(g,h.LOAD_MORE_THREADS,{impressionList:a,latency:c})}function o(){n+=1}function p(a,c){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),i=a,j=0,n=0,l.clear(),b("FunnelLogger").appendActionWithPayload(g,h.SELECT_THREAD,{thread_id:a,has_results:c})}function q(a){j+=1,k+=1}function r(a,c,d){i=c,l.add(a),b("FunnelLogger").appendActionWithPayload(g,h.LOAD_MESSAGE_IN_THREAD,{latency:d})}function s(a){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),a?b("FunnelLogger").appendActionWithTagAndPayloadIfNew(g,h.END_CONTENT_SEARCH,a,{totalBrowseActions:k}):b("FunnelLogger").appendActionWithPayloadIfNew(g,h.END_CONTENT_SEARCH,{totalBrowseActions:k}),b("FunnelLogger").endFunnel(g)}e.exports={browseMessageInThread:q,endFunnel:s,loadMessageInThread:r,logContextBrowse:o,logChangeQuery:c,logLoadMoreThreads:f,logThreadImpressions:d,logThreadSelect:p,startFunnel:a}}),null);