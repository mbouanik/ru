if (self.CavalryLogger) { CavalryLogger.start_js(["JlW3G"]); }

__d("AbstractTextInputReact.bs",["ReasonReact.bs","bs_js_null_undefined","AbstractTextInput.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("AbstractTextInput.react"),{className:b("bs_js_null_undefined").fromOption(a),maxLength:c,onChange:d,onFocus:e,onKeyDown:f,placeholder:g,value:b("bs_js_null_undefined").fromOption(h)},i)}f.make=a}),null);
__d("FacepileRounded.bs",["ReasonReact.bs","bs_js_null_undefined","FacepileRounded.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a)if(a[0])return["descending"];else return["ascending"];else return 0}function h(a){if(a)switch(a[0]){case 0:return["none"];case 1:return["name"];case 2:return["hovercard"]}else return 0}function a(a,c,d,e,f,i,j,k){return b("ReasonReact.bs").wrapJsForReason(b("FacepileRounded.react"),{className:a,direction:b("bs_js_null_undefined").fromOption(g(c)),hoverBehavior:b("bs_js_null_undefined").fromOption(h(d)),imageSize:e,numProfilesToDisplay:f,profiles:i,remainingProfilesCount:j},k)}f.stringOfDirection=g;f.stringOfHoverBehavior=h;f.make=a}),null);
__d("MessengerAbstractTextInputWithFocusReact.bs",["bs_curry","ReasonReact.bs","bs_js_primitive","AbstractTextInputReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").reducerComponent("MessengerAbstractTextInputWithFocusReact");function h(a,b){b[1][0][0]=a==null?0:[a];return 0}function i(a){a=a[0][0];if(a)return a[0].focusInput();else return 0}function j(a){a=a[0][0];if(a)return a[0].blurInput();else return 0}function k(a,c,d,e,f,k,l,m,n){__p&&__p();var o=function(a){if(c)return i(a);else return j(a)};return[g[0],g[1],g[2],g[3],function(a){return o(a[1])},function(a){return o(a[1][1])},g[6],g[7],function(c){return b("ReasonReact.bs").element(0,[b("bs_curry")._1(c[0],h)],b("AbstractTextInputReact.bs").make(a,d,e,f,k,l,m,[]))},function(){return[[0]]},g[10],function(a,b){return 0},g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return k(b("bs_js_primitive").null_undefined_to_opt(a.className),a.focused,a.maxLength,a.onChange,a.onFocus,a.onKeyDown,a.placeholder,b("bs_js_primitive").null_undefined_to_opt(a.value),[])});f.component=g;f.setInputRef=h;f.focus=i;f.blur=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerAddIconSVGReact.bs",["fbt","React","ReasonReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=g._("add to group"),i=b("ReasonReact.bs").statelessComponent("MessengerAddIconSVGReact");function j(a,c,d){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"-8 -8 48 48"},b("React").createElement("title",undefined,h),b("React").createElement("path",{clipRule:"evenodd",d:"M16,0 V32 M0,16 H32",fill:"none",fillRule:"evenodd",stroke:c,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.className,a.customColor,[])});f.addToGroup=h;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerGroupPollingCheckboxReact.bs",["cx","cssVar","Keys.bs","bs_curry","React","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerGroupPollingCheckboxReact");function j(a,c,d,e){var f=function(){return b("bs_curry")._1(d,!a)},g=function(c){if(c.keyCode===b("Keys.bs").space){c.preventDefault();return b("bs_curry")._1(d,!a)}else return 0},h=a?c:"rgba(0, 0, 0, 0.10)";return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){return b("React").cloneElement(b("React").createElement("div",{className:"_2m5p"+(a?" _2m5q":""),role:"checkbox",tabIndex:0,onKeyDown:g,onClick:f},b("React").createElement("span",{className:"_2m5r",style:{backgroundColor:c,borderColor:h}})),{"aria-checked":a})},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.checked,a.customColor,a.onToggle,[])});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("ScrollableAreaReact.bs",["ReasonReact.bs","bs_js_null_undefined","ScrollableArea.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("ScrollableArea.react"),{className:b("bs_js_null_undefined").fromOption(a),height:c},d)}f.make=a}),null);
__d("XMessengerGroupPollingCreatePollController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/group_polling/create_poll/",{})}),null);
__d("XUICloseButtonReact.bs",["ReasonReact.bs","bs_js_null_undefined","XUICloseButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g){var h;switch(d){case 0:h="small";break;case 1:h="medium";break;case 2:h="large";break}return b("ReasonReact.bs").wrapJsForReason(b("XUICloseButton.react"),{className:b("bs_js_null_undefined").fromOption(a),onClick:e,tooltip:b("bs_js_null_undefined").fromOption(f),shade:c?"dark":"light",size:h},g)}f.make=a}),null);
__d("MessengerGroupPollingCreatePollFlyoutReact.bs",["cx","fbt","Keys.bs","bs_block","bs_curry","React","Utils.bs","LinkReact.bs","bs_belt_Array","bs_caml_int32","ReasonReact.bs","AsyncRequest","bs_js_primitive","ScrollableAreaReact.bs","XUICloseButtonReact.bs","MessengerSpinnerReact.bs","MessengerAddIconSVGReact.bs","MessengerGroupPollingCheckboxReact.bs","MessengerAbstractTextInputWithFocusReact.bs","XMessengerGroupPollingCreatePollController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerGroupPollingCreatePollFlyoutReact");function j(a,c,d,e){__p&&__p();return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(e){__p&&__p();var f=e[1],g=f[2].length+1|0;g=b("bs_caml_int32").imul(30,g);g=Math.min(Math.max(g,75),200);var i=function(){__p&&__p();if(f[5])return 0;else{b("bs_curry")._1(e[3],3);var a=b("bs_belt_Array").keep(f[2],function(a){return a[0]!==0}),g=b("bs_belt_Array").map(a,function(a){return b("Utils.bs").$pipe$unknown(a[0],"")});a=b("bs_belt_Array").map(a,function(a){a=a[1];if(a)return 1;else return 0});var h=b("XMessengerGroupPollingCreatePollController").getURIBuilder().getURI();new(b("AsyncRequest"))(h).setMethod("POST").setData({question_text:b("Utils.bs").$pipe$unknown(f[1],""),target_id:c,option_text_array:g,option_is_selected_array:a}).setAllowCrossPageTransition(!0).setHandler(function(a){if(a.payload.status==="failure"&&a.payload.showUser===!0)return b("bs_curry")._1(e[3],b("bs_block").__(6,[a.payload.errorTitle,a.payload.errorMessage]));else return b("bs_curry")._1(d,0)}).send();return 0}},j=f[5];return b("React").createElement("div",{className:"_5jmp"},b("React").createElement("h1",{className:"_5jn1"},h._("Poll")),b("React").createElement("div",{className:"_5jmn"},b("Utils.bs").$pipe$unknown(f[3],"")),b("React").createElement("div",{className:"_5jmo"},b("Utils.bs").$pipe$unknown(f[4],"")),b("ReasonReact.bs").element(0,0,b("MessengerAbstractTextInputWithFocusReact.bs").make(["_9fw"],f[0][0],140,function(a){return b("bs_curry")._1(e[3],b("bs_block").__(0,[a.target.value]))},function(){return b("bs_curry")._1(e[3],0)},function(a){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();return b("bs_curry")._1(e[3],1)}else return 0},h._("Ask a question"),[b("Utils.bs").$pipe$unknown(f[1],"")],[])),b("ReasonReact.bs").element(0,0,b("ScrollableAreaReact.bs").make(["_5nkw"],g,[b("React").createElement("div",{className:"_5jn3"},b("ReasonReact.bs").createDomElement("div",{},b("bs_belt_Array").mapWithIndex(f[2],function(d,g){__p&&__p();var c=f[0][0],i=f[0][1];return b("React").createElement("div",{key:String(d),className:"_9fu"},b("ReasonReact.bs").element(0,0,b("MessengerGroupPollingCheckboxReact.bs").make(g[1],a,function(){return b("bs_curry")._1(e[3],b("bs_block").__(1,[d]))},[])),b("ReasonReact.bs").element(0,0,b("MessengerAbstractTextInputWithFocusReact.bs").make(["_9fv"],c||!i?!1:i[0]===d,140,function(a){return b("bs_curry")._1(e[3],b("bs_block").__(2,[a.target.value,d]))},function(){return b("bs_curry")._1(e[3],b("bs_block").__(4,[d]))},function(a){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();a=d+1|0;if(a===f[2].length)return b("bs_curry")._1(e[3],2);else return b("bs_curry")._1(e[3],b("bs_block").__(3,[a]))}else return 0},h._("Add an option"),[b("Utils.bs").$pipe$unknown(g[0],"")],[])),b("ReasonReact.bs").element(0,0,b("XUICloseButtonReact.bs").make(["_4y_1"],0,0,function(){return b("bs_curry")._1(e[3],b("bs_block").__(5,[d]))},[h._("Remove")],[])))})),b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,0,0,0,0,0,0,0,0,[function(){return b("bs_curry")._1(e[3],2)}],0,0,["button"],0,[0],0,0,[b("ReasonReact.bs").element(0,0,b("MessengerAddIconSVGReact.bs").make("_5n1-",a,[]))])))])),b("React").createElement("div",{className:"_5jn4"+(f[5]?" _2zwp":""),role:"button",style:{backgroundColor:a},tabIndex:0,onKeyUp:function(a){a.preventDefault();if(a.keyCode===b("Keys.bs").$$return)return i(0);else return 0},onClick:i},j?b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,0,0,[])):h._("Create Poll")))},function(){return[[!0,[0]],0,[[0,!1]],0,0,!1]},i[10],function(a,c){__p&&__p();var d=0;if(typeof a==="number")switch(a){case 0:return b("bs_block").__(0,[[[!0,[0]],c[1],c[2],c[3],c[4],c[5]]]);case 1:return b("bs_block").__(0,[[[!1,[0]],c[1],c[2],c[3],c[4],c[5]]]);case 2:var e=b("bs_belt_Array").concat(c[2],[[0,!1]]);return b("bs_block").__(0,[[[!1,[e.length-1|0]],c[1],e,c[3],c[4],c[5]]]);case 3:return b("bs_block").__(0,[[c[0],c[1],c[2],c[3],c[4],!0]])}else switch(a.tag|0){case 0:return b("bs_block").__(0,[[[!0,[0]],[a[0]],c[2],0,0,c[5]]]);case 1:var f=a[0];e=b("bs_belt_Array").mapWithIndex(c[2],function(a,b){if(a===f)return[b[0],!b[1]];else return b});return b("bs_block").__(0,[[[!1,0],c[1],e,c[3],c[4],c[5]]]);case 2:var g=a[1],h=a[0];e=b("bs_belt_Array").mapWithIndex(c[2],function(a,b){if(a===g)return[[h],b[1]];else return b});return b("bs_block").__(0,[[[!1,[g]],c[1],e,0,0,c[5]]]);case 3:case 4:d=1;break;case 5:var i=a[0];e=c[2].filter(function(a,b){return b!==i});var j=e.length===0,k=c[0][1];if(k&&!j){k=k[0];var l=k<i;l=l?[k]:[k-1|0]}else l=0;return b("bs_block").__(0,[[[j,l],c[1],e,c[3],c[4],c[5]]]);case 6:return b("bs_block").__(0,[[c[0],c[1],c[2],b("bs_js_primitive").null_undefined_to_opt(a[0]),b("bs_js_primitive").null_undefined_to_opt(a[1]),!1]])}if(d===1)return b("bs_block").__(0,[[[!1,[a[0]]],c[1],c[2],c[3],c[4],c[5]]])},i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.customColor,a.threadFBID,a.onHideDialog,[])});c=b("Utils.bs").$pipe$unknown;d=30;e=75;g=200;f.$pipe$unknown=c;f.flyoutOptionRowHeight=d;f.minimumFlyoutScrollareaHeight=e;f.maximumFlyoutScrollareaHeight=g;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("XMessengerGroupPollingUpdateVoteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/group_polling/update_vote/",{})}),null);
__d("MessengerGroupPollingFlyoutReact.bs",["cx","ix","fbt","FBID.bs","Keys.bs","bs_block","bs_curry","React","Utils.bs","LinkReact.bs","bs_belt_Array","bs_caml_int32","MercuryIDs","CurrentUser","ReasonReact.bs","AsyncRequest","bs_js_primitive","FacepileRounded.bs","ScrollableAreaReact.bs","MessengerEnvironment","MessengerParticipants.bs","MessengerSpinnerReact.bs","MessengerAddIconSVGReact.bs","MessengerTextWithEntitiesReact.bs","MessengerGroupPollingCheckboxReact.bs","MessengerAbstractTextInputWithFocusReact.bs","XMessengerGroupPollingUpdateVoteController"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,c,d){__p&&__p();if(d){var e=b("CurrentUser").getID();d=b("bs_belt_Array").keep(c,function(a){return a!==e});d=b("bs_belt_Array").concat([e],d)}else d=c;return b("bs_belt_Array").mapWithIndex(d,function(c,d){var e=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(d));if(e==null)return{image_src:h("98939"),name:"Facebook User"};else if(c<a)return{image_src:b("Utils.bs").$pipe$unknown(b("bs_js_primitive").null_undefined_to_opt(e.image_src),h("98939")),name:e.name};else return{image_src:d,name:e.name}})}function k(a,c,d,e,f){var g=d===3;g=g?3:2;var h=d===3;return b("ReasonReact.bs").element(0,0,b("FacepileRounded.bs").make(a,[1],[1],c,g,j(g,e,f),h?0:d-2|0,[]))}var l=b("ReasonReact.bs").reducerComponent("MessengerGroupPollingFlyoutReact");function m(a,c,d,e,f,g){__p&&__p();return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],function(g){__p&&__p();var h=g[1],j=b("MessengerEnvironment").messengerui;if(e){var l=e[0],m=j?24:16,n=l.length+h[4].length|0;n=b("bs_caml_int32").imul(j?36:28,n);n=Math.min(Math.max(n,50),200);l=b("bs_belt_Array").map(l,function(c){return b("React").createElement("div",{key:c.id,className:"_1mqz"+(j?"":" _5k8c")},b("ReasonReact.bs").element(0,0,b("MessengerGroupPollingCheckboxReact.bs").make(b("bs_belt_Array").some(h[3],function(a){return a===c.id}),a,function(){return b("bs_curry")._1(g[3],b("bs_block").__(3,[c.id]))},[])),b("React").createElement("div",{className:"_2f83"+(j?"":" _vhn")},b("React").createElement("div",{className:"_1mq-"+(j?"":" _2a5a")},b("ReasonReact.bs").element(0,0,b("MessengerTextWithEntitiesReact.bs").make([!0],[!0],[c.text],[]))),k("_4ic7"+(j?"":" _8kg"),m,c.voters.count,c.voters.edges.map(function(a){return a.node.id}),b("Utils.bs").isSomeTrue(b("bs_js_primitive").null_undefined_to_opt(c.viewer_has_voted)))))});var o=b("bs_belt_Array").mapWithIndex(h[4],function(d,e){__p&&__p();var c=h[0];return b("React").createElement("div",{key:String(d),className:"_1mqz"+(j?"":" _5k8c")},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,0,0,0,0,0,0,0,0,[function(){return b("bs_curry")._1(g[3],0)}],0,0,["button"],0,[0],0,0,[b("ReasonReact.bs").element(0,0,b("MessengerAddIconSVGReact.bs").make("_8i7",a,[]))])),b("ReasonReact.bs").element(0,0,b("MessengerAbstractTextInputWithFocusReact.bs").make(["_8i5"],c?c[0]===d:!1,140,function(a){return b("bs_curry")._1(g[3],b("bs_block").__(2,[d,a.target.value]))},function(){return b("bs_curry")._1(g[3],b("bs_block").__(1,[d]))},function(a){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();a=d+1|0;if(a===h[4].length)return b("bs_curry")._1(g[3],0);else return b("bs_curry")._1(g[3],b("bs_block").__(1,[a]))}else return 0},i._("Add an option"),[b("Utils.bs").$pipe$unknown(e,"")],[])))}),p=h[5];return b("React").createElement("div",{className:"_1mq_"+(j?"":" _1mr-")},b("React").createElement("div",{className:"_1mr_"},b("ReasonReact.bs").element(0,0,b("MessengerTextWithEntitiesReact.bs").make([!0],[!0],[d],[]))),b("React").createElement("div",{className:"_3lpw"},b("React").createElement("div",{className:"_3lpx"},b("Utils.bs").$pipe$unknown(h[1],"")),b("React").createElement("div",{className:"_3lpy"},b("Utils.bs").$pipe$unknown(h[2],""))),b("ReasonReact.bs").element(0,0,b("ScrollableAreaReact.bs").make(0,n,[b("React").createElement("div",{className:"_1ms0"},l,o)])),b("React").createElement("div",{className:"_1ms1"+(h[5]?" _m1v":""),role:"button",style:{backgroundColor:a},tabIndex:0,onKeyUp:function(a){a.preventDefault();if(a.keyCode===b("Keys.bs").$$return)return b("bs_curry")._1(g[3],b("bs_block").__(0,[c,f]));else return 0},onClick:function(){return b("bs_curry")._1(g[3],b("bs_block").__(0,[c,f]))}},p?b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,0,0,[])):i._("Submit")))}else return b("React").createElement("div",{className:"_8bt"+(j?"":" _5il4")},b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,["gray"],0,[])))},function(){return[[0],0,0,e?b("bs_belt_Array").keepMap(e[0],function(a){var b=a.viewer_has_voted;if(!(b==null)&&b)return[a.id];else return 0}):[],[0],!1]},l[10],function(d,e){__p&&__p();if(typeof d==="number"){var f=b("bs_belt_Array").concat(e[4],[0]);return b("bs_block").__(0,[[[f.length-1|0],e[1],e[2],e[3],f,e[5]]])}else switch(d.tag|0){case 0:if(e[5])return 0;else{var c=d[1],a=d[0];return b("bs_block").__(2,[[e[0],e[1],e[2],e[3],e[4],!0],function(f){var d=b("bs_belt_Array").keepMap(f[1][4],function(a){return a}),g=b("XMessengerGroupPollingUpdateVoteController").getURIBuilder().getURI();new(b("AsyncRequest"))(g).setMethod("POST").setData({question_id:b("FBID.bs").ofStringExn(a),selected_options:b("bs_belt_Array").map(e[3],b("FBID.bs").ofStringExn),new_options:d}).setAllowCrossPageTransition(!0).setHandler(function(a){if(a.payload.status==="failure"&&a.payload.showUser===!0)return b("bs_curry")._1(f[3],b("bs_block").__(4,[a.payload.errorTitle,a.payload.errorMessage]));else return b("bs_curry")._1(c,0)}).send();return 0}])}case 1:return b("bs_block").__(0,[[[d[0]],e[1],e[2],e[3],e[4],e[5]]]);case 2:var g=d[1],h=d[0];f=b("bs_belt_Array").mapWithIndex(e[4],function(a,b){a=a===h;if(a)return[g];else return b});return b("bs_block").__(0,[[[h],0,0,e[3],f,e[5]]]);case 3:var i=d[0];f=b("bs_belt_Array").some(e[3],function(a){return a===i});f=f?b("bs_belt_Array").keep(e[3],function(a){return a!==i}):b("bs_belt_Array").concat(e[3],[i]);return b("bs_block").__(0,[[0,e[1],e[2],f,e[4],e[5]]]);case 4:return b("bs_block").__(0,[[e[0],[d[0]],[d[1]],e[3],e[4],!1]])}},l[12]]}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return m(a.customColor,a.questionID,a.questionText,b("bs_js_primitive").null_undefined_to_opt(a.options),a.onSubmitHandler,[])});c=b("Utils.bs").$pipe$unknown;d=16;e=24;g=28;var n=36,o=50,p=200,q=140;f.$pipe$unknown=c;f.facebookFacepileImageSize=d;f.messengerFacepileImageSize=e;f.facebookOptionRowHeight=g;f.messengerOptionRowHeight=n;f.minimumFlyoutScrollareaHeight=o;f.maximumFlyoutScrollareaHeight=p;f.pollOptionMaxLength=q;f.getProfilePictures=j;f.renderVoterFacepiles=k;f.component=l;f.make=m;f.jsComponent=a}),null);