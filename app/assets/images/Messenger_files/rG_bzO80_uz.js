if (self.CavalryLogger) { CavalryLogger.start_js(["jMHDP"]); }

__d("FBStoriesInteractiveLoggingHelper",["MarauderLogger"],(function(a,b,c,d,e,f){"use strict";var g="direct_actions";a={logOpenStoryMediaPermalink:function(a){b("MarauderLogger").log("open_story_media_permalink",g,a)},logStoryInteractiveItemClick:function(a){b("MarauderLogger").log("story_interactive_item_click",g,a)}};e.exports=a}),null);
__d("CameraPostAppAttribution.react",["cx","FBStoriesInteractiveLoggingHelper","Image.react","Link.react","React","TextWithEntities.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(a,c){__p&&__p();if(c.entity&&c.entity.url!==undefined&&c.entity.url!==null)return b("React").createElement(b("Link.react"),{href:c.entity,onClick:function(){return this.linkClicked(c.entity.url)}.bind(this),onMouseUp:function(a){return this.stopPropagation(a)}.bind(this),onMouseDown:function(a){return this.stopPropagation(a)}.bind(this),target:"_blank"},a);if(c.entity&&c.entity.url===undefined)return b("React").createElement(b("Link.react"),{href:c.entity,onClick:function(){return this.linkClicked(c.entity)}.bind(this),onMouseUp:function(a){return this.stopPropagation(a)}.bind(this),onMouseDown:function(a){return this.stopPropagation(a)}.bind(this),target:"_blank"},a);return c.entity_with_image?b("React").createElement(b("Image.react"),{className:"_4qqb",src:c.entity_with_image.image.uri,width:c.entity_with_image.image.width/c.entity_with_image.image.scale,height:c.entity_with_image.image.height/c.entity_with_image.image.scale}):a}.bind(this),c}a.prototype.linkClicked=function(a){b("FBStoriesInteractiveLoggingHelper").logOpenStoryMediaPermalink({action_detail:"story_link_attribution_click",link_url:a,thread_id:this.props.currentThreadID})};a.prototype.stopPropagation=function(a){this.props.stopPropagationOnClick&&a.stopPropagation()};a.prototype.render=function(){return b("React").createElement(b("TextWithEntities.react"),{className:"_4qqc",imageRanges:this.props.postStoryAttribution.image_ranges,interpolator:this.$1,ranges:this.props.postStoryAttribution.ranges,text:this.props.postStoryAttribution.text})};e.exports=a}),null);
__d("LiveTimer",["csx","cx","fbt","CSS","DOM","ServerTime","TimeSlice","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=1e3,k=60,l=3600;a=43200;var m=86400,n=60,o=24,p=7,q=365,r=6e4,s=function(a){a.text===""&&(a.text=null);return a},t={restart:function(a){b("ServerTime").update(a*1e3),this.updateTimeStamps()},getApproximateServerTime:function(){return b("ServerTime").get()},getServerTimeOffset:function(){return-1*b("ServerTime").getSkew()},updateTimeStamps:function(){this.timestamps=b("DOM").scry(document.body,"abbr.livetimestamp"),this.startLoop(r)},addTimeStamps:function(a){__p&&__p();if(!a)return;this.timestamps=this.timestamps||[];if(b("DOM").isNodeOfType(a,"abbr")&&b("CSS").hasClass(a,"livetimestamp"))this.timestamps.push(a);else{a=b("DOM").scry(a,"abbr.livetimestamp");for(var c=0;c<a.length;++c)this.timestamps.push(a[c])}this.startLoop(0)},removeTimestamp:function(a){if(!this.timestamps||!a)return;a=this.timestamps.indexOf(a);a>-1&&this.timestamps.splice(a,1)},startLoop:function(a){this.stop(),this.createTimeout(a)},createTimeout:function(a){this.timeout=b("setTimeoutAcrossTransitions")(b("TimeSlice").guard(function(){this.loop()}.bind(this),"LiveTimer.loop",{propagationType:b("TimeSlice").PropagationType.EXECUTION}),a)},stop:function(){b("clearTimeout")(this.timeout)},loop:function(a){__p&&__p();a&&this.updateTimeStamps();var c=Math.floor(b("ServerTime").get()/j),d=-1;this.timestamps&&this.timestamps.forEach(function(a){__p&&__p();var e=a.getAttribute("data-utime"),f=a.getAttribute("data-shorten"),g=a.getAttribute("data-minimize");e=this.renderRelativeTime(c,e,f,g);if(e.text){f={"class":"timestampContent"};g=b("DOM").scry(a,".timestampContent")[0];g=g&&g.getAttribute("id");g&&(f.id=g);b("DOM").setContent(a,b("DOM").create("span",f,e.text))}e.next!=-1&&(e.next<d||d==-1)&&(d=e.next)}.bind(this));if(d!=-1){a=Math.max(r,d*j);this.createTimeout(a)}},renderRelativeTime:function(a,b,c,d,e){__p&&__p();var f={text:"",next:-1};if(a-b>m&&!e)return f;e=a-b;a=Math.floor(e/k);b=Math.floor(a/n);var g=Math.floor(b/o),h=Math.floor(g/p),j=Math.floor(g/q);if(a<1){d?(f.text=i._("1m"),f.next=20-e%20):c?(f.text=i._("Just now"),f.next=20-e%20):(f.text=i._("a few seconds ago"),f.next=k-e%k);return f}if(b<1){d?f.text=i._({"*":"{number}m"},[i._param("number",a,[0])]):c&&a==1?f.text=i._("1 min"):c?f.text=i._({"*":"{number} mins"},[i._param("number",a,[0])]):f.text=a==1?i._("about a minute ago"):i._({"*":"{number} minutes ago"},[i._param("number",a,[0])]);f.next=k-e%k;return f}b<11&&(f.next=l-e%l);if(b<24){d?f.text=i._({"*":"{number}h"},[i._param("number",b,[0])]):c&&b==1?f.text=i._("1 hr"):c?f.text=i._({"*":"{number} hrs"},[i._param("number",b,[0])]):f.text=b==1?i._("about an hour ago"):i._({"*":"{number} hours ago"},[i._param("number",b,[0])]);return f}if(g<7){d&&(f.text=i._({"*":"{number}d"},[i._param("number",g,[0])]));return f}if(g>=7&&g<365){d&&(f.text=i._({"*":"{number}w"},[i._param("number",h,[0])]));return f}d&&(f.text=i._({"*":"{number}y"},[i._param("number",j,[0])]));return f},renderRelativeTimeToServer:function(a,c,d,e){return this.renderRelativeTime(Math.floor(b("ServerTime").get()/j),a,c,d,e)},render:function(a,b,c,d){d===void 0&&(d=!1);return s(t.renderRelativeTime(a,b,c==="short",c==="minimal",d))},renderNow:function(a,b,c){c===void 0&&(c=!1);return s(t.renderRelativeTimeToServer(a,b==="short",b==="minimal",c))},CONSTS:{MS_IN_SEC:j,SEC_IN_MIN:k,SEC_IN_HOUR:l,SEC_IN_12_HOUR:a,SEC_IN_24_HOUR:m,MIN_IN_HOUR:n,HEARTBEAT:r}};e.exports=t}),null);
__d("Timestamp.react",["LiveTimer","React","joinClasses"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.componentDidMount=function(){"use strict";this.props.autoUpdate&&this.$1&&b("LiveTimer").addTimeStamps(this.$1)};a.prototype.componentDidUpdate=function(a,c){"use strict";this.props.autoUpdate&&this.props.time!==a.time&&b("LiveTimer").loop()};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&b("LiveTimer").removeTimestamp(this.$1)};a.prototype.render=function(){"use strict";var a=b("LiveTimer").renderRelativeTimeToServer(this.props.time,this.props.shorten,this.props.minimize,this.props.useLargerTimeUnits),c=this.props,d=c.shorten,e=c.time,f=c.text,g=c.verbose;c=babelHelpers.objectWithoutProperties(c,["shorten","time","text","verbose"]);delete c.autoUpdate;return b("React").createElement("abbr",babelHelpers["extends"]({},c,{className:b("joinClasses")(this.props.className,"livetimestamp"),title:g,"data-utime":e,"data-minimize":this.props.minimize?!0:null,"data-shorten":d?!0:null,ref:function(a){return this.$1=a}.bind(this)}),a.text.toString()||f)};function a(){"use strict";g.apply(this,arguments)}a.propTypes={autoUpdate:c.bool};a.defaultProps={autoUpdate:!1};e.exports=a}),null);
__d("MessengerMontageClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerMontageClientLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerMontageClientLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerMontageClientLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setContentType=function(a){this.$1.content_type=a;return this};a.prototype.setCurrentPosition=function(a){this.$1.current_position=a;return this};a.prototype.setEntryPoint=function(a){this.$1.entry_point=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setExitAction=function(a){this.$1.exit_action=a;return this};a.prototype.setMessageDuration=function(a){this.$1.message_duration=a;return this};a.prototype.setMessageSource=function(a){this.$1.message_source=a;return this};a.prototype.setMessageStartTime=function(a){this.$1.message_start_time=a;return this};a.prototype.setMid=function(a){this.$1.mid=a;return this};a.prototype.setOwnerID=function(a){this.$1.owner_id=a;return this};a.prototype.setQueueType=function(a){this.$1.queue_type=a;return this};a.prototype.setTotalQueue=function(a){this.$1.total_queue=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={content_type:!0,current_position:!0,entry_point:!0,event:!0,exit_action:!0,message_duration:!0,message_source:!0,message_start_time:!0,mid:!0,owner_id:!0,queue_type:!0,total_queue:!0,vc:!0};e.exports=a}),null);
__d("MessengerLogo.react",["React"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.color;a=a.size;return b("React").createElement("div",{style:{width:a,height:a}},b("React").createElement("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},b("React").createElement("g",{transform:"scale(0.02)",fill:"none"},b("React").createElement("path",{fill:c,fillRule:"evenodd",d:"M399.494079,0.00274415094 C178.859771,0.00274415094 0.000304955527,167.227237 0.000304955527,373.508113 C0.000304955527,490.856138 57.8859466,595.562774 148.414028,664.036455 L148.414028,806.983343 L284.747446,731.373854 C321.092046,741.545506 359.609962,747.013481 399.494079,747.013481 C620.128386,747.013481 798.987853,579.788988 798.987853,373.508113 C798.987853,167.227237 620.128386,0.00274415094 399.494079,0.00274415094 M441.568386,500.879189L338.245388 393.558495 139.264956 503.581669 357.419975 272.117619 460.742973 379.437297 659.722389 269.414122z"}))))};e.exports=a}),null);
__d("MontageProgressBar.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.activeIndex,d=a.count;a=a.progressPercent;var e=[];for(var f=0;f<d;f++)e.push(b("React").createElement("div",{key:f,className:"_4wd4"+(f===c?" _4wd6":"")},f===c?b("React").createElement("div",{className:"_4wd4 _4wd7",style:{width:a+"%"}}):null));return b("React").createElement("div",{className:"_4wd8"},e)};e.exports=a}),null);
__d("MontageMessageReactionsWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1428286587248085"};c.getQueryID=function(){"use strict";return"138011586785590"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MontageReplyAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DOODLE:"DOODLE",MESSAGE_REACTION:"MESSAGE_REACTION",REPLY_TO_STORY_SHARE:"REPLY_TO_STORY_SHARE"})}),null);
__d("MontageReplyComposer.react",["React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){return null};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MontageReplyLWRUtil",["EmojiFormat.bs"],(function(a,b,c,d,e,f){"use strict";a=[[128525],[128518],[128558],[128546],[128544]];e.exports={defaultReactions:a.map(b("EmojiFormat.bs").codeArrayToUnicode)}}),null);
__d("MontageReplyLWR.react",["cx","Bootloader","DOM","DOMContainer.react","MessengerTextWithEmoticons.react","MontageReplyLWRUtil","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={animations:{}},this.$3=function(event){this.$1[event.currentTarget.tabIndex].offsets.push(Date.now()-this.props.startedTime)}.bind(this),b}a.prototype.UNSAFE_componentWillMount=function(){this.$2()};a.prototype.componentDidMount=function(){this.loadAnimation()};a.prototype.render=function(){return b("React").createElement("div",{className:"_60yi"},b("MontageReplyLWRUtil").defaultReactions.map(function(a,c){return b("React").createElement("span",{className:"_3bih",key:a,onClick:this.$3,onMouseUp:this.$4,onMouseDown:this.$4,role:"button",tabIndex:c},this.state.animations[a]?b("React").createElement(b("DOMContainer.react"),null,this.state.animations[a]):b("React").createElement(b("MessengerTextWithEmoticons.react"),{customSize:!0,renderEmoticons:!0,renderEmoji:!0,text:a}))}.bind(this)))};a.prototype.componentWillUnmount=function(){var a=this.$5();a&&this.props.sendReply(a,this.$1)};a.prototype.$2=function(){this.$1=[],b("MontageReplyLWRUtil").defaultReactions.forEach(function(a){this.$1.push({reaction:a,offsets:[]})}.bind(this))};a.prototype.loadAnimation=function(){b("Bootloader").loadModules(["bodymovin","MessengerReactionEmojiLove","MessengerReactionEmojiHaha","MessengerReactionEmojiWow","MessengerReactionEmojiSad","MessengerReactionEmojiAngry"],function(a){var c=b("MontageReplyLWRUtil").defaultReactions,d={};for(var e=0;e<c.length;e++){var f=c[e];d[f]=this.$6(a,e+1<1||arguments.length<=e+1?undefined:arguments[e+1])}this.setState({animations:d})}.bind(this),"MontageReplyLWR.react")};a.prototype.$6=function(a,c){var d=b("DOM").create("span");a.loadAnimation({wrapper:d,animationData:c,renderer:"svg",loop:!0,autoplay:!0});return d};a.prototype.$4=function(event){event.stopPropagation()};a.prototype.$5=function(){var a="";for(var b=this.$1.length-1;b>=0;b--)this.$1[b].offsets.length>0?a+=this.$1[b].reaction+" ":this.$1.splice(b,1);return a};e.exports=a}),null);
__d("MontageReplyContainer.react",["cx","CurrentUser","MercuryMessageActions","MercuryMessageObject","MercuryTriodeSourceUtil","MontageMessageReactionsWebGraphQLMutation","MontageReplyAction","MontageReplyComposer.react","MontageReplyLWR.react","React","XAsyncRequest"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$4=function(a,c){a=this.$2.constructUserGeneratedMessageObject(a,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),this.props.threadID);a.montage_reply_data={message_id:this.props.montageMessageID,reply_action:b("MontageReplyAction").MESSAGE_REACTION};this.$1.send(a);if(c){a=b("MontageMessageReactionsWebGraphQLMutation").getURI({actor_id:this.$3,message_id:this.props.montageMessageID,actions:c});new(b("XAsyncRequest"))(a).setMethod("POST").send()}}.bind(this),this.$3=b("CurrentUser").getID(),this.$1=b("MercuryMessageActions").getForFBID(this.$3),this.$2=b("MercuryMessageObject").getForFBID(this.$3)}a.prototype.render=function(){return b("React").createElement("div",{className:"_2x5j"},b("React").createElement(b("MontageReplyComposer.react"),null),b("React").createElement(b("MontageReplyLWR.react"),{sendReply:this.$4,startedTime:this.props.startedTime}))};e.exports=a}),null);
__d("NFXStoryLocation",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REJECT_FRIEND_REQUEST:"reject_friend_request",FEED:"feed",VIDEO_LIST_CHANNEL:"video_list_channel",VIDEO_PLAYLIST_CHANNEL:"video_playlist_channel",WATCHED_VIDEOS_CHANNEL:"watched_videos_channel",EXPLORE_FEED:"explore_feed",PROFILE_SELF:"profile_self",PROFILE_SOMEONE_ELSE:"profile_someone_else",FNRP_AUTOMATED_SCRIPT:"fnrp_automated_script",PAGE:"page",PAGE_SHOP:"page_shop",PERMALINK:"permalink",PHOTO_VIEWER:"photo_viewer",PAGE_REVIEW:"page_review",POPULAR_AT:"popular_at",CURATED_SECTION:"curated_section",GROUP:"group",SUGGESTED_GROUP:"suggested_group",EVENT:"event",SEARCH:"search",UNKNOWN:"unknown",PROFILE_REPORTING_FLOW:"profile_reporting_flow",HEAD_PUBLISHER_APP_MENTIONS_FEED:"head_publisher_app_mentions_feed",MESSENGER:"messenger",MESSENGER_MONTAGE_VIEWER:"messenger_montage_viewer",FUNDRAISER_PAGE_FEED:"fundraiser_page_feed",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",CRISIS_FEED:"crisis_feed",SETTINGS:"settings",LIVE_MAP:"live_map",LIVING_ROOM:"living_room",JOB_BROWSER:"job_browser",JOB_DETAIL_VIEW:"job_detail_view",JOB_RECOMMENDATION_UNIT:"job_recommendation_unit",CONTENT_OVERLAY:"content_overlay",CHEVRON:"chevron",CHEVRON_GLYPH:"glyph",VIDEO_INLINE_PIVOT:"video_inline_pivot",OBJECTIONABLE_CONTENT_FILTER:"objectionable_content_filter",VIEW_PAGE_ADS:"view_page_ads",POLITICAL_ARCHIVE_ADS:"political_archive_ads",FEEDBACK_COMMENT:"feedback_comment",LIGHTWEIGHT_NEGATIVE_FEEDBACK:"lightweight_negative_feedback",LIGHTWEIGHT_POSITIVE_FEEDBACK:"lightweight_positive_feedback",MESSENGER_THREAD_ACTION_PANEL:"messenger_thread_action_panel",MESSENGER_CONTACT_DETAILS:"messenger_contact_details",MESSENGER_DIRECT_THREAD_DETAILS:"messenger_direct_thread_details",MESSENGER_GROUP_THREAD_DETAILS:"messenger_group_thread_details",MESSENGER_DIRECT_THREAD_MESSAGE_REQUEST:"messenger_direct_thread_message_request",MESSENGER_GROUP_THREAD_MESSAGE_REQUEST:"messenger_group_thread_message_request",MESSENGER_DIRECT_THREAD_FILTERED_REQUEST:"messenger_direct_thread_filtered_request",MESSENGER_GROUP_THREAD_FILTERED_REQUEST:"messenger_group_thread_filtered_request",TICKER:"ticker",FULLSCREEN_VIDEO_PLAYER:"fullscreen_video_player",ACTIVITY_LOG_FACE_ALERTS:"face_alerts",HELP_COMMUNITY:"help_community",SUPPORT_INBOX:"support_inbox",APP_INVITES_FEED:"app_invites_feed",CHAINING_FEED:"chaining_feed",SOCIAL_REPORTING_REDIRECT:"social_reporting_redirect",WWW_CHAT_HEAD:"www_chat_head",THROWBACK:"throwback",POST_TO_PAGE:"post_to_page",ACTIVITY_LOG:"activity_log",VIDEO_CHANNEL:"video_channel",VIDEO_CHANNELS:"video_channels",VIDEO_HOME:"video_home",REVIEWS_FEED:"reviews_feed",BACKSTAGE:"backstage",MESSENGER_ENCRYPTED_THREAD:"messenger_encrypted_thread",LOCAL_NEWS:"local_news",PLANNED_VIEWING_CURATED:"planned_viewing_curated",UI_EXPLORER_EXAMPLE:"ui_explorer_example",SERP_CONSOLE:"serp_console",MARKETPLACE_BSG_PROFILE:"marketplace_bsg_profile",MARKETPLACE_PDP:"marketplace_pdp",MARKETPLACE_PDP_SELLER:"marketplace_pdp_seller",MARKETPLACE_PROFILE:"marketplace_profile",MARKETPLACE_PROFILE_BUYER:"marketplace_profile_buyer",MARKETPLACE_PROFILE_SELLER:"marketplace_profile_seller",MARKETPLACE_RATING_CONFIRMATION:"marketplace_rating_confirmation",MARKETPLACE_RATING_CONFIRMATION_BUYER:"marketplace_rating_confirmation_buyer",MARKETPLACE_RATING_CONFIRMATION_SELLER:"marketplace_rating_confirmation_seller",MARKETPLACE_RATING_FLOW:"marketplace_rating_flow",MARKETPLACE_RATING_FLOW_BUYER:"marketplace_rating_flow_buyer",MARKETPLACE_RATING_FLOW_SELLER:"marketplace_rating_flow_seller",MARKETPLACE_THREAD:"marketplace_thread",MARKETPLACE_THREAD_BUYER:"marketplace_thread_buyer",MARKETPLACE_THREAD_SELLER:"marketplace_thread_seller",MARKETPLACE_MESSENGER_REPORT_BUYER:"marketplace_messenger_report_buyer",MARKETPLACE_MESSENGER_REPORT_SELLER:"marketplace_messenger_report_seller",MARKETPLACE_SHOP_PDP:"marketplace_shop_pdp",MARKETPLACE_SHOP_PDP_SELLER:"marketplace_shop_pdp_seller",POLITICAL_ISSUE_MODULE:"political_issue_module",ELECTION_HUB:"election_hub",DIRECT_MESSAGING:"direct_messaging",CAMERA_MEDIA_EFFECT:"camera_media_effect",PROFILE_DEPRECATED:"profile",TIMELINE_DEPRECATED:"timeline",BREAKUP_FLOW:"breakup_flow",ASYNC_TASK_DO_NOT_USE:"async",INSTANT_ARTICLES:"instant_articles",INSTANT_ARTICLE_WEBVIEW_AD:"instant_article_webview_ad",INSTANT_ARTICLE_NATIVE_AD:"instant_article_native_ad",IN_APP_BROWSER:"in_app_browser",INSTREAM_VIDEO:"instream_video",TOPIC_PAGE:"topic_page",GAMES_FEED:"games_feed",TAG_QUARANTINE:"tag_qurantine",STONEHENGE_CONSUMPTION:"stonehenge_consumption",ARTICLE_CONTEXT:"article_context",INTEGRITY_CONTEXT:"integrity_context",PROFILE_FRAME_DISCOVERY:"profile_frame_discovery",QUICK_PROMOTION:"quick_promotion",WOODHENGE_EXCLUSIVE_FEED:"woodhenge_exclusive_feed",AUDIENCE_INSIGHTS:"audience_insights",PROJECT_NEO:"project_neo",COMPASSION_RESOURCES:"compassion_resources",FOX_FEED:"fox_feed",FOX_CHEVRON:"fox_chevron",HIGHLIGHTS_UNIT:"highlights_unit",PAGE_SURFACE_RECOMMENDATIONS:"page_surface_recommendations",SOCIAL_LEARNING_GROUP_UNITS_LIST:"social_learning_group_units_list",PREVIEW_DIALOG:"preview_dialog",STORY:"story",CREATOR_APP_INSPIRATION_FEED:"creator_app_inspiration_feed",SCHOOL_COMMUNITY:"school_community",AGORA:"agora",DITTO_HASHTAG_FEED:"ditto_hashtag_feed"})}),null);
__d("XRapidReportingMessageDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/rapid_report/message/",{message_id:{type:"String",required:!0},story_location:{type:"String",required:!0}})}),null);
__d("MontageCard.react",["cx","fbt","AsyncRequest","CameraPostAppAttribution.react","CssBackgroundImage.react","CurrentUser","Link.react","MercuryConfig","MercuryIDs","MessengerMenu.react","MessengerPopoverMenu.react","MontageProgressBar.react","MontageReplyContainer.react","NFXStoryLocation","React","RelayClassic_DEPRECATED","Timestamp.react","XRapidReportingMessageDialogController","react-relay/classic/query/RelayQL"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerMenu.react").Item;c=b("React").PropTypes;var k=function(a){return a.stopPropagation()};d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={progressPercent:0,startedTime:Date.now()},this.$6=function(){var a;a=(a=this.props)!=null?(a=a.message)!=null?a.message_id:a:a;if(a){a=b("XRapidReportingMessageDialogController").getURIBuilder().setString("message_id",a).setString("story_location",b("NFXStoryLocation").MESSENGER_MONTAGE_VIEWER).getURI();a=new(b("AsyncRequest"))().setURI(a);a.send()}}.bind(this),this.$1=function(a){a!==this.state.progressPercent&&this.setState({progressPercent:a})}.bind(this),this.$2=function(a){this.setState({startedTime:a})}.bind(this),c}a.prototype.render=function(){var a=this.props,c=a.active,d=a.activeIndex,e=a.count;a=a.message;if(!a)return null;a=a.message_sender.messaging_actor;var f=b("React").Children.map(this.props.children,function(a){return b("React").cloneElement(a,{onProgress:this.$1,onStarted:this.$2})}.bind(this));return b("React").createElement("div",{className:"_5uag _q38",style:{zIndex:c?1:undefined}},b("React").createElement("div",{className:"_3avs"},f),b("React").createElement("div",{className:"_5uag _1pwf"},b("React").createElement(b("MontageProgressBar.react"),{activeIndex:d,count:e,progressPercent:this.state.progressPercent}),b("React").createElement("div",{className:"_1pwg"},b("React").createElement(b("CssBackgroundImage.react"),{className:"_3cx4",imageURI:a.profile_picture.uri}),b("React").createElement("div",{className:"_1pwn"},b("React").createElement("span",null,a.name),this.$3()),this.$4(),b("React").createElement(b("MessengerPopoverMenu.react"),{className:"_47gp",menu:this.$5()},b("React").createElement(b("Link.react"),{"aria-haspopup":"true","aria-label":h._("Message Options"),className:"_47gq",onMouseUp:k,onMouseDown:k,role:"button"})))))};a.prototype.$5=function(){var a=b("React").createElement(b("MessengerMenu.react"),null,b("React").createElement(j,{label:h._("Report"),onclick:this.$6}));return a};a.prototype.$4=function(){var a,c=this.props.message?this.props.message.message_id:"",d=b("CurrentUser").getID();a=(a=this.props.message)!=null?(a=a.message_sender)!=null?a.id:a:a;a=a?a:null;if(b("MercuryConfig").WWWMessengerMontageLWR&&a&&a!==d)return b("React").createElement(b("MontageReplyContainer.react"),{montageMessageID:c,threadFBID:a,threadID:b("MercuryIDs").getThreadIDFromUserID(a),startedTime:this.state.startedTime});else return null};a.prototype.$3=function(){var a,c=this.props.message;if(!c)return null;var d=b("React").createElement(b("Timestamp.react"),{className:"_13-0",minimize:!0,time:c.timestamp});a=(a=c)!=null?(a=a.message_sender)!=null?a.id:a:a;c=c.montage_attribution;return a&&c?b("React").createElement("div",{className:"_13-0"},d,"\xa0\u2022\xa0",b("React").createElement(b("CameraPostAppAttribution.react"),{currentThreadID:a,postStoryAttribution:c,stopPropagationOnClick:!0})):d};a.propTypes={active:c.bool.isRequired,activeIndex:c.number.isRequired,count:c.number.isRequired,message:c.object,children:c.object};e.exports=b("RelayClassic_DEPRECATED").createContainer(a,{fragments:{message:function(){return function(){return{children:[{fieldName:"message_id",kind:"Field",metadata:{},type:"ID"},{children:[{fieldName:"message_source",kind:"Field",metadata:{},type:"String"}],fieldName:"message_source_data",kind:"Field",metadata:{canHaveSubselections:!0},type:"MessageSourceData"},{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},{children:[{fieldName:"name",kind:"Field",metadata:{},type:"String"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallValue",callValue:50}},{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallValue",callValue:50}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"profile_picture",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],fieldName:"messaging_actor",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:!0},type:"MessagingActor"}],fieldName:"message_sender",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"MessagingParticipant"},{children:[{fieldName:"text",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"offset",kind:"Field",metadata:{},type:"Int"},{fieldName:"length",kind:"Field",metadata:{},type:"Int"},{children:[{fieldName:"__typename",kind:"Field",metadata:{isRequisite:!0},type:"String"},{fieldName:"url",kind:"Field",metadata:{},type:"Url"},{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"IdFragment",type:"Node"}],fieldName:"entity",kind:"Field",metadata:{canHaveSubselections:!0,isAbstract:!0},type:"Entity"}],fieldName:"ranges",kind:"Field",metadata:{canHaveSubselections:!0,isPlural:!0},type:"EntityAtRange"}],fieldName:"montage_attribution",kind:"Field",metadata:{canHaveSubselections:!0},type:"TextWithEntities"},{fieldName:"timestamp",kind:"Field",metadata:{},type:"Time"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MontageCard_MessageRelayQL",type:"UserMessage"}}()}}})}),null);
__d("montageCardWithStandardTimer",["React","cancelAnimationFrame","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").PropTypes,h=5e3;function a(a){__p&&__p();var c,d;return d=c=function(){__p&&__p();var c,d;c=babelHelpers.inherits(e,b("React").Component);d=c&&c.prototype;function e(){__p&&__p();var a,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return c=(a=d.constructor).call.apply(a,[this].concat(f)),this.state={startedTime:0,pausedTime:0},this.$1=null,this.$3=function(){if(!this.props.paused){var a=(Date.now()-this.state.startedTime)/h*100;this.props.onProgress(a);if(a>=100){this.props.onEnded();return}}this.$1=b("requestAnimationFrame")(this.$3)}.bind(this),c}e.prototype.componentDidMount=function(){"use strict";this.$2()};e.prototype.componentDidUpdate=function(){"use strict";this.$2()};e.prototype.$2=function(){"use strict";!this.props.active&&(this.$1||this.state.pausedTime)?this.$4():!this.props.paused&&!this.$1?this.$5():this.$1&&this.props.paused&&this.$6()};e.prototype.$6=function(){"use strict";this.setState({pausedTime:Date.now()}),b("cancelAnimationFrame")(this.$1),this.$1=null};e.prototype.$5=function(){"use strict";__p&&__p();var a={startedTime:Date.now()};if(this.state.pausedTime){var c=a.startedTime-this.state.pausedTime;c=this.state.startedTime+c;a={pausedTime:0,startedTime:c}}this.setState(a);this.props.onStarted(a.startedTime);this.$1=b("requestAnimationFrame")(this.$3)};e.prototype.$4=function(){"use strict";this.setState({pausedTime:0,startedTime:0}),b("cancelAnimationFrame")(this.$1),this.$1=null};e.prototype.componentWillUnmount=function(){"use strict";b("cancelAnimationFrame")(this.$1)};e.prototype.render=function(){"use strict";var c=this.props;c.paused;c.onEnded;c.onProgress;c.onStarted;c=babelHelpers.objectWithoutProperties(c,["paused","onEnded","onProgress","onStarted"]);return b("React").createElement(a,c)};return e}(),c.propTypes={active:g.bool.isRequired,paused:g.bool.isRequired,onEnded:g.func.isRequired,onProgress:g.func.isRequired,onStarted:g.func.isRequired},d}e.exports=a}),null);
__d("MontageCardPhoto.react",["cx","Image.react","React","RelayClassic_DEPRECATED","montageCardWithStandardTimer","react-relay/classic/query/RelayQL"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_5uag _3p9v"},b("React").createElement(b("Image.react"),{className:"_3p9w",src:this.props.photoAttachment.image.uri}))};function a(){h.apply(this,arguments)}a.propTypes={photoAttachment:c.shape({image:c.shape({uri:c.string.isRequired}).isRequired}).isRequired};e.exports=b("RelayClassic_DEPRECATED").createContainer(b("montageCardWithStandardTimer")(a),{fragments:{photoAttachment:function(){return function(){return{children:[{children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MontageCardPhoto_PhotoAttachmentRelayQL",type:"MessageImage"}}()}}})}),null);
__d("MontageCardSticker.react",["cx","Image.react","React","RelayClassic_DEPRECATED","montageCardWithStandardTimer","react-relay/classic/query/RelayQL"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props.sticker.animated_image?this.props.sticker.animated_image.uri:this.props.sticker.image.uri;return b("React").createElement("div",{className:"_5uag _3p9v"},b("React").createElement(b("Image.react"),{src:a}))};function a(){h.apply(this,arguments)}a.propTypes={sticker:c.shape({animated_image:c.shape({uri:c.string.isRequired}),image:c.shape({uri:c.string.isRequired})}).isRequired};e.exports=b("RelayClassic_DEPRECATED").createContainer(b("montageCardWithStandardTimer")(a),{fragments:{sticker:function(){return function(){return{children:[{children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"animated_image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MontageCardSticker_StickerRelayQL",type:"Sticker"}}()}}})}),null);
__d("MontageCardText.react",["cx","MessengerTextWithEntities.react","React","RelayClassic_DEPRECATED","montageCardWithStandardTimer","react-relay/classic/query/RelayQL"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("MessengerTextWithEntities.react"),{className:"_5uag _2zz1",customSize:!0,renderEmoji:!0,text:this.props.userMessage.message.text})};function a(){h.apply(this,arguments)}a.propTypes={userMessage:c.shape({message:c.shape({text:c.string.isRequired}).isRequired}).isRequired};e.exports=b("RelayClassic_DEPRECATED").createContainer(b("montageCardWithStandardTimer")(a),{fragments:{userMessage:function(){return function(){return{children:[{children:[{fieldName:"text",kind:"Field",metadata:{},type:"String"}],fieldName:"message",kind:"Field",metadata:{canHaveSubselections:!0},type:"TextWithEntities"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MontageCardText_UserMessageRelayQL",type:"UserMessage"}}()}}})}),null);
__d("Video.react",["React","ReactDOM"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.componentDidMount=function(){"use strict";var a=b("ReactDOM").findDOMNode(this.refs.video);this.props.paused&&a&&a.pause&&a.pause()};a.prototype.UNSAFE_componentWillUpdate=function(a,c){"use strict";c=b("ReactDOM").findDOMNode(this.refs.video);a.playbackRate&&(c.playbackRate=a.playbackRate);a.paused!=this.props.paused&&c&&(a.paused&&c.pause?c.pause():c.play&&c.play())};a.prototype.render=function(){"use strict";return b("React").createElement("video",babelHelpers["extends"]({},this.props,{ref:"video"}))};function a(){"use strict";g.apply(this,arguments)}a.propTypes={autoPlay:c.bool,paused:c.bool,controls:c.bool,height:c.oneOfType([c.string,c.number]),loop:c.bool,muted:c.bool,onAbort:c.func,onCanPlay:c.func,onCanPlayThrough:c.func,onDurationChange:c.func,onEmptied:c.func,onEncrypted:c.func,onEnded:c.func,onError:c.func,onLoadedData:c.func,onLoadedMetadata:c.func,onLoadStart:c.func,onPause:c.func,onPlay:c.func,onPlaying:c.func,onProgress:c.func,onRateChange:c.func,onSeeked:c.func,onSeeking:c.func,onStalled:c.func,onSuspend:c.func,onTimeUpdate:c.func,onVolumeChange:c.func,onWaiting:c.func,playbackRate:c.number,poster:c.string,src:c.string.isRequired,width:c.oneOfType([c.string,c.number])};e.exports=a}),null);
__d("MontageCardVideo.react",["cx","React","RelayClassic_DEPRECATED","Video.react","cancelAnimationFrame","react-relay/classic/query/RelayQL","requestAnimationFrame"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=null,this.$5=function(){if(this.$2&&this.$2.readyState>0){var a=this.$2.currentTime/this.$2.duration*100;this.props.onProgress(a);if(a>=100){this.props.onEnded();return}}this.$1=b("requestAnimationFrame")(this.$5)}.bind(this),c}a.prototype.componentDidMount=function(){this.$3()};a.prototype.componentDidUpdate=function(){this.$3()};a.prototype.componentWillUnmount=function(){this.$4()};a.prototype.$3=function(){if(!this.$2)return;!this.props.paused&&this.$2.paused?(this.$2.play(),this.$1=b("requestAnimationFrame")(this.$5)):(this.$4(),!this.props.active&&this.$2&&(this.$2.currentTime=0))};a.prototype.$4=function(){b("cancelAnimationFrame")(this.$1),this.$1=null,this.$2&&this.$2.pause()};a.prototype.render=function(){return b("React").createElement(b("Video.react"),{autoPlay:!1,className:"_5uag",onEnded:this.props.onEnded,onError:this.props.onEnded,src:this.props.videoAttachment.playable_url,ref:function(a){return this.$2=a&&a.refs.video}.bind(this)})};a.propTypes={paused:c.bool.isRequired,onEnded:c.func.isRequired,onProgress:c.func.isRequired,videoAttachment:c.shape({playable_url:c.string.isRequired}).isRequired};e.exports=b("RelayClassic_DEPRECATED").createContainer(a,{fragments:{videoAttachment:function(){return function(){return{children:[{fieldName:"playable_url",kind:"Field",metadata:{},type:"Url"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MontageCardVideo_VideoAttachmentRelayQL",type:"MessageVideo"}}()}}})}),null);
__d("MontageShouldUpdateReducer",["MontageActions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MontageActions").Types;function a(a,b){var c;switch(b.type){case g.REQUEST_UPDATE:c=babelHelpers["extends"]({},a.needsUpdating,(c={},c[b.threadFBID]=!0,c));return babelHelpers["extends"]({},a,{needsUpdating:c});case g.HANDLE_ACTION:b=babelHelpers["extends"]({},a.needsUpdating,(c={},c[b.threadFBID]=!0,c));return babelHelpers["extends"]({},a,{needsUpdate:b})}return a}function c(a,b){switch(b.type){case g.HAS_UPDATED:var c=a.needsUpdating;c[b.threadFBID];c=babelHelpers.objectWithoutProperties(c,[b.threadFBID]);return babelHelpers["extends"]({},a,{needsUpdating:c})}return a}e.exports={requestUpdate:a,hasUpdated:c}}),null);
__d("MessengerMobileWindow.react",["cx","MessengerPhotoViewCloseLink.react","React","SpotlightViewer"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props,c=a.background,d=a.fontSize,e=a.onHide,f=a.open,g=a.children,h=a.onClose,i=a.sidebar;a=babelHelpers.objectWithoutProperties(a,["background","fontSize","onHide","open","children","onClose","sidebar"]);return b("React").createElement(b("SpotlightViewer"),{onHide:e,open:f,rootClassName:"_7yx"+(c==="light"?" _1lwq":"")},b("React").createElement("div",{className:"_3xsg"},b("React").createElement("div",babelHelpers["extends"]({className:"_7yy"},a),b("React").createElement("div",{className:"_7yz"}),b("React").createElement("div",{className:(this.props.orientation==="landscape"?"_pxe":"")+(this.props.orientation==="landscape"&&i?" _466h":"")+(this.props.orientation==="portrait"?" _pxf":"")+(this.props.orientation==="portrait"&&i?" _466r":"")+" _7y-"+(d==="auto"?" _5q__":"")},b("React").createElement("div",{className:"_5uag"},g)),b("React").createElement(b("MessengerPhotoViewCloseLink.react"),{onClick:h,customTooltip:null})),i))};function a(){h.apply(this,arguments)}a.defaultProps={background:"light",fontSize:"auto",orientation:"portrait"};a.propTypes={background:c.string.isRequired,fontSize:c.string.isRequired,onClose:c.func.isRequired,onHide:c.func.isRequired,open:c.bool.isRequired};e.exports=a}),null);
__d("MontageSpotlightViewer.react",["KeyEventController","MessengerMobileWindow.react","MessengerMontageClientTypedLogger","MontageCard.react","MontageCardPhoto.react","MontageCardSticker.react","MontageCardText.react","MontageCardVideo.react","React","RelayClassic_DEPRECATED","SubscriptionsHandler","react-relay/classic/query/RelayQL"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h=150,i=300,j={auto_play:"auto_play",click:"click",arrow:"arrow",esc:"esc",click_exit_button:"click_exit_button"},k={next:"_next",prev:"_prev"},l=function(event,a){return a=="onkeyup"?b("KeyEventController").filterEventTargets(event,a)&&b("KeyEventController").filterEventModifiers(event,a):!1};d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state=this.initialState(),this.$1=new(b("SubscriptionsHandler"))(),this.$2="unknown",this.$3=null,this.$6=function(){this.setState({paused:Date.now()})}.bind(this),this.$7=function(event){var a=event.nativeEvent.offsetX,b=Date.now()-this.state.paused;b<i?a<h?this.$4(j.click):this.$5(j.click):this.setState({paused:0})}.bind(this),this.$9=function(){this.setState({cardIndex:0,paused:0,open:!1})}.bind(this),this.$8=function(){this.$3=Date.now()}.bind(this),this.$12=this.$5.bind(this,j.auto_play),c}a.prototype.initialState=function(){var a=this.props.messages?this.props.messages.count:1;return{cardIndex:this.props.initialUnreadCount?a-this.props.initialUnreadCount:0,open:!0,paused:0}};a.prototype.componentDidMount=function(){this.$1.addSubscriptions(b("KeyEventController").registerKey("LEFT",function(){this.$4(j.arrow);return!1}.bind(this)),b("KeyEventController").registerKey("RIGHT",function(){this.$5(j.arrow);return!1}.bind(this)),b("KeyEventController").registerKey("SPACE",function(){this.state.paused||this.$6();return!1}.bind(this)),b("KeyEventController").registerKey("SPACE",function(a){this.$7(a);return!1}.bind(this),l)),this.$8()};a.prototype.render=function(){return b("React").createElement(b("MessengerMobileWindow.react"),{onClose:this.$9,onHide:this.props.onHide,onMouseDown:this.$6,onMouseUp:this.$7,open:this.state.open},this.$10())};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null};a.prototype.$10=function(){__p&&__p();var a=this.props.messages||{edges:[{node:this.props.message}]};return a.edges.map(function(a,c){a=a.node;if(!a||c<this.state.cardIndex-3||c>this.state.cardIndex+3)return null;var d=a.blob_attachments[0],e=a.sticker,f=this.props.messages?this.props.messages.count:1;c=c===this.state.cardIndex;var g=!(c&&!this.state.paused),h=null,i=d&&d.__typename;i==="MessageImage"?(c&&this.$11("photo"),h=b("React").createElement(b("MontageCardPhoto.react"),{active:c,onEnded:this.$12,paused:g,photoAttachment:d})):i==="MessageVideo"?(c&&this.$11("video"),h=b("React").createElement(b("MontageCardVideo.react"),{active:c,onEnded:this.$12,paused:g,videoAttachment:d})):e?(c&&this.$11("sticker"),h=b("React").createElement(b("MontageCardSticker.react"),{active:c,onEnded:this.$12,paused:g,sticker:e})):(c&&this.$11("text"),h=b("React").createElement(b("MontageCardText.react"),{active:c,onEnded:this.$12,paused:g,userMessage:a}));return h?b("React").createElement(b("MontageCard.react"),{active:c,activeIndex:this.state.cardIndex,count:f,key:a.message_id,message:a},h):null}.bind(this)).filter(Boolean)};a.prototype.$11=function(a){this.$2=a};a.prototype.$4=function(a){this.logMessageExit(a+k.prev);a=this.state.cardIndex-1;if(a<0){this.$9();return}this.setState({cardIndex:a,paused:0},this.$8)};a.prototype.$5=function(a){this.logMessageExit(a+k.next);a=this.props.messages?this.props.messages.count:1;var b=this.state.cardIndex+1;if(b>=a){this.$9();return}this.props.loadMore(1);this.setState({cardIndex:b,paused:0},this.$8)};a.prototype.logMessageExit=function(a){__p&&__p();var c=Date.now(),d=this.props.messages?this.props.messages.count:1,e=this.props.initialUnreadCount||d;d=this.state.cardIndex-(d-e)+1;var f=this.props.initialUnreadCount?"unseen":"seen";if(this.props.messages){var g=this.props.messages.edges[this.state.cardIndex];g=g&&g.node}else g=this.props.message;if(!g||!this.$3)return;c=c-this.$3;new(b("MessengerMontageClientTypedLogger"))().setEvent("message_exit").setMid(g.message_id).setOwnerID(g.message_sender.id).setMessageSource(g.message_source_data&&g.message_source_data.message_source).setExitAction(a).setContentType(this.$2).setTotalQueue(e).setQueueType(f).setCurrentPosition(d).setEntryPoint(this.props.entryPoint).setMessageStartTime(this.$3).setMessageDuration(c).log()};a.propTypes={entryPoint:c.oneOf(["thread_head","reply_context"]),initialUnreadCount:c.number,onHide:c.func.isRequired,loadMore:c.func.isRequired,message:c.object,messages:c.object,relay:c.object.isRequired};var m=function(a,c,d,e,f){return{children:[].concat.apply([],[{fieldName:"message_id",kind:"Field",metadata:{},type:"ID"},{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"}],fieldName:"message_sender",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"MessagingParticipant"},{children:[{fieldName:"message_source",kind:"Field",metadata:{},type:"String"}],fieldName:"message_source_data",kind:"Field",metadata:{canHaveSubselections:!0},type:"MessageSourceData"},{children:[].concat.apply([],[{fieldName:"__typename",kind:"Field",metadata:{isRequisite:!0},type:"String"},b("react-relay/classic/query/RelayQL").__frag(d),b("react-relay/classic/query/RelayQL").__frag(e),{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"IdFragment",type:"Node"}]),fieldName:"blob_attachments",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:!0,isPlural:!0},type:"MessageBlobAttachment"},{children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},b("react-relay/classic/query/RelayQL").__frag(f)]),fieldName:"sticker",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"Sticker"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},b("react-relay/classic/query/RelayQL").__frag(a),b("react-relay/classic/query/RelayQL").__frag(c)]),id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MontageSpotlightViewerRelayQL",type:"UserMessage"}}(b("MontageCard.react").getFragment("message"),b("MontageCardText.react").getFragment("userMessage"),b("MontageCardPhoto.react").getFragment("photoAttachment"),b("MontageCardVideo.react").getFragment("videoAttachment"),b("MontageCardSticker.react").getFragment("sticker"));e.exports=b("RelayClassic_DEPRECATED").createContainer(a,{fragments:{messages:function(){return function(a){return{children:[{fieldName:"count",kind:"Field",metadata:{},type:"Int"},{children:[{children:[].concat.apply([],[{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},b("react-relay/classic/query/RelayQL").__frag(a),{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"IdFragment",type:"Node"}]),fieldName:"node",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:!0,isRequisite:!0},type:"Message"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:!0,isPlural:!0},type:"MessagesOfThreadEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:!0,isGenerated:!0,isRequisite:!0},type:"PageInfo"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MontageSpotlightViewer_MessagesRelayQL",type:"MessagesOfThreadConnection"}}(m)},message:function(){return m}}})}),null);
__d("MontageState",[],(function(a,b,c,d,e,f){"use strict";a={needsUpdating:{}};e.exports=a}),null);
__d("MontageStore",["FluxReduceStore","MontageDispatcher","MontageShouldUpdateReducer","MontageState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[].concat(Object.values(b("MontageShouldUpdateReducer")));g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return b("MontageState")};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MontageDispatcher"))}),null);
__d("MessengerMarkReadMutation",["react-relay/classic/mutation/RelayMutation","react-relay/classic/query/RelayQL"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("react-relay/classic/mutation/RelayMutation"));g&&g.prototype;a.prototype.getMutation=function(){return function(){return{calls:[{kind:"Call",metadata:{},name:"message_thread_update_read_state",value:{kind:"CallVariable",callVariableName:"input"}}],children:[{fieldName:"client_mutation_id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],kind:"Mutation",metadata:{inputType:"MessageThreadUpdateReadStateData!"},name:"MessengerMarkReadMutation",responseType:"MessageThreadUpdateReadStateResponsePayload"}}()};a.prototype.getVariables=function(){return{actor_id:this.props.actorID,thread_id:this.props.threadID,update_type:"mark_read"}};a.prototype.getFatQuery=function(){return function(){return{children:[{children:[{fieldName:"unread_count",kind:"Field",metadata:{},type:"Int"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"thread",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"MessageThread"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessengerMarkReadMutationRelayQL",type:"MessageThreadUpdateReadStateResponsePayload"}}()};a.prototype.getConfigs=function(){return[{type:"FIELDS_CHANGE",fieldIDs:{thread:this.props.threadID}}]};a.prototype.getOptimisticResponse=function(){return{thread:{id:this.props.threadID,unread_count:0}}};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MontageThumbnail.react",["cx","CssBackgroundImage.react","MessengerTextWithEntities.react","React","RelayClassic_DEPRECATED","react-relay/classic/query/RelayQL"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i=28,j=21;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=!1,this.state={imageHeight:i,imageWidth:j},this.setDimensions=function(a,b){this.$1&&(this.state.imageHeight!==a||this.state.imageWidth!==b)&&this.setState({imageHeight:a,imageWidth:b})}.bind(this),b}a.prototype.componentDidMount=function(){this.$1=!0};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.render=function(){return b("React").createElement("div",{className:"_4bj3"},this.getFirstImage(),this.renderUnreadBadge())};a.prototype.renderUnreadBadge=function(){return this.props.unread?b("React").createElement("div",{className:"_4bj5",style:{backgroundColor:this.props.customColor}}):null};a.prototype.getFirstImage=function(){__p&&__p();var a=this.props.message;if(!a)return null;if(a.sticker)return this.getImageElement(a.sticker.image);if(a.blob_attachments&&a.blob_attachments[0]){var c=a.blob_attachments[0];c=c.image||c.videoImage||c.mediaImage;if(c)return this.getImageElement(c)}return a.message&&a.message.text?b("React").createElement(b("MessengerTextWithEntities.react"),{className:"_4bj6 _4bj9",customSize:!0,renderEmoji:!0,style:{height:this.props.imageHeight,width:this.props.imageWidth},text:a.message.text}):null};a.prototype.getDimensions=function(a){var b=new Image(),c=this.setDimensions;b.onload=function(){c(b.height,b.width)};b.src=a.uri};a.prototype.getImageElement=function(a){this.getDimensions(a);return b("React").createElement(b("CssBackgroundImage.react"),{className:"_4bj6",height:this.state.imageHeight,imageURI:a.uri,width:this.state.imageWidth})};a.propTypes={customColor:c.string,message:c.object.isRequired,unread:c.bool.isRequired,imageHeight:c.number.isRequired,imageWidth:c.number.isRequired};e.exports=b("RelayClassic_DEPRECATED").createContainer(a,{initialVariables:{imageHeight:i,imageWidth:j},fragments:{message:function(a){return function(){return{children:[{children:[{fieldName:"text",kind:"Field",metadata:{},type:"String"}],fieldName:"message",kind:"Field",metadata:{canHaveSubselections:!0},type:"TextWithEntities"},{children:[{calls:[{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallVariable",callVariableName:"imageHeight"}},{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallVariable",callVariableName:"imageWidth"}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"sticker",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"Sticker"},{children:[{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},{children:[{alias:"mediaImage",calls:[{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallVariable",callVariableName:"imageHeight"}},{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallVariable",callVariableName:"imageWidth"}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"IdFragment",type:"Node"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"Media",type:"Media"},{children:[{alias:"videoImage",calls:[{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallVariable",callVariableName:"imageHeight"}},{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallVariable",callVariableName:"imageWidth"}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessageVideo",type:"MessageVideo"},{children:[{calls:[{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallVariable",callVariableName:"imageHeight"}},{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallVariable",callVariableName:"imageWidth"}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessageImage",type:"MessageImage"},{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"IdFragment",type:"Node"}],fieldName:"blob_attachments",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:!0,isPlural:!0},type:"MessageBlobAttachment"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MontageThumbnail_MessageRelayQL",type:"UserMessage"}}()}}})}),null);
__d("MontageViewerSingleThread.react",["MontageSpotlightViewer.react","React","RelayClassic_DEPRECATED","react-relay/classic/query/RelayQL"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){var b=this.props.montageThread.messages.count,c=this.props.relay.variables.count;if(c<b){c=Math.min(c+a,b);this.props.relay.setVariables({count:c})}}.bind(this),b}a.prototype.render=function(){return this.props.open?b("React").createElement(b("MontageSpotlightViewer.react"),{entryPoint:"reply_context",initialUnreadCount:this.props.unreadCount,loadMore:this.$1,onHide:this.props.onHide,messages:this.props.montageThread.messages}):null};a.propTypes={open:c.bool.isRequired,onHide:c.func.isRequired,montageThread:c.object.isRequired,relay:c.object.isRequired,unreadCount:c.number.isRequired};e.exports=b("RelayClassic_DEPRECATED").createContainer(a,{initialVariables:{count:100},fragments:{montageThread:function(){return function(a){return{children:[{calls:[{kind:"Call",metadata:{type:"Int"},name:"last",value:{kind:"CallVariable",callVariableName:"count"}}],children:[].concat.apply([],[b("react-relay/classic/query/RelayQL").__frag(a)]),fieldName:"messages",kind:"Field",metadata:{canHaveSubselections:!0,isConnection:!0},type:"MessagesOfThreadConnection"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MontageViewerSingleThread_MontageThreadRelayQL",type:"MessageThread"}}(b("MontageSpotlightViewer.react").getFragment("messages"))}}})}),null);
__d("MontageThreadView.react",["cssVar","cx","fbt","CurrentUser","MercuryIDs","MessengerEnvironment","MessengerLogo.react","MessengerMarkReadMutation","MessengerParticipants.bs","MontageThumbnail.react","MontageViewerSingleThread.react","React","RelayClassic_DEPRECATED","Timestamp.react","convertMIGColorToFIGColor","react-relay/classic/query/RelayQL"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=28,l=21;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={showMontage:!1},this.$1=function(){this.setState({showMontage:!0})}.bind(this),this.$2=function(){this.setState({showMontage:!1}),this.props.relay.commitUpdate(new(b("MessengerMarkReadMutation"))({threadID:this.props.threadMessages.montage_thread.id,actorID:b("CurrentUser").getID()}))}.bind(this),c}a.prototype.componentDidMount=function(){this.props.threadMessages&&(this.props.onResize&&this.props.onResize());var a=this.getMontageThreadID();a&&(this.props.setThreadID&&this.props.setThreadID(a))};a.prototype.componentDidUpdate=function(a){a.threadMessages!==this.props.threadMessages&&(this.props.onResize&&this.props.onResize())};a.prototype.render=function(){var a=this.getFirstMontageMessage();return!a?null:b("React").createElement("div",{className:"_1sk5"},b("React").createElement("div",{className:"_1sk6"},this.renderContents(a)))};a.prototype.renderContents=function(a){var c=this.getCustomColor(),d=this.getUnread();return b("React").createElement("a",{className:"_5no5",href:"#",onClick:this.$1,role:"button"},b("React").createElement(b("MontageThumbnail.react"),{customColor:c,message:a,unread:d,imageHeight:k,imageWidth:l}),b("React").createElement("div",{className:"_1sui"},this.renderHeader(d,c),b("React").createElement("span",{className:"_1suk"},b("React").createElement(b("Timestamp.react"),{minimize:!0,time:this.getTimestamp()}))),this.renderLogo(),this.renderModal())};a.prototype.renderModal=function(){return this.state.showMontage?b("React").createElement(b("MontageViewerSingleThread.react"),{onHide:this.$2,open:this.state.showMontage,montageThread:this.props.threadMessages.montage_thread,unreadCount:this.props.threadMessages.montage_thread.unread_count}):null};a.prototype.renderLogo=function(){return b("MessengerEnvironment").messengerui?null:b("React").createElement(b("MessengerLogo.react"),{color:"rgba(0, 0, 0, 0.3)",size:"17px"})};a.prototype.renderHeader=function(a,c){return a?b("React").createElement("h1",{className:"_1suj",style:{color:c}},i._("Watch {person_with_montage}'s story",[i._param("person_with_montage",this.getAuthorName())])):null};a.prototype.getAuthorName=function(){var a=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);if(!a)return null;a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a));return a&&(a.short_name||a.name)};a.prototype.getFirstMontageMessage=function(){var a;return(a=this.props)!=null?(a=a.threadMessages)!=null?(a=a.montage_thread)!=null?(a=a.messages)!=null?(a=a.edges)!=null?(a=a[0])!=null?a.node:a:a:a:a:a:a};a.prototype.getTimestamp=function(){var a=this.getFirstMontageMessage();return a&&a.timestamp};a.prototype.getCustomColor=function(){var a;a=(a=this.props)!=null?(a=a.threadMessages)!=null?(a=a.customization_info)!=null?a.outgoing_bubble_color:a:a:a;var c;!a?c="#0084ff":c="#"+a.substring(2);return b("convertMIGColorToFIGColor")(c)};a.prototype.getUnread=function(){var a;return!!((a=this.props)!=null?(a=a.threadMessages)!=null?(a=a.montage_thread)!=null?a.unread_count:a:a:a)};a.prototype.getMontageThreadID=function(){var a;return(a=this.props)!=null?(a=a.threadMessages)!=null?(a=a.montage_thread)!=null?(a=a.thread_key)!=null?a.thread_fbid:a:a:a:a};a.propTypes={onResize:c.func,threadMessages:c.object.isRequired,threadID:c.string.isRequired};e.exports=b("RelayClassic_DEPRECATED").createContainer(a,{fragments:{threadMessages:function(a){return function(a,c){return{children:[{children:[{fieldName:"outgoing_bubble_color",kind:"Field",metadata:{},type:"Color"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"customization_info",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"MessageThreadCustomization"},{children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},{children:[{fieldName:"thread_fbid",kind:"Field",metadata:{},type:"String"}],fieldName:"thread_key",kind:"Field",metadata:{canHaveSubselections:!0},type:"MessageThreadKey"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"last",value:{kind:"CallValue",callValue:1}}],children:[{children:[{children:[].concat.apply([],[{fieldName:"timestamp",kind:"Field",metadata:{},type:"Time"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},b("react-relay/classic/query/RelayQL").__frag(c),{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"IdFragment",type:"Node"}]),fieldName:"node",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:!0,isRequisite:!0},type:"Message"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:!0,isPlural:!0},type:"MessagesOfThreadEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:!0,isGenerated:!0,isRequisite:!0},type:"PageInfo"}],fieldName:"messages",kind:"Field",metadata:{canHaveSubselections:!0,isConnection:!0},type:"MessagesOfThreadConnection"},{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},{children:[{fieldName:"short_name",kind:"Field",metadata:{},type:"String"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"User",type:"User"}],fieldName:"montage_author",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:!0},type:"Actor"},{fieldName:"unread_count",kind:"Field",metadata:{},type:"Int"},b("react-relay/classic/query/RelayQL").__frag(a)]),fieldName:"montage_thread",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"MessageThread"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MontageThreadView_ThreadMessagesRelayQL",type:"MessageThread"}}(b("MontageViewerSingleThread.react").getFragment("montageThread"),b("MontageThumbnail.react").getFragment("message",{imageHeight:k,imageWidth:l}))}}})}),null);
__d("MontageThreadViewRoute",["react-relay/classic/query/RelayQL","react-relay/classic/route/RelayRoute"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("react-relay/classic/route/RelayRoute"));g&&g.prototype;function a(){g.apply(this,arguments)}a.routeName="MontageThreadViewRoute";a.queries={threadMessages:function(a){return function(a){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"threadFBID"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},b("react-relay/classic/query/RelayQL").__frag(a)]),fieldName:"message_thread",kind:"Query",metadata:{identifyingArgName:"id",identifyingArgType:"ID!"},name:"MontageThreadViewRoute",type:"MessageThread"}}(a.getFragment("threadMessages"))}};a.paramDefinitions={threadFBID:{type:"ID",required:!0}};e.exports=a}),null);
__d("MontageThreadViewContainerImpl.react",["FluxContainer","MercuryIDs","MontageActions","MontageStore","MontageThreadView.react","MontageThreadViewRoute","React","RelayClassic_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("RelayClassic_DEPRECATED").RootContainer;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.threadIDToMontageThreadID={},this.$1=function(a){var c=b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID);return!c?null:b("React").createElement(b("MontageThreadView.react"),babelHelpers["extends"]({},a,{onResize:this.props.onResize,setThreadID:this.$4,threadID:this.props.threadID}))}.bind(this),this.$3=function(a){if(a&&a.stale)return;a=b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID);var c=this.threadIDToMontageThreadID[a];this.state.needsUpdating[a]&&b("MontageActions").hasUpdated(a);this.state.needsUpdating[a]&&b("MontageActions").hasUpdated(c)}.bind(this),this.$4=function(a){var c=b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID);this.threadIDToMontageThreadID[c]=a}.bind(this),c}a.getStores=function(){return[b("MontageStore")]};a.calculateState=function(){return{needsUpdating:b("MontageStore").getState().needsUpdating}};a.prototype.render=function(){var a=this.props.threadID;a=b("MercuryIDs").getThreadFBIDFromThreadID(a);return!a?null:b("React").createElement(h,{Component:b("MontageThreadView.react"),route:new(b("MontageThreadViewRoute"))({threadFBID:a}),renderFetched:this.$1,forceFetch:this.$2(a),onReadyStateChange:this.$3})};a.prototype.$2=function(a){return!!(this.state.needsUpdating[a]||this.state.needsUpdating[this.threadIDToMontageThreadID[a]])};a.propTypes={onResize:c.func,threadID:c.string.isRequired};e.exports=b("FluxContainer").create(a)}),null);