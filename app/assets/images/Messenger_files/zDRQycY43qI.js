if (self.CavalryLogger) { CavalryLogger.start_js(["xgbnj"]); }

__d("ComposedEntityMutabilityToName",[],(function(a,b,c,d,e,f){e.exports={0:"MUTABLE",1:"IMMUTABLE",2:"SEGMENTED"}}),null);
__d("ComposedEntityTypeToName",[],(function(a,b,c,d,e,f){e.exports={0:"MENTION",1:"LINK",2:"IMAGE",3:"VIDEO",4:"EMOTICON",5:"TOKEN",6:"HASHTAG",7:"IMPLICIT_LINK",8:"EMBED",9:"EMOJI",10:"MATH",11:"HIGHLIGHT",12:"DELIGHT",13:"TEMPLATE_VARIABLE",14:"ASSISTANT_TYPEAHEAD"}}),null);
__d("ComposedInlineStyle",[],(function(a,b,c,d,e,f){e.exports={NONE:0,BOLD:1,ITALIC:2,UNDERLINE:4,CODE:8,STRIKETHROUGH:16,SUBSCRIPT:32,SUPERSCRIPT:64,QUOTE:128}}),null);
__d("MNCommercePageSetting",[],(function(a,b,c,d,e,f){e.exports={COMMERCE_FAQ_ENABLED:"COMMERCE_FAQ_ENABLED",IN_MESSENGER_SHOPPING_ENABLED:"IN_MESSENGER_SHOPPING_ENABLED",COMMERCE_NUX_ENABLED:"COMMERCE_NUX_ENABLED",NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED:"NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED",STRUCTURED_MENU_ENABLED:"STRUCTURED_MENU_ENABLED",USER_CONTROL_TOPIC_MANAGE_ENABLED:"USER_CONTROL_TOPIC_MANAGE_ENABLED",COMPOSER_INPUT_DISABLED:"COMPOSER_INPUT_DISABLED"}}),null);
__d("TypingDetector",["ArbiterMixin","Event","Input","Run","SubscriptionsHandler","TypingStates","createObjectFrom","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){this._input=a,this._ignoreKeys={},this._getValueFn=b}Object.assign(a.prototype,b("ArbiterMixin"),{_timeout:7e3,_currentState:b("TypingStates").INACTIVE,init:function(){this.init=b("emptyFunction"),this.reset(),this._subscriptions=new(b("SubscriptionsHandler"))(),this._subscriptions.addSubscriptions(b("Event").listen(this._input,"keyup",this._update.bind(this)),b("Run").onUnload(this._onunload.bind(this)))},reset:function(){clearTimeout(this._checkTimer),this._checkTimer=null,this._lastKeystrokeAt=null,this._currentState=b("TypingStates").INACTIVE},setIgnoreKeys:function(a){this._ignoreKeys=b("createObjectFrom")(a)},destroy:function(){this._subscriptions.release()},_onunload:function(){this._currentState==b("TypingStates").TYPING&&this._transition(b("TypingStates").QUITTING)},_update:function(event){var a=b("Event").getKeyCode(event),c=this._currentState;if(!this._ignoreKeys[a]){a=this._getValueFn?this._getValueFn():b("Input").getValue(this._input);a.trim().length===0?c==b("TypingStates").TYPING&&this._transition(b("TypingStates").INACTIVE):c==b("TypingStates").TYPING?this._recordKeystroke():c==b("TypingStates").INACTIVE&&(this._transition(b("TypingStates").TYPING),this._recordKeystroke())}},_transition:function(a){this.reset(),this._currentState=a,this.inform("change",a)},_recordKeystroke:function(){this._lastKeystrokeTime=Date.now(),this._checkTimer||(this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout))},_checkTyping:function(){var a=this._lastKeystrokeTime+this._timeout,c=Date.now();c>a?this._transition(b("TypingStates").INACTIVE):(clearTimeout(this._checkTimer),this._checkTimer=setTimeout(this._checkTyping.bind(this),a-c+10))}});e.exports=a}),null);
__d("TypingDetectorController",["ActorURI","AsyncRequest","AvailableList","AvailableListConstants","ChatVisibility","Keys","MercuryServerRequestsConfig","TypingDetector","TypingStates","clearTimeout","emptyFunction","ifRequired","setTimeoutAcrossTransitions","shield"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/ajax/messaging/typ.php";function a(a,c,d,e,f,g,h){__p&&__p();if(!c)return;this.userID=a;this.input=c;this.source=d;this.threadID=f;this.pageID=h;this.remoteState=b("TypingStates").INACTIVE;this.notifyTimer=null;e=e||{};this.notifyDelay=e.notifyDelay||this.notifyDelay;this._typingDetector=new(b("TypingDetector"))(c,g);this._typingDetector.init(e);this._typingDetector.subscribe("change",this._stateChange.bind(this))}a.prototype.setUserAndThread=function(a,b){(this.userID!==a||this.threadID!==b)&&(this.resetState(),this.userID=a,this.threadID=b)};a.prototype.setIgnoreEnter=function(a){a=a?[b("Keys").RETURN]:[];this._typingDetector.setIgnoreKeys(a)};a.prototype.resetState=function(){this._notifyState(b("TypingStates").INACTIVE),this.remoteState=b("TypingStates").INACTIVE,this._typingDetector.reset(),b("clearTimeout")(this.notifyTimer),this.notifyTimer=null};a.prototype.destroy=function(){this.resetState(),this._typingDetector.destroy()};a.prototype._stateChange=function(a,c){c!=b("TypingStates").QUITTING?(b("clearTimeout")(this.notifyTimer),this.notifyTimer=b("setTimeoutAcrossTransitions")(b("shield")(this._notifyState,this,c),this.notifyDelay)):this._notifyState(c,!0)};a.prototype._notifyState=function(a,c){if(!this.userID&&!this.threadID||!b("ChatVisibility").isOnline()||a===this.remoteState||b("ifRequired")("ChannelConnection",function(a){return a.disconnected()},function(){return!0}))return;this._sendRequest(a,this.userID,c)};a.prototype._sendRequest=function(a,c,d){this.remoteState=a;a={typ:a,to:c,source:this.source,thread:this.threadID};var e=this.pageID?b("ActorURI").create(g,this.pageID):g;c=new(b("AsyncRequest"))().setHandler(this._onTypResponse.bind(this,c)).setErrorHandler(b("emptyFunction")).setData(a).setURI(e).setAllowCrossPageTransition(!0).setOption("asynchronous_DEPRECATED",!d);b("MercuryServerRequestsConfig").msgrRegion&&c.setRequestHeader("X-MSGR-Region",b("MercuryServerRequestsConfig").msgrRegion);c.send()};a.prototype._onTypResponse=function(a,c){c=c.getPayload()||{};c.offline&&b("AvailableList").set(a,b("AvailableListConstants").OFFLINE,"typing_response")};Object.assign(a.prototype,{notifyDelay:1e3});e.exports=a}),null);
__d("MentionResultsPropTypes",["React","SearchableEntry","SelectionState"],(function(a,b,c,d,e,f){a=b("React").PropTypes;c={viewID:a.string.isRequired,selection:a.instanceOf(b("SelectionState")).isRequired,contextComponent:a.object.isRequired,mentionableEntries:a.array.isRequired,highlightedMentionable:a.instanceOf(b("SearchableEntry")),onMentionSelect:a.func.isRequired,onMentionHighlight:a.func.isRequired,onMentionRenderHighlight:a.func.isRequired};e.exports=c}),null);
__d("MentionsLayer.react",["Bootloader","Locale","MentionResultsPropTypes","React","areEqual"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;var g=!1,h=b("Locale").isRTL(),i,j,k,l,m=5;c=b("React").createClass({displayName:"MentionsLayer",propTypes:babelHelpers["extends"]({},b("MentionResultsPropTypes"),{typeaheadView:a.func.isRequired,typeaheadViewProps:a.object,autoflip:a.bool,position:a.oneOf(["above","below"])}),getInitialState:function(){return{bootloaded:g}},getDefaultProps:function(){return{offset:m}},componentDidMount:function(){this.state.bootloaded||n(function(){this.isMounted()&&this.setState({bootloaded:!0})}.bind(this))},_onMentionSelect:function(a,b){b.preventDefault(),this.props.onMentionSelect(a,b)},shouldComponentUpdate:function(a,c){return this.state.bootloaded!==c.bootloaded||!b("areEqual")(this.props.mentionableEntries,a.mentionableEntries)||this.props.highlightedMentionable!==a.highlightedMentionable||this.props.characterOffset!==a.characterOffset},render:function(){__p&&__p();if(!this.state.bootloaded)return null;var a=this.props.mentionableEntries,c=this.props.selection;c=c.isCollapsed()&&c.getHasFocus()&&a&&a.length;var d=null,e=this.props.typeaheadViewProps,f=!1;e&&e.positionAtContext?f=!0:c&&(d=l(this.props.characterOffset,h));e={};this.props.autoflip&&(e.ContextualLayerAutoFlip=j,e.ContextualLayerUpdateOnScroll=k);var g=this.props.typeaheadView;return b("React").createElement(i,{shown:c,context:this.props.contextComponent,contextBounds:d,containerWidthMatchContext:f,offsetY:this.props.offset,offsetX:this.props.offset,position:this.props.position||"below",behaviors:e,shouldSetARIAProperties:!1},b("React").createElement("div",{"data-testid":"mentions-contextual-layer"},b("React").createElement(g,{id:this.props.viewID,viewProps:this.props.typeaheadViewProps,highlightedEntry:this.props.highlightedMentionable,entries:a||[],onSelect:this._onMentionSelect,onHighlight:this.props.onMentionHighlight,onRenderHighlight:this.props.onMentionRenderHighlight})))}});function n(a){b("Bootloader").loadModules(["ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","getMentionableRect"],function(b,c,d,e){i=b,j=c,k=d,l=e,g=!0,a()},"MentionsLayer.react")}e.exports=c}),null);
__d("UFICreatorInfo.react",["cx","fbt","HelpLink.react","Image.react","React","URI"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){__p&&__p();var a,c=this.getCreatorLink();switch(this.props.labelType){case"commented":a=h._("Commented on by {creator}",[h._param("creator",c)]);break;case"edited_comment":a=h._("Edited by {creator}",[h._param("creator",c)]);break;case"sent_message":a=h._("Sent by {creator}",[h._param("creator",c)]);break;case"page_admin_note":a=h._("Noted by {creator}",[h._param("creator",c)]);break;default:return b("React").createElement("span",null)}return b("React").createElement("span",null,a,b("React").createElement(b("HelpLink.react"),{tooltip:this.getHelpText()}))};a.prototype.getCreatorLink=function(){switch(this.props.creatorType){case"application":case"gray_account":case"indirect_admin":return b("React").createElement("a",{className:"uiLinkSubtle","data-hover":"tooltip","data-tooltip-content":this.getTooltipText()},this.props.creatorName);case"business_admin":return b("React").createElement("a",{className:"uiLinkSubtle",href:this.props.profileURI},this.props.creatorName);case"direct_admin":return this.getProfileLinkWithHovercard();case"former_admin":return b("React").createElement("span",{className:"uiLinkSubtle"},b("React").createElement(b("Image.react"),{src:"/images/privacy/cant-see.png",width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard());default:return b("React").createElement("span",{className:"uiLinkSubtle"},this.props.creatorName)}};a.prototype.getTooltipText=function(){switch(this.props.creatorType){case"application":return this.getApplicationText();case"gray_account":return this.getGrayAccountText();case"indirect_admin":return this.getIndirectAdminText()}return null};a.prototype.getProfileLinkWithHovercard=function(){if(!this.props.profileURI)return b("React").createElement("span",null,this.props.creatorName);var a=new(b("URI"))("/ajax/hovercard/user.php").setQueryData({id:this.props.creatorID}).addQueryData({type:"page_admin",extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return b("React").createElement("a",{className:"uiLinkSubtle","data-hovercard":a,href:this.props.profileURI},this.props.creatorName)};a.prototype.getApplicationText=function(){switch(this.props.labelType){case"commented":return h._("This was commented on by someone using {application}.",[h._param("application",this.props.creatorName)]);case"edited_comment":return h._("This was edited by someone using {application}.",[h._param("application",this.props.creatorName)]);case"sent_message":return h._("This was sent by someone using {application}.",[h._param("application",this.props.creatorName)]);case"page_admin_note":return h._("This was noted by someone using {application}.",[h._param("application",this.props.creatorName)])}return null};a.prototype.getIndirectAdminText=function(){switch(this.props.labelType){case"commented":return h._("This was commented on by someone from {page}.",[h._param("page",this.props.creatorName)]);case"edited_comment":return h._("This was edited by someone from {page}.",[h._param("page",this.props.creatorName)]);case"sent_message":return h._("This was sent by someone from {page}.",[h._param("page",this.props.creatorName)]);case"page_admin_note":return h._("This was noted by someone from {page}.",[h._param("page",this.props.creatorName)])}return null};a.prototype.getGrayAccountText=function(){switch(this.props.labelType){case"commented":return h._("This was commented on by someone who doesn't have a personal Facebook account.");case"edited_comment":return h._("This was edited by someone who doesn't have a personal Facebook account.");case"sent_message":return h._("This was sent by someone who doesn't have a personal Facebook account.");case"page_admin_note":return h._("This was noted by someone who doesn't have a personal Facebook account.")}return null};a.prototype.getHelpText=function(){switch(this.props.labelType){case"commented":return h._("Only people who manage this Page can see who posted a comment");case"edited_comment":return h._("Only people who manage this Page can see who edited a comment");case"sent_message":return h._("Only people who manage this Page can see who sent a message");case"page_admin_note":return h._("Only people who manage this Page can see who created a note")}return null};function a(){i.apply(this,arguments)}a.propTypes={creatorID:c.string.isRequired,creatorType:c.string.isRequired,creatorName:c.string.isRequired,labelType:c.string.isRequired,pageID:c.string.isRequired,profileURI:c.string};e.exports=a}),null);
__d("PagesMessengerCreatorInfo.react",["cx","React","UFICreatorInfo.react","XUIGrayText.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("XUIGrayText.react"),{className:"_ajk"+(this.props.isNote?" _45l2":""),display:"inline",shade:"light",size:"meta1"},b("React").createElement(b("UFICreatorInfo.react"),{creatorID:this.props.creator_info.creatorID,creatorType:this.props.creator_info.creatorType,creatorName:this.props.creator_info.creatorName,labelType:this.props.creator_info.labelType,pageID:this.props.creator_info.pageID,profileURI:this.props.creator_info.profileURI}))};function a(){h.apply(this,arguments)}a.propTypes={creator_info:c.shape({creatorID:c.string.isRequired,creatorName:c.string.isRequired,creatorType:c.string.isRequired,labelType:c.string.isRequired,pageID:c.string.isRequired,profileURI:c.string}).isRequired};e.exports=a}),null);
__d("concatMap",[],(function(a,b,c,d,e,f){function a(a,b){var c=-1,d=b.length,e=[],f;while(++c<d)f=a(b[c],c,b),Array.isArray(f)?Array.prototype.push.apply(e,f):Array.prototype.push.call(e,f);return e}e.exports=a}),null);
__d("LitestandEllipsis",["BinarySearch","DOMQuery","concatMap","getElementText","isTextNode"],(function(a,b,c,d,e,f){__p&&__p();var g,h="\u2026";function i(a,b,c){a=a.slice(0,b).join(" ")+h;c===0&&(a=a.trimLeft());return a}function j(a,b,c){a=a.substr(0,b).trimRight()+h;c===0&&(a=a.trimLeft());return a}a={add:function(a,c,d){__p&&__p();d=d||a;b("DOMQuery").scry(a,"br").forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)});var e=d.offsetHeight||0;if(e<=c)return;var f=l(a),g=f.length-1,m=c+1;e=function(){__p&&__p();var a=b("getElementText")(f[g]).split(/[\n\s]/g),c=b("BinarySearch").greatestLowerBound(function(b){k(f[g],i(a,b,g));return d.offsetHeight||0},m,0,a.length,function(a,b){return a-b});if(c>0){k(f[g],i(a,c,g));return"break"}c=b("BinarySearch").greatestLowerBound(function(b){k(f[g],j(a[0],b,g));return d.offsetHeight||0},m,0,a[0].length-h.length-2,function(a,b){return a-b});if(c>-1){k(f[g],j(a[0],c,g));return"break"}k(f[g],"");g--};while(g>=0){a=e();if(a==="break")break}}};function k(a,b){g=g||(a.textContent!=null?"textContent":"innerText"),a[g]=b}function l(a){return b("isTextNode")(a)?[a]:b("concatMap")(l,Array.from(a.childNodes))}e.exports=a}),null);
__d("WorkChatActivityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppID=function(a){this.$1.app_id=a;return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setGroupID=function(a){this.$1.group_id=a;return this};a.prototype.setHscrollPosition=function(a){this.$1.hscroll_position=a;return this};a.prototype.setThreadIds=function(a){this.$1.thread_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={app_id:!0,app_version:!0,event:!0,group_id:!0,hscroll_position:!0,thread_ids:!0,vc:!0};e.exports=a}),null);
__d("MercurySendMessageHandler",["MercuryMessageActions","MercuryMessageObject","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};function a(a){this.$1=a,this.$2=b("MercuryMessageActions").getForFBID(this.$1),this.$3=b("MercuryMessageObject").getForFBID(this.$1)}a.prototype.sendPlainTextMessage=function(a,b,c){b=this.$3.constructUserGeneratedMessageObject(b,c,a);this.$2.send(b)};a.prototype.sendSticker=function(a,b,c){b=this.$3.constructStickerMessageObject(b,c,a);this.$2.send(b)};a.prototype.sendAttachment=function(a,b,c){c=this.$3.constructAttachmentMessageObject(c,a);this.$2.addAttachmentPlaceholder(c,b.upload_id,b)};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("M4IconPaperclip.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconPaperclip");function h(a,c,d){var e=a?a[0]:!0,f=c?c[0]:"blue";return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("ReasonReact.bs").element(0,0,b("M4IconSVG.bs").make([e?b("React").createElement("path",{key:"filled",d:"M9.4,12.2l4.9-4.7c1.3-1.3,1.3-3.4,0-4.8l0,0l0,0c-1.3-1.3-3.4-1.3-4.8,0l-8.1,7.3c-1,1-1,2.6,0,3.6l0,0l0,0\n            c0.9,0.9,2.2,0.9,3.1,0L11,7.7c0.5-0.5,0.5-1.4,0-1.9l0,0v0c-0.5-0.5-1.4-0.5-1.9,0L5.9,9",fill:"none",stroke:f,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5"}):b("React").createElement("path",{key:"outline",d:"M9,12.3l5.5-5.2c1.3-1.3,1.3-3.4,0-4.6l0,0l0,0c-1.3-1.3-3.4-1.3-4.6,0l-8.6,8c-1,1-1,2.5,0,3.5l0,0l0,0 c0.8,0.8,2.2,0.8,3,0l6.9-6.3c0.5-0.5,0.5-1.3,0-1.9l0,0l0,0c-0.5-0.5-1.3-0.5-1.9,0L6.5,8.5",fill:"none",stroke:f,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"})]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h([a.filled],[a.color],[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("ChatPhotoUploader.react",["cssVar","cx","fbt","Promise","Bootloader","ChatConfig","FantaTypeComposer","InlineBlock.react","Link.react","M4IconPaperclip.bs","MercuryConfig","MessengerEnvironment","React","ReactDOM","SubscriptionsHandler","TooltipData","emptyFunction","gkx","ifRequired","joinClasses","promiseDone"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("M4IconPaperclip.bs").jsComponent;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){__p&&__p();j.constructor.call(this,a),this.$13=function(a,b){this.props.onSubmit&&this.props.onSubmit(a,b),this.$14("show_file_placeholder")}.bind(this),this.$15=function(a,b){this.props.onAllUploadsComplete&&this.props.onAllUploadsComplete(a,b),this.$14("upload_files_complete"),this.$6||this.$11()}.bind(this),this.$16=function(a,b){this.props.onLastUploadFail&&this.props.onLastUploadFail(a,b),this.$6||this.$11()}.bind(this),this.$17=function(a,b){this.props.onLastUploadCancel&&this.props.onLastUploadCancel(a,b),this.$6||this.$11()}.bind(this),this.$18=function(a,b){this.props.onUploadError&&this.props.onUploadError(b),this.$14("upload_file_failed"),this.$6||this.$11()}.bind(this),this.$19=function(){__p&&__p();this.$3||(this.$2=!0,this.$3=new(b("Promise"))(function(a){this.$5.addSubscriptions(b("Bootloader").loadModules(["ChatAutoSendPhotoUploader"],function(c){b("promiseDone")(this.$4,function(d){this.$2=!1;d=new c(b("ReactDOM").findDOMNode(this.$7),b("ReactDOM").findDOMNode(this.$9),b("ReactDOM").findDOMNode(this.$10),b("MercuryConfig").msgr_region);d.setAllowCrossPage(this.props.allowCrossPage);this.$5.addSubscriptions(d.subscribe("submit",this.$13),d.subscribe("all-uploads-completed",this.$15),d.subscribe("last-upload-failed",this.$16),d.subscribe("last-upload-canceled",this.$17),d.subscribe("file-upload-error",this.$18));this.$1=d;a(this.$1)}.bind(this))}.bind(this),"ChatPhotoUploader.react"))}.bind(this)));return this.$3}.bind(this),this.$4=new(b("Promise"))(function(a,b){this.$8=a}.bind(this)),this.$5=new(b("SubscriptionsHandler"))()}a.prototype.shouldComponentUpdate=function(a){return a.actionURI!=this.props.actionURI||a.disabled!==this.props.disabled||a.threadID!==this.props.threadID||a.color!==this.props.color};a.prototype.componentDidMount=function(){this.$6=!0,typeof this.props.onMount==="function"&&this.props.onMount(this),this.$5.addSubscriptions(b("MessengerEnvironment").messengerui?b("Bootloader").loadModules(["MessengerActions"],b("emptyFunction"),"ChatPhotoUploader.react"):b("Bootloader").loadModules(["FantaMessageActions"],b("emptyFunction"),"ChatPhotoUploader.react"))};a.prototype.componentDidUpdate=function(){this.$1&&this.$1.setAllowCrossPage(this.props.allowCrossPage)};a.prototype.componentWillUnmount=function(){(!this.isUploading()||!this.props.allowCrossPage)&&this.$11(),this.$6=!1};a.prototype.render=function(){var a=b("ChatConfig").get("single_line_composer")&&!b("MessengerEnvironment").messengerui?i._("Add photos, videos and files"):"",c=this.props.imagesOnly?i._("Add photos"):i._("Add files"),d=b("joinClasses")("_4q61"+(this.props.customUI?"":" _5f0v")+(this.props.customUI?"":" _509v"),this.props.linkClassName),e=this.props.threadID;return b("React").createElement("form",babelHelpers["extends"]({action:this.props.actionURI,className:"_vzk _4uld",title:c},b("TooltipData").propsFor(a),{method:"post",onClick:function(a){a.stopPropagation(),this.props.disabled&&a.preventDefault()}.bind(this),ref:function(a){return this.$8(this.$7=a)}.bind(this)}),b("React").createElement("input",{type:"hidden",name:"attach_id",ref:function(a){return this.$10=a}.bind(this)}),b("React").createElement("input",{type:"hidden",name:"images_only",value:this.props.imagesOnly}),b("React").createElement(b("InlineBlock.react"),{className:b("joinClasses")(this.props.className,"_m _4q60 _3rzn")},b("React").createElement("input",{disabled:this.props.disabled,type:"file",className:b("joinClasses")(this.props.inputClassname,"_n _2__f _4e5e"),name:"attachment[]",multiple:"true",accept:this.props.imagesOnly?"image/*":"*",ref:function(a){return this.$9=a}.bind(this),title:c,onChange:function(event){this.$12(event,e)}.bind(this)}),b("React").createElement(b("Link.react"),{className:d,tabIndex:-1},!b("MessengerEnvironment").messengerui&&b("ChatConfig").get("single_line_composer")?b("React").createElement(k,{filled:!1,color:this.props.color}):b("React").createElement("i",{className:this.props.imageClassName,alt:i._("Camera")}))))};a.prototype.$12=function(event,a){__p&&__p();var c=event.target.files,d=function(){this.$9&&(this.$9.value="")}.bind(this);b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerActions",function(b){b.prepareFilesForSend(a,c,"ComposerIcons"),d()},function(){this.$5.addSubscriptions(b("Bootloader").loadModules(["MessengerActions"],function(b){b.prepareFilesForSend(a,c,"ComposerIcons"),d()},"ChatPhotoUploader.react"))}.bind(this)):b("ifRequired")("FantaMessageActions",function(b){this.props.composer&&b.prepareFilesForSend(a,c,this.props.composer,d)}.bind(this),function(){this.$5.addSubscriptions(b("Bootloader").loadModules(["FantaMessageActions"],function(b){this.props.composer&&b.prepareFilesForSend(a,c,this.props.composer,d)}.bind(this),"ChatPhotoUploader.react"))}.bind(this));this.props.focusInput&&this.props.focusInput()};a.prototype.$14=function(a){var c=this.props.threadID;if(!c)return;this.$5.addSubscriptions(b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger","MessengerShareFilePreviewFunnelLoggerConstants"],function(d,e){d.appendAction(!b("MessengerEnvironment").messengerui,a,c),a===e.UPLOAD_FILES_COMPLETE&&d.endFunnel(c)},"ChatPhotoUploader.react"))};a.prototype.isUploading=function(){return this.$1&&this.$1.isUploading()||!!this.$2};a.prototype.uploadFiles=function(a){b("promiseDone")(this.$19(),function(b){b.uploadFiles(a)})};a.prototype.uploadURL=function(a){b("promiseDone")(this.$19(),function(b){b.uploadURL(a)})};a.prototype.$11=function(){this.$5.release(),this.$1&&this.$1.destroy()};a.defaultProps={actionURI:b("MercuryConfig").upload_url,allowCrossPage:!0,costomUI:!1,disabled:!1,imageClassName:"_509w",imagesOnly:!0,linkClassName:"",onSubmit:b("emptyFunction"),onAllUploadsComplete:b("emptyFunction"),onLastUploadFail:b("emptyFunction"),onLastUploadCancel:b("emptyFunction"),color:"#0084ff"};e.exports=a}),null);
__d("MercuryTypingAnimation.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a="_4a0v _1x3z";return b("React").createElement("div",{className:b("joinClasses")(this.props.className,a)},b("React").createElement("div",{className:"_4b0g"},b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"})))};function a(){h.apply(this,arguments)}a.propTypes={color:c.oneOf(["light","dark"])};a.defaultProps={color:"dark"};e.exports=a}),null);
__d("ChatTypingIndicator.react",["cx","fbt","Image.react","MercuryConfig","MercuryIDs","MercuryTypingAnimation.react","MessengerParticipants.bs","MessengerPersonas.bs","QE2Logger","React","ReactComponentWithPureRenderMixin"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatTypingIndicator",mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{isOnline:a.bool,userID:a.string,showName:a.bool},componentDidMount:function(){b("QE2Logger").logExposureForUser("messenger_growth_tombstone")},render:function(){var a,c=this.getPersona();this.props.userID&&(a=b("MessengerParticipants.bs").getNow(this.props.userID));if(!a&&!c)return null;var d=b("MercuryConfig").GDWC&&!!this.props.isOnline;return b("React").createElement("div",{className:"_4tdt"},i(a,c,d),this._renderBubble())},getBubble:function(){return this.refs.bubble},getPersona:function(){var a=this.props.userID;return!a?null:b("MessengerPersonas.bs").getNow(b("MercuryIDs").getUserIDFromParticipantID(a))},_renderBubble:function(){var a=this.props.showName;return b("React").createElement("div",{className:"_4tdv"},b("React").createElement("div",{className:"_5wd4 _1nc7 _2cnu"+(a?" _5ysy":"")},b("React").createElement("div",{className:"_5wd9 _n4o"},b("React").createElement("div",{className:"_5w1r _5wdf _3_om"},b("React").createElement(b("MercuryTypingAnimation.react"),{className:"_5x7x",ref:"bubble"})))))}});function i(a,c,d){var e=c?c.name:a?a.name:null;c=c?c.profile_picture_url:a?a.image_src:null;a=a?a.href:null;e=h._("{name}",[h._param("name",e)]);return b("React").createElement("div",{className:"_31o4 _3njy"},b("React").createElement("a",{"aria-label":e,className:"_4tdw","data-hover":"tooltip","data-tooltip-content":e,"data-tooltip-position":"left",href:a||"#",ref:"link"},b("React").createElement(b("Image.react"),{src:c,ref:"image"})),d?b("React").createElement("div",{className:"_sce"}):null)}e.exports=c}),null);
__d("ChatTypingIndicators.react",["cx","fbt","ChatTypingIndicator.react","CurrentUser","DOM","MercuryIDs","MessengerParticipants.bs","MessengerPersonas.bs","MessengerState.bs","React","ReactDOM","TooltipData","emptyFunction","gkx","immutable"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatTypingIndicators",propTypes:{indicatorClass:a.func,indicatorsDidShow:a.func,indicatorsDidHide:a.func,onlineUsers:a.instanceOf(b("immutable").List),rootClassName:a.string,threadID:a.string.isRequired,viewer:a.string.isRequired,typingUserIDs:a.arrayOf(a.string.isRequired).isRequired},getDefaultProps:function(){return{indicatorClass:b("ChatTypingIndicator.react"),indicatorsDidShow:b("emptyFunction"),indicatorsDidHide:b("emptyFunction")}},shouldComponentUpdate:function(a){__p&&__p();var b=new Set(a.typingUserIDs),c=new Set(this.props.typingUserIDs);if(b.size!==c.size)return!0;for(var b=b,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;if(!c.has(f))return!0}return a.threadID!==this.props.threadID||a.viewer!==this.props.viewer||a.onlineUsers!==this.props.onlineUsers||a.rootClassName!==this.props.rootClassName},componentDidUpdate:function(){this.props.typingUserIDs.length>0?this.props.indicatorsDidShow():this.props.indicatorsDidHide(),b("MessengerParticipants.bs").getMulti(this.props.typingUserIDs,function(a){this.isMounted()&&this.props.typingUserIDs.forEach(function(c){var d=a[c],e=this.refs[c]&&this.refs[c].getBubble();if(e&&d){c=b("MessengerPersonas.bs").getNow(b("MercuryIDs").getUserIDFromParticipantID(c));c=c?c.name:d.short_name;b("TooltipData").set(b("ReactDOM").findDOMNode(e),this.renderTooltip(c),"above","left")}}.bind(this))}.bind(this))},_renderContent:function(){var a=b("MercuryIDs").isGroupChat(this.props.threadID);return b("React").createElement("div",{className:this.props.rootClassName},Array.from(this.props.typingUserIDs).sort().map(function(b){return this._renderTypingIndicator(b,!!a)}.bind(this)))},render:function(){if(!b("MercuryIDs").isValid(this.props.threadID))return null;var a=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),this.props.threadID);if(a&&!a.is_subscribed)return null;if(!b("CurrentUser").isWorkUser()&&b("gkx")("AT4vZBWyiZL1KZrir2lJt4vVNMIYu8sDbA3PtNwJWZh5seJSYZeYdmCgqH3wgiUS4PfslnEPm3wz9jSsjDINBCSy"))return b("React").createElement("div",{className:"_4gd0"},this._renderContent());else return this._renderContent()},_renderTypingIndicator:function(a,c){var d=this.props.indicatorClass,e=this.props.onlineUsers!==undefined&&this.props.onlineUsers.includes(b("MercuryIDs").getUserIDFromParticipantID(a));return b("React").createElement(d,{key:a,ref:a,showName:c,userID:a,isOnline:e})},renderTooltip:function(a){var c=b("DOM").create("span");b("ReactDOM").render(b("React").createElement("span",null,h._("{name} is typing...",[h._param("name",a)])),c);return c}});e.exports=c}),null);
__d("ChatTypingIndicatorsWrapper.react",["ChatTypingIndicators.react","MessengerState.bs","React","immutable"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){"use strict";return b("React").createElement(b("MessengerState.bs").jsComponent,{fbid:this.props.viewer},function(a){return b("React").createElement(b("ChatTypingIndicators.react"),{indicatorClass:this.props.indicatorClass,indicatorsDidHide:this.props.indicatorsDidHide,indicatorsDidShow:this.props.indicatorsDidShow,onlineUsers:this.props.onlineUsers,rootClassName:this.props.rootClassName,threadID:this.props.threadID,typingUserIDs:Object.keys(b("MessengerState.bs").typing(a)[this.props.threadID]||{}),viewer:this.props.viewer})}.bind(this))};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("MontageThreadViewContainer.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React","gkx"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("gkx")("AT6qRb-SWYlf5VQ0hAQRwBSqF5KGfoiWvc0dOiSufUVg1Wl1YzE8_MxRBV3jrSCS8K3y4mLTNT_xf8hli29AIeDG")?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{montageData:this.props.montageData}),loader:b("JSResource")("MessengerStateMontageThreadView.react").__setRef("MontageThreadViewContainer.react"),placeholder:b("React").createElement("div",null)}):b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("MontageThreadViewContainerImpl.react").__setRef("MontageThreadViewContainer.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("ComposedEntityMutability",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MUTABLE:0,IMMUTABLE:1,SEGMENTED:2})}),null);
__d("ComposedBlockType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNSTYLED:0,PARAGRAPH:1,UNORDERED_LIST_ITEM:2,ORDERED_LIST_ITEM:3,BLOCKQUOTE:4,HEADER_ONE:5,HEADER_TWO:6,CODE:7,MEDIA:8,PULLQUOTE:9,HEADER_THREE:10,HEADER_FOUR:11,HEADER_FIVE:12,HEADER_SIX:13,CHECKBOX_LIST_ITEM:14,TABLE:15,THEMATIC_BREAK:16})}),null);
__d("DraftTreeAdapter",["invariant"],(function(a,b,c,d,e,f,g){__p&&__p();var h=function(a,b){a=[].concat(a).reverse();while(a.length){var c=a.pop();b(c);c=c.children;Array.isArray(c)||g(0);a=a.concat([].concat(c.reverse()))}},i=function(a){if(!(a&&a.type))return!1;a=a.type;return a==="unordered-list-item"||a==="ordered-list-item"},j=function(a){Array.isArray(a.children)&&(a.children=a.children.map(function(b){return b.type===a.type?babelHelpers["extends"]({},b,{depth:(a.depth||0)+1}):b}))};a={fromRawTreeStateToRawState:function(a){__p&&__p();var b=a.blocks,c=[];Array.isArray(b)||g(0);if(!Array.isArray(b)||!b.length)return a;h(b,function(a){var b=babelHelpers["extends"]({},a);i(a)&&(b.depth=b.depth||0,j(a));delete b.children;c.push(b)});a.blocks=c;return babelHelpers["extends"]({},a,{blocks:c})},fromRawStateToRawTreeState:function(a){__p&&__p();var b={},c=[];a.blocks.forEach(function(a){__p&&__p();var d=i(a),e=a.depth||0;a=babelHelpers["extends"]({},a,{children:[]});if(!d){b={};c.push(a);return}b[e]=a;if(e>0){d=b[e-1];d||g(0);d.children.push(a);return}c.push(a)});return babelHelpers["extends"]({},a,{blocks:c})}};e.exports=a}),null);
__d("createCharacterList",["CharacterMetadata","immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("immutable").List;function a(a,c){a=a.map(function(a,d){d=c[d];return b("CharacterMetadata").create({style:a,entity:d})});return g(a)}e.exports=a}),null);
__d("decodeEntityRanges",["UnicodeUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("UnicodeUtils").substr;function a(a,b){var c=Array(a.length).fill(null);b&&b.forEach(function(b){var d=g(a,0,b.offset).length,e=d+g(a,b.offset,b.length).length;for(var d=d;d<e;d++)c[d]=b.key});return c}e.exports=a}),null);
__d("decodeInlineStyleRanges",["immutable","UnicodeUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=b("immutable").OrderedSet;var g=b("UnicodeUtils").substr,h=c();function a(a,b){var c=Array(a.length).fill(h);b&&b.forEach(function(b){var d=g(a,0,b.offset).length,e=d+g(a,b.offset,b.length).length;while(d<e)c[d]=c[d].add(b.style),d++});return c}e.exports=a}),null);
__d("convertFromRawToDraftState",["invariant","ContentBlock","ContentBlockNode","ContentState","DraftEntity","DraftTreeAdapter","immutable","SelectionState","createCharacterList","decodeEntityRanges","decodeInlineStyleRanges","generateRandomKey","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN"),i=b("immutable").List,j=b("immutable").Map,k=b("immutable").OrderedMap,l=function(a,c){var d=a.key,e=a.type,f=a.data,g=a.text,h=a.depth;g={text:g,depth:h||0,type:e||"unstyled",key:d||b("generateRandomKey")(),data:j(f),characterList:m(a,c)};return g},m=function(a,c){var d=a.text,e=a.entityRanges;a=a.inlineStyleRanges;e=e||[];a=a||[];return b("createCharacterList")(b("decodeInlineStyleRanges")(d,a),b("decodeEntityRanges")(d,e.filter(function(a){return Object.prototype.hasOwnProperty.call(c,a.key)}).map(function(a){return babelHelpers["extends"]({},a,{key:c[a.key]})})))},n=function(a){return babelHelpers["extends"]({},a,{key:a.key||b("generateRandomKey")()})},o=function(a,b,c){b=b.map(function(a){return babelHelpers["extends"]({},a,{parentRef:c})});return a.concat(b.reverse())},p=function(a,c){__p&&__p();return a.map(n).reduce(function(d,e,f){__p&&__p();Array.isArray(e.children)||g(0);var h=e.children.map(n);e=new(b("ContentBlockNode"))(babelHelpers["extends"]({},l(e,c),{prevSibling:f===0?null:a[f-1].key,nextSibling:f===a.length-1?null:a[f+1].key,children:i(h.map(function(a){return a.key}))}));d=d.set(e.getKey(),e);f=o([],h,e);while(f.length>0){h=f.pop();e=h.parentRef;var j=e.getChildKeys(),k=j.indexOf(h.key),m=Array.isArray(h.children);if(!m){m||g(0);break}m=h.children.map(n);h=new(b("ContentBlockNode"))(babelHelpers["extends"]({},l(h,c),{parent:e.getKey(),children:i(m.map(function(a){return a.key})),prevSibling:k===0?null:j.get(k-1),nextSibling:k===j.size-1?null:j.get(k+1)}));d=d.set(h.getKey(),h);f=o(f,m,h)}return d},k())},q=function(a,c){return k(a.map(function(a){a=new(b("ContentBlock"))(l(a,c));return[a.getKey(),a]}))},r=function(a,c){var d=Array.isArray(a.blocks[0].children),e=h&&!d?b("DraftTreeAdapter").fromRawStateToRawTreeState(a).blocks:a.blocks;return!h?q(d?b("DraftTreeAdapter").fromRawTreeStateToRawState(a).blocks:e,c):p(e,c)},s=function(a){var c=a.entityMap,d={};Object.keys(c).forEach(function(a){var e=c[a],f=e.type,g=e.mutability;e=e.data;d[a]=b("DraftEntity").__create(f,g,e||{})});return d};a=function(a){Array.isArray(a.blocks)||g(0);var c=s(a);a=r(a,c);var d=a.isEmpty()?new(b("SelectionState"))():b("SelectionState").createEmpty(a.first().getKey());return new(b("ContentState"))({blockMap:a,entityMap:c,selectionBefore:d,selectionAfter:d})};e.exports=a}),null);
__d("decodeBlocks",["ComposedBlockType","ComposedInlineStyle","convertFromRawToDraftState","mapObject"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){a=a.map(function(a){var b=a.type,c=a.inlineStyleRanges;a=babelHelpers.objectWithoutProperties(a,["type","inlineStyleRanges"]);return babelHelpers["extends"]({type:g[b]||"unstyled",inlineStyleRanges:(c||[]).map(function(a){return babelHelpers["extends"]({},a,{style:h[a.style]})})},a)});c=b("mapObject")(c,function(a){return{type:a.getType(),mutability:a.getMutability(),data:a.getData()}});return b("convertFromRawToDraftState")({blocks:a,entityMap:c})}var g={};g[b("ComposedBlockType").UNSTYLED]="unstyled";g[b("ComposedBlockType").PARAGRAPH]="paragraph";g[b("ComposedBlockType").BLOCKQUOTE]="blockquote";g[b("ComposedBlockType").ORDERED_LIST_ITEM]="ordered-list-item";g[b("ComposedBlockType").UNORDERED_LIST_ITEM]="unordered-list-item";g[b("ComposedBlockType").CODE]="code-block";g[b("ComposedBlockType").HEADER_ONE]="header-one";g[b("ComposedBlockType").HEADER_TWO]="header-two";g[b("ComposedBlockType").MEDIA]="atomic";g[b("ComposedBlockType").PULLQUOTE]="pullquote";var h={};h[b("ComposedInlineStyle").BOLD]="BOLD";h[b("ComposedInlineStyle").CODE]="CODE";h[b("ComposedInlineStyle").ITALIC]="ITALIC";h[b("ComposedInlineStyle").STRIKETHROUGH]="STRIKETHROUGH";h[b("ComposedInlineStyle").UNDERLINE]="UNDERLINE";e.exports=a}),null);
__d("ComposedEntityType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MENTION:0,LINK:1,IMAGE:2,VIDEO:3,EMOTICON:4,TOKEN:5,HASHTAG:6,IMPLICIT_LINK:7,EMBED:8,EMOJI:9,MATH:10,HIGHLIGHT:11,DELIGHT:12,TEMPLATE_VARIABLE:13,ASSISTANT_TYPEAHEAD:14})}),null);
__d("DraftStringKey",[],(function(a,b,c,d,e,f){"use strict";a={stringify:function(a){return"_"+String(a)},unstringify:function(a){return a.slice(1)}};e.exports=a}),null);
__d("encodeEntityRanges",["DraftStringKey","UnicodeUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("UnicodeUtils").strlen;function a(a,c){var d=[];a.findEntityRanges(function(a){return!!a.getEntity()},function(e,f){var h=a.getText(),i=a.getEntityAt(e);d.push({offset:g(h.slice(0,e)),length:g(h.slice(e,f)),key:Number(c[b("DraftStringKey").stringify(i)])})});return d}e.exports=a}),null);
__d("encodeInlineStyleRanges",["UnicodeUtils","findRangesImmutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){return a===b},h=function(a){return!!a},i=[];function j(a,c,d){var e=[];c=c.map(function(a){return a.has(d)}).toList();b("findRangesImmutable")(c,g,h,function(c,f){var g=a.getText();e.push({offset:b("UnicodeUtils").strlen(g.slice(0,c)),length:b("UnicodeUtils").strlen(g.slice(c,f)),style:d})});return e}function a(a){var b=a.getCharacterList().map(function(a){return a.getStyle()}).toList(),c=b.flatten().toSet().map(function(c){return j(a,b,c)});return Array.prototype.concat.apply(i,c.toJS())}e.exports=a}),null);
__d("convertFromDraftStateToRaw",["invariant","ContentBlock","ContentBlockNode","DraftStringKey","encodeEntityRanges","encodeInlineStyleRanges"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=function(a,c){return{key:a.getKey(),text:a.getText(),type:a.getType(),depth:a.getDepth(),inlineStyleRanges:b("encodeInlineStyleRanges")(a),entityRanges:b("encodeEntityRanges")(a,c),data:a.getData().toObject()}},i=function(a,c,d,e){__p&&__p();if(a instanceof b("ContentBlock")){d.push(h(a,c));return}a instanceof b("ContentBlockNode")||g(0);var f=a.getParentKey();a=e[a.getKey()]=babelHelpers["extends"]({},h(a,c),{children:[]});if(f){e[f].children.push(a);return}d.push(a)},j=function(a,c){__p&&__p();var d=c.entityMap,e=[],f={},g={},h=0;a.getBlockMap().forEach(function(a){a.findEntityRanges(function(a){return a.getEntity()!==null},function(c){c=a.getEntityAt(c);var e=b("DraftStringKey").stringify(c);if(g[e])return;g[e]=c;d[e]=""+h;h++}),i(a,d,e,f)});return{blocks:e,entityMap:d}},k=function(a,c){var d=c.blocks;c=c.entityMap;var e={};Object.keys(c).forEach(function(c,d){c=a.getEntity(b("DraftStringKey").unstringify(c));e[d]={type:c.getType(),mutability:c.getMutability(),data:c.getData()}});return{blocks:d,entityMap:e}};a=function(a){var b={entityMap:{},blocks:[]};b=j(a,b);b=k(a,b);return b};e.exports=a}),null);
__d("encodeBlocks",["ComposedBlockType","ComposedEntityType","ComposedInlineStyle","convertFromDraftStateToRaw","mapObject","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();a=b("convertFromDraftStateToRaw")(a);var c=a.blocks;a=a.entityMap;c=c.map(function(a){var c=a.key,d=a.type,e=a.text,f=a.depth,i=a.inlineStyleRanges,j=a.entityRanges;a=a.data;return{key:b("nullthrows")(c),type:g[d],text:e,depth:b("nullthrows")(f),inlineStyleRanges:b("nullthrows")(i).map(function(a){return babelHelpers["extends"]({},a,{style:h[a.style]})}),entityRanges:b("nullthrows")(j),data:a}});a=b("mapObject")(a,function(a){var c=a.data,d=null,e=undefined;typeof c==="object"&&(d=c.id,e=babelHelpers.objectWithoutProperties(c,["id"]),Object.keys(e).length===0?e=undefined:e=b("mapObject")(e,function(a){return a==null?"":String(a)}));return{id:d||null,type:b("ComposedEntityType")[a.type],data:e}});return{blocks:c,entityMap:a}}var g={unstyled:b("ComposedBlockType").UNSTYLED,paragraph:b("ComposedBlockType").PARAGRAPH,blockquote:b("ComposedBlockType").BLOCKQUOTE,"ordered-list-item":b("ComposedBlockType").ORDERED_LIST_ITEM,"unordered-list-item":b("ComposedBlockType").UNORDERED_LIST_ITEM,"code-block":b("ComposedBlockType").CODE,"header-one":b("ComposedBlockType").HEADER_ONE,"header-two":b("ComposedBlockType").HEADER_TWO,atomic:b("ComposedBlockType").MEDIA,pullquote:b("ComposedBlockType").PULLQUOTE,"checkbox-list-item":b("ComposedBlockType").CHECKBOX_LIST_ITEM,"header-three":b("ComposedBlockType").HEADER_TWO,"header-four":b("ComposedBlockType").HEADER_TWO,"header-five":b("ComposedBlockType").HEADER_TWO,"header-six":b("ComposedBlockType").HEADER_TWO},h={BOLD:b("ComposedInlineStyle").BOLD,CODE:b("ComposedInlineStyle").CODE,ITALIC:b("ComposedInlineStyle").ITALIC,STRIKETHROUGH:b("ComposedInlineStyle").STRIKETHROUGH,UNDERLINE:b("ComposedInlineStyle").UNDERLINE};e.exports=a}),null);
__d("MessengerEditorStateManager",["CacheStorage","ComposedEntityMutability","ComposedEntityMutabilityToName","ComposedEntityTypeToName","DraftEntityInstance","EditorState","MessengerConstants","SelectionState","decodeBlocks","encodeBlocks","mapObject"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("CacheStorage"))("localstorage"),h=b("ComposedEntityMutability").IMMUTABLE,i;a={get:function(a){__p&&__p();if(!a)return this._getEmptyEditorState();if(a===b("MessengerConstants").NEW_THREAD_KEY)return i||this._getEmptyEditorState();a=g.get(a,!1);if(!a)return this._getEmptyEditorState();var c=a.encodedBlocks,d=b("mapObject")(c.entityMap,function(a,c){return new(b("DraftEntityInstance"))({type:b("ComposedEntityTypeToName")[a.type],mutability:b("ComposedEntityMutabilityToName")[h],data:a.data})});c=b("decodeBlocks")(c.blocks,d);d=b("EditorState").createWithContent(c);return b("EditorState").acceptSelection(d,new(b("SelectionState"))(a.selection))},set:function(a,c){if(a===b("MessengerConstants").NEW_THREAD_KEY){i=c;return}var d=b("encodeBlocks")(c.getCurrentContent());c=c.getSelection().toJS();g.set(a,{encodedBlocks:d,selection:c})},_getEmptyEditorState:function(){var a=b("EditorState").createEmpty();return b("EditorState").forceSelection(a,a.getSelection())}};e.exports=a}),null);
__d("WorkChatAvailabilityStatusLoader",["Promise","Bootloader","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_store:null,_actions:null,_promise:null,getStoreEnforce:function(){b("nullthrows")(this._store,"Status store is not loaded");return this._store},getActionsEnforce:function(){b("nullthrows")(this._actions,"Status actions is not loaded");return this._actions},isLoaded:function(){return this._store&&this._actions},load:function(){this._promise||(this._promise=new(b("Promise"))(function(a){b("Bootloader").loadModules(["WorkChatAvailabilityStatusActions","WorkChatAvailabilityStatusStore"],function(b,c){this._store=c,this._actions=b,a({store:c,actions:b})}.bind(this),"WorkChatAvailabilityStatusLoader")}.bind(this)));return this._promise}};e.exports=a}),null);
__d("MessengerPresenceStatusUtils",["fbt","AvailableListConstants","CurrentUser","LastActiveTimes","MercuryIDs","PresenceStatus","WorkChatAvailabilityStatusLoader","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getStatusFromCanonicalThread:function(a,c){__p&&__p();var d=null;if(c&&c.is_canonical){a=a.get(b("MercuryIDs").getParticipantIDFromFromThreadID(c.thread_id));if(a){a.is_messenger_user?c=b("CurrentUser").isWorkUser()?g._("Workplace Chat"):g._("Messenger"):c=b("CurrentUser").isWorkUser()?g._("Workplace"):g._("Facebook");var e=null,f=!1;if(b("WorkChatAvailabilityStatusLoader").isLoaded()&&b("CurrentUser").isWorkUser()&&b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6")){var h=b("WorkChatAvailabilityStatusLoader").getStoreEnforce();e={isDoNotDisturb:h.getIsDoNotDisturb(a.fbid),description:h.getDescriptionWithUserName(a.short_name,a.fbid)};f=e.isDoNotDisturb}h=b("PresenceStatus").get(a.fbid);var i,j;h!==b("AvailableListConstants").ACTIVE&&(i=b("LastActiveTimes").get(a.fbid),j=b("LastActiveTimes").getShortDisplay(a.fbid));h=h===b("AvailableListConstants").ACTIVE&&!f;d={contact:a,platform:c,isUserActive:h,availabilityStatusData:e,lastActiveTS:f?null:i,lastActive:f?null:j}}}return d}};e.exports=a}),null);
__d("MessengerURLUploader",["AsyncRequest","Event","MessengerActions","SubscriptionsHandler","URLMatcher","XShareScrapeAttachmentAsyncController","debounce"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("XShareScrapeAttachmentAsyncController").getURIBuilder().getURI(),h=920,i=920;function a(a,c,d){this.handleInputValueChange=function(a){a=this.$3();a=b("URLMatcher").match(a);a&&(this.$5!==a&&(this.$5=a,this.$2=null,b("MessengerActions").loadingPreview(this.$7,a),this.loadShare()))}.bind(this),this.$3=a,this.$6=new(b("SubscriptionsHandler"))(),this.$7=d,this.$4=b("debounce")(this.handleInputValueChange,200),this.initInput(c)}a.prototype.getData=function(){return this.$2};a.prototype.getMatchedURL=function(){return this.$5};a.prototype.initInput=function(a){this.$6.addSubscriptions(b("Event").listen(a,"keyup",this.$4),b("Event").listen(a,"paste",this.$4))};a.prototype.loadShare=function(){this.$1&&this.$1.abort&&this.$1.abort();var a=this.$5;a&&(this.$1=new(b("AsyncRequest"))().setMethod("POST").setURI(g).setData({uri:a,image_width:i,image_height:h,disallow_delayed:!0}).setHandler(this.handleShareLoad.bind(this,a)).send())};a.prototype.handleShareLoad=function(a,b){a===this.$5&&(this.$2=(b.payload||0).share_data)};a.prototype.setThreadID=function(a){this.$7=a};a.prototype.clearShareData=function(){this.$5=null,this.$2=null};e.exports=a}),null);
__d("WorkChatExtensionsDrawersQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1696600907120234"};c.getQueryID=function(){"use strict";return"148385269340310"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("WorkChatExtensionAvailabilityFetcher",["Promise","WebGraphQL","WebStorage","WorkChatExtensionsDrawersQueryWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=36e5;function h(a){b("WebStorage").setItemGuarded(b("WebStorage").getLocalStorage(),"hasWorkChatExtension",a),b("WebStorage").setItemGuarded(b("WebStorage").getLocalStorage(),"hasWorkChatExtensionFetchTime",Date.now())}e.exports={checkHasChatExtension:function(){return new(b("Promise"))(function(a,c){c=b("WebStorage").getLocalStorageForRead();var d=c?c.getItem("hasWorkChatExtension"):null;c=c?c.getItem("hasWorkChatExtensionFetchTime")||0:0;return d==="true"&&Date.now()-parseInt(c,10)<g?a(!0):b("WebGraphQL").exec(new(b("WorkChatExtensionsDrawersQueryWebGraphQLQuery"))({})).then(function(a){a=((a=a)!=null?(a=a.viewer)!=null?(a=a.messenger_platform_drawers_info)!=null?(a=a[0])!=null?a.drawer_elements:a:a:a:a)||[];a=a.length>0;h(a);return a})})},setChatExtensionAvailability:h}}),null);
__d("MessengerComposerActions",["MessengerDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null,MOVE_DRAFT:null});a={Types:g,addToken:function(a){b("MessengerDispatcher").dispatch({type:g.ADD_TOKEN,entry:a})},moveDraftToNextThread:function(a){b("MessengerDispatcher").dispatch({type:g.MOVE_DRAFT,threadID:a})},removeToken:function(a){b("MessengerDispatcher").dispatch({type:g.REMOVE_TOKEN,entry:a})},focusComposer:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_COMPOSER})},focusTypeahead:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_TYPEAHEAD})},exitComposeState:function(){b("MessengerDispatcher").dispatch({type:g.EXIT_COMPOSE_STATE})}};e.exports=a}),null);
__d("MessengerLeaveGroupAction",["MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryThreadInfo","MercuryTriodeSourceUtil"],(function(a,b,c,d,e,f){a={leaveGroup:function(a,c){if(b("MercuryThreadInfo").isEmptyLocalThread(a))return;var d=b("MercuryMessageObject").getForFBID(c);d=d.constructLogMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),a.thread_id,b("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(c)]});a=b("MercuryMessageActions").getForFBID(c);a.send(d)}};e.exports=a}),null);
__d("MessengerPromotionDataDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(){g.constructor.call(this,{strict:!0})}e.exports=new a()}),null);
__d("MessengerPromotionDataActions",["MessengerPromotionDataDispatcher"],(function(a,b,c,d,e,f){"use strict";a={setPromotionData:function(a){b("MessengerPromotionDataDispatcher").dispatch({type:"SET_PROMOTION_DATA",promotionData:a})}};e.exports=a}),null);
__d("GroupTypeaheadTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({USER:"user",PAGE:"page",APP:"app",GROUP:"group",EVENT:"event",PLACE:"place",GROUP_RULE:"group_rule"})}),null);
__d("replaceSelectionWithMention",["DraftModifier","EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){e=e(c.getCurrentContent(),a);var g=e.getLastCreatedEntityKey();f=f?f(a):a.getTitle();a=b("DraftModifier").replaceText(e,d,f,c.getCurrentInlineStyle(),g);return b("EditorState").push(c,a,"insert-fragment")}e.exports=a}),null);
__d("replaceMentionedTextInEditorState",["GroupTypeaheadTypeEnum","gkx","replaceSelectionWithMention"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="@\uff20\ufe68";function a(a,c,d,e){var f=c.getSelection(),g=c.getCurrentContent(),j=f.getAnchorKey(),k=f.getAnchorOffset();g=g.getBlockMap().get(j);j=f.getStartOffset();j=g.getText().substr(j-d,d);var l=h(a,j);j=k-i(g.getText().substr(0,k),l,d);return b("replaceSelectionWithMention")(a,c,f.set("anchorOffset",j),e,function(){return l})}function h(a,c){__p&&__p();if(a.getType()===b("GroupTypeaheadTypeEnum").GROUP_RULE)return a.getSubtitle();if(!b("gkx")("AT4eVhAyXs5l-SdU2eMzGAtYZHW_8azbWQtRzBkQx-hxEYvZmrk9VzKrNwtfnQLv-dOZuBnZ683myig4JsVLktUm"))return a.getTitle();c=c.toLowerCase();g.includes(c.substring(0,1))&&(c=c.substring(1,c.length));if(a.getTitle().toLowerCase().startsWith(c))return a.getTitle();else if(a.getSubtitle().toLowerCase().startsWith(c))return"@"+a.getSubtitle();else if(a.getTitle().toLowerCase().includes(c))return a.getTitle();else if(a.getSubtitle().toLowerCase().includes(c))return"@"+a.getSubtitle();return a.getTitle()}function i(a,b,c){for(var d=c;d<=b.length;d++)a.substr(-d)==b.substr(0,d)&&(c=d);return c}e.exports=a}),null);
__d("AbstractMentionsTextEditor.react",["ContentState","DraftEditor.react","React","SearchableEntry","TypeaheadNavigation","clearImmediate","getOrCreateDOMID","replaceMentionedTextInEditorState","setImmediate","uniqueID"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React").PropTypes;d=5;var h="handled",i="not-handled";f=babelHelpers.inherits(a,b("React").Component);g=f&&f.prototype;function a(a,c){"use strict";__p&&__p();g.constructor.call(this,a,c),this.__onShowMentions=function(a,b,c){__p&&__p();if(!this.$2)return;b=b||0;if(!a||!a.length){var d=this.state.mentionableEntries;if(d&&d.length&&d[0].getDataType()!==(c||""))return;this.setState({highlightedMentionable:null,activeDescendantID:null,mentionableEntries:null,characterOffset:0});return}d=this.props.typeaheadViewProps;c=a;d&&d.mentionSortFn&&c.sort(d.mentionSortFn);c=a.slice(0,this.props.maxResults);d=null;(this.props.autoHighlight||this.state.highlightedMentionable!==null)&&(d=c[0]);this.setState({highlightedMentionable:d,mentionableEntries:c,characterOffset:b});this.props.onShowMentions&&this.props.onShowMentions(c,b)}.bind(this),this.$8=function(a){this.setState(this.$12()),this.props.onBlur&&this.props.onBlur(a)}.bind(this),this.$7=function(a){this.props.mentionsSource&&this.props.mentionsSource.bootstrap(),this.props.assistantTypeaheadSource&&this.props.assistantTypeaheadSource.bootstrap(),this.props.onFocus&&this.props.onFocus(a)}.bind(this),this.$13=function(a,b){if(this.state.highlightedMentionable){this.$10(this.state.highlightedMentionable,a);return h}else if(this.props.handleContentReturn&&this.props.handleContentReturn(a,b))return h;return i}.bind(this),this.$6=function(a){var b=this.state.highlightedMentionable;b?(a.preventDefault(),this.$10(b,a)):this.props.onTab&&this.props.onTab(a)}.bind(this),this.$5=function(a){this.props.onEscape&&this.props.onEscape(a),this.state.mentionableEntries&&(a.stopPropagation(),a.nativeEvent.isPropagationStopped=!0,this.setState(this.$12()))}.bind(this),this.$11=function(a){var c=this.state.mentionableEntries;c?(a.preventDefault(),b("TypeaheadNavigation").moveUp(c,this.state.highlightedMentionable,this.$9)):this.props.onUpArrow&&this.props.onUpArrow(a)}.bind(this),this.$4=function(a){var c=this.state.mentionableEntries;c?(a.preventDefault(),b("TypeaheadNavigation").moveDown(c,this.state.highlightedMentionable,this.$9)):this.props.onDownArrow&&this.props.onDownArrow(a)}.bind(this),this.$9=function(a){this.setState({highlightedMentionable:a})}.bind(this),this.$14=function(a){a=b("getOrCreateDOMID")(a);this.setState({ariaActiveDescendantID:a})}.bind(this),this.$10=function(a,c){__p&&__p();var d=a.getDataType(),e=this.props.mentionCreationForContentStateFn;d==="ASSISTANT_TYPEAHEAD"&&this.props.mentionTypeaheadCreationForContentStateFn&&(e=this.props.mentionTypeaheadCreationForContentStateFn);d=b("replaceMentionedTextInEditorState")(a,this.props.editorState,this.state.characterOffset,e);this.props.onChange(d);this.setState(this.$12());e=this.props.onAddMention;d=this.state.mentionableEntries;if(e&&d){d=d.indexOf(a);e(a,d,c)}}.bind(this),this.__onShowMentions=this.__onShowMentions.bind(this),this.$4=this.$4.bind(this),this.$5=this.$5.bind(this),this.$6=this.$6.bind(this),this.$7=this.$7.bind(this),this.$8=this.$8.bind(this),this.$9=this.$9.bind(this),this.$10=this.$10.bind(this),this.$11=this.$11.bind(this),this.state=this.$12()}a.prototype.UNSAFE_componentWillMount=function(){"use strict";this.$2=!0,this.$1=b("uniqueID")(),this.$3=[]};a.prototype.componentWillUnmount=function(){"use strict";this.$2=!1,this.$3.forEach(function(a){return b("clearImmediate")(a)}),this.$3=[]};a.prototype.$12=function(){"use strict";return{highlightedMentionable:null,mentionableEntries:null,characterOffset:0}};a.prototype.shouldComponentUpdate=function(a,b){"use strict";return this.props.editorState!==a.editorState||this.props.placeholder!==a.placeholder||this.props.readOnly!==a.readOnly||this.props.className!==a.className||this.state.mentionableEntries!==b.mentionableEntries||this.state.highlightedMentionable!==b.highlightedMentionable||this.state.ariaActiveDescendantID!==b.ariaActiveDescendantID};a.prototype.componentDidUpdate=function(a){"use strict";__p&&__p();var c=this.props.editorState;if(c===a.editorState)return;var d=c.getSelection();if(d.getHasFocus()&&d.isCollapsed()){var e=c.getCurrentContent(),f=this.props.mentionsSource;f&&this.$3.push(b("setImmediate")(function(){f.search(e,d,this.__onShowMentions)}.bind(this)));var g=this.props.assistantTypeaheadSource;g&&this.$3.push(b("setImmediate")(function(){g.search(e,d,this.__onShowMentions)}.bind(this)))}};a.prototype.blur=function(){"use strict";this.refs.abstractTextEditor.blur()};a.prototype.focus=function(){"use strict";this.refs.abstractTextEditor.focus()};a.prototype.$15=function(){"use strict";var a=this.state.mentionableEntries;if(!a||!a.length)return null;var c=this.props.mentionResultsComponent;return b("React").createElement(c,babelHelpers["extends"]({},this.props.mentionResultsProps,{viewID:this.$1,selection:this.props.editorState.getSelection(),contextComponent:this,characterOffset:this.state.characterOffset,mentionableEntries:a||[],highlightedMentionable:this.state.highlightedMentionable,onMentionSelect:this.$10,onMentionHighlight:this.$9,onMentionRenderHighlight:this.$14}))};a.prototype.exitCurrentMode=function(){"use strict";this.refs.abstractTextEditor&&this.refs.abstractTextEditor.exitCurrentMode()};a.prototype.render=function(){"use strict";var a=this.state.mentionableEntries;a=!!(a&&a.length);var c=this.props.readOnly?null:"-1",d=this.props.role||"combobox",e=this.props.ariaAutoComplete||"list";return b("React").createElement("div",{ref:"container",className:this.props.className,tabIndex:c},b("React").createElement(b("DraftEditor.react"),babelHelpers["extends"]({},this.props,{ref:"abstractTextEditor",role:d,ariaActiveDescendantID:this.state.ariaActiveDescendantID,ariaAutoComplete:e,ariaControls:this.$1,ariaExpanded:a,ariaHasPopup:a,editorState:this.props.editorState,onBlur:this.$8,onChange:this.props.onChange,onFocus:this.$7,onTab:this.$6,onEscape:this.$5,onDownArrow:this.$4,onUpArrow:this.$11,handleReturn:this.$13})),this.$15())};a.prototype.isShowingMentionables=function(){"use strict";return!!this.state.mentionableEntries};a.defaultProps=babelHelpers["extends"]({},b("DraftEditor.react").defaultProps,{autoHighlight:!0,maxResults:d});a.propTypes={mentionsSource:c.object,assistantTypeaheadSource:c.object,mentionCreationForContentStateFn:c.func.isRequired,mentionTypeaheadCreationForContentStateFn:c.func,mentionResultsComponent:c.func.isRequired,mentionResultsProps:c.object,excludedEntries:c.object,handleContentReturn:c.func,onAddMention:c.func,onShowMentions:c.func,autoHighlight:c.bool,maxResults:c.number,webDriverTestID:c.string};e.exports=a}),null);
__d("DebouncedMentionsTextEditor.react",["AbstractMentionsTextEditor.react","clearImmediate","debounce","setImmediate"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("AbstractMentionsTextEditor.react"));g=c&&c.prototype;function a(a){"use strict";__p&&__p();g.constructor.call(this,a),this.__maybeSearch=function(){var a=this.props.editorState,c=a.getSelection();if(c.getHasFocus()&&c.isCollapsed()){var d=a.getCurrentContent();a=this.props;var e=a.mentionsSource,f=a.assistantTypeaheadSource;(e||f)&&(this.$DebouncedMentionsTextEditor1&&b("clearImmediate")(this.$DebouncedMentionsTextEditor1),this.$DebouncedMentionsTextEditor1=b("setImmediate")(function(){e&&e.search(d,c,this.__onShowMentions),f&&f.search(d,c,this.__onShowMentions)}.bind(this)))}}.bind(this),this.__debouncedSearch=b("debounce")(this.__maybeSearch,50)}a.prototype.componentDidUpdate=function(a){"use strict";this.props.editorState!==a.editorState&&this.__debouncedSearch()};a.prototype.componentWillUnmount=function(){"use strict";this.$DebouncedMentionsTextEditor1&&b("clearImmediate")(this.$DebouncedMentionsTextEditor1),g.componentWillUnmount.call(this)};e.exports=a}),null);
__d("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1574519202665847"};c.getQueryID=function(){"use strict";return"337579896759283"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerApprovalRequester.react",["cx","fbt","CurrentUser","Link.react","MercuryIDs","MessengerParticipants.bs","MercuryThreadActions","MessengerContactImageReact.bs","MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation","MessengerGroupRequestSource","MessengerTextWithEmoticons.react","React","WebGraphQL"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MercuryThreadActions").get(),k=b("MessengerContactImageReact.bs").jsComponent,l=32;function m(a,c){__p&&__p();if(!a||c===null)return null;a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a));a=a&&a.name;if(!a)return null;if(c===b("MessengerGroupRequestSource").ADD)return h._("Added by {inviter}.",[h._param("inviter",a)]);else if(c===b("MessengerGroupRequestSource").JOIN_THROUGH_LINK)return h._("Invited by {inviter}.",[h._param("inviter",a)]);return null}function n(a){var c=a.name,d=a.imageSRC,e=a.inviterFBID,f=a.isMessengerUser;a=a.requestSource;c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c});e=m(e,a);a=e?b("React").createElement("span",{className:"_4e87"},b("React").createElement("div",null,c),b("React").createElement("div",{className:"_4egt"},e)):b("React").createElement("span",{className:"_3tkx"},c);return b("React").createElement("div",{className:"_3szq _4fq"},b("React").createElement(k,{className:"_5l39 _5rmm",isMessengerUser:f,size:l,src:d}),a)}i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props,c=a.isAdminRequired,d=a.isMessengerUser,e=a.imageSRC,f=a.name,g=a.inviterFBID;a=a.requestSource;c=c?h._("Approve"):h._("Accept");return b("React").createElement("div",{className:"_3szn _3szo"},b("React").createElement(n,{name:f,imageSRC:e,inviterFBID:g,isMessengerUser:d,requestSource:a}),b("React").createElement("div",{className:"_3ihq _4fs"},b("React").createElement(b("Link.react"),{className:"_5a73",href:"#",onClick:this.$1.bind(this)},c),b("React").createElement("span",{className:"_1m8c"}),b("React").createElement(b("Link.react"),{className:"_5a73",href:"#",onClick:this.$2.bind(this)},h._("Ignore"))))};a.prototype.$1=function(event){var a=this.props,c=a.isAdminRequired,d=a.threadFBID;a=a.userFBID;c?b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:d,user_ids:[a],response:"ACCEPT",surface:"ADMIN_MODEL_APPROVAL_CENTER"}})):j.acceptToJoinableGroup(d,a)};a.prototype.$2=function(event){var a=this.props,c=a.isAdminRequired,d=a.threadFBID;a=a.userFBID;c?b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:d,user_ids:[a],response:"DENY",surface:"ADMIN_MODEL_APPROVAL_CENTER"}})):j.rejectToJoinableGroup(d,a)};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MessengerBootloadedLogMessage.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("MessengerLogMessage.react").__setRef("MessengerBootloadedLogMessage.react"),placeholder:b("React").createElement("div",{className:"_497p"},"...")})};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MessengerCollapsedLogMessageGroup.react",["cx","fbt","Link.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={collapsed:!0},b}a.prototype.render=function(){var a=h._("See Latest Activity"),c=h._("See Less Activity");return b("React").createElement("div",{className:"_497p"},b("React").createElement(b("Link.react"),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed})}.bind(this)},this.state.collapsed?a:c),this.state.collapsed?null:b("React").createElement("div",null,b("React").createElement("div",{className:"_4ea2"}),this.props.children,b("React").createElement("div",{className:"_4ea2"})))};e.exports=a}),null);
__d("MessengerMDotMeReferralStore",["MessengerActions","MessengerStore"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("MessengerStore"));g=c&&c.prototype;function a(){"use strict";g.constructor.call(this),this.$MessengerMDotMeReferralStore1={refCode:null,refThreadID:null}}a.prototype.getState=function(){"use strict";return this.$MessengerMDotMeReferralStore1};a.prototype.__onDispatch=function(a){"use strict";switch(a.type){case b("MessengerActions").Types.UPDATE_MDOT_ME:this.$MessengerMDotMeReferralStore1.refCode=a.refCode,this.$MessengerMDotMeReferralStore1.refThreadID=a.refThreadID,this.emitChange()}};e.exports=new a()}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/postback_ref/",{page_id:{type:"String",required:!0},ref:{type:"String",required:!0},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackRefSendManager",["AsyncRequest","MessengerActions","MessengerMDotMeReferralStore","XMNCommercePostbackRefSendController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.sendMDotMeRef=function(a,c){var d=this.getMdotMeRef();if(this.shouldSendRef(c,a)){c=b("XMNCommercePostbackRefSendController").getURIBuilder().setString("page_id",a).setString("ref",d).getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").send();b("MessengerActions").changeMDotMeReferral()}};a.prototype.shouldSendRef=function(a,b){return!b||!a?!1:this.hasMDotMeRef(b)};a.prototype.hasMDotMeRef=function(a){var c=b("MessengerMDotMeReferralStore").getState();return!!(c.refCode&&a&&c.refThreadID&&c.refThreadID===a)};a.prototype.getMdotMeRef=function(){var a=b("MessengerMDotMeReferralStore").getState();return a.refCode};function a(){}e.exports=new a()}),null);
__d("MercuryBootloadOnInteraction.react",["React","createCancelableFunction","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={Component:null},this.$2=function(a){a=this.state.interactionType==="click"?"click":a.type;this.setState({interactionType:a},function(){b("promiseDone")(this.props.loader.load(),function(a){this.props.takeOverRender?this.props.takeOverRender(function(){return this.$1(a)}.bind(this)):this.$1(a)}.bind(this))}.bind(this))}.bind(this),this.$3=function(a){this.setState({Component:a})}.bind(this),this.$4=function(a){this.state.interactionType!=="click"&&this.setState({interactionType:undefined})}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=b("createCancelableFunction")(this.$3)};a.prototype.componentWillUnmount=function(){this.$1.cancel()};a.prototype.render=function(){__p&&__p();var a={onFocus:this.$2,onMouseOver:this.$2,onClick:this.$2,onBlur:this.$4};if(!this.state.Component)return b("React").cloneElement(this.props.placeholder,a);a=this.state.Component;var c={};switch(this.state.interactionType){case"focus":c.autoFocus=!0;break;case"click":c.clicked=!0;break}return b("React").cloneElement(this.props.component,babelHelpers["extends"]({},c,{LazyLoadedComponent:a}))};e.exports=a}),null);
__d("MercuryReadOnlyReason",["fbt","Link.react","MercuryConfig","React","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getReason:function(a){__p&&__p();a===void 0&&(a=!1);if(a){a=b("MercuryConfig").DYIDeepLink;return g._("Sorry, this conversation isn't active anymore because messages can no longer be sent to email addresses. After May 1st 2016, conversations with email addresses will only be available in a copy of your Facebook data. {download your information}",[g._param("download your information",b("React").createElement("a",{href:a},g._("Learn More")))])}else if(b("MercuryConfig").ViewerIsReadOnly)return g._("You're temporarily blocked from sending messages. {learn more about blocks}",[g._param("learn more about blocks",b("React").createElement(b("Link.react"),{href:new(b("URI"))("https://www.facebook.com/help/181183045316843"),target:"_blank"},"Learn more"))]);else if(b("MercuryConfig").ColdOpenBlock)return g._("You're temporarily blocked from starting new conversations. {learn more about blocks}",[g._param("learn more about blocks",b("React").createElement(b("Link.react"),{href:new(b("URI"))("https://www.facebook.com/help/181183045316843"),target:"_blank"},"Learn more"))]);else return g._("You cannot reply to this conversation.")}};e.exports=a}),null);
__d("MessengerBlockDialogReact.bs",["cx","fbt","bs_block","bs_curry","React","Utils.bs","LinkReact.bs","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerBlockDialogReact");function j(a,c){return b("React").createElement("div",{className:"_1q73"},h._("If you want, you can also {link}",[h._param("link",b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,0,0,0,0,0,0,[c],0,0,0,0,0,0,0,["_blank"],0,h._("block {short_name_or_description} on Facebook.",[h._param("short_name_or_description",b("Utils.bs").$pipe$unknown(a,h._("this person")))]))))]))}function k(a,c,d,e){__p&&__p();return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(a){__p&&__p();if(c){var e=c[0],f=b("CurrentUser").isMessengerOnlyUser();f=[[e.short_name],f?0:b("bs_js_primitive").null_undefined_to_opt(e.href)]}else f=[0,0];e=f[1];f=f[0];if(!(d==null)){var g=new(b("IgnoreMessagesTypedLogger"))().setEvent("block_clicked").setThreadID(d).setPlatform("messengerdotcom");g.log()}return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,0,0,[a[1][0]],0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,h._("Block Messages"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[b("React").createElement("div",{className:"_1q73"},h._("Stop getting messages and calls from {short_name_or_description} in Messenger.",[h._param("short_name_or_description",b("Utils.bs").$pipe$unknown(f,h._("this person")))])),e?j(f,e[0]):null,b("React").createElement("div",undefined,b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,0,0,0,0,0,0,["https://www.facebook.com/help/389645087895231"],0,0,0,0,0,0,0,["_blank"],0,h._("Learn more"))))])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h._("Block Messages")],0,["danger"],[function(){return b("bs_curry")._1(a[3],0)}],[0],0,0,[]))]))]))},function(){return[!0]},i[10],function(c,d){return b("bs_block").__(2,[[!1],function(){return b("bs_curry")._1(a,0)}])},i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return k(a.onBlock,b("bs_js_primitive").null_undefined_to_opt(a.contact),a.threadID,[])});c=b("Utils.bs").$pipe$unknown;f.$pipe$unknown=c;f.component=i;f.renderBlockOnFacebook=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerBotComposerWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1193572474099061"};c.getQueryID=function(){"use strict";return"1132183563559860"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("XMessengerBotsMenuController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger/commerce/bots/menu/",{page_id:{type:"String",required:!0}})}),null);
__d("MessengerBotMenuDataFetcher",["AsyncRequest","Cache","MessengerBotComposerWebGraphQLQuery","XMessengerBotsMenuController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1=new(b("Cache"))(),this.$2=new(b("Cache"))()}a.prototype.getMenuItems=function(a,c,d){__p&&__p();if(this.$1.has(a)){c(this.$1.get(a));return}var e=b("XMessengerBotsMenuController").getURIBuilder().setString("page_id",a).getURI();new(b("AsyncRequest"))().setURI(e).setHandler(function(b){b=b.payload.menu;this.$1.set(a,b);c(b)}.bind(this)).setErrorHandler(function(a){d()}).send()};a.prototype.getHasPageSetting=function(a,c,d,e){__p&&__p();if(!this.$2.has(a)){var f=b("MessengerBotComposerWebGraphQLQuery").getURI({node_id:a});new(b("AsyncRequest"))().setURI(f).setHandler(function(b){b=b.payload.data.node;b=b&&b.commerce_page_settings||[];this.$2.set(a,b);c(b.indexOf(e)!==-1)}.bind(this)).setErrorHandler(function(b){this.$2.set(a,[]),d()}.bind(this)).send()}f=this.$2.get(a)||[];c(f.indexOf(e)!==-1);return f.indexOf(e)!==-1};e.exports=new a()}),null);
__d("MNAdsLogMessageUtils",["AdPageMessageTypeEnum","MercuryConfig","MessagingTag","MessengerAdsWebTypedLogger","MNAdsLoggerEventEnum","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryConfig").LOG_INTERVAL_MS||6e4;function a(){this.$1={}}a.prototype.isLoggedWithinInterval=function(a){return this.$1[a]&&this.$1[a]-Date.now()<g?!0:!1};a.prototype.setLoggingTime=function(a){this.$1[a]=Date.now()};a.prototype.logAdsThreadListImpression=function(a){switch(a.folder){case b("MessagingTag").INBOX:this.logWithThreadMetaData(a,b("MNAdsLoggerEventEnum").MESSAGE_SEEN_INBOX);break;case b("MessagingTag").PENDING:this.logWithThreadMetaData(a,b("MNAdsLoggerEventEnum").MESSAGE_SEEN_REQUEST);break;default:return}};a.prototype.logWithThreadMetaData=function(a,event){if(a.last_message_type!==b("AdPageMessageTypeEnum").NON_AD){var c=a.last_message_timestamp+String(event);if(!b("gkx")("AT7sD1fF_8x-4xxzoAaekZya5eGXuWSo92U8w8HKbhIVLROxV_1CMyGef1ykTzXLVcx0oP_derMD1dJXZ3xN3GMMFtqM6UPFfCa4s0vXN1q3cw")||this.isLoggedWithinInterval(c))return;new(b("MessengerAdsWebTypedLogger"))().setEvent(event).setMessageTimestamp(a.last_message_timestamp).setPageID(a.other_user_fbid).log();this.setLoggingTime(c)}};e.exports=new a()}),null);
__d("MercuryShareAttachmentSnippet.react",["MercuryShareAttachmentReactShape","MercuryShareStyleMap","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=b("MercuryShareStyleMap").getStyleFactory(this.props.attachment);if(a.factory&&!!a.factory.getSnippetComponent){var c=a.factory.getSnippetComponent();return b("React").createElement(c,babelHelpers["extends"]({},this.props,{attachment:a.attachment}))}return null};function a(){g.apply(this,arguments)}a.propTypes={attachment:b("MercuryShareAttachmentReactShape"),isSenderViewer:c.bool,senderName:c.oneOfType([c.string,c.object])};e.exports=a}),null);
__d("MercuryAttachmentSnippet.react",["cx","fbt","ix","EmoticonsList","Image.react","MercuryAttachment","MercuryAttachmentSnippetRenderer","MercuryAttachmentSnippetType","MercuryAttachmentType","MercuryIDs","MercuryShareAttachmentSnippet.react","MessengerParticipants.bs","MessengerTextWithEmoticons.react","React","StickerConstants","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.$2=function(a){this.$20=a.viewer,this.$21=a.thread.snippet_sender,this.$5=a.thread.snippet_attachments,this.$19=k(this.$21,this.$20)}.bind(this),b}a.prototype.UNSAFE_componentWillMount=function(){this.$1(this.props.thread.snippet_sender),this.$2(this.props)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.$1(a.thread.snippet_sender),this.$2(a)};a.prototype.componentWillUnmount=function(){this.$3()};a.prototype.render=function(){__p&&__p();var a=this.$4(),c=b("MercuryAttachmentSnippetRenderer").getAttachmentSnippetType(this.$5);switch(c){case b("MercuryAttachmentSnippetType").PHOTO:return this.$6(a);case b("MercuryAttachmentSnippetType").GIF:return this.$7(a);case b("MercuryAttachmentSnippetType").VIDEO:return this.$8(a);case b("MercuryAttachmentSnippetType").AUDIO_CLIP:return this.$9(a);case b("MercuryAttachmentSnippetType").LIKE_STICKER:return this.$10(a);case b("MercuryAttachmentSnippetType").STICKER:return this.$11(a);case b("MercuryAttachmentSnippetType").SHARE:return this.$12(a);case b("MercuryAttachmentSnippetType").GIFT:return this.$13(a);case b("MercuryAttachmentSnippetType").FILE:return this.$14(a);case b("MercuryAttachmentSnippetType").ERROR:return this.$15(a);case b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER:return this.$16(a);default:return this.$17(a)}};a.prototype.$6=function(a){return this.$18(b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").PHOTO,this.$19,a,this.$5))};a.prototype.$14=function(a){return this.$18(b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").FILE,this.$19,a,this.$5))};a.prototype.$7=function(a){return this.$18(b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").GIF,this.$19,a,this.$5))};a.prototype.$8=function(a){return this.$18(b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").VIDEO,this.$19,a))};a.prototype.$9=function(a){return this.$18(b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").AUDIO_CLIP,this.$19,a))};a.prototype.$16=function(a){return b("React").createElement("span",null,b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER,this.$19,a))};a.prototype.$10=function(a){var c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,text:b("EmoticonsList").symbols.like});if(this.$19)return b("React").createElement("span",null,h._("You: {conversation_snippet}",[h._param("conversation_snippet",c)]));else return this.props.thread.is_canonical?b("React").createElement("span",null,h._("{conversation_snippet}",[h._param("conversation_snippet",c)])):b("React").createElement("span",null,h._("{sender name}: {conversation_snippet}",[h._param("sender name",a),h._param("conversation_snippet",c)]))};a.prototype.$11=function(a){return b("React").createElement("span",null,b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").STICKER,this.$19,a))};a.prototype.$12=function(a){return this.$5[0].share?b("React").createElement(b("MercuryShareAttachmentSnippet.react"),{attachment:this.$5[0].share,senderName:a,isViewerSender:this.$19}):this.$18(b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").SHARE,this.$19,a))};a.prototype.$13=function(a){return b("React").createElement("span",null,b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").GIFT,this.$19,a))};a.prototype.$17=function(a){return b("React").createElement("span",null,this.$5.filter(function(a){return a.attach_type===b("MercuryAttachmentType").FILE||a.attach_type===b("MercuryAttachmentType").PHOTO||a.attach_type===b("MercuryAttachmentType").VIDEO}).map(function(a,b){return this.$18(a.name,a.icon_type,b)}.bind(this)))};a.prototype.$18=function(a,c,d){c=b("MercuryAttachment").getAttachIconClass(c||this.$5[0].icon_type);c=b("joinClasses")(c,"uiIconText _3l6h");return b("React").createElement("span",{key:d},b("React").createElement("span",{className:c},b("React").createElement(b("Image.react"),{src:i("86988")})),a)};a.prototype.$15=function(a){a=b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").ERROR,this.$19,a);return this.$18(a)};a.prototype.$4=function(){if(!this.$21||this.$19)return null;var a=b("MessengerParticipants.bs").getNow(this.$21);if(!a)return null;var c=b("MercuryIDs").getUserIDFromParticipantID(this.$21);c=this.props.thread.custom_nickname&&this.props.thread.custom_nickname[c];c&&(c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c}));return c?c:a.short_name};a.prototype.$1=function(a){if(!a)return;this.$3();b("MessengerParticipants.bs").getNow(a)||(this.$22=b("MessengerParticipants.bs").get(a,function(a){return this.forceUpdate()}.bind(this)))};a.prototype.$3=function(){this.$22&&b("MessengerParticipants.bs").removeCallback(this.$22)};a.propTypes={thread:c.object.isRequired,viewer:c.string.isRequired};function k(a,c){return!!(a&&b("MercuryIDs").getParticipantIDFromUserID(c)==a)}e.exports=a}),null);
__d("MercuryThreadSnippet.react",["cx","fbt","MercuryAttachmentSnippet.react","MercuryAttachmentType","MercuryIDs","MessengerTextWithEmoticons.react","MNAdsLogMessageUtils","React","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.shouldComponentUpdate=function(a){return this.props.shouldRenderYou!==a.shouldRenderYou||this.props.thread!==a.thread||this.props.viewer!==a.viewer||this.props.className!==a.className||!b("immutable").is(a.participants,this.props.participants)};a.prototype.render=function(){return b("React").createElement("span",{className:this.props.className},this.$1(),this.$2())};a.prototype.$1=function(){return!this.props.thread.snippet||!j(this.props.thread)?null:b("React").createElement("span",{className:"_j0r"})};a.prototype.$2=function(){__p&&__p();var a=this.props.thread,c=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),d=a.snippet?a.snippet.toString():null,e=this.props.shouldRenderYou;if(a.snippetCount!=null)return h._({"*":"{number} results","_1":"1 result"},[h._plural(a.snippetCount,"number")]);if(a.snippet_attachments&&a.snippet_attachments.length>0&&a.snippet_attachments[0].attach_type!==b("MercuryAttachmentType").SHARE||!a.snippet_sender)return this.$3(d);d=this.$3(d);b("MNAdsLogMessageUtils").logAdsThreadListImpression(a);var f=k(a);if(f)return h._("{name}: {conversation_snippet}",[h._param("name",f),h._param("conversation_snippet",d)]);if(a.snippet_sender===c)return!e?d:h._("You: {conversation_snippet}",[h._param("conversation_snippet",d)]);if(b("MercuryIDs").isCanonical(a.thread_id)&&!this.props.shouldAlwaysRenderSender)return d;f=this.props.participants.get(a.snippet_sender);if(!f)return d;c=f.short_name||f.name;if(a){e=a.custom_nickname?a.custom_nickname:null;a=b("MercuryIDs").getUserIDFromParticipantID(f.id);e&&a&&e[a]&&(c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e[a]}))}return!c?d:h._("{name}: {conversation_snippet}",[h._param("name",c),h._param("conversation_snippet",d)])};a.prototype.$3=function(a){if(a&&a.startsWith("?OTR"))return h._("[encrypted message]");if(a)return b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:a});a=this.props.thread;return j(a)?b("React").createElement(b("MercuryAttachmentSnippet.react"),{thread:a,viewer:this.props.viewer}):null};function a(){i.apply(this,arguments)}a.propTypes={participants:c.instanceOf(b("immutable").Map).isRequired,shouldAlwaysRenderSender:c.bool,shouldRenderYou:c.bool,thread:c.object.isRequired,viewer:c.string.isRequired};function j(a){return!!(a.snippet_attachments&&a.snippet_attachments.length>0&&!(a.snippet_attachments[0].attach_type===b("MercuryAttachmentType").SHARE&&!a.snippet_attachments[0].share))}function k(a){return a&&a.snippet_attachments&&a.snippet_attachments[0]&&a.snippet_attachments[0].share&&a.snippet_attachments[0].share.target&&a.snippet_attachments[0].share.target.genie_name?a.snippet_attachments[0].share.target.genie_name:null}e.exports=a}),null);
__d("MessengerBotMenuButton.react",["AutoFocusableLink.react","BootloadOnRender.react","ChatFlyoutPlaceholder.react","JSResource","LazyComponent.react","MessengerBotMenuDataFetcher","MessengerBotsWebTypedLogger","MessengerContextualDialog.react","MessengerEnvironment","MNBotsLoggerEvents","React","XUIContextualDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h=302,i=280;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1=!1,this.state={flyoutOpen:!!this.props.clicked,isLoading:!1,menuItems:null},this.$3=function(){this.setState({flyoutOpen:!1})}.bind(this),this.$7=function(){this.state.flyoutOpen&&this.$3()}.bind(this),this.$5=function(){this.$1=this.state.flyoutOpen}.bind(this),this.$4=function(event){event.stopPropagation();if(this.state.flyoutOpen||this.$1)return;this.state.menuItems===null&&(this.setState({isLoading:!0}),this.$2());this.setState({flyoutOpen:!this.state.flyoutOpen})}.bind(this),b}a.prototype.UNSAFE_componentWillMount=function(){this.state.flyoutOpen&&this.state.menuItems===null&&(this.setState({isLoading:!0}),this.$2())};a.prototype.componentDidMount=function(){new(b("MessengerBotsWebTypedLogger"))().setEvent(b("MNBotsLoggerEvents").BOT_COMPOSER_MENU_ICON_DISPLAYED).setPageID(this.props.pageID).log()};a.prototype.componentWillUnmount=function(){this.state.flyoutOpen&&this.$3()};a.prototype.render=function(){return b("React").createElement("span",null,b("React").createElement(b("AutoFocusableLink.react"),{autoFocus:this.props.autoFocus,className:this.props.className,href:"#",onClick:this.$4,onMouseDown:this.$5,role:"button",ref:"link"}),this.$6())};a.prototype.$6=function(){if(!this.state.flyoutOpen)return null;var a=b("MessengerEnvironment").messengerui,c=a?h:i;a=a?b("MessengerContextualDialog.react"):b("XUIContextualDialog.react");return b("React").createElement(a,babelHelpers["extends"]({alignment:this.props.flyoutAlignment,width:c,position:"above",contextRef:function(){return this.refs.link}.bind(this),onBeforeHide:this.$7,onBlur:this.$3,shown:this.state.flyoutOpen},this.props,{key:"contextualDialog"}),b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{onEscKeyDown:this.$3,shown:this.state.flyoutOpen,isLoading:this.state.isLoading,menuItems:this.state.menuItems,pageID:this.props.pageID,threadID:this.props.threadID,onClick:this.$3}),loader:b("JSResource")("MessengerBotMenuDialog.react").__setRef("MessengerBotMenuButton.react"),placeholder:b("React").createElement(b("ChatFlyoutPlaceholder.react"),null)}))};a.prototype.$2=function(){b("MessengerBotMenuDataFetcher").getMenuItems(this.props.pageID,function(a){this.setState({menuItems:a,isLoading:!1})}.bind(this),function(){this.setState({menuItems:[],isLoading:!1})}.bind(this))};a.propTypes={autoFocus:c.bool,className:c.string,clicked:c.bool,flyoutAlignment:c.string.isRequired,threadID:c.string.isRequired,pageID:c.string.isRequired};e.exports=a}),null);
__d("MessengerEmoticonSpan.react",["cx","EmojiLikeConstants","EmoticonEmojiList","MessengerSupportedEmojiUtils","React","cssURL"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){if(this.props.entityKey==null)return null;var a=this.props.contentState.getEntity(this.props.entityKey);a=a.getData();a=a.type;a=b("EmoticonEmojiList").emote2emojis[a];a=b("MessengerSupportedEmojiUtils").getUrl(a,b("EmojiLikeConstants").size.XSMALL);a=a?a:"";return b("React").createElement("span",{className:"_21wj",style:{backgroundImage:b("cssURL")(a)},"data-offset-key":this.props.offsetKey},b("React").createElement("span",{className:"_21wk"},this.props.children))};function a(){h.apply(this,arguments)}a.propTypes={children:c.arrayOf(c.object),contentState:c.object.isRequired,entityKey:c.string,offsetKey:c.string};e.exports=a}),null);
__d("MessengerMentionSource",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({REPLY:"reply",ATSIGN:"@",TYPEAHEAD:"typeahead"});e.exports=a}),null);
__d("MessengerMentionsEntityDecorator.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("span",{className:"_fy2"},this.props.children)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MessengerSingleSectionContactList.react",["cx","MessengerContactAdapters","MessengerContactList.react","MessengerTypeaheadUtils","React","TypeaheadViewPropTypes","joinClasses","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=this.props,c=a.entries;a=a.viewProps;var d=(c.length?"":"_599s")+" _29hl _8i1 _11_d _4p-s";return b("React").createElement(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,d,a.className),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:!0,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!1,listSections:b("MessengerTypeaheadUtils").buildSingleSection(c),onRenderHighlight:this.props.onRenderHighlight,onHighlight:this.props.onHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,viewer:a.viewer})};function a(){h.apply(this,arguments)}a.propTypes=b("TypeaheadViewPropTypes");a.defaultProps={role:"listbox"};e.exports=a}),null);
__d("AtSignAllowEmptyMentionsStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f){__p&&__p();a=b("DocumentMentionsRegex").PUNCTUATION;c=["@","\\uff20"].join("");d="[^"+c+a+"\\s]";f="(?:\\.[ |$]| |["+a+"]|)";var g=new RegExp("(?:^|\\s|\\()(["+c+"]((?:"+d+f+"){0,20}))$");b={name:"AtSignAllowEmptyMentionsStrategy",findMentionableString:function(a){a=g.exec(a);if(a!==null){var b=a[2];return{matchingString:b,leadOffset:a[1].length}}return null}};e.exports=b}),null);
__d("CapitalizedNameMentionsStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f){"use strict";a=1;var g=new RegExp("(^|[^#])((?:"+b("DocumentMentionsRegex").NAME+"{"+a+",})$)");c={name:"CapitalizedNameMentionsStrategy",findMentionableString:function(a){a=g.exec(a);return a!==null?{matchingString:a[2],leadOffset:a[2].length}:null}};e.exports=c}),null);
__d("DocumentCompositeMentionsSource",["invariant","createCancelableFunction","emptyFunction","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,b){var c=a.getCharacterList().toSeq().slice(0,b).reverse().takeWhile(function(a){return a.getEntity()===null}).count();return a.getText().slice(b-c,b)}function a(a){a.length>0||g(0),this.$1=a,this.$2=!1,this.$3=null}a.prototype.bootstrap=function(a){if(this.$2)return;this.$2=!0;a=a||b("emptyFunction");var c=this.$1.length;function d(){c--,c||a&&a()}this.$1.forEach(function(a){a.bootstrap(d)})};a.prototype.search=function(a,c,d){var e=c.getAnchorKey();a=a.getBlockForKey(e);var f=b("createCancelableFunction")(d);this.$4(h(a,c.getAnchorOffset()),f);return{remove:function(){f.cancel()}}};a.prototype.$4=function(a,c){__p&&__p();var d=this.$1.length,e,f;for(var g=0;g<d;g++){e=this.$1[g];f=e.findMatch(a);if(f===null)continue;else{var h=b("nullthrows")(f).matchingString;this.$3=h;e.search(h,function(a,b){this.$3===b&&c(a,f.leadOffset)}.bind(this));return}}this.$3=null;c(null,null)};e.exports=a}),null);
__d("FourLetterMentionsStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f){"use strict";a=3;c="\\b[a-z][^\\s"+b("DocumentMentionsRegex").PUNCTUATION+"]";var g=new RegExp("(^|[^#])((?:"+c+"{"+a+",})$)");d={name:"FourLetterMentionsStrategy",findMentionableString:function(a){a=g.exec(a);return a!==null?{matchingString:a[2],leadOffset:a[2].length}:null}};e.exports=d}),null);
__d("createMentionsSearchSourceFromParticipants",["fbt","ix","AtSignAllowEmptyMentionsStrategy","CapitalizedNameMentionsStrategy","DocumentCompositeMentionsSource","DocumentMentionsSource","FourLetterMentionsStrategy","LogHistory","SearchableEntry","StaticSearchSource","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("LogHistory").getInstance("messenger_mentions"),j=h("91674").uri,k=171602870233241;function a(a,c,d,e,f){__p&&__p();if(!a||!c)return null;var g=null;c.length<=2?f&&(g=[n()]):(g=c.reduce(function(c,e){if(!e||e.fbid===a)return c;var f=d&&d.custom_nickname&&d.custom_nickname[e.fbid]?d.custom_nickname[e.fbid]:"";c.push(new(b("SearchableEntry"))({uniqueID:e.fbid,title:"@"+e.name,subtitle:f,photo:e.image_src,keywordString:f}));return c},[]),e&&d&&d.thread_fbid&&(g.push(l(d.thread_fbid)),g.push(m(d.thread_fbid))),f&&g.push(n()));if(g===null)return null;e=new(b("StaticSearchSource"))(g);i.debug("constructed_search_source",JSON.stringify({participants:c.map(function(a){return a&&a.fbid})}));return new(b("DocumentCompositeMentionsSource"))([new(b("DocumentMentionsSource"))(b("AtSignAllowEmptyMentionsStrategy"),e),new(b("DocumentMentionsSource"))(b("CapitalizedNameMentionsStrategy"),e),new(b("DocumentMentionsSource"))(b("FourLetterMentionsStrategy"),e)])}function l(a){var c=g._("everyone").toString(),d=g._("Mention everyone in this chat").toString();return new(b("SearchableEntry"))({photo:j,title:"@"+c,uniqueID:b("nullthrows")(a),subtitle:d})}function m(a){var c=g._("here").toString(),d=g._("Mention everyone in this chat who is active").toString();return new(b("SearchableEntry"))({photo:j,title:"@"+c,uniqueID:b("nullthrows")(a)+"-active",subtitle:d})}function n(){var a=g._("M").toString(),c=g._("Messenger Assistant").toString();return new(b("SearchableEntry"))({photo:h("581082").uri,title:"@"+a,uniqueID:k,subtitle:c})}e.exports=a}),null);
__d("createMessengerMentionDraftEntity",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.createEntity("MENTION","SEGMENTED",{mid:b.getUniqueID()})}e.exports=a}),null);
__d("createMessengerMentionTypeaheadDraftEntity",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.createEntity("ASSISTANT_TYPEAHEAD","SEGMENTED",{mid:b.getUniqueID()})}e.exports=a}),null);
__d("getProfileRangesForContentState",["EmojiFormat.bs","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("emptyFunction").thatReturnsTrue;function a(a,c){__p&&__p();var d=[],e=0;a.getBlockMap().forEach(function(f){__p&&__p();var h=0,i=f.getText();f.findEntityRanges(g,function(g,i){__p&&__p();var j=f.getEntityAt(g);if(j){j=a.getEntity(j);if(j.getType()==="EMOTICON")h+=j.getData().originalEmoticon.length-1;else if(j.getType()==="EMOJI"){var k=j.getData().type;k=b("EmojiFormat.bs").codeStringToCodeArray(k);k=String.fromCodePoint.apply(String,k);h+=k.length-1}else if(j.getType()==="MENTION"){k=g+h+e;j=j.getData().mid;var l=null;c&&j===c?l="t":c&&j===c+"-active"?(j=c,l="a"):/^\d+$/.test(j)&&(l="p");l!==null&&d.push({id:j,offset:k,length:i-g,type:l})}}});e+=i.length+h+1});return d}e.exports=a}),null);
__d("applyMessengerEmoticonToContentBlock",["CharacterMetadata","EmoticonEmojiList","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h="\u3000";function a(a,c,d,e){if(!b("EmoticonEmojiList").names[d])return c;a=a.createEntity("EMOTICON","IMMUTABLE",{type:b("EmoticonEmojiList").names[d],originalEmoticon:d});a=a.getLastCreatedEntityKey();var f=c.getText(),i=c.getCharacterList();d=d.length;var j=i.get(e);return c.merge({text:f.slice(0,e)+h+f.slice(e+d),characterList:i.slice(0,e).concat(g.of(b("CharacterMetadata").applyEntity(j,a)),i.slice(e+d))})}e.exports=a}),null);
__d("getTextAfterNearestEntity",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=b;while(c>0&&a.getEntityAt(c-1)===null)c--;return a.getText().slice(c,b)}e.exports=a}),null);
__d("applyMessengerEmoticonToContentState",["EmoticonEmojiList","applyMessengerEmoticonToContentBlock","getTextAfterNearestEntity"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=c.getAnchorKey(),e=c.getAnchorOffset(),f=a.getBlockForKey(d),g=b("getTextAfterNearestEntity")(f,e),h=b("EmoticonEmojiList").regexp.exec(g);if(!h)return a;var i=h[1];if(!i&&e!==g.length)return a;i=h[2];g=e-g.length;g=g+h.index+h[1].length;h=a.getBlockMap().set(d,b("applyMessengerEmoticonToContentBlock")(a,f,i,g));e-=i.length-1;return a.merge({blockMap:h,selectionBefore:c,selectionAfter:c.merge({anchorOffset:e,focusOffset:e})})}e.exports=a}),null);
__d("handleBeforeInputForMessengerEmoticon",["DraftModifier","EditorState","applyMessengerEmoticonToContentState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new RegExp(/[\s\'\".,!?]/);function a(a,c){var d=a.getSelection();if(!d.isCollapsed()||!c||!g.test(c))return a;var e=a.getCurrentContent();d=b("applyMessengerEmoticonToContentState")(e,d);if(d===e)return a;e=b("DraftModifier").insertText(d,d.getSelectionAfter(),c);return b("EditorState").push(a,e,"insert-characters")}e.exports=a}),null);
__d("handleSoftNewlineForMessengerEmoticon",["DraftModifier","EditorState","applyMessengerEmoticonToContentState"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.getCurrentContent(),d=a.getSelection(),e=b("applyMessengerEmoticonToContentState")(c,d);c=b("DraftModifier").splitBlock(e,c===e?d:e.getSelectionAfter());return b("EditorState").push(a,c,"split-block")}e.exports=a}),null);
__d("applyEmoticonToContentBlock",["CharacterMetadata","EmoticonsList","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h="\u3000";function a(a,c,d,e){if(!b("EmoticonsList").emotes[c])return a;e=e.createEntity("EMOTICON","IMMUTABLE",{type:b("EmoticonsList").emotes[c],originalEmoticon:c});e=e.getLastCreatedEntityKey();var f=a.getText(),i=a.getCharacterList();c=c.length;var j=i.get(d);return a.merge({text:f.slice(0,d)+h+f.slice(d+c),characterList:i.slice(0,d).concat(g.of(b("CharacterMetadata").applyEntity(j,e)),i.slice(d+c))})}e.exports=a}),null);
__d("insertEmoticonIntoContentState",["DraftModifier","applyEmoticonToContentBlock"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){var e=b("DraftModifier").replaceText(c,d,a),f=d.getAnchorKey(),g=d.getAnchorOffset(),h=e.getBlockForKey(f);e=e.getBlockMap().set(f,b("applyEmoticonToContentBlock")(h,a,g,c));g++;return c.merge({blockMap:e,selectionBefore:d,selectionAfter:d.merge({anchorOffset:g,focusOffset:g})})}e.exports=a}),null);
__d("insertEmoticonIntoEditorState",["DraftModifier","EditorState","insertEmoticonIntoContentState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=" ";function a(a,c){var d=c.getSelection(),e=c.getCurrentContent(),f=d.getStartOffset(),h=d.getEndOffset(),i=e.getBlockForKey(d.getStartKey()).getText(),j=e.getBlockForKey(d.getEndKey()).getText(),k="";h<=j.length&&j[h]!==g&&(k=g);f>0&&i[f-1]!==g&&(e=b("DraftModifier").insertText(e,d,g),d=e.getSelectionAfter());j=b("insertEmoticonIntoContentState")(a,e,d);e=b("DraftModifier").insertText(j,j.getSelectionAfter(),k);return b("EditorState").push(c,e,"insert-characters")}e.exports=a}),null);
__d("isSoftNewlineEvent",["Keys"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.which===b("Keys").RETURN&&(a.getModifierState("Shift")||a.getModifierState("Alt")||a.getModifierState("Control"))}e.exports=a}),null);
__d("MessengerComposerInput.react",["cx","fbt","Bootloader","CompositeDraftDecorator","DebouncedMentionsTextEditor.react","DOMDimensions","DraftModifier","EditorState","EmojiFormat.bs","Event","LogHistory","MentionsLayer.react","MercuryIDs","MercuryThreadIDMap","MercuryThreadSnippet.react","MercuryThreadTitle.react","MercuryTimestamp","MercuryTriodeSourceUtil","MessengerActions","MessengerBotMenuButton.react","MessengerConstants","MessengerDomIDs.bs","MessengerEditorStateManager","MessengerEmojiSpan.react","MessengerEmoticonSpan.react","MessengerMentionsEntityDecorator.react","MessengerMentionSource","MessengerSingleSectionContactList.react","MessengerTabIndices","MessengerUploadFilesUtil.bs","MessengerURLUploader","React","ReactDOM","Run","TypingDetectorController","clearImmediate","createMentionsSearchSourceFromParticipants","createMessengerMentionDraftEntity","createMessengerMentionTypeaheadDraftEntity","debounce","getEntityMatcher","getProfileRangesForContentState","getThreadTypeNameFromThreadType","getVisibleValueForContentStateWithMessengerEmoji","gkx","handleBeforeInputForMessengerEmoji","handleBeforeInputForMessengerEmoticon","handleSoftNewlineForMessengerEmoticon","immutable","insertEmoticonIntoEditorState","insertMessengerEmojiIntoContentState","isSoftNewlineEvent","replaceMentionedTextInEditorState","setImmediate","shouldNotRenderSegoe","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerDomIDs.bs").ids;c=b("React").PropTypes;var k=1,l=/^image\//,m="handled",n=8,o="not-handled",p=b("LogHistory").getInstance("MessengerComposerInput");d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(a){__p&&__p();i.constructor.call(this,a),this.$10=!1,this.$20=function(a){a!==this.state.editorState&&(this.setState({editorState:a},function(){this.$5()}.bind(this)),this.props.onResize&&this.props.onResize())}.bind(this),this.$21=function(event,a){if(b("isSoftNewlineEvent")(event)){var c=b("handleSoftNewlineForMessengerEmoticon");this.setState({editorState:c(a)});return m}this.setState({},this.triggerSend);return m}.bind(this),this.getValue=function(){return b("getVisibleValueForContentStateWithMessengerEmoji")(this.state.editorState.getCurrentContent())}.bind(this),this.focus=function(){this.refs.input&&this.refs.input.focus()}.bind(this),this.$30=function(a,b){this.props.onBeforeInput&&this.props.onBeforeInput(a,b);var c=this.$34(a,b);a=this.$35(a,b);return c||a?m:o}.bind(this),this.$12=function(a){a=this.props.handleOnlyImageUploads?a.filter(function(a){return a&&l.test(a.type)}):a;var c=this.$25();if(a.length){b("MessengerActions").prepareFilesForSend(c,a,"Copy");return m}return o}.bind(this),this.$17=function(){this.$19()}.bind(this),this.$18=function(){this.setState(this.$13(!0))}.bind(this),this.triggerSend=function(){this.$22()&&this.$26();if(this.getValue().trim().length>0||this.$36())if(this.props.thread){var a=this.getMentions(this.props.thread.thread_fbid);this.$27(a)}else this.$27()}.bind(this),this.$31=function(){var a=(this.state.addedMentionsCount||0)+1;this.setState({addedMentionsCount:a})}.bind(this),this.$32=function(a,c){a=(this.state.mentionsTriggeredCount||0)+1;a={mentionsTriggeredCount:a};this.state.mentionsTriggerSource||(a.mentionsTriggerSource=c===k?b("MessengerMentionSource").ATSIGN:b("MessengerMentionSource").TYPEAHEAD);this.setState(a)}.bind(this),this.$12=this.$12.bind(this),this.$11=a,this.state=this.$13(),this.$6=b("debounce")(function(a){this.$11||(this.$11=a),q(this.props,this.$11)&&this.$14(),this.$11=a}.bind(this),300),this.$7=b("throttle")(function(){if(this.$10){var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(this)).height;this.$1!==a&&(this.props.onResize&&this.props.onResize());this.$1=a}}.bind(this),100)}a.prototype.$13=function(a){return{editorState:this.$15(b("MessengerEditorStateManager").get(this.props.threadID),a)}};a.prototype.componentDidMount=function(){this.$10=!0,this.$1=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(this)).height,this.$16(),this.$2=new(b("MessengerURLUploader"))(this.getValue,b("ReactDOM").findDOMNode(this.refs.input),this.props.threadID),b("Run").onUnload(this.$17),this.$3=b("Event").listen(window,"blur",this.$17),this.$4=b("Event").listen(window,"focus",this.$18),this.$5=b("debounce")(function(){this.$19()}.bind(this),1e3)};a.prototype.UNSAFE_componentWillUpdate=function(a){this.props.threadID!==a.threadID&&this.$19()};a.prototype.componentDidUpdate=function(a,c){this.$9=b("setImmediate")(this.$7),this.props.threadID!==a.threadID?this.$16():this.$6(a),c.editorState!==this.state.editorState&&(this.props.onChange&&this.props.onChange(this.getValue()))};a.prototype.componentWillUnmount=function(){this.$10=!1,this.$8&&this.$8.destroy(),this.props.threadID&&this.$19(),this.$9&&b("clearImmediate")(this.$9),this.$3&&this.$3.remove(),this.$4&&this.$4.remove()};a.prototype.insertEmoticon=function(a){a=b("insertEmoticonIntoEditorState")(a,this.state.editorState);a!==this.state.editorState&&this.$20(a)};a.prototype.insertEmoji=function(a){var c=this.state.editorState;a=b("insertMessengerEmojiIntoContentState")(b("EmojiFormat.bs").codeArrayToCodeString(a),c.getCurrentContent(),c.getSelection(),c.getCurrentInlineStyle());c=b("EditorState").push(c,a,"insert-characters");c!==this.state.editorState&&this.$20(b("EditorState").forceSelection(c,a.getSelectionAfter()))};a.prototype.$22=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};a.prototype.$16=function(){if(!this.$10)return;this.setState(this.$13(!1));this.$23();this.$2&&(this.$2.setThreadID(this.props.threadID),this.$2.clearShareData());this.$14()};a.prototype.$14=function(){__p&&__p();if(b("gkx")("AT4JgFP_oLlbSH-FyRWbINxwxSgndh7uwMyklWTmrIoqDJvTrVb4szQGtOdprxqeQY-sDYZEIJTXWmxgzHYVxylW")){var a=this.props,c=a.participants,d=a.viewer;b("Bootloader").loadModules(["createAssistantTypeaheadSearchSource"],function(a){this.setState({assistantTypeaheadSource:a(d,c&&c.toArray(),this.props.thread,this.props.pageID)})}.bind(this),"MessengerComposerInput.react")}if(this.props.mentionsEnabled){a=this.props;var e=a.participants,f=a.viewer;a=a.thread;this.setState({mentionsSource:b("createMentionsSearchSourceFromParticipants")(f,e&&e.toArray(),a,b("gkx")("AT49sw5n0nlIyoqYGYpRJXtOnRzCLqSpsmIoWA7hmyYTaoQcU5JHlDW_AWGZ_laa8hQ933FOWyuLNLlpGxYhTnOb"),b("gkx")("AT6TL1o6UXa1jxOsK4uAVNG6Mxh1leY7rQtkj3veN_xP3JYwU-gFMwBmYL1uO1kiTaAGt9w5v01vBmAVfn-LqIvq"))})}};a.prototype.$19=function(){if(!this.props.threadID)return;b("MessengerEditorStateManager").set(this.props.threadID,this.state.editorState)};a.prototype.$24=function(a){this.$2&&this.$2.clearShareData(),this.setState({editorState:this.$15(b("EditorState").createEmpty()),addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null},a)};a.prototype.$23=function(){this.$8&&this.$8.destroy();this.$8=null;var a=this.props.viewer;if(!a)return;var c=b("ReactDOM").findDOMNode(this.refs.input);this.props.threadID!==b("MessengerConstants").NEW_THREAD_KEY&&c&&(this.$8=new(b("TypingDetectorController"))(b("MercuryIDs").getUserIDFromThreadID(this.props.threadID),c,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),null,b("MercuryThreadIDMap").getForFBID(a).getServerIDFromClientIDNow(this.props.threadID),this.getValue))};a.prototype.$25=function(){var a=this.props,c=a.threadID;a=a.thread;if(!b("MercuryIDs").isValidThreadID(c)){if(a)return a.thread_id;p.debug("Invalid threadID ",c)}return c};a.prototype.$26=function(){var a=this.props.fileUploader,c=this.$25();a&&(p.debug("Before send files to thread ",c),b("MessengerUploadFilesUtil.bs").sendAttchments(a,this.props.onFileUpload),p.debug("Before clean files for thread ",c),b("MessengerActions").cleanFiles(c))};a.prototype.$27=function(a){__p&&__p();this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData(),profile_ranges:a},function(c){b("MessengerActions").removeSharePreview(this.props.threadID);if(c&&this.props.mentionsEnabled&&(a&&a.length||this.state.addedMentionsCount||this.state.mentionsTriggeredCount||this.state.mentionsTriggerSource)){var d=this.state,e=d.addedMentionsCount,f=d.mentionsTriggeredCount,g=d.mentionsTriggerSource;d=this.props;var h=d.thread,i=d.participants,j=c;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(c,d){new c().setEvent(d.MENTION).setGroupSize(i&&i.size).setNumDelivered(a&&a.length||0).setNumSelects(e).setNumTriggers(f).setThreadid(h&&h.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(h&&h.thread_type)).setOfflineThreadid(j.offline_threading_id).updateExtraData({source:g}).log()},"MessengerComposerInput.react")}}.bind(this))&&this.$24(function(){this.$19(),this.$8&&this.$8.resetState()}.bind(this))};a.prototype.getMentions=function(a){return b("getProfileRangesForContentState")(this.state.editorState.getCurrentContent(),a)};a.prototype.getInput=function(){return this.refs.input};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.participants,d=a.thread;a=a.viewer;var e=null;c&&d&&a?e=h._("Conversation with {participantListAsShownInThreadList}. Updated {lastUpdatedTime} by {recentUpdateStringAsShownInThreadList}",[h._param("participantListAsShownInThreadList",this.$28(d,a)),h._param("lastUpdatedTime",b("MercuryTimestamp").getAbsoluteTimestamp(d.timestamp)),h._param("recentUpdateStringAsShownInThreadList",this.$29(c,d,a))]):e=h._("Composing a new message");c=null;this.props.threadID&&this.props.pageID&&(c=b("React").createElement("div",{ref:"botsMenuContainer",className:"_3km1"},b("React").createElement(b("MessengerBotMenuButton.react"),{flyoutAlignment:"left",threadID:this.props.threadID,pageID:this.props.pageID,className:"_3km2"})));d="";this.props.disableInput?d=h._("Composer is disabled for this thread.").toString():this.props.thread&&!this.props.thread.is_canonical?d=h._("Type a message, \u0040name...").toString():d=h._("Type a message...").toString();a=b("gkx")("AT5qVFdI09B4AOd-aI25l2oB8XCG19goZ5mgq3l0XNCbiTirSd0ch7WdX0lWZTP3JziMdMDGZTgIfc_krtYvXl_n0kilI-X3DBffPqqHujTGzQ");return b("React").createElement("div",{className:"_kmc"+(this.props.smallerEqual640?" _2swd":"")+(b("shouldNotRenderSegoe")(this.state.editorState.getCurrentContent().getPlainText())?" _2por":"")+" navigationFocus",onClick:this.focus,role:"presentation"},this.props.showMenu?c:null,b("React").createElement("div",{className:"_3-8x"+(this.props.showMenu?" _3km3":"")+(a?"":" _3oh-")},b("React").createElement(b("DebouncedMentionsTextEditor.react"),{autoHighlight:!0,ariaControls:j.CONVERSATION,ariaDescribedBy:j.COMPOSER_INPUT_DESCRIPTION,ariaLabel:d,editorState:this.state.editorState,handleBeforeInput:this.$30,handleContentReturn:this.$21,handlePastedFiles:this.$12,handleReturn:this.$21,maxResults:n,readOnly:this.props.disableInput,mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionTypeaheadCreationForContentStateFn:b("createMessengerMentionTypeaheadDraftEntity"),mentionResultsComponent:b("MentionsLayer.react"),mentionResultsProps:{typeaheadView:b("MessengerSingleSectionContactList.react"),typeaheadViewProps:{className:"_13iv",viewer:this.props.viewer},position:"above",autoflip:!0},mentionsSource:this.state.mentionsSource,assistantTypeaheadSource:this.state.assistantTypeaheadSource,onChange:this.$20,placeholder:d,ref:"input",spellCheck:!0,stripPastedStyles:!0,tabIndex:this.props.threadID===b("MessengerConstants").NEW_THREAD_KEY?b("MessengerTabIndices").COMPOSER_INPUT:0,textAlignment:"left",onAddMention:this.$31,onShowMentions:this.$32}),b("React").createElement("div",{className:"_5ca7",id:j.COMPOSER_INPUT_DESCRIPTION},e)))};a.prototype.$28=function(a,c){return b("React").createElement(b("MercuryThreadTitle.react"),{thread:a,viewer:c})};a.prototype.$29=function(a,c,d){return b("React").createElement(b("MercuryThreadSnippet.react"),{participants:a,shouldAlwaysRenderSender:!0,shouldRenderYou:!0,thread:c,viewer:d})};a.prototype.$15=function(a,c){var d=this.$33(a);a=b("EditorState").set(a,{decorator:d});return c||this.props.disableAutofocus?a:b("EditorState").moveFocusToEnd(a)};a.prototype.$33=function(a){var c=b("MessengerEmoticonSpan.react");a=a.getCurrentContent();c=[{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOTICON"},a.getEntity),component:c}];c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"},a.getEntity),component:b("MessengerEmojiSpan.react")});c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="MENTION"},a.getEntity),component:b("MessengerMentionsEntityDecorator.react")});return new(b("CompositeDraftDecorator"))(c)};a.prototype.$34=function(a,c){a=b("handleBeforeInputForMessengerEmoticon")(c,a);if(a===c)return!1;this.setState({editorState:a});return!0};a.prototype.$35=function(a,c){a=b("handleBeforeInputForMessengerEmoji")(c,a);if(a===c)return!1;this.setState({editorState:a});return!0};a.prototype.handleTextDropped=function(a){var c=this.state.editorState,d=c.getSelection();if(d.get("hasFocus"))return;d=b("DraftModifier").replaceText(c.getCurrentContent(),d,a,c.getCurrentInlineStyle());a=b("EditorState").push(c,d,"insert-fragment");this.$20(a)};a.prototype.getShareData=function(){var a=this.props.sharePreview;return a&&a.type&&a.params?{share_type:a.type,share_params:a.params.get("data")}:null};a.prototype.exitCurrentMode=function(){this.refs.input&&this.refs.input.exitCurrentMode()};a.prototype.$36=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};a.prototype.addMention=function(a){a=b("replaceMentionedTextInEditorState")(a,this.state.editorState,0,b("createMessengerMentionDraftEntity"));this.state.mentionsTriggerSource||this.setState({mentionsTriggerSource:b("MessengerMentionSource").REPLY});this.$20(a);this.$31()};a.propTypes={disableAutofocus:c.bool,fileUploader:c.object,handleOnlyImageUploads:c.bool.isRequired,isComposing:c.bool,mentionsEnabled:c.bool,pageID:c.string,participants:c.instanceOf(b("immutable").Map),sharePreview:c.object,showMenu:c.bool,disableInput:c.bool,smallerEqual640:c.bool,thread:c.object,threadID:c.string,viewer:c.string,onBeforeInput:c.func,onChange:c.func,onFileUpload:c.func,onResize:c.func,onMessageSend:c.func};function q(a,b){a=a.participants;b=b.participants;if(!a||!b)return!0;if(a===b)return!1;a=a.filter(Boolean);b=b.filter(Boolean);return a.size!==b.size||!a.equals(b)}e.exports=a}),null);
__d("MessengerConfirmBlockThreadDialogReact.bs",["fbt","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerConfirmBlockThreadDialogReact");function i(a,c){var d=function(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)},e=function(){return d(!1)};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,[d],0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,g._("You have blocked {sender name}",[g._param("sender name",a)]))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[g._("You can access people you've blocked by going to the Filtered Messages list.")])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[g._("OK")],0,0,[e],[1],0,0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.participantName,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerFileSizeErrorDialogReact.bs",["fbt","ReasonReact.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){switch(a){case"size-exceeded":return 1;case"wrong-type":return 0;default:return 2}}var i=b("ReasonReact.bs").statelessComponent("MessengerFileSizeErrorDialogReact");function j(a){switch(a){case 0:return g._("The type of file you're trying to attach isn't allowed. Please try again with a different format.");case 1:return g._("The file you have selected is too large. The maximum size is 25MB.");case 2:return null}}function k(a,c){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,0,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,g._("Failed to upload files"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[j(a)])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([0],[g._("OK")],0,0,0,[0],0,0,[]))]))]))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return k(h(a.error),[])});f.errorOfString=h;f.component=i;f.renderDialogBody=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerHotLikeOutlineSVG.react",["cssVar","fbt","CurrentUser","MercuryShareAttachmentRenderLocations","React","uniqueID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j="transparent",k=h._("Thumbs Up Sign");d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={titleId:b("uniqueID")()},c}a.prototype.render=function(){var a=this.props.color||(b("CurrentUser").isWorkUser()?"#373e4c":"#0084ff"),c={height:this.props.height||"85%"};this.props.location!==b("MercuryShareAttachmentRenderLocations").CHAT&&this.props.location!==b("MercuryShareAttachmentRenderLocations").PAGES_INBOX&&(c.width="66%");return b("React").createElement("svg",{"aria-labelledby":this.state.titleId,version:"1.1",viewBox:"0 0 40.16 42.24",preserveAspectRatio:"xMinYMax meet",style:c},b("React").createElement("title",{id:this.state.titleId},k),b("React").createElement("path",{d:"M935.36,1582.44a0,0,0,0,0,0,.06,3.59,3.59,0,0,1-.72,6.53,0,0,0,0,0,0,0,3.56,3.56,0,0,1,.71,2.13,3.6,3.6,0,0,1-3,3.54, 0,0,0,0,0,0,.05,3.56,3.56,0,0,1,.38,1.61,3.61,3.61,0,0,1-3.42,3.6H910v-19.6l5.27-7.9a4,4,0,0,0,.66-2.31l-0.1-4c-0.22-2.4-.09-2.06, 1.13-2.37,2-.51,7.16,1.59,5.13,12.17h11.06A3.59,3.59,0,0,1,935.36,1582.44ZM899,1581h7v22h-7v-22Z",transform:"translate(-898.5 -1563.26)",fill:j,fillRule:"evenodd",stroke:a,strokeLinecap:"round",strokeWidth:"5%"}))};a.propTypes={color:c.string,height:c.string,location:c.string};e.exports=a}),null);
__d("MessengerHotLikeButton.react",["cx","fbt","EmojiLikeConstants","Image.react","ImmutableObject","Keys","KeyStatus","Link.react","MercuryMessageObject","MercuryTriodeSourceUtil","MessengerEnvironment","MessengerHotLikePreviewEvents","MessengerHotLikeOutlineSVG.react","MessengerHotLikeUtils","MessengerSupportedEmojiUtils","React","StickerConstants","clearInterval","clearTimeout","ifRequired","joinClasses","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MercuryMessageObject").get();c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$6=function(a){(this.props.disabled||this.$3)&&(a.preventDefault(),a.stopPropagation());if(this.props.disabled||a.button!==0)return;this.props.onMouseDown&&this.props.onMouseDown();this.$3=Date.now();this.$9();this.$10()}.bind(this),this.$8=function(){if(!(this.props.threadID&&this.$3))return;this.$3=0;this.$11();this.$12()}.bind(this),this.$14=function(){if(!this.props.threadID)return;b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").POP,this.props.threadID)}.bind(this),this.$7=function(){this.$3&&(this.$3=0,this.$11(),this.$14())}.bind(this),this.$5=function(a){a.stopPropagation();if(this.props.disabled)return;if(b("KeyStatus").getKeyDownCode()===b("Keys").RETURN||!this.props.threadID){a=this.props.sendCustomLike;this.props.customLike&&a?a(this.props.customLike,b("MessengerHotLikeUtils").getEmojiSizeForTime(1)):this.props.sendSticker(b("MessengerHotLikeUtils").getStickerIDForTime(1))}}.bind(this),c}a.prototype.componentDidMount=function(){this.$4=b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(a,c,d){a===this.props.threadID&&(d&&this.props.customLike&&this.props.sendCustomLike?this.props.sendCustomLike(this.props.customLike,d,b("EmojiLikeConstants").source.HOT_LIKE):this.props.forGameChat||this.props.sendSticker(c))}.bind(this))};a.prototype.componentWillUnmount=function(){this.$4&&this.$4.remove()};a.prototype.render=function(){__p&&__p();var a=null,c={};if(this.props.customLike&&this.props.customLike.emoji){var d=this.props.customLike.emoji;d=b("MessengerSupportedEmojiUtils").getNewEmojiData(d,b("EmojiLikeConstants").size.SMALL);var e=this.props.renderSize?this.props.renderSize:16;c.background="none";a=b("React").createElement(b("Image.react"),{src:d&&d.url,style:{padding:e==16?0:3,display:"block",height:e,width:e}})}else if(this.props.CustomRenderer){d=this.props.CustomRenderer;a=b("React").createElement(d,{color:this.props.customColor,location:this.props.location,renderSize:this.props.renderSize})}else this.props.customColor&&(a=b("React").createElement(b("MessengerHotLikeOutlineSVG.react"),{color:this.props.customColor,location:this.props.location}));e=h._("Send a Like");return b("React").createElement(b("Link.react"),{"aria-label":e,className:b("joinClasses")(this.props.customColor||this.props.CustomRenderer?"_5j_u":"",this.props.className),disabled:this.props.disabled,href:"#",onClick:this.$5,onDragStart:function(a){return a.preventDefault()},onMouseDown:this.$6,onMouseLeave:this.$7,onMouseUp:this.$8,role:"button",style:c,title:e},a)};a.prototype.$9=function(){if(!this.props.threadID)return;b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").START,this.$13(),this.props.threadID)};a.prototype.$12=function(){if(!this.props.threadID)return;!b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerHotLikePreview.react",function(){b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP,this.props.threadID)}.bind(this),function(){if(this.$1!==null)return;this.$1=b("setIntervalAcrossTransitions")(function(){b("ifRequired")("MessengerHotLikePreview.react",function(){this.$1!==null&&(b("clearInterval")(this.$1),this.$1=null),b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP,this.props.threadID)}.bind(this))}.bind(this),100)}.bind(this)):b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP,this.props.threadID)};a.prototype.$13=function(){__p&&__p();var a=this.props.threadID;if(!a)return null;a=j.constructStickerMessageObject(b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),a);j.normalizeNewMessage(a);a.is_like_preview=!0;a.like_preview_since=this.$3;a.customLike=this.props.customLike&&this.props.customLike.emoji?this.props.customLike:null;a.body="";return new(b("ImmutableObject"))(a)};a.prototype.$10=function(){this.$11(),this.$2=b("setTimeoutAcrossTransitions")(this.$14,b("MessengerHotLikeUtils").SizeTimes.large)};a.prototype.$11=function(){b("clearTimeout")(this.$2)};a.propTypes={CustomRenderer:c.func,onMouseDown:c.func,customLike:c.object,customColor:c.string,forGameChat:c.bool,location:c.string,sendSticker:c.func.isRequired,sendCustomLike:c.func,threadID:c.string,disabled:c.bool,renderSize:c.number};e.exports=a}),null);
__d("bs_marshal",["bs_caml_string","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.to_buffer: substring out of bounds"];else return b("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_buffer")}function g(a,c){if(c<0||c>(a.length-20|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.data_size"];else return b("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size")}function c(a,b){return 20+g(a,b)|0}function h(a,c){if(c<0||c>(a.length-20|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else{var d=b("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size");if(c>(a.length-(20+d|0)|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else return b("bs_caml_missing_polyfill").not_implemented("caml_input_value_from_string")}}function d(a,c){return h(b("bs_caml_string").bytes_of_string(a),c)}function e(a,c,d){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value")}function i(){return b("bs_caml_missing_polyfill").not_implemented("caml_input_value")}var j=20;f.to_channel=e;f.to_buffer=a;f.from_channel=i;f.from_bytes=h;f.from_string=d;f.header_size=j;f.data_size=g;f.total_size=c}),null);
__d("bs_obj",["bs_marshal","bs_caml_array","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_array").caml_array_get,h=b("bs_caml_array").caml_array_set;function a(){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_string")}function c(a,c){return[b("bs_marshal").from_bytes(a,c),c+b("bs_marshal").total_size(a,c)|0]}function i(a){a=a.length!==undefined&&(a.tag|0)!==248&&a.length>=1?a[0]:a;var c;if(a.length!==undefined&&a.tag===248)c=a[0];else throw b("bs_caml_builtin_exceptions").not_found;if(c.tag===252)return a;else throw b("bs_caml_builtin_exceptions").not_found}function d(a){try{a=i(a);return a[0]}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_name"];else throw a}}function e(a){try{a=i(a);return a[1]}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_id"];else throw a}}function j(a){try{return i(a)}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_slot"];else throw a}}var k=0,l=245,m=246,n=247,o=248,p=249,q=250,r=251,s=251,t=252,u=253,v=254,w=255,x=255,y=1e3,z=1001,A=1002;f.double_field=g;f.set_double_field=h;f.first_non_constant_constructor_tag=k;f.last_non_constant_constructor_tag=l;f.lazy_tag=m;f.closure_tag=n;f.object_tag=o;f.infix_tag=p;f.forward_tag=q;f.no_scan_tag=r;f.abstract_tag=s;f.string_tag=t;f.double_tag=u;f.double_array_tag=v;f.custom_tag=w;f.final_tag=x;f.int_tag=y;f.out_of_heap_tag=z;f.unaligned_tag=A;f.extension_name=d;f.extension_id=e;f.extension_slot=j;f.marshal=a;f.unmarshal=c}),null);
__d("bs_camlinternalLazy",["bs_obj","bs_curry","bs_caml_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_exceptions").create("CamlinternalLazy.Undefined");function h(){throw g}function i(a){__p&&__p();var c=a[0];a[0]=h;try{c=b("bs_curry")._1(c,0);a[0]=c;a.tag=b("bs_obj").forward_tag;return c}catch(b){a[0]=function(){throw b};throw b}}function j(a){var c=a[0];a[0]=h;c=b("bs_curry")._1(c,0);a[0]=c;a.tag=b("bs_obj").forward_tag;return c}function a(a){var c=a.tag|0;if(c===b("bs_obj").forward_tag)return a[0];else if(c!==b("bs_obj").lazy_tag)return a;else return i(a)}function c(a){var c=a.tag|0;if(c===b("bs_obj").forward_tag)return a[0];else if(c!==b("bs_obj").lazy_tag)return a;else return j(a)}f.Undefined=g;f.force_lazy_block=i;f.force_val_lazy_block=j;f.force=a;f.force_val=c}),null);
__d("MessengerSendButtonReact.bs",["fbt","bs_block","LinkReact.bs","ReasonReact.bs","bs_js_primitive","bs_camlinternalLazy"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerSendButtonReact"),i=b("bs_block").__(246,[function(){return g._("Press Enter to send")+("\n"+g._("Press Shift+Enter to add a new paragraph"))}]);function j(a,c,d,e){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var e=c?[{color:c[0]}]:0,f=i.tag|0;return b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,[a],0,["tooltip"],[f===250?i[0]:f===246?b("bs_camlinternalLazy").force_lazy_block(i):i],0,0,0,0,[d],0,0,["button"],e,0,0,0,g._("Send")))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return j(a.className,b("bs_js_primitive").null_undefined_to_opt(a.customColor),a.onClick,[])});f.component=h;f.title=i;f.make=j;f.jsComponent=a}),null);
__d("ReasonBootloadOnInteraction.react",["React","ReasonBootloadOnRender.react"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={hadUserInteraction:!1},this.$1=function(){this.setState({hadUserInteraction:!0})}.bind(this),b}a.prototype.render=function(){"use strict";if(!this.state.hadUserInteraction)return b("React").cloneElement(this.props.placeholder,{onFocus:this.$1,onMouseOver:this.$1,onClick:this.$1});var a=this.props,c=a.loader,d=a.component;a=a.placeholder;return b("React").createElement(b("ReasonBootloadOnRender.react"),{placeholder:a,loader:c,component:d})};e.exports=a}),null);
__d("MercuryMessageBodyReact.bs",["ReasonReact.bs","MercuryMessageBody.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MercuryMessageBody.react"),{body:a},c)}f.make=a}),null);
__d("ReplyingToMessageReact.bs",["ix","cx","fbt","React","asset","ImageReact.bs","ReasonReact.bs","bs_js_primitive","XUICloseButtonReact.bs","MercuryAttachmentType","MercuryMessageBodyReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").statelessComponent("ReplyingToMessageReact");function k(a,c,d,e,f,h){__p&&__p();return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){__p&&__p();var f,j=0;if(c){var k=c[0];k===""?j=1:f=[b("ReasonReact.bs").element(0,0,b("MercuryMessageBodyReact.bs").make(k,[])),null]}else j=1;if(j===1){if(d.length!==1)k=[i._({"*":"{number of attachments in message being replied to} Attachments","_1":"{number of attachments in message being replied to} Attachment"},[i._param("number of attachments in message being replied to",String(d.length)),i._plural(d.length)]),g("596865")];else{j=d[0];var l=j.attach_type===b("MercuryAttachmentType").PHOTO;if(l)k=[i._("Photo"),g("596858")];else{l=j.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE;if(l)k=[i._("GIF"),g("596858")];else{l=j.attach_type===b("MercuryAttachmentType").VIDEO;if(l)k=[i._("Video"),g("596874")];else{l=j.attach_type===b("MercuryAttachmentType").STICKER||j.attach_type===b("MercuryAttachmentType").THIRDPARTYSTICKER;k=l?[i._("Sticker"),g("596858")]:[i._("Attachment"),g("596852")]}}}}f=[k[0],b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(["_6ees"],0,0,0,[k[1]],0,0,0,0,[]))]}return b("React").createElement("div",{className:(h?"_692o":"")+" _67tu"},b("ReasonReact.bs").element(0,0,b("XUICloseButtonReact.bs").make(["_67tv"],1,h?1:2,e,0,[])),i._("Replying to")," ",b("React").createElement("strong",undefined,i._("{name}",[i._param("name",a)])),b("React").createElement("div",{className:"_67tw _1nc6 ellipsis"},f[0],f[1]))},j[9],j[10],j[11],j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.name,b("bs_js_primitive").null_undefined_to_opt(a.body),a.attachments,a.onCancelReplyingToMessage,[],a.isChatTab)});f.component=j;f.make=k;f.jsComponent=a}),null);
__d("XMNCommercePageNullStateCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/page/nullstate/",{})}),null);
__d("MessengerComposer.react",["cssVar","cx","fbt","invariant","AsyncRequest","AutoFocusableLink.react","BootloadedComponent.react","Bootloader","BootloadOnRender.react","ChatPhotoUploader.react","CurrentUser","EmoticonsList","JSResource","LazyComponent.react","MercuryBootloadOnInteraction.react","MercuryConfig","MercuryIDs","MercuryReadOnlyReason","MercuryShareAttachmentRenderLocations","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerActions","MessengerBlockDialogReact.bs","MessengerBotMenuDataFetcher","MessengerButtonReact.bs","MessengerComposerInput.react","MessengerConfirmBlockThreadDialogReact.bs","MessengerConstants","MessengerContextualDialog.react","MessengerDialogs.bs","MessengerFileSizeErrorDialogReact.bs","MessengerHotLikeButton.react","MessengerHotLikeUtils","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerQuickCamOrigins","MessengerResponsiveBlock.react","MessengerSendButtonReact.bs","MessengerURIStore","MessengerView","MNCommerceCallToActionType","MNCommercePageSetting","MNCommercePostbackCTADataManager","MNCommercePostbackRefSendManager","P2PGKValues","React","ReasonBootloadOnInteraction.react","ReasonResource","ReplyingToMessageReact.bs","WorkChatExtensionAvailabilityFetcher","XMessagingUnblockMessagesController","XMNCommercePageNullStateCTAController","XUISpinner.react","getPageIDFromThreadID","gkx","immutable","isWebGLEnabled","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("MessengerBlockDialogReact.bs").jsComponent,m=b("MessengerButtonReact.bs").jsComponent,n=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,o=b("MessengerFileSizeErrorDialogReact.bs").jsComponent,p=b("MessengerSendButtonReact.bs").jsComponent,q=b("ReplyingToMessageReact.bs").jsComponent;c=b("React").PropTypes;var r=640,s=360,t=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;d=babelHelpers.inherits(a,b("React").PureComponent);k=d&&d.prototype;function a(a){__p&&__p();k.constructor.call(this,a),this.refsGifUploader=null,this.handleFileUpload=function(a){this.refsUploader&&this.refsUploader.uploadFiles(a),this.exitCurrentMode()}.bind(this),this.$33=function(a){a=b("EmoticonsList").symbols[a];if(!a)return;this.refsInput&&this.refsInput.insertEmoticon(a)}.bind(this),this.focusInput=function(){this.refsInput&&this.refsInput.focus()}.bind(this),this.$44=function(a){this.refsGifUploader=a}.bind(this),this.$51=function(){var a=b("XMessagingUnblockMessagesController").getURIBuilder().getURI(),c=this.props.threadID;new(b("AsyncRequest"))(a).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(c)}).send()}.bind(this),this.$49=function(){__p&&__p();var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("MessengerURIStore").getState().threadIDs;if(c){c=c.filter(function(a){return this.props.threadID!==a}.bind(this));b("MessengerActions").selectAggregation(c)}c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c);this.$47()["delete"](this.props.threadID);b("MessengerActions").selectThread(null);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint("inbox_banner").log()}.bind(this),this.$53=function(){this.$48()}.bind(this),this.$48=function(){__p&&__p();var a;a=(a=this.props)!=null?(a=a.thread)!=null?a.thread_id:a:a;a=b("MercuryIDs").isGroupChat(a);if(a)this.$54();else{a=(a=this.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;var c=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null,d=c&&c.short_name;d&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(l,{onBlock:function(){this.$55(d)}.bind(this),contact:c})}.bind(this))}}.bind(this),this.$50=function(a){var c=this.props.thread,d=b("CurrentUser").getID();d=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,d);c=!!c&&b("MessageRequestUtils").isFiltered(c);a||new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(d).setEntryPoint("inbox_banner").log()}.bind(this),this.$45=function(a,c){a.platformFBID.toString()===b("MercuryConfig").MessengerAppID?this.props.onStickerSelect(a.resultID.toString()):this.refsGifUploader&&this.refsGifUploader.uploadURL&&this.refsGifUploader.uploadURL({attribution_app_id:a.platformFBID,external_image_url:a.source.url,preview_url:a.media.preview?a.media.preview.url:a.media.thumbnail.url,source:a.source})}.bind(this),this.$46=function(a){this.focusInput(),this.refsInput&&this.refsInput.insertEmoji(a)}.bind(this),this.$15=function(a){this.setState({currentValue:a})}.bind(this),this.$14=function(a,b,c){this.refsEmojiButton&&this.refsEmojiButton.hideFlyout();return this.props.onMessageSend&&this.props.onMessageSend(a,b,c)}.bind(this),this.$42=function(a){this.refsInput&&this.refsInput.triggerSend()}.bind(this),this.$43=function(a){return this.props.onStickerSelect(a)}.bind(this),this.$10=function(){if(this.state.nullStateCTA!==null)switch(this.state.nullStateCTA.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:break;case b("MNCommerceCallToActionType").POSTBACK:default:this.setState({disableNullState:!0});b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$4())?(b("MNCommercePostbackCTADataManager").sendAndConfirm(this.state.nullStateCTA.id,this.state.nullStateCTA.title,this.props.threadID,null,this.$1,b("MNCommercePostbackRefSendManager").getMdotMeRef()),b("MessengerActions").changeMDotMeReferral()):b("MNCommercePostbackCTADataManager").sendAndConfirm(this.state.nullStateCTA.id,this.state.nullStateCTA.title,this.props.threadID,null,this.$1);break}}.bind(this),this.$1=function(){this.setState({showNullState:!0,disableNullState:!1})}.bind(this),this.$1=this.$1.bind(this),this.state=this.$2()}a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.threadID!==this.props.threadID&&(this.setState(this.$2()),a.thread&&this.$3(a.thread.message_count,b("getPageIDFromThreadID")(a.threadID))),a.thread&&a.thread.message_count>0&&this.setState({showNullState:!1})};a.prototype.componentDidMount=function(){this.props.thread&&this.$3(this.props.thread.message_count,this.$4());var a=b("gkx")("AT5XAkqd2O6LjOmkOGXezXJfqE7PmAUiHvyTs90ENWlU1oS2KiZWA5DZjhpXDuy0xxUdkjT9ijcbf3nq8xIRzrY1");b("CurrentUser").isWorkUser()&&a&&b("promiseDone")(b("WorkChatExtensionAvailabilityFetcher").checkHasChatExtension(),function(a){return this.setState({hasWorkChatExtension:a})}.bind(this))};a.prototype.componentDidUpdate=function(a){(a.canReply!==this.props.canReply||a.replyingToMessage!==this.props.replyingToMessage||a.sharePreview!==this.props.sharePreview||a.fileUploader!==this.props.fileUploader)&&(this.props.onResize&&this.props.onResize()),this.props.replyingToMessage&&a.replyingToMessage!==this.props.replyingToMessage&&this.focusInput(),this.props.thread&&(this.$5(),this.$6())};a.prototype.render=function(){__p&&__p();if(!this.props.canReply)return this.$7();else if(this.props.thread&&b("MessageRequestUtils").isMessageRequest(this.props.thread)&&!this.state.pendingActionsBypassed)return this.$8();var a=this.props.thread&&this.props.thread.message_count;b("MNCommercePostbackRefSendManager").sendMDotMeRef(this.$4(),a);if(this.state.showNullState&&this.state.nullStateCTA!==null)return b("React").createElement("div",{className:"_2xh0"},this.$9(),b("React").createElement("div",{className:"_2xh4 _59w_"},b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{cta:this.state.nullStateCTA,onClick:this.$10,disabled:this.state.disableNullState,threadID:this.props.threadID}),loader:b("JSResource")("ChatPageComposerNullState.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("XUISpinner.react"),{size:"small"})})));var c=this.$11();a=b("React").createElement(b("MessengerResponsiveBlock.react"),{breakpointsToggles:function(a){return[a!=null&&a<=r,a]}},function(a){var d=a[0];a=a[1];return b("React").createElement("div",{"aria-label":i._("New message"),className:"_4rv3",role:"region"},this.props.replyingToMessage&&this.$12(),this.$13(this.props.threadID),b("React").createElement("div",{className:"_5irm"+(d?" _1_73":"")},b("React").createElement(b("MessengerComposerInput.react"),{disableAutofocus:!!this.props.disableAutofocus,fileUploader:this.props.fileUploader,handleOnlyImageUploads:!1,isComposing:c,mentionsEnabled:this.props.mentionsEnabled,ref:function(a){return this.refsInput=a}.bind(this),onBeforeInput:function(){return this.refsEmojiButton&&this.refsEmojiButton.hideFlyout()}.bind(this),onResize:this.props.onResize,onMessageSend:this.$14,participants:this.props.participants,sharePreview:this.props.sharePreview,smallerEqual640:d,thread:this.props.thread,threadID:c?b("MessengerConstants").NEW_THREAD_KEY:this.props.threadID,pageID:this.$4(),viewer:this.props.viewer,onFileUpload:this.handleFileUpload,onChange:this.$15,showMenu:this.state.showMenu,disableInput:this.state.disableInput}),this.$16(a)))}.bind(this));var d=this.$4(),e=c?b("MessengerConstants").NEW_THREAD_KEY:this.props.threadID;return d?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{onResize:this.props.onResize,originalElement:a,pageID:d,playLinkClassName:"_2xh6 _2xh7",showGameImage:!1,threadFBID:this.props.threadFBID,threadID:e}),loader:b("JSResource")("MessengerGameBotPlayButton.react").__setRef("MessengerComposer.react"),placeholder:a}):a};a.prototype.$13=function(a){__p&&__p();if(!a)return null;var c=this.props.fileUploader;if(!c)return null;c=c.get("uploadedFiles");if(c.size==0)return null;var d=this.props.thread;d=d&&d.footer_color?d.footer_color:"#0084ff";return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{files:c,small:!1,threadID:a,threadCustomColor:d,onClick:this.$17,onResize:this.props.onResize}),loader:b("JSResource")("MercuryStageFilePreviewReactComponent").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("XUISpinner.react"),{className:"_2qf"})})};a.prototype.$12=function(){var a=this.props.replyingToMessage;return!a?null:b("React").createElement(q,{name:this.$18(a),body:a.body,attachments:a.attachments,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage})};a.prototype.$18=function(a){a=a.author?b("MessengerParticipants.bs").getNow(a.author):null;return a&&a.short_name};a.prototype.$17=function(a,c){b("MessengerActions").cancelFileUpload(a,c)};a.prototype.$16=function(a){return this.state.disableInput===!0?null:b("React").createElement("div",{ref:function(a){this.refsButtonsContainer=a}.bind(this),className:"_4rv4"},this.$19(a),this.$20())};a.prototype.$19=function(a){if(this.props.hideActions)return null;return a&&a<s?b("React").createElement("div",null,b("React").createElement("ul",{className:"_39bj"},this.$21(),this.$22(),this.$23(),this.$24(),this.$25()),b("React").createElement("ul",{className:"_39bj"},this.$26(),this.$27(),this.$28(),this.$29(),this.$30())):b("React").createElement("ul",{className:"_39bj"},this.$21(),b("CurrentUser").isWorkUser()?this.$31():null,this.$22(),this.$23(),this.$24(),this.$25(),this.$26(),this.$27(),this.$28(),this.$29(),this.$30())};a.prototype.$32=function(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(o,{error:a.error})})};a.prototype.handleTextDropped=function(a){this.refsInput&&this.refsInput.handleTextDropped(a)};a.prototype.$27=function(){return b("React").createElement("li",null,this.$34())};a.prototype.$34=function(){var a;if(!b("P2PGKValues").P2PVisible||!this.props.threadID||this.$35()||!this.props.p2pPaymentConfig||((a=this.props)!=null?(a=a.participants)!=null?a.size:a:a)===1)return null;a="_30yy _25pc _39bk";return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:a,ContextualDialog:b("MessengerContextualDialog.react"),thread:this.props.thread,threadID:this.props.threadID,p2pPaymentConfig:this.props.p2pPaymentConfig}),loader:b("JSResource")("P2PSendMoneyContainerBootloader.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a,role:"button"})})};a.prototype.$30=function(){return b("gkx")("AT7NMH8Fy3EgTAU92jLm_-e65sqgQK-sAjecOeMqKm7I8DjgqesO35iaJSaySvKNghUUIX8H61oA8oRMnPMYOfvy")&&b("gkx")("AT44XpsdaaEfcz2GrZ0m8RNEjrTHpQedGRhxmeB3oGdMvETdQ7vdyzqg8MlOqQGInNDXydDTyvvVR5lvi3VlBp7t")&&this.props.threadID?b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:"_4rv5 _39bk"+(this.state.flyoutOpen?" _5jhb":""),location:b("MessengerQuickCamOrigins").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}),loader:b("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_4rv5 _39bk",role:"button"})}):null};a.prototype.$26=function(){return!t?null:b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{onVoiceClipCreate:this.props.onVoiceClipCreate}),loader:b("JSResource")("MessengerVoiceClipButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_4rv7 _39bk _30yy",role:"button"})}))};a.prototype.$28=function(){if(this.props.thread&&this.props.thread.is_canonical)return null;return!this.props.threadFBID?null:b("React").createElement("li",null,b("React").createElement(b("ReasonBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("ReasonResource")(b("JSResource")("MessengerGroupPollingButtonReact.bs").__setRef("MessengerComposer.react")),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _30yy _2o-b",role:"button"})}))};a.prototype.$29=function(){var a=b("gkx")("AT63aD2C9-fv79urP7EIQBv3xq1MHcxwP1I6FtWmRNMg4KbjP2Am2oU4XyjW-B79fHuBlyNprN6_RmaeE-t7Y3Fw")&&b("isWebGLEnabled")();return a&&this.props.threadFBID&&!this.$35()?b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerGamesButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _30yy _4ce_",role:"button"})})):null};a.prototype.$21=function(){return this.props.threadFBID&&!this.$35()&&this.state.hasWorkChatExtension?b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerWorkplaceChatExtensionsButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _22k0 _30yy",role:"button"})})):null};a.prototype.$36=function(a){return b("React").createElement("li",{className:"_39bk"},b("React").createElement(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!(this.props.threadID||this.$37()),ref:function(a){return this.refsUploader=a}.bind(this),imageClassName:(a=="files"?"_5vn8":"")+(a=="attachment"?" _46si":""),imagesOnly:!1,inputClassname:"_260t",linkClassName:"_30yy _260u",focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$32,threadID:this.props.threadID}))};a.prototype.$22=function(){return this.$36("files")};a.prototype.$31=function(){return this.$36("attachment")};a.prototype.$38=function(){return this.state.currentValue.length>0||this.$39()||this.$40()};a.prototype.$39=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};a.prototype.$40=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};a.prototype.$41=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadingFiles").size>0)};a.prototype.$20=function(){var a=!(this.props.threadID||this.$37());return!a&&this.$38()&&!this.$41()?b("React").createElement(p,{className:(this.props.threadID?"_30yy":"")+" _38lh _39bl",customColor:this.props.thread&&this.props.thread.solid_color,onClick:this.$42}):b("React").createElement(b("MessengerHotLikeButton.react"),{className:"_4rv9"+(this.props.threadID?" _30yy":"")+" _39bl",disabled:a,customColor:this.props.thread&&this.props.thread.solid_color,customLike:b("MessengerHotLikeUtils").getCustomEmojiFromThread(this.props.thread)||undefined,sendSticker:this.$43,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID,renderSize:24})};a.prototype.$23=function(){var a=(this.props.threadID?"_30yy":"")+" _4rv6 _39bk";return b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:a,ContextualDialogClass:b("MessengerContextualDialog.react"),disabled:!(this.props.threadID||this.$37()),getInput:function(){return this.refsInput}.bind(this),flyoutAlignment:"right",flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,onEmoticonSelect:this.$33,threadID:this.props.threadID}),loader:b("JSResource")("ChatStickerButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a,role:"button"})}))};a.prototype.$9=function(){__p&&__p();var a;a=(a=this.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;a=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null;var c=a&&a.name||"page";if(this.state.nullStateCTA!==null)switch(this.state.nullStateCTA.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:return null;case b("MNCommerceCallToActionType").POSTBACK:if(!b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$4())&&!this.state.nullStateCTA.instantgame_metadata&&!b("CurrentUser").isWorkUser())return b("React").createElement("div",{className:"_3zc8"},i._("When you tap {cta title}, {name} will see your public info.",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c)]));else if(b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$4())){var d=this.$4();a=a&&a.vanity?"m.me/"+a.vanity:d?"m.me/"+d:"m.me";return b("React").createElement("div",{className:"_3zc8"},i._("When you tap {cta title}, {name} will see your public info and that you opened their {link} link.",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c),i._param("link",a)]))}break;default:return null}return null};a.prototype.$24=function(){var a=(this.props.threadID?"_30yy":"")+" _yht _39bk";return b("React").createElement("li",null,b("React").createElement("div",{style:{display:"none"}},b("React").createElement(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!1,ref:this.$44,imagesOnly:!1,focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$32})),b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:a,ContextualDialogClass:b("MessengerContextualDialog.react"),getInput:function(){return this.refsInput}.bind(this),getQuery:function(){return this.refsInput?this.refsInput.getValue():""}.bind(this),location:b("MercuryShareAttachmentRenderLocations").MESSENGER,onSelect:this.$45}),loader:b("JSResource")("ChatContentSearchButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a,role:"button"})}))};a.prototype.$25=function(){var a=(this.props.threadID?"_30yy":"")+" _5s2p _39bk";return b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:a,ContextualDialogClass:b("MessengerContextualDialog.react"),flyoutAlignment:"right",getInput:function(){return this.refsInput}.bind(this),onSelect:this.$46,onMount:function(a){return this.refsEmojiButton=a}.bind(this),sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}),loader:b("JSResource")("ChatEmojiButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a,role:"button"})}))};a.prototype.$8=function(){__p&&__p();var a=this.props.thread,c=!!a&&b("MessageRequestUtils").isFiltered(a);a=b("CurrentUser").getID();var d=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,a);return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",{style:{height:51}}),bootloadLoader:b("JSResource")("MessengerPendingActions.react").__setRef("MessengerComposer.react"),folder:this.props.thread&&this.props.thread.folder,onAcceptClick:function(){this.$47().changeFolder(this.props.threadID,b("MessagingTag").INBOX);var a=b("MessengerURIStore").getState().threadIDs;if(a){a=a.filter(function(a){return this.props.threadID!==a}.bind(this));b("MessengerActions").selectAggregation(a)}this.setState({pendingActionsBypassed:!0},function(){return new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(c?"other":"pending").setThreadKey(d).setEntryPoint(null).log()}.bind(this))}.bind(this),onDeclineClick:function(){var a=b("MercuryIDs").isGroupChat(this.props.threadID);b("Bootloader").loadModules(["MessengerDeclineDialogReact.bs"],function(c){var e=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(e,{onBlock:this.$48,onDelete:this.$49,onToggle:this.$50,isGroupChat:a})}.bind(this));new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType("pending").setThreadKey(d).setEntryPoint("inbox_banner").log()}.bind(this),"MessengerComposer.react")}.bind(this),onDeleteClick:function(){b("Bootloader").loadModules(["MessengerFilteredDeleteDialogReact.bs"],function(a){var c=a.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(c,{onDelete:this.$49,onToggle:this.$50})}.bind(this))}.bind(this),"MessengerComposer.react"),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType("other").setThreadKey(d).setEntryPoint("inbox_banner").log()}.bind(this)})};a.prototype.$7=function(){__p&&__p();if(!this.props.thread||this.props.view===b("MessengerView").DETAIL.COMPOSE)return null;var a=this.props.thread,c=this.props.participants,d=!1,e=!1;if(a.cannot_reply_reason==="blocked"){d=!0;a.is_canonical===!0||j(0);c!=null||j(0);var f=a.other_user_fbid;f!=null||j(0);c=c.get(b("MercuryIDs").getParticipantIDFromUserID(f));c!=null||j(0);c.is_messenger_blocked&&(e=!0)}if(d)if(e)return b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},i._("You've blocked messages from this person. {unblock_now_button}",[i._param("unblock_now_button",b("React").createElement(m,{label:i._("Unblock Now"),onClick:this.$51,type:"secondary"}))])));else return b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},i._("This person isn't available right now.")));return b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},b("MercuryReadOnlyReason").getReason(a.has_email_participant)))};a.prototype.$52=function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)};a.prototype.$54=function(){var a;a=(a=this.props)!=null?(a=a.thread)!=null?a.thread_id:a:a;if(a){var c=b("MessengerURIStore").getState().activeThreadID===a;this.$52().changeFolder(a,"other");c&&b("MessengerActions").selectThread(null)}};a.prototype.$55=function(a){var c=this.props.threadID,d=c===b("MessengerURIStore").getState().activeThreadID;this.$52().blockIgnoreOnMessengerDotCom(d,c,function(){this.$56(a)}.bind(this))};a.prototype.$56=function(a){var c=this.props,d=c.threadID;c=c.thread;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(n,{participantName:a})});var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint(null).log()};a.prototype.exitCurrentMode=function(){this.refsInput&&this.refsInput.exitCurrentMode()};a.prototype.$11=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE};a.prototype.$37=function(){return!!(this.$11()&&this.props.recipients&&this.props.recipients.size)};a.prototype.$35=function(){return!!this.$4()};a.prototype.$4=function(){return b("getPageIDFromThreadID")(this.props.threadID)};a.prototype.$5=function(){var a=this.$4();a?b("MessengerBotMenuDataFetcher").getHasPageSetting(a,function(a){this.setState({showMenu:a})}.bind(this),function(){this.setState({showMenu:!1})}.bind(this),b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED):this.setState({showMenu:!1})};a.prototype.$6=function(){var a=this.$4();a?b("MessengerBotMenuDataFetcher").getHasPageSetting(a,function(a){this.setState({disableInput:a})}.bind(this),function(){this.setState({disableInput:!1})}.bind(this),b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED):this.setState({disableInput:!1})};a.prototype.$3=function(a,c){a=a===0;var d=!!c;if(d&&a){d=b("XMNCommercePageNullStateCTAController").getURIBuilder();new(b("AsyncRequest"))().setURI(d.getURI()).setMethod("POST").setData({page_id:c}).setHandler(function(a){a&&a.payload?this.setState({showNullState:!0,nullStateCTA:a.payload}):this.setState({showNullState:!1,disableNullState:!1})}.bind(this)).send()}else this.setState({showNullState:!1,disableNullState:!1})};a.prototype.$2=function(){return{pendingActionsBypassed:!1,currentValue:"",nullStateCTA:null,showMenu:!1,disableInput:!1,showNullState:!1,disableNullState:!1}};a.prototype.$47=function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)};a.prototype.testUtils_renderRawP2PSendMoneyButton=function(){return this.$34()};a.prototype.replyToMention=function(a){this.refsInput&&this.refsInput.addMention&&this.refsInput.addMention(a)};a.propTypes={canReply:c.bool,disableAutofocus:c.bool,fileUploader:c.object,hideActions:c.bool,mentionsEnabled:c.bool,onCustomLikeSelect:c.func,onMessageSend:c.func,onPhotoUploadComplete:c.func,onPhotoUploadCancel:c.func,onPhotoUploadFail:c.func,onPhotoUploadSubmit:c.func,onResize:c.func,onStickerSelect:c.func.isRequired,onVoiceClipCreate:c.func,p2pPaymentConfig:c.object,participants:c.instanceOf(b("immutable").Map),recipients:c.instanceOf(b("immutable").List),sharePreview:c.object,threadID:c.string,threadFBID:c.string,thread:c.object,view:c.string,viewer:c.string,replyingToMessage:c.object,onCancelReplyingToMessage:c.func};e.exports=a}),null);
__d("MessengerSimpleDialogReact.bs",["fbt","ReasonReact.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerSimpleDialogReact");function i(a,c,d){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,0,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,a)),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[c])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([0],[g._("OK")],0,0,0,[0],0,0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.title,a.body,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerComposerContainer.react",["fbt","AsyncUploadRequest","EmojiDispatcher","EmojiLikeUtils","EmojiState","KeyEventController","MercuryAttachment","MercuryAttachmentType","MercuryConfig","MercuryIDs","MercuryLocalIDs","MercuryMessageActions","MercuryMessageObject","MercuryMessages","MercurySendMessageHandler","MercuryThreadActions","MercuryThreadIDMap","MercuryThreadInformer","MercuryTriodeSourceUtil","MessageRequestUtils","MessengerActions","MessengerComposer.react","MessengerComposerActions","MessengerDialogs.bs","MessengerEmojiUsageUtils","MessengerSimpleDialogReact.bs","MessengerState.bs","MessengerView","MNPlatformTagsDataManager","P2PPaymentConfig","PhotosUploadID","React","ReactDOM","RepliedToMessageStatusForGraphQL","SubscriptionsHandler","immutable","EmojiStateStore"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerSimpleDialogReact.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$6=function(a,c,d){__p&&__p();this.props.hostProps&&this.props.hostProps.messageSentCallback();b("EmojiState").updateRecentlyUsed(b("MessengerEmojiUsageUtils").findAllEmojis(a));if(!this.props.canReply){d&&d(null);return!1}var e=null,f=!1;this.$13(a,c)||(f=this.$14(function(d){var f=this.$2.constructUserGeneratedMessageObject(a,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),d);d=b("MercuryIDs").getUserIDFromThreadID(d);if(b("MNPlatformTagsDataManager").hasThreadTags(d)){d=b("MNPlatformTagsDataManager").getThreadTags();f.tags=d}c&&(c.shareable_attachment&&(f.shareable_attachment=c.shareable_attachment),c.profile_ranges&&(f.profile_ranges=f.profile_xmd=c.profile_ranges));e=f;return f}.bind(this)));d&&d(f?e:null);e=null;return f}.bind(this),this.$8=function(a,b){this.$3.cancelAttachmentPlaceholder(b.upload_id,b)}.bind(this),this.$7=function(a,b){this.$3.confirmAttachmentPlaceholder(b.upload_id,b)}.bind(this),this.$9=function(a,b){this.$3.cancelAttachmentPlaceholder(b.upload_id,b);a=g._("Upload failed");var c=g._("Please try again. Make sure you are uploading a valid file.");b.errorDialogParams&&(a=b.errorDialogParams.title||a,c=b.errorDialogParams.body||c);this.$15(a,c)}.bind(this),this.$10=function(a,c){this.$14(function(a){return this.$2.constructAttachmentMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),a)}.bind(this),function(a){this.$3.addAttachmentPlaceholder(a,c.upload_id,c),this.handleMessageSentToPendingThread()}.bind(this))}.bind(this),this.handleAudioUpload=function(a){var c="upload_"+b("PhotosUploadID").getNewID();this.$1.sendAttachment(this.props.threadID,j(c),b("MercuryTriodeSourceUtil").getMercuryTriodeSource());var d={};d[c]=a;c=new(b("AsyncUploadRequest"))(b("MercuryConfig").upload_url).setAllowCrossOrigin(!0).setRelativeTo(b("ReactDOM").findDOMNode(this)).setData({voice_clip:!0}).setFiles(d);this.$4.addSubscriptions(c.subscribe("success",function(a,b){return this.$16(b)}.bind(this)));c.send()}.bind(this),this.$11=function(a){return this.$14(function(c){return this.$2.constructStickerMessageObject(a,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),c)}.bind(this))}.bind(this),this.$12=function(a,c,d){var e=this.props.threadID,f=this.$2.constructUserGeneratedMessageObject(a.emoji,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),e);f.has_attachment=!1;return this.$14(function(a){b("EmojiLikeUtils").setEmojiSize(f,c);return b("EmojiLikeUtils").setEmojiSource(f,d)})}.bind(this),this.handleMessageSentToPendingThread=function(){this.props.thread&&b("MessageRequestUtils").isMessageRequest(this.props.thread)&&b("MercuryThreadActions").getForFBID(this.props.viewer).movePendingToInbox(this.props.threadID)}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=b("MercurySendMessageHandler").getForFBID(this.props.viewer),this.$3=b("MercuryMessageActions").getForFBID(this.props.viewer),this.$2=b("MercuryMessageObject").getForFBID(this.props.viewer),this.$5=b("MercuryThreadInformer").getForFBID(this.props.viewer),this.$4=new(b("SubscriptionsHandler"))(),b("EmojiDispatcher").explicitlyRegisterStores([b("EmojiStateStore")]),this.props.onMount&&this.props.onMount(this),this.$4.addSubscriptions(b("KeyEventController").registerKey("ESCAPE",function(){this.props.replyingToMessage&&(this.props.onCancelReplyingToMessage&&this.props.onCancelReplyingToMessage())}.bind(this),function(event,a){return!!(event.key==="Escape"&&b("KeyEventController").filterEventTypes(event,a)&&b("KeyEventController").filterEventModifiers(event,a))}))};a.prototype.componentWillUnmount=function(){this.$4.release()};a.prototype.focusInput=function(){this.refsComposer&&this.refsComposer.focusInput&&this.refsComposer.focusInput()};a.prototype.render=function(){var a=this.props.hostProps?this.props.hostProps.hideActions:!1;return b("React").createElement(b("MessengerComposer.react"),{canReply:this.props.canReply,fileUploader:this.props.fileUploader,hideActions:a,mentionsEnabled:!0,onMessageSend:this.$6,onPhotoUploadComplete:this.$7,onPhotoUploadCancel:this.$8,onPhotoUploadFail:this.$9,onPhotoUploadSubmit:this.$10,onResize:this.props.onResize,onStickerSelect:this.$11,onCustomLikeSelect:this.$12,onVoiceClipCreate:this.handleAudioUpload,replyingToMessage:this.props.replyingToMessage,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage,p2pPaymentConfig:b("P2PPaymentConfig").config,participants:this.props.participants,recipients:this.props.recipients,ref:function(a){return this.refsComposer=a}.bind(this),sharePreview:this.props.sharePreview,threadID:this.props.threadID,threadFBID:this.props.threadFBID,thread:this.props.thread,view:this.props.view,viewer:this.props.viewer})};a.prototype.$13=function(a,b){return a?!1:!(b&&(b.shareable_attachment||b.profile_ranges.length>0))};a.prototype.$16=function(a){var b=a.getName();a=a.getResponse().payload.metadata[0].audio_id;this.$3.confirmAttachmentPlaceholder(b,{upload_id:b,audio_ids:[a]})};a.prototype.handleFileUpload=function(a){a=a.reduce(function(a,b){var c=b.type.split("/")[0];a[c]?a[c].push(b):a.other.push(b);return a},{audio:[],image:[],other:[]});a.audio.forEach(function(a){return this.handleAudioUpload(a)}.bind(this));this.refsComposer&&this.refsComposer.handleFileUpload(a.image.concat(a.other))};a.prototype.handleTextDropped=function(a){this.refsComposer&&this.refsComposer.handleTextDropped(a)};a.prototype.$14=function(a,c){__p&&__p();var d=this.props.threadID,e=this.props.recipients,f=!1;!d&&e&&e.size>1&&(d=b("MercuryLocalIDs").generateThreadID(),f=!0);if(!d)return!1;a=a(d);if(f){f=e.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID())}).toArray();b("MessengerState.bs").createNewLocalThread(this.props.viewer,d,f.concat(b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)));a.offline_threading_id=b("MercuryIDs").tokenize(d).value;a.specific_to_list=f}if(this.props.replyingToMessage&&this.props.replyingToMessage.message_id){e=b("MercuryMessages").get().getMessagesFromIDs([this.props.replyingToMessage.message_id]);a.replied_to_message={status:e.length>0?b("RepliedToMessageStatusForGraphQL").VALID:b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE,message:e.length>0?e[0]:null};this.props.onCancelReplyingToMessage&&this.props.onCancelReplyingToMessage()}c?c(a):this.$3.send(a,this.handleMessageSentToPendingThread);this.props.view===b("MessengerView").DETAIL.COMPOSE&&(b("MercuryAttachment").get(a).length>0&&b("MessengerComposerActions").moveDraftToNextThread(d),b("MessengerComposerActions").exitComposeState(),b("MercuryIDs").isLocalThread(d)?this.$5.subscribeOnce("messages-updated",function(a,c){a=b("MercuryThreadIDMap").get();a.canLinkExternally(d)&&b("MessengerActions").selectThread(d)}):b("MessengerActions").selectThread(d));this.focusInput();return!0};a.prototype.resetDrag=function(){this.refsComposer&&this.refsComposer.exitCurrentMode()};a.prototype.$15=function(a,c){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{title:a,body:c})})};a.propTypes={canReply:c.bool,fileUploader:c.object,onMount:c.func,onResize:c.func,participants:c.instanceOf(b("immutable").Map),recipients:c.instanceOf(b("immutable").List),sharePreview:c.object,hostProps:c.object,threadID:c.string,threadFBID:c.string,thread:c.object,view:c.string,viewer:c.string,replyingToMessage:c.object,onCancelReplyingToMessage:c.func};function j(a){return{upload_id:a,preview_attachments:[{upload_id:a,attach_type:b("MercuryAttachmentType").PHOTO,preview_uploading:!0}]}}e.exports=a}),null);
__d("MercuryMessageGroup",["MercuryActionType","MercuryAttachmentType","MercuryShareAttachmentRenderLocations","MercuryThreadlistConstants","MessengerLightweightActionUtils","MessengerMessage.bs","enumerate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={calculateMessageGroups:function(a,c){__p&&__p();var d=[],e=null,f={value:null};a=b("enumerate")(a);var h;while(!(h=a.next()).done){var i=g.canAppendMessageToLastGroup(f.value,h.value,c);i||(e=[],d.push(e));e.push(h.value);f=h}return d},canAppendMessageToLastGroup:function(a,c,d){var e=b("MercuryThreadlistConstants").GROUPING_THRESHOLD;if(!a||h(a,d)||h(c,d)||a.author!=c.author||a.timestamp<c.timestamp-e||a.is_spoof_warning!==c.is_spoof_warning||a.page_admin_notes||c.replied_to_message)return!1;d=b("MessengerMessage.bs").getPersona(a);e=b("MessengerMessage.bs").getPersona(c);return!d&&!e?!0:d===null||e===null?!1:d.id===e.id}};function h(a,c){var d=a.has_attachment;d&&(c===b("MercuryShareAttachmentRenderLocations").MESSENGER||c===b("MercuryShareAttachmentRenderLocations").CHAT)&&(d=i(a));return!!(b("MessengerLightweightActionUtils").isLWAMessage(a)||a.action_type==b("MercuryActionType").LOG_MESSAGE||d||a.html_body||a.body&&a.body.length>b("MercuryThreadlistConstants").MAX_CHARS_BEFORE_BREAK)}function i(a){a=a.attachments[0];return!a||a.attach_type===b("MercuryAttachmentType").STICKER||a.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE}e.exports=g}),null);
__d("PagesMessageListGreeting.react",["cx","FluxContainer","PagesMessagingMercuryChatTabActions","PagesMessagingMercuryChatTabStore","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.getStores=function(){return[b("PagesMessagingMercuryChatTabStore")]};a.calculateState=function(a,c){if(c.messageCount>0)return{shouldShowGreeting:!1};a=b("PagesMessagingMercuryChatTabStore").getStateByThread(c.threadID);return{greetingContent:a.pagesGreetingContent,shouldShowGreeting:a.pagesGreetingShouldShow}};a.prototype.componentDidMount=function(){b("PagesMessagingMercuryChatTabActions").requestGreetingConfig(this.props.threadID)};a.prototype.render=function(){return!this.state.shouldShowGreeting||!this.state.greetingContent||this.state.greetingContent.trim().length===0?null:b("React").createElement("div",{className:"_4fsh _3-8z"},this.state.greetingContent)};function a(){h.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessageList.react",["cx","MercuryActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageGroup","MercuryShareAttachmentRenderLocations","MessagingGenericAdminTextType","MessengerCallLogEvent","MessengerDomIDs.bs","MessengerLightweightActionUtils","MessengerMessage.bs","PagesMessageListGreeting.react","React","ReactDOM","gkx","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerDomIDs.bs").ids;c=b("React").PropTypes;var j=1e3*60*60,k=function(a){var c;c=(c=a)!=null?(c=c.log_message_data)!=null?c.message_type:c:c;switch(c){case b("MessagingGenericAdminTextType").GROUP_POLL:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.question_id:c:c:c;case b("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.game_id:c:c:c;case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event_id:c:c:c;default:return null}},l=function(a){return b("MessengerLightweightActionUtils").isLWAMessage(a)?"lwa":null};d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={activeMessageID:null,messageGroups:b("MercuryMessageGroup").calculateMessageGroups(this.props.messages,this.props.location)},this.$5=function(a){this.setState(function(b){return{activeMessageID:b.activeMessageID===a?null:b.activeMessageID}})}.bind(this),this.$6=function(a){this.setState({activeMessageID:a})}.bind(this),c}a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.messages!==this.props.messages&&this.setState({messageGroups:b("MercuryMessageGroup").calculateMessageGroups(a.messages,a.location)})};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.DateBreak,d=a.forGameChat,e=a.location,f=a.MessageGroup;a=a.CollapsedLogMessageGroup;var g=[],h=[],r,s=this.props.thread&&this.props.thread.solid_color;s=s?{backgroundColor:s}:null;var t=this.state.activeMessageID,u=this.state.messageGroups,v=u.length,w=this.props.readReceipts,x=w.last();x=x?x.watermark:0;var y=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),z={};for(var A=this.props.messages.size-1;A>=0;A--){var B=this.props.messages.get(A),C=k(B)||l(B);C&&!z[C]&&(z[C]=B.message_id)}for(var C=0;C<v;C++){B=C>0?u[C-1]:null;A=B&&B.length>0?B[B.length-1]:null;B=u[C];var D=B[0],E=B[B.length-1],F=!1;if(!A||D.timestamp-A.timestamp>j){F=!0;A=b("React").createElement(c,{date:new Date(D.timestamp),key:"db:"+D.message_id,ref:"db:"+D.message_id});h.length===0&&g.push(A)}if(b("MessengerLightweightActionUtils").isLWAMessage(D)&&z[l(D)]!==D.message_id){A=this.$1(D,z);g.push(A);continue}if(D.action_type==b("MercuryActionType").LOG_MESSAGE){A=(A=D)!=null?(A=A.log_message_data)!=null?A.message_type:A:A;var G=A===b("MessagingGenericAdminTextType").PARTIES_PRESENCE,H=A===b("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE,I=A===b("MessagingGenericAdminTextType").GROUP_POLL,J=[b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP].includes(A);if((e===b("MercuryShareAttachmentRenderLocations").CHAT||e===b("MercuryShareAttachmentRenderLocations").MESSENGER)&&(D.log_message_type===b("MercuryLogMessageType").VIDEO_CALL||D.log_message_type===b("MercuryLogMessageType").PHONE_CALL||A===b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG&&(D.log_message_data.untypedData.event===b("MessengerCallLogEvent").MISSED_CALL||D.log_message_data.untypedData.event===b("MessengerCallLogEvent").ONE_ON_ONE_CALL_ENDED||b("gkx")("AT4BGIAjIMDx8SHmzjXSkULaWITB36xa4d5h2k8EJZYGLtl7KePUKA_D22IHEMhiWWD9GTeeaFyu4-sNz2_OdRqs")))){A=this.$2(D,y,u,v,C,w,x,E,z);g.push(A)}else{A=this.$3(D,z);r=D.message_id;!H&&!I&&!J&&h.push(A);if(G&&b("gkx")("AT4v31CLhq3ONrcLgjTAwLp2ZfFMc_5Q4k_xqjXl68WxCtQn-L41RqEq0wKhzarMvKqqDw1ofb-Pm3Nbga8dnUI9wr8MS86lbyUu4_ovfyNU0g"))continue;(h.length===B.length||H||I||J)&&(this.$4(h,g,r,s,a),h=[]);(H||I||J)&&g.push(A)}continue}B=b("immutable").List(B);G=n(u,v,C,z);r=!p(w,B,G);H=o(x,E);I=q(this.props.deliveryTimestamp,E);J=this.props.onlineUsers!==undefined&&this.props.onlineUsers.includes(b("MercuryIDs").getUserIDFromParticipantID(B.first().author));A=b("MessengerMessage.bs").getPersona(E);g.push(b("React").createElement(f,{activeMessageID:m(t,B),author:B.first().author,deliveryTimestamp:I,forGameChat:d,hasDateBreak:F,isCanonical:this.props.isCanonical,isFromViewer:y===D.author,isPageMessage:this.props.isPageMessage,isOnline:J,key:"mg:"+D.message_id,lastReadTimestamp:H,maxBubbleWidth:this.props.maxBubbleWidth,messages:B,nextTimestamp:G,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$5,onMessageSelect:this.$6,onStickerClick:this.props.onStickerClick,onReplyToMessage:this.props.onReplyToMessage,pageID:this.props.isPageMessage?this.props.viewer:null,persona:A,readReceipts:r?w:b("immutable").OrderedMap(),ref:"mg:"+D.message_id,thread:this.props.thread,threadID:this.props.threadID,scrollToRepliedMessage:this.props.scrollToRepliedMessage}))}E=this.props.threadID||this.props.thread&&this.props.thread.thread_id||this.props.thread&&this.props.thread.thread_fbid;I=null;e===b("MercuryShareAttachmentRenderLocations").MESSENGER&&E&&this.props.isPageMessage&&(I=b("React").createElement(b("PagesMessageListGreeting.react"),{messageCount:h.length+v,threadID:E}));return b("React").createElement("div",{id:e===b("MercuryShareAttachmentRenderLocations").MESSENGER?i.CONVERSATION:null},I,g)};a.prototype.getMessageElement=function(a,c){__p&&__p();if(c){var d=this.refs["db:"+a];if(d)return b("ReactDOM").findDOMNode(d)}d=this.$7(a);if(!d)return null;d=d[0].message_id;var e=this.refs["mg:"+d];if(!e)return null;return c&&d===a?b("ReactDOM").findDOMNode(e):e.getMessageElement(a)};a.prototype.getMessageComponent=function(a){var b=this.$7(a);if(!b)return null;b=b[0].message_id;b=this.refs["mg:"+b];return!b?null:b.getMessage(a)};a.prototype.$7=function(a){return this.state.messageGroups.find(function(b){return b.some(function(b){return b.message_id===a})})};a.prototype.$4=function(a,c,d,e,f){a.length!==0&&(a.length>1?c.push(b("React").createElement(f,{key:"mg:"+d,style:e},a)):c.push(b("React").createElement("div",{key:"mg:"+d},a)))};a.prototype.$2=function(a,c,d,e,f,g,h,i,j){__p&&__p();var k=this.props.MessageGroup;if(a.log_message_data.message_type===b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG){var l={caller:b("MercuryIDs").getParticipantIDFromUserID(a.log_message_data.untypedData.caller_id),callee:b("MercuryIDs").getParticipantIDFromUserID(a.log_message_data.untypedData.callee_id),server_info_data:a.log_message_data.untypedData.server_info,thread_id:a.thread_fbid,answered:a.log_message_data.untypedData.event!==b("MessengerCallLogEvent").MISSED_CALL,log_message_type:a.log_message_data.untypedData.video?b("MercuryLogMessageType").VIDEO_CALL:b("MercuryLogMessageType").PHONE_CALL,event:a.log_message_data.untypedData.event};a=babelHelpers["extends"]({},a,{log_message_data:l})}l={attach_type:"share",share:{style_list:["rtc_call_log","fallback"],log_message_body:a.log_message_body,log_message_data:a.log_message_data,log_message_type:a.log_message_type,timestamp:a.timestamp}};l=babelHelpers["extends"]({},a,{attachments:[l],body:""});l=b("immutable").List([l]);d=n(d,e,f,j);e=!p(g,l,d);f=o(h,i);j=q(this.props.deliveryTimestamp,i);return b("React").createElement(k,{author:l.first().author,deliveryTimestamp:j,forGameChat:this.props.forGameChat,isCanonical:this.props.isCanonical,isFromViewer:c===a.author,isPageMessage:this.props.isPageMessage,key:a.message_id,lastReadTimestamp:f,maxBubbleWidth:this.props.maxBubbleWidth,messages:l,nextTimestamp:d,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$5,onMessageSelect:this.$6,onStickerClick:this.props.onStickerClick,readReceipts:e?g:b("immutable").OrderedMap(),thread:this.props.thread,threadID:this.props.threadID})};a.prototype.$3=function(a,c){var d=this.props.LogMessage;c=c[k(a)];return a.log_message_type!==b("MercuryLogMessageType").SERVER_ERROR?b("React").createElement(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:a.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:c===a.message_id}):null};a.prototype.$1=function(a,c){c=c[l(a)];var d=this.props.LogMessage;return b("React").createElement(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:a.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:c===a.message_id})};a.propTypes={CollapsedLogMessageGroup:c.func.isRequired,DateBreak:c.func.isRequired,deliveryTimestamp:c.number.isRequired,forGameChat:c.bool,isCanonical:c.bool,isPageMessage:c.bool,location:c.string.isRequired,LogMessage:c.func.isRequired,loadMoreMessages:c.func,MessageGroup:c.func.isRequired,messages:c.instanceOf(b("immutable").List).isRequired,onAttachmentLoad:c.func,onlineUsers:c.instanceOf(b("immutable").List),onStickerClick:c.func,onReplyToMessage:c.func,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,viewer:c.string.isRequired,thread:c.object,threadID:c.string,scrollToRepliedMessage:c.func};function m(a,b){return b.find(function(b){return b.message_id===a})?a:null}function n(a,c,d,e){if(d>=c-1)return Infinity;var f=a[d+1][0];if(b("MessengerLightweightActionUtils").isLWAMessage(f)&&e[l(f)]!==f.message_id||f.action_type==b("MercuryActionType").LOG_MESSAGE)return n(a,c,d+1,e);else return f.timestamp}function o(a,b){return b.timestamp>a?a:Infinity}function p(a,b,c){return b.isEmpty()||a.last()<b.first().timestamp||a.first()>=c}function q(a,b){return b.timestamp>a?a:Infinity}e.exports=a}),null);
__d("MessengerDateBreak.react",["cx","FBLogger","React","formatDate","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){"use strict";return this.props.date.getTime()!==a.date.getTime()};a.prototype.render=function(){"use strict";try{var a=b("formatDate")(this.props.date,{today:"g:ia",withinWeek:"D g:ia",thisYear:"M jS, g:ia",older:"m/d/Y g:ia"});return b("React").createElement("h4",{className:b("joinClasses")(this.props.className,"_497p _2lpt")},b("React").createElement("time",{className:"_3oh-"},a))}catch(a){b("FBLogger")("messaging").mustfix("invalid timestamp: "+this.props.date.getTime());return null}};function a(){"use strict";h.apply(this,arguments)}a.propTypes={date:c.instanceOf(Date).isRequired};e.exports=a}),null);
__d("MessengerDeliveryReceipt.bs",["Utils.bs","bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("Utils.bs").$pipe$unknown(b("bs_js_primitive").undefined_to_opt(a[c]),0)}c=b("Utils.bs").$pipe$unknown;f.$pipe$unknown=c;f.getDeliveryTimeOfThread=a}),null);
__d("MessengerPageAdminNoteList.react",["cx","fbt","LeftRight.react","MessengerBubble.react","PagesMessengerCreatorInfo.react","React","ReactComponentWithPureRenderMixin","classWithMixins","enumerate","immutable","mixin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("classWithMixins")(b("React").Component,b("mixin")(b("ReactComponentWithPureRenderMixin"))));i&&i.prototype;a.prototype.render=function(){var a=[],c=this.calculateGroups(this.props.notes);c.forEach(function(c,d){a.push(b("React").createElement("li",{className:"_4kd2",key:"group:"+d},this.$MessengerPageAdminNoteList1(c)))}.bind(this));return b("React").createElement("ul",{className:"_4kd3"},a)};a.prototype.$MessengerPageAdminNoteList1=function(a){var c=[];a.forEach(function(d,e){c.push(b("React").createElement("div",{className:"_4kd4",key:"note:"+e},this.$MessengerPageAdminNoteList2(d,a)))}.bind(this));return c};a.prototype.$MessengerPageAdminNoteList2=function(a,c){c=b("immutable").List([b("React").createElement(b("LeftRight.react"),{className:"_561k"},b("React").createElement("div",{className:"_561l"},h._("Private Note")),b("React").createElement(b("PagesMessengerCreatorInfo.react"),{key:"creator_info",creator_info:c[0].creator_info,isNote:!0}))]);return b("React").createElement("div",{className:"_o46 _3i_m _nd_"},b("React").createElement("div",{className:"clearfix"},b("React").createElement(b("MessengerBubble.react"),{body:a.body.text,attachments:c,className:"_3058 _4kd5"})))};a.prototype.calculateGroups=function(a){__p&&__p();var c=[],d=null,e=null;a=b("enumerate")(a);var f;while(!(f=a.next()).done){var g=e&&e.value.creator_info.creatorID===f.value.creator_info.creatorID;g||(d=[],c.push(d));d&&d.push(f.value);e=f}return c};function a(){i.apply(this,arguments)}a.propTypes={notes:c.arrayOf(c.shape({id:c.string,body:c.object.isRequired,creator_info:c.shape({creatorID:c.string.isRequired,creatorName:c.string.isRequired,creatorType:c.string.isRequired,labelType:c.string.isRequired,pageID:c.string.isRequired,profileURI:c.string}),timestamp:c.number.isRequired})).isRequired};e.exports=a}),null);
__d("MessengerMessageGroup.react",["cx","fbt","invariant","BootloadOnRender.react","CurrentUser","Image.react","ImmutableObject","JSResource","LazyComponent.react","Link.react","MercuryIDs","MercuryParticipantSilhouettes","MessengerActions","MessengerContactActions.bs","MessengerEnvironment","MessengerMessage.react","MessengerPageAdminNoteList.react","MessengerParticipants.bs","MessengerProfileImageWrapperReact.bs","MessengerStickerUtils","MessengerTextWithEmoticons.react","MessengerURIUtils.bs","PagesMessengerCreatorInfo.react","React","ReactDOM","SimpleXUIDialog","WorkForeignEntityType","gkx","goURI","immutable"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerContactActions.bs").actions,k=b("MessengerProfileImageWrapperReact.bs").jsComponent;a=b("immutable").List;c=b("immutable").OrderedMap;f=b("React").PropTypes;var l=32,m=new(b("ImmutableObject"))({image_src:b("MercuryParticipantSilhouettes").neutralSilhouette,is_messenger_user:!0,name:""});g=b("React").createClass({displayName:"MessengerMessageGroup",_subscription:null,propTypes:{activeMessageID:f.string,deliveryTimestamp:f.number.isRequired,hasDateBreak:f.bool,isCanonical:f.bool,isFromViewer:f.bool,isPageMessage:f.bool,lastReadTimestamp:f.number.isRequired,messages:f.instanceOf(a).isRequired,nextTimestamp:f.number.isRequired,onAttachmentLoad:f.func,onMessageDeselect:f.func.isRequired,onMessageSelect:f.func.isRequired,persona:f.object,onReplyToMessage:f.func,readReceipts:f.instanceOf(c).isRequired,thread:f.object,pageID:f.string,scrollToRepliedMessage:f.func},getInitialState:function(){return{participants:{}}},componentDidMount:function(){this._subscription=this._computeParticipants()},shouldComponentUpdate:function(a,c){return this.props.activeMessageID!==a.activeMessageID||this.props.isFromViewer!==a.isFromViewer||this.props.deliveryTimestamp!==a.deliveryTimestamp||this.props.lastReadTimestamp!==a.lastReadTimestamp||!b("immutable").is(this.props.messages,a.messages)||!b("immutable").is(this.props.readReceipts,a.readReceipts)||this.state.participants!==c.participants||Boolean(a.thread&&this.props.thread&&this.props.thread!==a.thread)},componentDidUpdate:function(){var a=n(this.props);!this._subscription&&!a.every(function(a){return this.state.participants[a]}.bind(this))&&(this._subscription=this._computeParticipants())},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},render:function(){return b("React").createElement("div",null,b("React").createElement("div",{className:"_1t_p clearfix"+(b("MessengerStickerUtils").isStickerMessageGroup(this.props.messages)?" _5tx1":"")+(this._hasSeenHeadsAtBottom()?" _35fy":"")},this._renderProfileColumn(),b("React").createElement("div",{className:"_41ud"},this._renderName(),this._renderMessages())),this.props.isPageMessage?this._renderNotes():null)},_renderProfileColumn:function(){__p&&__p();var a;if(this.props.isFromViewer)return null;var c=this.props.messages.last();c=this.state.participants[c.author]||m;var d=c.name,e=c.image_src;this.props.persona&&(d=this.props.persona.name,e=this.props.persona.profile_picture_url);var f=h._("{name}",[h._param("name",d)]);a=(a=c)!=null?(a=a.work_foreign_entity_info)!=null?a.type:a:a;a=b("CurrentUser").isWorkUser()&&a===b("WorkForeignEntityType").FOREIGN;a=b("React").createElement(k,{className:"_1t_r",isMessengerUser:c.is_messenger_user,size:l,showBadge:a,isMultiCompany:a,tooltipContent:f},b("React").createElement(b("Image.react"),{alt:d,src:e,height:l,width:l}));if(c.fbid){f=b("MessengerURIUtils.bs").getURIForUserID(c.fbid);!this.props.persona&&b("gkx")("AT7Q3RXvU0e0MR7WMB7vpMdOzYsW6m3MXSY9NFLfpMl_9zOHYMydsYAgMgpRAa3rIuTQCnrjzygxZViELyTXnLRu")?a=b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerAvatarActions.react").__setRef("MessengerMessageGroup.react"),placeholder:this.props.isCanonical?a:b("React").createElement(b("Link.react"),{className:"_5f0v",href:f.toString(),onClick:this._handleContactSelect.bind(this,c),tabIndex:-1},a),component:b("React").createElement(b("LazyComponent.react"),{avatar:a,contact:c,showSendMessageItem:!this.props.isCanonical,onAction:this._handleContactAction})}):this.props.isCanonical||(a=b("React").createElement(b("Link.react"),{className:"_5f0v",href:f.toString(),onClick:this._handleContactSelect.bind(this,c),tabIndex:-1},a))}return b("React").createElement("div",{className:"_1t_q"},a)},_handleContactAction:function(a,c,e){__p&&__p();switch(a){case j.MESSAGE:this._handleContactSelect(c,e);break;case j.PROFILE:a=this.state.participants[c.id];if(a&&a.href){var f=b("MessengerEnvironment").messengerdotcom;f?window.open(a.href):b("goURI")(a.href)}else this._handleContactSelect(c,e);break;case j.FREE_CALL:d(["FBRTCCore","MNRTCCallabilityStore"],function(a,d){var e=c.fbid;e||i(0);a.isAvailableForWebrtcCalling(e)||d.isCallable(e)?a.startOutgoingCall(e,"messenger_group_bubble_free_call",!1):b("SimpleXUIDialog").show(h._("{firstname} can't be reached right now.",[h._param("firstname",c.short_name)]),h._("Can't Connect Call"))});break}},_renderMessages:function(){var a=this.props.messages.size,c=[];this.props.messages.forEach(function(d,e,f){var g=d.message_id===this.props.activeMessageID,h=b("MercuryIDs").getUserIDFromParticipantID(this.props.author),i=this.props.thread?this.props.thread.solid_color:"",j=this.props.onAttachmentLoad;c.push(b("React").createElement(b("MessengerMessage.react"),{customColor:i,deliveryTimestamp:this.props.deliveryTimestamp,isActive:g,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,key:d.message_id,message:d,messageActionsWrapper:this.props.messageActionWrapper,onAttachmentLoad:j,participants:b("immutable").Map(this.state.participants),nextTimestamp:this._getNextTimestamp(f,a,e),onDeselect:this.props.onMessageDeselect,onSelect:this.props.onMessageSelect,onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.props.readReceipts,showDeliveryState:d.timestamp>this.props.lastReadTimestamp,ref:d.message_id,authorFBID:h==null?undefined:h,threadCustomColor:i,pageID:this.props.pageID,scrollToRepliedMessage:this.props.scrollToRepliedMessage}));o(this.props.isPageMessage,f,e,d)&&c.push(b("React").createElement(b("PagesMessengerCreatorInfo.react"),{key:"creator_info:"+e,creator_info:d.creator_info}))}.bind(this));return c},_renderNotes:function(){var a=[];this.props.messages.forEach(function(c,d,e){this.props.isPageMessage&&c.page_admin_notes&&a.push(b("React").createElement(b("MessengerPageAdminNoteList.react"),{key:"notes:"+c.message_id,notes:c.page_admin_notes}))}.bind(this));return a},_renderName:function(){__p&&__p();var a=this.props.messages.first(),c=this.state.participants[a.author];if(!c)return null;if(a.replied_to_message)return null;var d=c.short_name,e=d;if(this.props.thread){var f=this.props.thread.custom_nickname?this.props.thread.custom_nickname:null;c=b("MercuryIDs").getUserIDFromParticipantID(c.id);f&&c&&f[c]&&(d=f[c],e=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:f[c]}))}if(this.props.persona){f=this.state.participants[a.author];e=f?h._("{persona name} from {page name}",[h._param("persona name",this.props.persona.name),h._param("page name",f.short_name)]):this.props.persona.name;d=e.toString()}return b("React").createElement("h5",{"aria-label":d,className:"_ih3"+(this.props.isFromViewer?" accessible_elem":"")+(this.props.isCanonical&&!this.props.persona?" _-ne":"")},e)},getMessageElement:function(a){return b("ReactDOM").findDOMNode(this.refs[a])},_hasSeenHeadsAtBottom:function(){var a=this.props,b=a.messages,c=a.nextTimestamp;a=a.readReceipts;var d=b.last().timestamp,e=0;a.forEach(function(a){if(a>=d&&a<c&&++e===2)return!1});return e===2},_getNextTimestamp:function(a,b,c){return c<b-1?a.get(c+1).timestamp:this.props.nextTimestamp},_handleContactSelect:function(a,c){c&&c.preventDefault();c=b("MercuryIDs").getThreadIDFromParticipantID(a.id);c&&b("MessengerActions").selectThread(c)},_computeParticipants:function(){__p&&__p();var a=n(this.props),c={},d=[];a.forEach(function(a){var e=b("MessengerParticipants.bs").getNow(a);c[a]=e;e||d.push(a)});this.setState({participants:c});return d.length>0?b("MessengerParticipants.bs").getMulti(d,function(b){var a=Object.assign({},this.state.participants);d.forEach(function(c){a[c]=b[c]});this._subscription=null;this.setState({participants:a})}.bind(this)):null}});function n(a){var b=[a.messages.first().author];a.readReceipts.forEach(function(a,c){return b.push(c)});return b}function o(a,b,c,d){if(!a||!d.creator_info)return!1;if(c===b.size-1)return!0;a=b.get(c+1).creator_info;return!a?!0:d.creator_info.creatorID!==a.creatorID}e.exports=g}),null);
__d("MessengerNewMessagesNoticeReact.bs",["cx","ix","fbt","React","LinkReact.bs","ImageReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=h("86939"),k=i._("New Messages"),l=b("ReasonReact.bs").statelessComponent("MessengerNewMessagesNoticeReact");function m(a,c,d,e){var f=d?d[0]:k;return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],function(){return b("React").createElement("div",{"aria-hidden":!a,className:"_4wzq"+(a?" _4wzr":"")+(a?"":" _4-je")},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,["_5f0v _4wzs"],0,0,0,0,0,0,0,[c],0,0,0,0,[a?0:-1],0,0,[b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(["_4wzt"],0,0,0,[j],0,0,0,0,[])),b("React").createElement("div",{className:"_1bqr"},f)])))},l[9],l[10],l[11],l[12]]}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return m(a.isOpen,a.onClick,[a.label],[])});f.newMessageSrc=j;f.defaultLabel=k;f.component=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerPlatformSubscriptionMessageClassification",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EXEMPTED_TEMPLATE_MESSAGE:"exempted_template_message",MESSAGE_WITHIN_24HRS:"message_within_24hrs",SUBSCRIPTION_MESSAGE:"subscription_message",ACCEPTABLE_EXTRA_MESSAGE:"acceptable_extra_message",UNACCEPTABLE_EXTRA_MESSAGGE:"unacceptable_extra_message",AD_MESSAGE:"ad_message",FREE_LIMIT:"FREE_LIMIT"})}),null);
__d("MessengerQuickReplyUtils",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={localizeTitleIfNecessary:function(a){return a.map(function(a){return a.content_type==="location"?Object.assign(a,{title:g._("Send Location")}):a})}};e.exports=a}),null);
__d("MessengerReadReceipt.bs",["bs_array","Utils.bs","immutable","MercuryActionStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function h(a,c,d,e){__p&&__p();c=c>=a.timestamp;var f=a.status;e=!e||d!==a.author;if(c)if(f==null)if(e)return!0;else return!1;else if(e)return f===b("MercuryActionStatus").SUCCESS;else return!1;else return!1}function a(a,c,d){__p&&__p();if(c==null)return[];else{a=a[c.thread_id];if(a!==undefined)return a.reduce(function(a,e,f,g){if(h(c,e.watermark,f,b("Utils.bs").isTruthy(d)))return b("bs_array").append(a,[f]);else return a},[]);else return[]}}function c(a,b){a=a[b.thread_id];if(a!==undefined)return a.reduce(function(a,c,d,e){if(a)return h(b,c.watermark,d,!1);else return!1},!0);else return!1}function d(a,c){a=a[c];if(a!==undefined)return a;else return b("immutable").OrderedMap()}function e(a,b,c){a=a[b];if(a!==undefined){b=a.get(c);if(b==null)return null;else return b}else return null}f.emptyReadReceipts=g;f.wasSeen=h;f.getSeenBy=a;f.wasSeenByAll=c;f.getSeenTimestamps=d;f.getSeenTimestamp=e}),null);
__d("create-react-class",["create-react-class/factory","react"],(function(a,b,c,d,e,f){"use strict";if(typeof b("react")==="undefined")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");a=new(b("react").Component)().updater;e.exports=b("create-react-class/factory")(b("react").Component,b("react").isValidElement,a)}),null);
__d("createReactClass_DEPRECATED",["create-react-class"],(function(a,b,c,d,e,f){"use strict";e.exports=b("create-react-class")}),null);
__d("MessengerTypingIndicator.react",["cx","Image.react","MercuryIDs","MercuryTypingAnimation.react","MessengerBubble.react","MessengerParticipants.bs","MessengerPersonas.bs","MessengerProfileImageWrapperReact.bs","React","ReactComponentWithPureRenderMixin","createReactClass_DEPRECATED","immutable"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("MessengerProfileImageWrapperReact.bs").jsComponent;a=b("React").PropTypes;var i=32;c=b("createReactClass_DEPRECATED")({displayName:"MessengerTypingIndicator",_subscription:null,mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{userID:a.string,showName:a.bool},getInitialState:function(){var a=this.props.userID;return!a?{author:null}:{author:b("MessengerParticipants.bs").getNow(a)}},componentDidMount:function(){var a=this.props.userID;if(!this.state.author&&a){a=b("MessengerParticipants.bs").getNow(a);a||(this._subscription=this._computeAuthor(this.props));this.setState({author:a})}},componentDidUpdate:function(){if(this._subscription)return;if(this.state.author&&this.state.author.id===this.props.userID)return;this._subscription=this._computeAuthor(this.props)},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},_computeAuthor:function(a){var c=a.userID;return!c?null:b("MessengerParticipants.bs").getMulti([c],function(a){this._subscription=null,this.setState({author:a[c]})}.bind(this))},getPersona:function(){var a=this.props.userID;return!a?null:b("MessengerPersonas.bs").getNow(b("MercuryIDs").getUserIDFromParticipantID(a))},render:function(){var a=this.state.author,c=this.getPersona();if(!a&&!c)return null;c=c?c.profile_picture_url:a?a.image_src:null;return b("React").createElement("div",{className:"_1t_p _1hbw"},b("React").createElement("div",{className:"_1t_q"},b("React").createElement(h,{className:"_1t_r",isMessengerUser:a?a.is_messenger_user:!1,size:i,showBadge:!0},b("React").createElement(b("Image.react"),{alt:"",src:c,height:i,width:i}))),b("React").createElement("div",{className:"_41ud"},b("React").createElement("div",{className:"_o46 _3erg _29_7"},b("React").createElement(b("MessengerBubble.react"),{attachments:b("immutable").List([b("React").createElement(b("MercuryTypingAnimation.react"),{key:"animation"})]),body:"",className:"_3058",ref:"bubble"}))))},getBubble:function(){return this.refs.bubble}});e.exports=c}),null);
__d("MessengerViewerContactMethodsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1868889766468115"};c.getQueryID=function(){"use strict";return"177554543035925"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerConversation.react",["ix","csx","cx","fbt","Bootloader","BootloadOnRender.react","ChatTypingIndicatorsWrapper.react","CSS","DOM","DOMDimensions","ErrorBoundary.react","Event","EventProfiler","Image.react","ImmutableObject","JSReliabilityFixesGatingConfig","JSResource","KeyEventController","LazyComponent.react","Link.react","MercuryActionType","MercuryIDs","MercuryShareAttachmentRenderLocations","MessageList.react","MessengerActions","MessengerAttachmentRenderer","MessengerBootloadedLogMessage.react","MessengerButtonReact.bs","MessengerCollapsedLogMessageGroup.react","MessengerContextBannerContainer.react","MessengerDateBreak.react","MessengerDeliveryReceipt.bs","MessengerFlexScrollableArea.react","MessengerMessageGroup.react","MessengerNewMessagesNoticeReact.bs","MessengerPlatformSubscriptionMessageClassification","MessengerQuickCamOrigins","MessengerQuickReplyUtils","MessengerReadReceipt.bs","MessengerSpinner.react","MessengerTypingIndicator.react","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","MessengerViewerContactMethodsWebGraphQLQuery","Parent","React","ReactDOM","SubscriptionsHandler","UserActivity","WebGraphQL","WebMessengerConstants","asset","getPageIDFromThreadID","gkx","ifRequired","immutable","joinClasses","promiseDone","setImmediate","throttle"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("MessengerButtonReact.bs").jsComponent,m=b("MessengerNewMessagesNoticeReact.bs").jsComponent;b("immutable").OrderedMap;c=b("React").PropTypes;var n=20,o=100,p=1e3;function q(event,a){return!!(b("KeyEventController").filterEventTypes(event,a)&&b("KeyEventController").filterEventModifiers(event,a)&&event.target instanceof Element&&b("Parent").bySelector(event.target,"._4_j4"))}d=babelHelpers.inherits(a,b("React").PureComponent);k=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.state={readReceipts:r(this.props),scrollingToUnreadMessage:!1,showUnreadNotice:!1,unreadCount:this.props.thread?this.props.thread.unread_count:0,width:0,viewerEmail:null,viewerPhone:null,shouldJumpToMessage:!1},this.$1=null,this.$2=null,this.$4=[],this.$5={originalScrollHeight:0,originalScrollTop:0},this.$15=function(){__p&&__p();var a=this.$17();if(!this.refs||!a||this.props.isLoading){this.$4=[];return}var c=b("getPageIDFromThreadID")(this.props.threadID),d=this.refs.messageList;if(!d||!c){this.$4=[];return}var e=10,f=a.getElement().getBoundingClientRect(),g=[];this.$3.forEach(function(a){var d=a.message_id,h=this.refs.messageList.getMessageElement(d);if(h){h=h.getBoundingClientRect();h.top>f.top-e&&h.bottom<f.bottom+e&&(g.push(d),this.$4.includes(d)||b("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(b,e){b.log(a.ad_client_token,a.ad_id,e.MESSAGE_SEEN_THREAD,!0,d,c)},"MessengerConversation.react"))}}.bind(this),this);this.$4=g}.bind(this),this.$8=function(){var a=this.$17();a&&a.pageUp();return!1}.bind(this),this.$9=function(){var a=this.$17();a&&a.pageDown();return!1}.bind(this),this.$10=function(a){if(a.target===document.body){this.scrollToTop();return!1}return null}.bind(this),this.$11=function(a){if(a.target===document.body){this.scrollToBottom();return!1}return null}.bind(this),this.$14=function(){__p&&__p();if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;if(!this.refs.scrollable)return;var a=this.$17(),c=this.refs.quickReply;c&&b("CSS").conditionClass(c,"_1mzg",!this.isScrolledToBottom());this.$12();this.$13();a&&this.state.unreadCount&&this.$22(a)&&this.setState({showUnreadNotice:!1,unreadCount:0});this.$34(a);this.$35(a);this.$7()}.bind(this),this.$33=function(a){a.preventDefault(),this.setState({showUnreadNotice:!1}),this.$19()}.bind(this),this.$13=function(){if(this.props.messages.size===0||this.props.thread&&this.props.thread.unread_count===0||!this.isScrolledToBottom())return;b("UserActivity").isOnTab()&&b("UserActivity").isActive()?this.props.onRead(this.props.threadID):this.$2||(this.$2=b("UserActivity").subscribe(function(){b("UserActivity").isOnTab()&&(this.$16(),this.props.onRead(this.props.threadID))}.bind(this)))}.bind(this),this.handleResize=function(){__p&&__p();if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;if(this.refs.scrollable){this.refs.scrollable.handleResize();var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(this.refs.scrollable)).width;a!==this.state.width&&this.setState({width:a})}a=this.refs.quickReply;a&&b("CSS").conditionClass(a,"_1mzg",!this.isScrolledToBottom());this.trackBottomIfRequired()}.bind(this),this.$31=function(a){this.props.messages.some(function(b){return b.message_id===a})?this.$21(a):(this.setState({shouldJumpToMessage:!0}),b("MessengerActions").changeMid(a))}.bind(this),c}a.prototype.componentDidMount=function(){__p&&__p();var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("Event").listen(window,"resize",b("throttle")(this.handleResize,50)),b("KeyEventController").registerKey("PAGE_UP",this.$8,q),b("KeyEventController").registerKey("PAGE_DOWN",this.$9,q),b("KeyEventController").registerKey("HOME",this.$10,q),b("KeyEventController").registerKey("END",this.$11,q));this.$1=a;this.$12();this.handleResize();this.$13();this.$6=b("throttle")(this.$14,o);this.$7=b("throttle")(this.$15,p);this.$3=this.props.messages.filter(function(a){return a.is_sponsored});this.$7()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){var b=a.threadID!==this.props.threadID;b&&(this.$16(),this.setState({scrollingToUnreadMessage:!1,showUnreadNotice:!1,unreadCount:a.thread?a.thread.unread_count:0}));(b||a.messages!==this.props.messages)&&(this.$3=a.messages.filter(function(a){return a.is_sponsored}));this.setState({readReceipts:r(a)})};a.prototype.componentWillUnmount=function(){this.$16(),this.$1&&this.$1.release()};a.prototype.UNSAFE_componentWillUpdate=function(a){a=this.$17();a?this.$5={originalScrollHeight:a.getScrollHeight(),originalScrollTop:a.getScrollTop()}:this.$5={originalScrollHeight:0,originalScrollTop:0}};a.prototype.componentDidUpdate=function(a,c){__p&&__p();if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;if(!this.refs.scrollable)return;c=this.props.threadID!==a.threadID;if(c||s(a,this.props))this.scrollToBottom(),this.$18();else{var d=this.$17();if(d){var e=d.getScrollHeight();if(e!==this.$5.originalScrollHeight){e=d.getScrollHeight()-this.$5.originalScrollHeight+this.$5.originalScrollTop;this.refs.scrollable.scrollToPosition(e)}else this.$18()}}this.props.messages!==a.messages&&(this.$13(),this.state.scrollingToUnreadMessage&&this.$19(),this.$20());d=this.props.selectedMessage;this.state.shouldJumpToMessage&&d&&this.$21(d,function(){this.setState({shouldJumpToMessage:!1})}.bind(this));setTimeout(function(){var a=this.$17();this.trackBottomIfRequired();a&&this.state.unreadCount&&!this.state.scrollingToUnreadMessage&&!this.props.isLoading&&(this.$22(a)?this.setState({showUnreadNotice:!1,unreadCount:0}):this.setState({showUnreadNotice:!0}));this.$12();this.$7()}.bind(this),0);e=a.messages&&a.messages.size||0;d=this.props.messages&&this.props.messages.size||0;(c||e===0&&(d>0||!this.props.isLoading))&&b("EventProfiler").informManualInteractionTimestamp(["MessengerThredRow"],!0,"click")};a.prototype.render=function(){__p&&__p();if(this.props.isLoading&&this.props.messages.isEmpty())return this.$23();var a=this.props.messages.last(),c=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),d=this.$24(a),e=this.$25(a);this.$26(a);c=a&&a.author!==c?d||e:null;d=null;if(Array.isArray(c)){e=c.every(function(a){return a.content_type==="user_email"&&this.state.viewerEmail===null||a.content_type==="user_phone_number"&&this.state.viewerPhone===null}.bind(this));if(!e){e=b("MessengerQuickReplyUtils").localizeTitleIfNecessary(c);d=b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{options:e,threadID:a.thread_id,onVoiceClipCreate:this.props.onVoiceClipCreate,viewer:this.props.viewer,quickCamOriginLocation:b("MessengerQuickCamOrigins").MESSENGER,messageId:a.message_id,pageId:b("MercuryIDs").getUserIDFromParticipantID(a.author),isMessengerAdPreview:this.props.isMessengerAdPreview,isSponsored:a.is_sponsored,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone}),loader:b("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MessengerConversation.react"),placeholder:b("React").createElement("div",null)})}}c=null;e=null;d&&(c=b("React").createElement("div",{className:"_51op"},b("React").createElement("div",{className:"_51oq",onResize:this.handleResize})),e=b("React").createElement("div",{ref:"quickReply",className:"_1mzb",onResize:this.handleResize},d));a=j._("Messages");d=j._("Load more...");return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("MessengerFlexScrollableArea.react"),{className:this.props.className,flexChildren:this.$27(),footerChildren:e,onMount:function(){return b("setImmediate")(this.$13)}.bind(this),onScroll:this.props.useManualFetch?undefined:this.$6,ref:"scrollable",shouldStickToBottom:!0,tabIndex:0},b("React").createElement("div",{"aria-label":a,className:b("joinClasses")("__i_",this.props.innerClassName),role:"region"},b("React").createElement("h3",{className:"accessible_elem"},a),this.$28(),this.props.useManualFetch&&!this.props.upExhausted?b("React").createElement(l,{className:"_41jf",label:d,onClick:function(){return this.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP)}.bind(this),type:"primary",use:"default"}):null,this.$29(),b("React").createElement(b("MessageList.react"),{DateBreak:b("MessengerDateBreak.react"),deliveryTimestamp:this.props.deliveryReceipts?b("MessengerDeliveryReceipt.bs").getDeliveryTimeOfThread(this.props.deliveryReceipts,this.props.threadID):0,isCanonical:this.props.isCanonical,LogMessage:b("MessengerBootloadedLogMessage.react"),CollapsedLogMessageGroup:b("MessengerCollapsedLogMessageGroup.react"),MessageGroup:b("MessengerMessageGroup.react"),messages:this.props.messages,onAttachmentLoad:this.$30(this.props.threadID),onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.state.readReceipts,ref:"messageList",location:b("MercuryShareAttachmentRenderLocations").MESSENGER,viewer:this.props.viewer,thread:this.props.thread,scrollToRepliedMessage:this.$31}),this.props.useManualFetch&&!this.props.downExhausted?b("React").createElement(l,{className:"_41jf",label:d,onClick:function(){return this.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_DOWN)}.bind(this),type:"primary",use:"default"}):null,b("React").createElement(b("ChatTypingIndicatorsWrapper.react"),{indicatorClass:b("MessengerTypingIndicator.react"),indicatorsDidShow:function(){this.trackBottomIfRequired()}.bind(this),rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}),b("gkx")("AT5LR14w3g9nmjLKlBbu8cp6dDohvGRAgb2EKeLFjLUw4ckGbkEAtvxTKhQkttWbJnopoJSv-Wj26ZhFsXLqkhQ5")&&b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("OmniMSuggestionsContainer.react").__setRef("MessengerConversation.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:this.props.threadID})})),c)),this.$32())};a.prototype.$32=function(){__p&&__p();var a=this.$17();if(a){a=a.getElement().getBoundingClientRect().height;a=a-74;a+="px";a={top:a}}else a={bottom:"15%"};return this.props.useManualFetch&&!this.props.isSearchResult?b("React").createElement(b("Link.react"),{style:a,className:"_69xg",onClick:function(){return b("MessengerActions").changeMid(null)}},b("React").createElement(b("Image.react"),{className:"_69xi",src:g("415099")})):null};a.prototype.$24=function(a){var c=null;a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);var d=a&&a.message_classification===b("MessengerPlatformSubscriptionMessageClassification").AD_MESSAGE;d&&Array.isArray(a&&a.quick_replies)&&(c=a&&a.quick_replies);return c};a.prototype.$25=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return Array.isArray(a&&a.quick_replies)?a&&a.quick_replies:null};a.prototype.$12=function(){if(this.props.useManualFetch)return;var a=this.$17();a&&a.getScrollTop()<n&&(this.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP),this.$20())};a.prototype.$26=function(a){__p&&__p();a=this.$25(a);if(!a)return;a.some(function(a){return a.content_type==="user_email"||a.content_type==="user_phone_number"})&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerViewerContactMethodsWebGraphQLQuery"))({})),function(a){var b;b=(b=a)!=null?(b=b.viewer)!=null?(b=b.user)!=null?b.all_phones:b:b:b;a=(a=a)!=null?(a=a.viewer)!=null?a.all_emails:a:a;var c=b?b.find(function(a){return a.is_preferred}):null;!c&&b&&(c=b[0]);b=a?a.find(function(a){return a.is_primary}):null;this.setState({viewerEmail:(a=b)!=null?a.display_email:a,viewerPhone:(b=c)!=null?(b=b.phone_number)!=null?b.universal_number:b:b})}.bind(this))};a.prototype.isScrolledToBottom=function(){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottom())};a.prototype.isScrolledToBottomWithHeight=function(a){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottomWithHeight(a))};a.prototype.$27=function(){return b("React").createElement(m,{isOpen:this.state.showUnreadNotice,label:j._({"*":"{number} unread messages","_1":"1 unread message"},[j._plural(this.state.unreadCount,"number")]),onClick:this.$33})};a.prototype.$28=function(){return!this.props.isLoaded?null:b("React").createElement(b("MessengerContextBannerContainer.react"),{location:b("MercuryShareAttachmentRenderLocations").MESSENGER,thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer})};a.prototype.$29=function(){return this.props.isLoaded?null:b("React").createElement("div",{className:"_2k8v"},this.props.isLoading?b("React").createElement(b("MessengerSpinner.react"),null):null)};a.prototype.$23=function(){return b("React").createElement("div",{className:"_4xu0"},b("React").createElement(b("MessengerSpinner.react"),{className:"_4xu1",size:b("MessengerSpinner.react").large_size}))};a.prototype.trackBottomIfRequired=function(){if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;this.refs.scrollable&&this.refs.scrollable.trackBottomIfRequired()};a.prototype.scrollToBottom=function(){if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToBottom()};a.prototype.scrollToTop=function(a){if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToTop(a)};a.prototype.$30=function(a){return function(){if(this.props.threadID!==a)return;this.trackBottomIfRequired()}.bind(this)};a.prototype.$18=function(){b("DOM").scry(b("ReactDOM").findDOMNode(this),"img").forEach(function(a){if(a.complete)return;var c=this.props.threadID,d=b("Event").listen(a,"load",function(){this.props.threadID===c&&this.trackBottomIfRequired(),d.remove()}.bind(this))}.bind(this))};a.prototype.$36=function(){var a=this.props.messages,b=this.state.unreadCount;return!b||b>a.size?null:a.get(a.size-b)};a.prototype.$22=function(a){__p&&__p();var b=this.props.messages,c=this.$36();if(!c)return!1;var d=a.getElement().getBoundingClientRect();return b.filter(function(a){return a.timestamp<=c.timestamp}).some(function(a){a=this.refs.messageList.getMessageElement(a.message_id);if(!a)return!1;a=a.getBoundingClientRect();return a.bottom>d.top&&a.top<d.bottom}.bind(this))};a.prototype.$37=function(a){return!!this.props.messages.find(function(b){return b.message_id===a})};a.prototype.$19=function(){__p&&__p();if(!this.state.unreadCount)return;this.setState({scrollingToUnreadMessage:!0});var a=this.$36();if(!a){this.scrollToTop(!1);return}this.$21(a.message_id,function(){this.setState({scrollingToUnreadMessage:!1,unreadCount:0})}.bind(this))};a.prototype.$21=function(a,c){this.refs.scrollable&&this.refs.scrollable.overrideTrackBottom(!1);a=this.refs.messageList.getMessageElement(a,!0);var d=this.$17();if(!a||!d)return;a=a.getBoundingClientRect().top;var e=b("ReactDOM").findDOMNode(this.refs.messageList).getBoundingClientRect().top,f=d.getElement().getBoundingClientRect().height;a=a+Math.abs(e)-f/2;d.setScrollTop(a,!0,{callback:c})};a.prototype.$17=function(){if(b("JSReliabilityFixesGatingConfig").should_get_fix&&!this.refs)return;return this.refs.scrollable&&this.refs.scrollable.getArea()};a.prototype.$16=function(){this.$2&&this.$2.unsubscribe(),this.$2=null};a.prototype.$38=function(){return this.props.messages.filter(function(a){return b("MessengerAttachmentRenderer").isSingleVideoAttachment(a)||b("MessengerAttachmentRenderer").isSharedVideoAttachmentMessage(a)}).reverse().map(function(a){return a.message_id})};a.prototype.$34=function(a){__p&&__p();var c=this.refs.messageList;if(!c||!a)return;var d=[];a=a.getElement().getBoundingClientRect();var e=b("MessengerVideoAutoplayStore").getMessageIDs(this.props.threadID),f=e||this.$38()||b("immutable").List();f.map(function(a){var e=b("MessengerAttachmentRenderer").getVideoElem(a,c);e&&d.push([a,e.getBoundingClientRect()])});d.length&&b("MessengerVideoAutoplayActions").onScroll(this.props.threadID,e?null:f,b("immutable").Map(d),a)};a.prototype.$39=function(){return this.props.messages.filter(function(a){return b("MessengerAttachmentRenderer").isSingleSphericalPhotoAttachment(a)}).map(function(a){return a.message_id})};a.prototype.$35=function(a){__p&&__p();b("ifRequired")("MessengerSphericalRendererActions",function(c){__p&&__p();b("ifRequired")("MessengerSphericalRendererStore",function(d){__p&&__p();var e=this.refs.messageList;if(!e||!a)return;var f=[],g=a.getElement().getBoundingClientRect();d=d.getMessageIDs(this.props.threadID);d=d||this.$39()||b("immutable").List();d.map(function(a){var c=b("MessengerAttachmentRenderer").getSphericalPhotoElem(a,e);c&&f.push([a,c.getBoundingClientRect()])});f.length&&c.onScroll(this.props.threadID,d,b("immutable").Map(f),g)}.bind(this),function(){})}.bind(this),function(){})};a.prototype.$20=function(){b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$38());var a=this.$39();a&&a.count()!==0&&b("ifRequired")("MessengerSphericalRendererActions",function(b){b.updateStore(this.props.threadID,a)}.bind(this),function(){b("Bootloader").loadModules(["MessengerSphericalRendererActions","MessengerSphericalRendererStore"],function(b,c){b.updateStore(this.props.threadID,a)}.bind(this),"MessengerConversation.react")}.bind(this))};a.propTypes={contact:c.instanceOf(b("ImmutableObject")),deliveryReceipts:c.object,downExhausted:c.bool,fetchMessages:c.func.isRequired,innerClassName:c.string,isCanonical:c.bool,isLoaded:c.bool,isLoading:c.bool,isMessengerAdPreview:c.bool,messages:c.instanceOf(b("immutable").List).isRequired,onVoiceClipCreate:c.func,onReplyToMessage:c.func,participants:c.instanceOf(b("immutable").Map),readReceipts:c.object.isRequired,thread:c.object,threadID:c.string.isRequired,upExhausted:c.bool,useManualFetch:c.bool,viewer:c.string.isRequired,selectedMessage:c.string,isSearchResult:c.bool};function r(a){__p&&__p();var c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),d=b("MessengerReadReceipt.bs").getSeenTimestamps(a.readReceipts,a.threadID),e=new Set(a.thread?a.thread.participants:d.keys());e["delete"](c);var f=null;b("immutable").Seq(a.messages).reverse().forEach(function(a){if(a.action_type!==b("MercuryActionType").LOG_MESSAGE){f=a;return!1}return!0});return d.withMutations(function(c){__p&&__p();b("immutable").Seq(a.messages).reverse().forEach(function(a){__p&&__p();if(e.size===0)return!1;if(!e.has(a.author))return;c.update(a.author,function(b){var c=b;(!b||b.watermark<=a.timestamp)&&(c={watermark:a.timestamp,action:a.timestamp});f&&f.timestamp<c.watermark&&(c={watermark:f.timestamp,action:f.timestamp});return c});e["delete"](a.author)})})}function s(a,c){var d=b("MercuryIDs").getParticipantIDFromUserID(c.viewer);return c.threadID===a.threadID&&c.messages!==a.messages&&!c.messages.isEmpty()&&c.messages.last()!==a.messages.last()&&c.messages.last().author===d}e.exports=a}),null);
__d("MercuryMessageStore",["CurrentUser","LogHistory","MercuryAPIArgsSource","MercuryMessages","MercuryThreadInformer","MercuryThreadlistConstants","MercuryViewer","MessengerState.bs","SubscriptionsHandler","mixInEventEmitter","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LogHistory").getInstance("mercury_message_store");function h(a,c,d){this.$5=a,this.$3=d?b("MercuryMessages").getForFBID(d):b("MercuryMessages").get(),this.$1=1,this.$2=c||b("MercuryThreadlistConstants").RECENT_MESSAGES_LIMIT,this.$6=d?b("MercuryThreadInformer").getForFBID(d):b("MercuryThreadInformer").get(),this.$4=new(b("SubscriptionsHandler"))(),this.$4.addSubscriptions(this.$6.subscribe("messages-received",function(a,b){return this.$7(b)}.bind(this)),this.$6.subscribe("messages-updated",function(a,b){return b[this.$5]&&this.$8(b[this.$5])}.bind(this)),this.$6.subscribe("messages-reordered",function(a,b){return b[this.$5]&&this.$9()}.bind(this)),this.$6.subscribe("thread-invalidated",function(a,b){return b[this.$5]&&this.$10()}.bind(this))),g.debug("constructed",JSON.stringify({threadID:this.$5})),this.$11()}h.prototype.destroy=function(){this.$4&&this.$4.release(),g.debug("destroyed",JSON.stringify({threadID:this.$5}))};h.prototype.subscribe=function(a){return this.addRetroactiveListener("updated",a)};h.prototype.fetchMoreMessages=function(){if(this.hasFetchedAll())return!1;this.$11();return!0};h.prototype.hasFetchedAll=function(){return this.$3.hasLoadedAllMessages(this.$5)||b("MessengerState.bs").isNewEmptyLocalThread(b("CurrentUser").getID(),this.$5)};h.prototype.$12=function(){return this.$3.getCurrentlyLoadedMessages(this.$5).length};h.prototype.$11=function(){var a=this.$12()+this.$2*this.$1;this.$3.getThreadMessagesRange(this.$5,0,a,this.$13.bind(this),null,b("MercuryAPIArgsSource").MERCURY);this.$1<10&&(this.$1+=1);this.$3.hasLoadedNMessages(this.$5,a)&&b("setImmediate")(function(){this.$9()}.bind(this))};h.prototype.$13=function(a){a&&!a.length&&!this.$12()&&this.$14(h.THREAD_IS_EMPTY)};h.prototype.$7=function(a){var b=[];a=a[this.$5];a&&a.length&&(b=b.concat(a.filter(function(a){return!!a})));b.length&&this.$14(h.MESSAGES_RECEIVED)};h.prototype.$8=function(a){this.$14(h.MESSAGES_CHANGED)};h.prototype.$9=function(){this.$14(h.MESSAGES_REORDERED)};h.prototype.$10=function(){this.$1=1,this.$11()};h.prototype.$14=function(a){var b=this.$3.getCurrentlyLoadedMessages(this.$5);this.releaseHeldEventType("updated");this.emitAndHold("updated",{messages:b,eventType:a})};Object.assign(h,{MESSAGES_FETCHED:"fetched",MESSAGES_CHANGED:"changed",MESSAGES_RECEIVED:"received",MESSAGES_REORDERED:"reordered",THREAD_IS_EMPTY:"thread-is-empty"});b("mixInEventEmitter")(h,{updated:!0});e.exports=h}),null);
__d("MessengerBlockedGroupThreadWarningDialogReact.bs",["fbt","bs_block","bs_curry","ReasonReact.bs","CacheStorage","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=g._("People you've blocked are in this conversation. If you see this conversation, you'll get each other's messages to the group."),i=g._("See Conversation?"),j=g._("Cancel"),k=g._("Leave Group"),l=g._("See Conversation"),m=new(b("CacheStorage"))("localstorage");function a(a){return"see_blocked_group:"+a}function c(a,b){m.set("see_blocked_group:"+a,b,!0);return 0}function d(a){return m.get("see_blocked_group:"+a,!1)}var n=b("ReasonReact.bs").reducerComponent("MessengerBlockedGroupThreadWarningDialogReact");function o(a,c,d,e,f){__p&&__p();return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],function(f){__p&&__p();return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,0,0,[f[1][0]],0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Title[0](0,i)))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[h])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([1],[j],0,0,[function(a){a.stopPropagation();b("bs_curry")._1(d,e);return b("bs_curry")._1(f[3],0)}],[1],0,0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([1],[k],0,0,[function(a){a.stopPropagation();b("bs_curry")._1(c,e);return b("bs_curry")._1(f[3],0)}],[1],0,0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([1],[l],0,["danger"],[function(c){c.stopPropagation();b("bs_curry")._1(a,0);return b("bs_curry")._1(f[3],0)}],[0],0,0,[]))]))]))},function(){return[!0]},n[10],function(a,c){return b("bs_block").__(0,[[!1]])},n[12]]}e=b("ReasonReact.bs").wrapReasonForJs(n,function(a){return o(a.onSee,a.onLeave,a.onCancel,a.prevThreadID,[])});f.bodyText=h;f.titleText=i;f.cancelText=j;f.leaveText=k;f.seeConvoText=l;f.storage=m;f.getSeeConversationCacheKey=a;f.setWantsToSee=c;f.getWantsToSee=d;f.component=n;f.make=o;f.jsComponent=e}),null);
__d("MessengerIgnoredGroupThreadWarningDialogReact.bs",["cx","fbt","bs_curry","React","ReasonReact.bs","CacheStorage","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("People you've ignored are in this group."),j=h._("If you ignore this group, you can find it in Filtered Messages."),k=h._("Ignore group?"),l=h._("Cancel"),m=h._("Ignore Group"),n=h._("See Group"),o=new(b("CacheStorage"))("localstorage");function a(a){return"see_ignored_group:"+a}function c(a,b){o.set("see_ignored_group:"+a,b,!0);return 0}function d(a){return o.get("see_ignored_group:"+a,!1)}var p=b("ReasonReact.bs").statelessComponent("MessengerIgnoredGroupThreadWarningDialogReact");function q(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)}function r(a,c,d,e,f,g){__p&&__p();var h=function(c){c.stopPropagation();b("bs_curry")._1(a,0);return b("MessengerDialogs.bs").removeDialog(0)},o=function(a){a.stopPropagation();b("bs_curry")._1(c,e);return b("MessengerDialogs.bs").removeDialog(0)},r=function(a){a.stopPropagation();b("bs_curry")._1(d,e);return b("MessengerDialogs.bs").removeDialog(0)};return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],function(){var a=new(b("IgnoreMessagesTypedLogger"))().setEvent("group_with_ignored_person_warning").setThreadID(f).setPlatform("messengerdotcom");a.log();return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,[q],0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Title[0](0,[k])))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[b("React").createElement("div",undefined,i),b("React").createElement("div",{className:"_3-8x"},j)])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([1],[l],0,0,[r],[1],0,0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([1],[n],0,0,[h],[1],0,0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([1],[m],0,["danger"],[o],[0],0,0,[]))]))]))},p[9],p[10],p[11],p[12]]}e=b("ReasonReact.bs").wrapReasonForJs(p,function(a){return r(a.onSee,a.onIgnore,a.onCancel,a.prevThreadID,a.threadID,[])});f.bodyTextPeopleInGroup=i;f.bodyTextEffects=j;f.titleText=k;f.cancelText=l;f.ignoreText=m;f.seeConvoText=n;f.storage=o;f.getSeeConversationCacheKey=a;f.setWantsToSee=c;f.getWantsToSee=d;f.component=p;f.handleToggle=q;f.make=r;f.jsComponent=e}),null);
__d("MessengerParticipantUtils.bs",["bs_caml_obj","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){var e=b("MercuryIDs").getParticipantIDFromUserID(a);a=d.participants.filter(function(a){return b("bs_caml_obj").caml_notequal(a,e)});return a.filter(function(a){return c.has(a)})}function h(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function a(a,b,c){return h(a,b,c).length>0}f.findIntersection=g;f.participantsInGroupThread=h;f.areParticipantsInGroupThread=a}),null);
__d("MessengerServerErrorDialogReact.bs",["fbt","bs_curry","ReasonReact.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerServerErrorDialog"),i=g._("An unexpected problem was encountered. Please try again later."),j=g._("Temporary Failure");function k(a,c){return[h[0],h[1],h[2],h[3],function(){return b("bs_curry")._1(a,0)},h[5],h[6],h[7],function(){return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,0,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,j)),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[i])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0]([0],[g._("OK")],0,0,0,[0],0,0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return k(a.onMount,[])});f.component=h;f.message=i;f.title=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerConversationContainer.react",["Bootloader","ImmutableObject","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryLogMessageType","MercuryMessageStore","immutable","MercuryThreadActions","MessagingTagConstants","MessengerActions","MessengerBlockedGroupThreadWarningDialogReact.bs","MessengerConfig","MessengerConversation.react","MessengerDialogs.bs","MessengerHotLikePreviewEvents","MessengerIgnoredGroupThreadWarningDialogReact.bs","MessengerLeaveGroupAction","MessengerState.bs","MessengerParticipantUtils.bs","React","SubscriptionsHandler","MessengerServerErrorDialogReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MercuryThreadActions").get(),i=b("MessengerServerErrorDialogReact.bs").jsComponent;c=b("React").PropTypes;var j=b("MessengerBlockedGroupThreadWarningDialogReact.bs").jsComponent,k=b("MessengerIgnoredGroupThreadWarningDialogReact.bs").jsComponent;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={isLoaded:!1,isLoading:!0,messages:b("immutable").List()},this.$2=undefined,this.$3=!1,this.$4=undefined,this.$5=undefined,this.$6=undefined,this.$7=!1,this.$15=function(){var a=this.props.thread;if(a==null)return;b("MessengerBlockedGroupThreadWarningDialogReact.bs").setWantsToSee(a.thread_id,!0)}.bind(this),this.$18=function(){var a=this.props.thread;if(a==null)return;b("MessengerIgnoredGroupThreadWarningDialogReact.bs").setWantsToSee(a.thread_id,!0)}.bind(this),this.$16=function(a){var c=this.props.thread;if(c==null)return;b("MessengerLeaveGroupAction").leaveGroup(c,this.props.viewer);this.$20(a)}.bind(this),this.$19=function(a){var c=this.props.thread;if(c==null)return;var d=c.thread_id;h.changeFolder(d,b("MessagingTagConstants").other);b("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(a,c,e){new a().setEvent(c.IGNORE_CONFIRMED).setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d)).setPlatform(e.MESSENGERDOTCOM).log()},"MessengerConversationContainer.react");this.$20(a)}.bind(this),this.$17=function(a){this.$20(a)}.bind(this),this.$13=function(){if(this.state.isLoading||this.state.isLoaded)return;this.setState({isLoading:!0});this.$1.fetchMoreMessages()||this.setState({isLoading:!1,isLoaded:!0})}.bind(this),c}a.prototype.componentWillUnmount=function(){this.$2&&this.$2.release(),clearTimeout(this.$6)};a.prototype.componentDidMount=function(){this.$8(this.props.threadID),this.$9()?this.$10():this.$11()&&this.$12()};a.prototype.componentDidUpdate=function(a){var b=this.props.threadID!==a.threadID;b&&(this.$9()?this.$10(a.threadID):this.$11()&&this.$12(a.threadID))};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.props.threadID!==a.threadID&&(this.setState({isLoading:!0,messages:b("immutable").List()}),this.$8(a.threadID))};a.prototype.render=function(){var a=this.state.messages;a=a.some(function(a){return a.log_message_type===b("MercuryLogMessageType").SERVER_ERROR});b("MessengerConfig").ErrorDialog&&a&&!this.$7&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{onMount:function(){return this.$7=!0}.bind(this)})}.bind(this));return b("React").createElement(b("MessengerConversation.react"),{className:this.props.className,contact:this.props.contact,deliveryReceipts:this.props.deliveryReceipts,fetchMessages:this.$13,isCanonical:b("MercuryIDs").isCanonical(this.props.threadID),isLoading:this.state.isLoading,isLoaded:this.state.isLoaded,messages:this.state.messages,onRead:this.props.onMarkRead,onVoiceClipCreate:this.props.onVoiceClipCreate,onReplyToMessage:this.props.onReplyToMessage,participants:this.props.participants,readReceipts:this.props.readReceipts,ref:"conversation",thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer})};a.prototype.handleResize=function(){this.refs.conversation.handleResize()};a.prototype.isScrolledToBottom=function(){return!!(this.refs.conversation&&this.refs.conversation.isScrolledToBottom())};a.prototype.$9=function(){__p&&__p();var a=this.props.thread;if(a==null)return!1;var c=a.thread_id;if(!this.$14())return!1;var d=!1;b("MessengerState.bs").compute(this.props.viewer,function(c){c=c.blocked_ids;b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(this.props.viewer,c,a)&&(d=!0)}.bind(this));if(!d)return!1;c=b("MessengerBlockedGroupThreadWarningDialogReact.bs").getWantsToSee(c);return c?!1:!0};a.prototype.$11=function(){__p&&__p();var a=this.props.thread;if(a==null)return!1;var c=a.thread_id;if(!this.$14())return!1;if(a.folder!=="inbox")return!1;if(!b("MessengerParticipantUtils.bs").areParticipantsInGroupThread(b("MessengerState.bs").fbid(this.props.messengerState),b("MessengerState.bs").ignoredIds(this.props.messengerState),a))return!1;a=b("MessengerIgnoredGroupThreadWarningDialogReact.bs").getWantsToSee(c);return a?!1:!0};a.prototype.$14=function(){var a=this.props.thread;if(a==null)return!1;if(b("MercuryIDs").isCanonical(this.props.threadID))return!1;return!a.is_subscribed?!1:!0};a.prototype.$10=function(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{onSee:this.$15,onLeave:this.$16,onCancel:this.$17,prevThreadID:a})}.bind(this))};a.prototype.$12=function(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(k,{onSee:this.$18,onIgnore:this.$19,onCancel:this.$17,prevThreadID:a,threadID:b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)})}.bind(this))};a.prototype.$20=function(a){a==null&&b("MessengerActions").selectThread(null),b("MessengerActions").selectThread(a)};a.prototype.$8=function(a){__p&&__p();if(!a)return;this.setState({isLoaded:!1});this.$1&&this.$1.destroy();this.$7=!1;this.$1=new(b("MercuryMessageStore"))(a,b("MessengerConfig").MessageLoadCount);clearTimeout(this.$6);this.$6=setTimeout(function(){this.props.thread&&this.props.thread.message_count<1&&this.setState({isLoaded:!0,isLoading:!1})}.bind(this),6e3);this.$2&&this.$2.release();this.$2=new(b("SubscriptionsHandler"))();this.$2.addSubscriptions(this.$1.subscribe(function(a){this.setState({messages:this.$21(b("immutable").List(a.messages)),isLoading:!1})}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(a){this.$3=!0,this.$4=a,this.setState({messages:this.$21(this.state.messages)}),clearInterval(this.$5),this.$5=setInterval(this.refs.conversation.scrollToBottom,50)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(a){clearInterval(this.$5)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(a){clearInterval(this.$5)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,function(){this.$3=!1,this.$4=null}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP_EMOJI,function(){this.$3=!1,this.$4=null}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,function(){clearInterval(this.$5),this.$3=!1,this.setState({messages:this.$21(this.state.messages)})}.bind(this)))};a.prototype.$21=function(a){this.$3?a=a.set(a.size,this.$4):(a=a.filterNot(function(a){return a.is_like_preview}),this.$4=null);return a};a.propTypes={contact:c.instanceOf(b("ImmutableObject")),deliveryReceipts:c.object,readReceipts:c.object.isRequired,messengerState:c.any,onMarkRead:c.func.isRequired,onVoiceClipCreate:c.func,onReplyToMessage:c.func,participants:c.instanceOf(b("immutable").Map),thread:c.object,threadID:c.string.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("MercuryCanonicalGroupThreadActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({THREAD_SEARCH_UPDATED:null})}),null);
__d("MercuryCanonicalGroupThreadStore",["FluxStore","MercuryCanonicalGroupThreadActionTypes","MercuryCanonicalGroupThreadManager","MessengerDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("MessengerDispatcher")),this.$MercuryCanonicalGroupThreadStore1=b("MercuryCanonicalGroupThreadManager").get()}a.prototype.__onDispatch=function(a){a=a.type;switch(a){case b("MercuryCanonicalGroupThreadActionTypes").THREAD_SEARCH_UPDATED:this.__emitChange();break;default:break}};a.prototype.getOrFetch=function(a){var c=this.$MercuryCanonicalGroupThreadStore1.getNow(a);c||this.$MercuryCanonicalGroupThreadStore1.getCanonicalGroupThreadIDForParticipants(a,function(){b("MessengerDispatcher").dispatch({type:b("MercuryCanonicalGroupThreadActionTypes").THREAD_SEARCH_UPDATED})});return c};a.__moduleID=e.id;e.exports=new a()}),null);
__d("MessengerComposerState",["immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Record({step:null,recipients:b("immutable").List()});a.__TCmeta={type:"MessengerComposerState"};e.exports=a}),null);
__d("MessengerComposerSteps",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});e.exports=a}),null);
__d("MessengerComposerStore",["EditorState","MessengerActions","MessengerComposerActions","MessengerComposerState","MessengerComposerSteps","MessengerConstants","MessengerDispatcher","MessengerEditorStateManager","MessengerStore","MessengerURIStore","MessengerView","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=new(b("MessengerComposerState"))({step:b("MessengerComposerSteps").NULL,recipients:b("immutable").List()});c=babelHelpers.inherits(a,b("MessengerStore"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$MessengerComposerStore1=h}a.prototype.getState=function(){return this.$MessengerComposerStore1};a.prototype.__onDispatch=function(a){__p&&__p();b("MessengerDispatcher").waitFor([b("MessengerURIStore").getDispatchToken()]);var c=b("MessengerURIStore").getState().detailView,d=this.$MessengerComposerStore1.recipients,e=this.$MessengerComposerStore1.step,f=null,g=null;switch(a.type){case b("MessengerComposerActions").Types.ADD_TOKEN:if(d.some(function(b){return b.getUniqueID()===a.entry.getUniqueID()}))break;f=d.push(a.entry);break;case b("MessengerComposerActions").Types.REMOVE_TOKEN:var h=a.entry.getUniqueID(),i=d.findIndex(function(a){return a.getUniqueID()===h});i!==-1&&(f=d["delete"](i));break;case b("MessengerComposerActions").Types.FOCUS_COMPOSER:e===b("MessengerComposerSteps").SELECT_RECIPIENTS&&(g=b("MessengerComposerSteps").COMPOSE);break;case b("MessengerComposerActions").Types.FOCUS_TYPEAHEAD:e===b("MessengerComposerSteps").COMPOSE&&(g=b("MessengerComposerSteps").SELECT_RECIPIENTS);break;case b("MessengerActions").Types.REPLACE_STATE:i=b("MessengerURIStore").getPrevState().detailView;i!==b("MessengerView").DETAIL.COMPOSE&&c===b("MessengerView").DETAIL.COMPOSE&&(g=b("MessengerComposerSteps").SELECT_RECIPIENTS);break;case b("MessengerComposerActions").Types.MOVE_DRAFT:b("MessengerEditorStateManager").set(a.threadID,b("MessengerEditorStateManager").get(b("MessengerConstants").NEW_THREAD_KEY));break;case b("MessengerComposerActions").Types.EXIT_COMPOSE_STATE:var j=b("EditorState").createEmpty();setTimeout(function(){b("MessengerEditorStateManager").set(b("MessengerConstants").NEW_THREAD_KEY,b("EditorState").forceSelection(j,j.getSelection()))},0);g=b("MessengerComposerSteps").NULL;f=b("immutable").List();break}(f||g)&&(this.$MessengerComposerStore1=new(b("MessengerComposerState"))({step:g||e,recipients:f||d}),this.emitChange())};e.exports=new a()}),null);
__d("ArchiveWarningReact.bs",["cx","React","ReasonReact.bs","TooltipData","bs_js_primitive","bs_js_null_undefined"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("ArchiveWarningReact");function i(a,c){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var c=b("TooltipData").propsFor("All employee-to-employee conversations will be archived","above");if(a){var d=b("React").createElement("i",{className:"_3olv _14lt"});return b("React").cloneElement(b("React").createElement("div",{className:"_3a61"},d),{"data-tooltip-content":b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(c["data-tooltip-content"])),"data-hover":b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(c["data-hover"])),"data-tooltip-position":b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(c["data-tooltip-position"]))})}else return null},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.shown,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MercuryThreadTitleReact.bs",["ReasonReact.bs","bs_js_null_undefined","MercuryThreadTitle.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("MercuryThreadTitle.react"),{className:b("bs_js_null_undefined").fromOption(a),maxTitle:b("bs_js_null_undefined").fromOption(c),thread:d,viewer:e,isNewThread:b("bs_js_null_undefined").fromOption(f),showUnreadCount:b("bs_js_null_undefined").fromOption(g),useShortName:b("bs_js_null_undefined").fromOption(h),useAndSeparator:b("bs_js_null_undefined").fromOption(i)},j)}f.make=a}),null);
__d("MessengerCustomColorUtils.bs",["cssVar","CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){a=a.solid_color;var c=b("CurrentUser").isWorkUser();if(a==null)if(c)return"#373e4c";else return"#0084ff";else return a}f.customColorOrBlue=a}),null);
__d("MessengerInfoPanelButtonReact.bs",["ix","cx","React","asset","ImageReact.bs","CurrentUser","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={height:"32px",width:"32px"};function j(a){return b("React").createElement("svg",{viewBox:"0 0 64 64"},b("React").createElement("g",undefined,b("React").createElement("g",undefined,b("React").createElement("path",{style:{fill:a},d:"M32,10c-12.2,0-22,9.8-22,22s9.8,22,22,22s22-9.8,22-22S44.2,10,32,10z M32,19c1.6,0,3,1.4,3,3s-1.4,3-3,3 c-1.6,0-3-1.4-3-3S30.4,19,32,19z M36,45h-2h-4h-2v-1h2V29h-2v-1h2h4v1v15h2V45z"}))))}function k(a){var c={fill:a};return b("React").createElement("svg",{style:{stroke:a},viewBox:"0 0 64 64"},b("React").createElement("g",undefined,b("React").createElement("polygon",{style:c,points:"34,44 34,29 34,28 30,28 28,28 28,29 30,29 30,44 28,44 28,45 30,45 34,45 36,45 36,44"}),b("React").createElement("circle",{style:c,cx:"32",cy:"22",r:"3"})),b("React").createElement("path",{style:{fill:"none",stroke:a,strokeMiterlimit:"10",strokeWidth:"2"},d:"M32,11c11.6,0,21,9.4,21,21s-9.4,21-21,21s-21-9.4-21-21S20.4,11,32,11z"}))}function a(a,c){var d=b("CurrentUser").isWorkUser();if(d)return b("React").createElement("div",{className:"_2phz"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[c?g("413962"):g("413953")],0,0,0,0,[])));else return b("React").createElement("div",{style:i},c?k(a):j(a))}f.svgWrapperStyle=i;f.selected=j;f.notSelected=k;f.make=a}),null);
__d("MessengerPresenceStatusReact.bs",["fbt","React","ReasonReact.bs","bs_js_primitive"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerPresenceStatusReact");function i(a,c,d,e,f){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var f,h=0;c&&e?f=g._("Active on {platform}",[g._param("platform",e[0])]):h=1;h===1&&(f=d?g._("Active {time} ago",[g._param("time",d[0])]):null);h={};a&&(h.className=a[0]);return b("React").createElement("span",h,f)},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(b("bs_js_primitive").null_undefined_to_opt(a.className),a.isUserActive,b("bs_js_primitive").null_undefined_to_opt(a.lastActive),b("bs_js_primitive").null_undefined_to_opt(a.platform),[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerRTCGroupCallRingParticipantsRow.react",["cx","fbt","React","intlList"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){a=a.names;return b("React").createElement("div",{className:"_1wsd"},b("React").createElement("div",{className:"_1wse"},h._("Ring:")),b("React").createElement("div",{className:"_1wsg"},b("intlList")(a,b("intlList").CONJUNCTIONS.NONE)))};e.exports=a}),null);
__d("MessengerRTCGroupCallParticipantsPickerDialog.react",["cx","fbt","invariant","FBRTCCore","ImmutableObject","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeader.react","MessengerDialogTitle.react","MessengerRTCFunnelLogger","MessengerRTCGroupCallContactList.react","MessengerRTCGroupCallRingParticipantsRow.react","MessengerRTCGroupCallThreadRow.react","React","RTCUser","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","URI","VideoCallWebDriverIDs","gkx","immutable"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;var k=460,l=5;d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(a){__p&&__p();j.constructor.call(this,a);this.state={isParticipantSelected:this.props.participants.mapEntries(function(a){var b=a[0];a=a[1];return[a.fbid?a.fbid:b,this.props.participants.size<=l]}.bind(this))};this.$3=function(){b("RTWebUserActionLogger").logClick({callType:b("RTWebLoggingCallType").MW,conferenceName:this.props.conferenceName,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").GROUP_CALL_PARTICIPANT_PICKER_DIALOG,component:b("RTWebLoggingComponent").CANCEL}),b("MessengerRTCFunnelLogger").appendAction("participant_picker_click_cancel")}.bind(this);this.$6=function(a){var c=!this.state.isParticipantSelected.get(a);this.setState(function(b){return{isParticipantSelected:b.isParticipantSelected.set(a,c)}});b("RTWebUserActionLogger").logClick({callType:b("RTWebLoggingCallType").MW,conferenceName:this.props.conferenceName,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").GROUP_CALL_PARTICIPANT_PICKER_DIALOG,component:c?b("RTWebLoggingComponent").PARTICIPANT_ROW_SELECT:b("RTWebLoggingComponent").PARTICIPANT_ROW_UNSELECT})}.bind(this);this.$4=function(){var a=this.$2().map(function(a){return a.fbid});b("RTWebUserActionLogger").logClick({callType:b("RTWebLoggingCallType").MW,conferenceName:this.props.conferenceName,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").GROUP_CALL_PARTICIPANT_PICKER_DIALOG,component:b("RTWebLoggingComponent").START_CALL});b("MessengerRTCFunnelLogger").appendAction("participant_picker_click_call");this.props.handleCall?this.props.handleCall(a):b("FBRTCCore").startGroupCall({conferenceName:this.props.conferenceName,hasVideo:this.props.hasVideo,trigger:this.props.trigger,usersToRing:a});this.props.onUnmount()}.bind(this);a=this.props.participants.valueSeq().toArray().map(function(a){var c=a.big_image_src||a.image_src;a.fbid||i(0);return new(b("RTCUser"))({FBID:a.fbid,profileUrl:new(b("URI"))(a.href),profilePictureUrl:c,isMessengerUser:!!a.is_messenger_user,isPartiesUser:!!a.is_parties_user,userName:a.name,userShortName:a.short_name,vanity:a.vanity||""})});this.$1=a.sort(function(a,b){return a.userName.localeCompare(b.userName)})}a.prototype.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebLoggingCallType").MW,conferenceName:this.props.conferenceName,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").GROUP_CALL_PARTICIPANT_PICKER_DIALOG})};a.prototype.render=function(){var a=this.props,c=a.participants,d=a.thread;a=a.viewerID;var e=this.$2();return b("React").createElement(b("MessengerDialog.react"),{onToggle:function(){b("MessengerRTCFunnelLogger").endFunnel("participant_picker_dismissed"),this.props.onUnmount&&this.props.onUnmount()}.bind(this),type:"default",width:k},b("React").createElement("div",{className:"_2m1r"},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogCancelButton.react"),{onClick:this.$3,dataTestID:b("VideoCallWebDriverIDs").RTC_PICKER_DIALOG_CANCEL_BUTTON}),b("React").createElement(b("MessengerDialogTitle.react"),null,h._("Ring Group Members")),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Call"),onClick:this.$4,dataTestID:b("VideoCallWebDriverIDs").RTC_PICKER_DIALOG_CALL_BUTTON,disabled:e.length===0,type:"primary"})),b("React").createElement(b("MessengerRTCGroupCallThreadRow.react"),{displayBlockedMemberWarning:b("gkx")("AT4uLl1AB6JLlOysf-A2hpwt4KJLHV_bjB3XyRsO-BgTRrIBrw0NJXG9gSXonEK94SJbVDuoLSgqS0Dkh4vrerSG")?this.$5(e):!1,participants:c,thread:d,viewerID:a}),b("React").createElement(b("MessengerRTCGroupCallRingParticipantsRow.react"),{names:e.map(function(a){a=a.name;return a}).sort(function(a,b){return a.localeCompare(b)})}),b("React").createElement(b("MessengerRTCGroupCallContactList.react"),{remoteUsers:this.$1,isParticipantSelected:this.state.isParticipantSelected,onClick:this.$6})))};a.prototype.$5=function(a){return a.some(function(a){return a.is_messenger_blocked||a.is_facebook_blocked})};a.prototype.$2=function(){return this.props.participants.filter(function(a,b){return this.state.isParticipantSelected.get(a.fbid?a.fbid:b)}.bind(this)).toArray()};a.propTypes={participants:c.instanceOf(b("immutable").Map).isRequired,thread:c.instanceOf(b("ImmutableObject")),viewerID:c.string.isRequired,trigger:c.string.isRequired,conferenceName:c.string.isRequired,hasVideo:c.bool.isRequired,handleCall:c.func,onUnmount:c.func.isRequired};e.exports=a}),null);
__d("MessengerRTCGroupCallParticipantsPickerDialogController",["DOM","MessengerRTCGroupCallParticipantsPickerDialog.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={_container:b("DOM").create("div"),render:function(a){var c=a.participants,d=a.thread,e=a.viewerID,f=a.trigger,g=a.conferenceName,h=a.hasVideo;a=a.handleCall;b("ReactDOM").render(b("React").createElement(b("MessengerRTCGroupCallParticipantsPickerDialog.react"),{participants:c,thread:d,viewerID:e,trigger:f,conferenceName:g,hasVideo:h,handleCall:a,onUnmount:function(){return this._onUnmount()}.bind(this)}),this._container)},_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._container)}};e.exports=a}),null);
__d("MessengerRTCUnavailableDialog.react",["fbt","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogs.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerDialogBodyReact.bs").jsComponent;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.$1},b("React").createElement(b("MessengerDialogHeader.react"),null,g._("Can't Make Call")),b("React").createElement(i,null,this.$2()),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",label:g._("OK"),type:"primary"})))};a.prototype.$2=function(){return b("React").createElement("div",null,g._("{name} is not available right now.",[g._param("name",this.props.name)]))};a.prototype.$1=function(a){a||b("MessengerDialogs.bs").removeDialog()};function a(){h.apply(this,arguments)}a.propTypes={name:c.string.isRequired};e.exports=a}),null);
__d("MessengerRTCInvokeHandler",["invariant","MercuryIDs","MercuryThreadIDMap","MessengerDialogs.bs","MessengerRTCFunnelLogger","MessengerRTCUnavailableDialog.react","MNRTCCallabilityStore","React","RTCCallState","FBRTCLogger","RTWebLoggingCallType","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallTypedLogger"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MercuryThreadIDMap").get(),i=b("FBRTCLogger").Trigger;a={isCallable:function(a,c){var d;!1;if(b("MercuryIDs").isGroupChat(a))d=!0;else{a=b("MercuryIDs").getUserIDFromThreadID(a);d=a?b("MNRTCCallabilityStore").isCallable(a,c):!1}return d},handleStartCall:function(a,c,e,f,k,l,m){__p&&__p();b("RTWebUserActionLogger").logClick({page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").MESSENGER_HEADER,component:b("RTWebUserActionLogger").getAudioVideoComponent(!e),callType:b("MercuryIDs").isGroupChat(a)?b("RTWebLoggingCallType").MW:b("RTWebLoggingCallType").P2P}),b("MessengerRTCFunnelLogger").startFunnel("FBMessagesPage"),m?b("MercuryIDs").isGroupChat(a)?(b("MessengerRTCFunnelLogger").appendAction("start_in_group_thread"),d(["FBRTCCore","FBRTCSupport","MessengerRTCUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController"],function(d,g,l,m){__p&&__p();var n=c.rtc_call_data;if(n&&n.call_state!==b("RTCCallState").NO_ONGOING_CALL&&n.server_info_data){b("MessengerRTCFunnelLogger").appendAction("join_existing_call");d.startGroupCall({conferenceName:"GROUP:"+c.thread_fbid,hasVideo:e,serverInfoData:n.server_info_data,trigger:n.call_state!==b("RTCCallState").AUDIO_GROUP_CALL?e?i.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:e?i.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON});return}if(!g.isGroupCallWebtrcSupported()){b("MessengerRTCFunnelLogger").endFunnel("unsupported_browser");j(a,c,e);l.render({hasVideo:e,isGroupCall:!0});return}var o=function(a){b("MessengerRTCFunnelLogger").appendAction("render_participant_picker"),m.render({participants:k.filter(function(a){a=a.fbid;return a!==f}),thread:c,viewerID:f,trigger:e?i.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,conferenceName:"GROUP:"+a,hasVideo:e})};b("MercuryIDs").isLocalThread(a)?h.getServerIDFromClientID(a,function(a){return o(a)}):o(b("MercuryIDs").getThreadFBIDFromThreadID(a))})):(b("MessengerRTCFunnelLogger").appendAction("start_in_p2p_thread"),new(b("VideoCallTypedLogger"))().setEvent("web_messenger_call_click").log(),d(["FBRTCCore","FBRTCSupport","MessengerRTCUnsupportedBrowserDialogController"],function(d,f,h){if(!f.isWebrtcSupported()){j(a,c,e);b("MessengerRTCFunnelLogger").endFunnel("unsupported_browser");h.render({hasVideo:e,isGroupCall:!1});return}f=b("MercuryIDs").getUserIDFromThreadID(a);f||g(0);d.startOutgoingCall(f,"messenger_dot_com",!e)})):(j(a,c,e),b("MessengerRTCFunnelLogger").endFunnel("callee_not_callable"),b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("MessengerRTCUnavailableDialog.react"),{name:l})}))}};function j(a,c,d){b("RTWebUserActionLogger").logError({callType:b("MercuryIDs").isGroupChat(a)?b("RTWebLoggingCallType").MW:b("RTWebLoggingCallType").P2P,conferenceName:"GROUP:"+c.thread_fbid,page:b("RTWebUserActionLogger").getPage(),mediaType:b("RTWebUserActionLogger").getMediaType(!d),errorDomain:"unsupported browser"})}e.exports=a}),null);
__d("MessengerRTCVideoCallButtonReact.bs",["ix","cx","fbt","React","asset","ImageReact.bs","CurrentUser","ReasonReact.bs","RTWebUserActionLogger","VideoCallWebDriverIDs","RTWebLoggingComponent","RTWebLoggingSurface"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={height:"32px",width:"32px"};function k(a,b){return{clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:a,strokeMiterlimit:"10",strokeWidth:"2"}}var l=k("#888888",0),m=b("ReasonReact.bs").statelessComponent("MessengerRTCVideoCallButtonReact");function n(a,c,d,e){return[m[0],m[1],m[2],m[3],function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(d),component:b("RTWebLoggingComponent").AUDIO_CALL,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").MESSENGER_HEADER});return 0},m[5],m[6],m[7],function(){var e=d?i._("Start a group video chat"):i._("Start a video chat"),f=c?k(a,0):l,h=b("React").createElement("div",{"aria-label":e,className:"_2phz"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[g("470488")],0,[e],0,0,[])));f=b("React").createElement("div",{"aria-label":e,style:j,title:e},b("React").createElement("svg",{style:f,viewBox:"0 0 64 64"},b("React").createElement("title",undefined,e),b("React").createElement("g",undefined,b("React").createElement("g",undefined,b("React").createElement("path",{d:"M47,27.8v7.5l9,4.5V23.2L47,27.8z M37.2,17H13.8C10.6,17,8,19.6,8,22.8v17.4c0,3.2,2.6,5.8,5.8,5.8h23.3\nc3.2,0,5.8-2.6,5.8-5.8V22.8C43,19.6,40.4,17,37.2,17z"})))));e=b("VideoCallWebDriverIDs").START_VIDEO_CALL;var m=b("CurrentUser").isWorkUser();return b("React").cloneElement(m?h:f,{"data-testid":e})},m[9],m[10],m[11],m[12]]}a=b("ReasonReact.bs").wrapReasonForJs(m,function(a){return n(a.customColor,a.isAvailable,a.isGroupChat,[])});f.videoCallWebDriverIDs=b("VideoCallWebDriverIDs");f.rtWebLoggingComponent=b("RTWebLoggingComponent");f.rtWebLoggingSurface=b("RTWebLoggingSurface");f.svgWrapperStyle=j;f.svgStyle=k;f.unavailable=l;f.component=m;f.make=n;f.jsComponent=a}),null);
__d("MessengerRTCVoiceCallButtonReact.bs",["ix","cx","fbt","React","asset","ImageReact.bs","CurrentUser","ReasonReact.bs","RTWebUserActionLogger","VideoCallWebDriverIDs","RTWebLoggingComponent","RTWebLoggingSurface"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={height:"32px",width:"32px"};function k(a,b){return{clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:a,strokeMiterlimit:"10",strokeWidth:"2"}}var l=k("#888888",0),m=b("ReasonReact.bs").statelessComponent("MessengerRTCVoiceCallButtonReact");function n(a,c,d,e){return[m[0],m[1],m[2],m[3],function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(d),component:b("RTWebLoggingComponent").VIDEO_CALL,page:b("RTWebUserActionLogger").getPage(),surface:b("RTWebLoggingSurface").MESSENGER_HEADER});return 0},m[5],m[6],m[7],function(){var e=d?i._("Start a group call"):i._("Start a voice call"),f=c?k(a,0):l,h=b("React").createElement("div",{"aria-label":e,className:"_2phz"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[g("470545")],0,[e],0,0,[])));f=b("React").createElement("div",{"aria-label":e,style:j,title:e},b("React").createElement("svg",{style:f,viewBox:"0 0 64 64"},b("React").createElement("title",undefined,e),b("React").createElement("path",{d:"M48.3,50.5c-7.7,6.5-24.2-10-24.5-10.3C23.5,39.9,7,23.4,13.5,15.7c4.8-5.7,6.3-3.4,7-2.7\nc0.6,0.5,5.7,7.8,6,9.2c0.3,1.4-2.4,4.6-2.2,5.9c0.2,1.2,3.6,5,5.1,6.5c1.5,1.5,5.3,4.9,6.5,5.1c1.2,0.2,4.4-2.5,5.9-2.2\nc1.4,0.3,8.7,5.4,9.2,6C51.6,44.2,54,45.7,48.3,50.5z"})));e=b("VideoCallWebDriverIDs").START_VOICE_CALL;var m=b("CurrentUser").isWorkUser();return b("React").cloneElement(m?h:f,{"data-testid":e})},m[9],m[10],m[11],m[12]]}a=b("ReasonReact.bs").wrapReasonForJs(m,function(a){return n(a.customColor,a.isAvailable,a.isGroupChat,[])});f.videoCallWebDriverIDs=b("VideoCallWebDriverIDs");f.rtWebLoggingComponent=b("RTWebLoggingComponent");f.rtWebLoggingSurface=b("RTWebLoggingSurface");f.svgWrapperStyle=j;f.svgStyle=k;f.unavailable=l;f.component=m;f.make=n;f.jsComponent=a}),null);
__d("MessengerRTCCallButton.react",["ImmutableObject","Link.react","MercuryIDs","MessengerRTCInvokeHandler","MessengerRTCVideoCallButtonReact.bs","MessengerRTCVoiceCallButtonReact.bs","MNRTCCallabilityStore","React","StoreAndPropBasedStateMixin","immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerRTCVideoCallButtonReact.bs").jsComponent,h=b("MessengerRTCVoiceCallButtonReact.bs").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerRTCCallButton",mixins:[b("StoreAndPropBasedStateMixin")(b("MNRTCCallabilityStore"))],statics:{calculateState:function(a){return{isCallable:b("MessengerRTCInvokeHandler").isCallable(a.threadID,a.thread)}}},propTypes:{className:a.string.isRequired,customColor:a.string.isRequired,isVideo:a.bool.isRequired,participants:a.instanceOf(b("immutable").Map).isRequired,thread:a.instanceOf(b("ImmutableObject")).isRequired,threadID:a.string.isRequired,viewer:a.string.isRequired,calleeName:a.string.isRequired},render:function(){var a={customColor:this.props.customColor,isAvailable:this.state.isCallable,isGroupChat:b("MercuryIDs").isGroupChat(this.props.threadID)};return b("React").createElement(b("Link.react"),{className:this.props.className,onClick:this._handleStartCall},this.props.isVideo?b("React").createElement(g,a):b("React").createElement(h,a))},_handleStartCall:function(a){a.preventDefault(),b("MessengerRTCInvokeHandler").handleStartCall(this.props.threadID,this.props.thread,this.props.isVideo,this.props.viewer,this.props.participants,this.props.calleeName,this.state.isCallable)}});e.exports=c}),null);
__d("MessengerRTCCallButtonReact.bs",["ReasonReact.bs","MessengerRTCCallButton.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("MessengerRTCCallButton.react"),{className:a,customColor:c,isVideo:d,participants:e,thread:f,threadID:g,viewer:h,calleeName:i},j)}f.make=a}),null);
__d("MontageThreadViewContainerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MontageThreadViewContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MontageThreadViewContainer.react"),{threadID:a,montageData:c,onResize:b("bs_js_null_undefined").fromOption(d)},e)}f.make=a}),null);
__d("WorkChatDoNotDisturbStatusReact.bs",["ReasonReact.bs","WorkChatDoNotDisturbStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){var g=b("WorkChatDoNotDisturbStatus").component;if(g==null){var h=b("ReasonReact.bs").statelessComponent("WorkChatDoNotDisturbStatusReact.re");return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return null},h[9],h[10],h[11],h[12]]}else return b("ReasonReact.bs").wrapJsForReason(g,{className:a,thread:c,isDoNotDisturb:d,description:e},f)}f.make=a}),null);
__d("messengerCalculateTruncationState",["Style"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){__p&&__p();if(!e||!c)return;f=f?f.offsetWidth:0;e=Math.ceil(.5*(a.offsetWidth+e.offsetWidth));var g=a.offsetWidth-d.offsetWidth-12;if(e<=g)b("Style").set(a,"text-align","center"),b("Style").set(c,"width","auto"),b("Style").set(c,"margin-left","auto");else{document.body.dir==="rtl"?b("Style").set(a,"text-align","right"):(b("Style").set(a,"text-align","left"),b("Style").set(c,"margin-left",f+"px"));e=Math.max(a.offsetWidth-f-d.offsetWidth-11,0);b("Style").set(c,"width",e+"px")}}e.exports=a}),null);
__d("MessengerDetailViewHeaderReact.bs",["cx","fbt","FBID.bs","bs_curry","Event","React","Utils.bs","gkx","Bootload.bs","ReactDOM","debounce","LinkReact.bs","Bootloader","CurrentUser","ReasonReact.bs","FBRTCSupport","bs_js_primitive","MercuryConfig","MessengerDomIDs.bs","bs_js_null_undefined","MercuryThreadInfo","ArchiveWarningReact.bs","MessageRequestUtils","MercuryParticipantTypes","MercuryThreadTitleReact.bs","MessengerLocalTimeReact.bs","MessengerCustomColorUtils.bs","MessengerJoinableModeType","MessengerWebDriverTestIDs","MessengerRTCCallButtonReact.bs","MessengerPresenceStatusReact.bs","MessengerInfoPanelButtonReact.bs","MontageThreadViewContainerReact.bs","WorkChatDoNotDisturbStatusReact.bs","messengerCalculateTruncationState"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableMessengerUserControlsButtonReact.bs"],a,"MessengerDetailViewHeaderReact.bs");return 0}c=[a];var i=b("Bootload.bs").Create(c);function j(a){var c=b("bs_js_null_undefined").fromOption(a[0][0]),d=b("bs_js_null_undefined").fromOption(a[1][0]),e=b("bs_js_null_undefined").fromOption(a[2][0]),f=b("bs_js_null_undefined").fromOption(a[3][0]);a=b("bs_js_null_undefined").fromOption(a[4][0]);return b("messengerCalculateTruncationState")(c,d,e,f,a)}function k(a,c){c[1][3][0]=a==null?0:[b("ReactDOM").findDOMNode(a)];return 0}function l(a,b){b[1][1][0]=a==null?0:[a];return 0}function m(a,b){b[1][0][0]=a==null?0:[a];return 0}function n(a,b){b[1][2][0]=a==null?0:[a];return 0}function o(a,b){b[1][4][0]=a==null?0:[a];return 0}function p(a,c,d){if(a.has_montage&&b("MercuryConfig").MontageThreadViewer)return b("React").createElement("div",{ref:b("bs_curry")._1(d[0],o),className:"_1cwz"},b("ReasonReact.bs").element(0,0,b("MontageThreadViewContainerReact.bs").make(a.thread_id,c,0,[])));else return null}function q(a,c,d,e){__p&&__p();if(b("CurrentUser").isWorkUser()||!a)return null;else{a=a[0];var f=a.contact.type===b("MercuryParticipantTypes").PAGE;if(f){f=e[1][5][0];if(f){e=a.contact.is_messenger_blocked;a=a.contact.fbid;f=b("ReasonReact.bs").element(0,0,b("bs_curry")._7(f[0][8],"_3xb9 _30yy",b("MercuryThreadInfo").isMuted(c),e,a,c.thread_id,d,[]))}else f=null;return b("React").createElement("li",undefined,f)}else return null}}function r(a,c){c=c.filter(function(b,c,d){if(b==null)return!1;else return b.fbid!==a});var d=c.count();c=c.first();if(d!==1||c==null)return null;else return b("ReasonReact.bs").element(0,0,b("MessengerLocalTimeReact.bs").make("_5eu7",b("bs_js_primitive").null_undefined_to_opt(c.timezone),[]))}function s(a,c){__p&&__p();var d=b("FBRTCSupport").isOSSupported();a=a?a[0].contact.type===b("MercuryParticipantTypes").PAGE:!1;var e=c?c[0].joinable_mode===b("MessengerJoinableModeType").JOINABLE:!1;if(c){c=c[0];c=c.participants.length>1&&b("MercuryThreadInfo").canReply(c)&&!b("MessageRequestUtils").isMessageRequest(c)}else c=!1;if(d&&!a&&!e)return c;else return!1}var t=b("ReasonReact.bs").reducerComponent("MessengerDetailViewHeaderReact");function u(a,c,d,e,f,g,o,u,v){__p&&__p();var w=function(c){if(s(a,g)&&g){var d=g[0],e=d.thread_id;return b("React").createElement("li",undefined,b("ReasonReact.bs").element(0,0,b("MessengerRTCCallButtonReact.bs").make("_30yy",b("MessengerCustomColorUtils.bs").customColorOrBlue(d),!1,f,d,e,c,a?a[0].contact.name:"",[])))}else return null},x=function(c){__p&&__p();if(s(a,g)&&g){var d=g[0],e=d.thread_id;if(a){var h=a[0].isUserActive;h=h?"_3qfl":""}else h="";return b("React").createElement("li",undefined,b("ReasonReact.bs").element(0,0,b("MessengerRTCCallButtonReact.bs").make("_30yy",b("MessengerCustomColorUtils.bs").customColorOrBlue(d),!0,f,d,e,c,a?a[0].contact.name:"",[])),b("React").createElement("div",{className:h}))}else return null};if(a){v=a[0].availabilityStatusData;v=v==null?[!1,""]:[v.isDoNotDisturb,v.description]}else v=[!1,""];var y=v[1],z=v[0],A=function(){var a=b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6");if(a)return b("ReasonReact.bs").element(0,0,b("WorkChatDoNotDisturbStatusReact.bs").make(["_6f6k"],b("bs_js_null_undefined").fromOption(g),z,[y],[]));else return null},B=function(){if(a){var c=a[0];return[!1,b("ReasonReact.bs").element(0,0,b("MessengerPresenceStatusReact.bs").make(["_2v6o"],c.isUserActive,b("bs_js_primitive").null_undefined_to_opt(c.lastActive),[c.platform],[]))]}else return[!0,null]};return[t[0],t[1],t[2],t[3],function(a){var c=b("Event").listen(window,"resize",b("debounce")(function(){return j(a[1])},20));b("bs_curry")._1(a[4],function(){return c.remove()});return b("bs_curry")._1(i[0],function(b){var c=a;b=b;c[1][5][0]=[b];return 0})},function(a){return j(a[1][1])},t[6],t[7],function(i){if(o&&g){var j=g[0],s=o[0],t=!f.isEmpty()&&f.every(function(b,a,c){if(b==null)return!1;else return b.employee}),y=h._("Conversation Information"),C=B(0),D=A(0);return b("React").createElement("div",{ref:b("bs_curry")._1(i[0],m),className:"_673w"+(C[0]||z?" _1_fz":"")},p(j,u,i),b("React").createElement("div",{key:"threadTitle",ref:b("bs_curry")._1(i[0],l),className:"_5743"},b("React").createElement("h2",{className:"_17w2",id:b("MessengerDomIDs.bs").ids.THREAD_TITLE},b("React").createElement("div",{className:"_6f6l"},D,b("ReasonReact.bs").element(0,[b("bs_curry")._1(i[0],k)],b("MercuryThreadTitleReact.bs").make(["_3oh-"],[b("Utils.bs").$pipe$unknown(d,0)],j,s,0,0,0,0,[])))),z?null:C[1],r(s,f)),b("React").createElement("ul",{key:"buttonsContainer",ref:b("bs_curry")._1(i[0],n),className:"_fl2"},b("React").createElement("li",undefined,b("ReasonReact.bs").element(0,0,b("ArchiveWarningReact.bs").make(t,[]))),q(a,j,s,i),w(s),x(s),b("React").createElement("li",undefined,b("React").cloneElement(b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make([!c],0,[y],["_30yy"],0,0,0,0,0,0,0,[e],0,0,["button"],0,0,0,[y],[])),{"data-testid":b("MessengerWebDriverTestIDs").INFO_PANEL_BUTTON},b("MessengerInfoPanelButtonReact.bs").make(b("MessengerCustomColorUtils.bs").customColorOrBlue(j),c)),b("React").createElement("div",{"aria-owns":b("MessengerDomIDs.bs").ids.THREAD_INFO_PANEL}))))}else return null},function(){return[[0],[0],[0],[0],[0],[0]]},t[10],function(a,b){return 0},t[12]]}d=b("ReasonReact.bs").wrapReasonForJs(t,function(a){return u(b("bs_js_primitive").null_undefined_to_opt(a.contactData),a.infoPanelCollapsed,b("bs_js_primitive").null_undefined_to_opt(a.maxTitle),a.onInfoPanelToggle,a.participants,b("bs_js_primitive").null_undefined_to_opt(a.thread),b("FBID.bs").ofString(a.viewer),a.montageData,[])});f.BootloadableMessengerUserControlsButtonReact=c;f.LoadableMessengerUserControlsButtonReact=i;f.calculateTruncationState=j;f.findMercuryTitle=k;f.findTitle=l;f.findRoot=m;f.findButtons=n;f.findMontage=o;f.renderMontageThread=p;f.renderUserControls=q;f.renderLocalTime=r;f.shouldShowCallButton=s;f.component=t;f.make=u;f.jsComponent=d}),null);
__d("MessengerDetailViewHeaderContainer.react",["ImmutableObject","MercuryIDs","MercuryThreadIDMap","MercuryTypeaheadConstants","MessengerActions","MessengerComposerActions","MessengerComposeViewHeader.react","MessengerDetailViewHeaderReact.bs","MessengerState.bs","MessengerView","React","immutable","shallowEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MessengerDetailViewHeaderReact.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){var c=a.getUniqueID(),d=a.getType(),e=a.getAuxiliaryData()||{};if(d===b("MercuryTypeaheadConstants").THREAD_TYPE){var f=b("MercuryThreadIDMap").getForFBID(this.props.viewer);f.getClientIDFromServerID(c,function(a){b("MessengerComposerActions").moveDraftToNextThread(a),b("MessengerActions").selectThread(a)});b("MessengerComposerActions").exitComposeState()}else c===this.props.viewer&&this.props.recipients.size===0||d===b("MercuryTypeaheadConstants").PAGE_TYPE||d===b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE&&!e.canViewerAddToGroupChat?(b("MessengerComposerActions").moveDraftToNextThread(b("MercuryIDs").getThreadIDFromUserID(c)),b("MessengerComposerActions").exitComposeState(),b("MessengerActions").selectThread(b("MercuryIDs").getThreadIDFromUserID(c))):b("MessengerComposerActions").addToken(a)}.bind(this),c}a.prototype.shouldComponentUpdate=function(a){var c=a.contactData;a=babelHelpers.objectWithoutProperties(a,["contactData"]);var d=this.props,e=d.contactData;d=babelHelpers.objectWithoutProperties(d,["contactData"]);return!b("shallowEqual")(a,d)||!b("shallowEqual")(c,e)};a.prototype.render=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE?b("React").createElement(b("MessengerComposeViewHeader.react"),{forceHideClearButton:!0,onAddRecipient:this.$1,onRemoveRecipient:this.$2,onResize:this.props.onResize,recipients:this.props.recipients,viewer:this.props.viewer,isWorkUser:this.props.isWorkUser}):b("React").createElement(h,{contactData:this.props.contactData,infoPanelCollapsed:this.props.infoPanelCollapsed,onInfoPanelToggle:this.props.onInfoPanelToggle,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,montageData:b("MessengerState.bs").montage(this.props.messengerState)})};a.prototype.$2=function(a){b("MessengerComposerActions").removeToken(a)};a.propTypes={contactData:c.object,infoPanelCollapsed:c.bool.isRequired,onInfoPanelToggle:c.func.isRequired,onResize:c.func.isRequired,participants:c.instanceOf(b("immutable").Map).isRequired,recipients:c.instanceOf(b("immutable").List).isRequired,thread:c.instanceOf(b("ImmutableObject")),view:c.string,viewer:c.string.isRequired,isWorkUser:c.bool.isRequired,messengerState:c.array.isRequired};e.exports=a}),null);
__d("ChatPinnedThreadsEntryPoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MENU_ITEM_IN_INFO_PANEL:"menu_item_in_info_panel",MENU_ITEM_IN_THREAD_ROW:"menu_item_in_thread_row",INFO_PANEL_SECTION_ITEM:"info_panel_section_item",CHAT_TAB_MENU:"chat_tab_menu",INTEGRATION_TEST:"integration_test"})}),null);
__d("MessengerConfirmLeaveGroupDialogReact.bs",["bs_curry","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerConfirmLeaveGroupDialogReact");function h(a,c,d,e){var f=function(a,d){b("bs_curry")._1(c,0);return b("MessengerDialogs.bs").removeDialog(0)};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(c){var e=b("MessengerAdminGroupUtils").getLeaveGroupBodyText(a,d),g=b("MessengerAdminGroupUtils").getLeaveGroupButtonText(a,d),h=b("MessengerAdminGroupUtils").getLeaveGroupTitleText(a,d);return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,0,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,h)),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[e])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[g],0,["danger"],[b("bs_curry")._1(c[0],f)],[0],0,0,[]))]))]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.isViewerAdmin,a.onLeave,a.thread,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerInfoPanelAssociatedObjectSection.react",["cx","fbt","CurrentUser","Image.react","Link.react","MessageThreadAssociatedObjectKey","MessengerInfoPanelSectionReact.bs","React","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerInfoPanelSectionReact.bs").jsComponent;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=this.props,c=a.isCollapsed,d=a.onToggle,e=a.associatedObject;a=a.customColor;e=e[b("MessageThreadAssociatedObjectKey").ACTION_LINK];return b("React").createElement(j,{customColor:a,isCollapsible:!0,isCollapsed:c,onToggle:d,title:h._("Part of")},b("React").createElement(b("Link.react"),{href:e,target:"_blank",style:{textDecoration:"none"},className:"_35-k"},this.$1(),this.$2()))};a.prototype.$1=function(){var a=this.props.associatedObject;a=a[b("MessageThreadAssociatedObjectKey").PROFILE_PICTURE];return b("React").createElement("div",null,b("React").createElement(b("Image.react"),{className:"_35-n",src:a}))};a.prototype.$2=function(){var a=this.props.associatedObject,c=a[b("MessageThreadAssociatedObjectKey").NAME];a=b("TimeSpentRoomTypeEnum")[a[b("MessageThreadAssociatedObjectKey").ROOM_TYPE]];var d=b("CurrentUser").isWorkUser()?"Workplace":"Facebook";return b("React").createElement("div",{className:"_35-o"},b("React").createElement("div",{className:"_35-p"},c),b("React").createElement("div",{className:"_35-q"},h._({"EVENT":"Go to {productName} Event","GROUP":"Go to {productName} Group"},[h._param("productName",d),h._enum(a,b("TimeSpentRoomTypeEnum$FbtEnum"))])))};function a(){i.apply(this,arguments)}a.propTypes={isCollapsed:c.bool.isRequired,onToggle:c.func.isRequired,customColor:c.string,associatedObject:c.instanceOf(Object).isRequired};e.exports=a}),null);
__d("FBToggleSwitch.react",["cx","AbstractCheckboxInput.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){this.props.onToggle&&this.props.disabled!==!0&&this.props.onToggle(a.target.checked)}.bind(this),b}a.prototype.render=function(){var a="_ypo"+(this.props.animate?" _ypp":"")+(this.props.disabled?" _ypq":"")+(this.props.size==="large"?" _1dfi":""),c,d;this.props.indeterminate===!0?d=this.props.checked:c=this.props.checked;return b("React").createElement(b("AbstractCheckboxInput.react"),babelHelpers["extends"]({},this.props,{checked:c,className:b("joinClasses")(this.props.className,a),defaultChecked:d,onChange:this.$1}),undefined)};a.propTypes={animate:c.bool,indeterminate:c.bool,onToggle:c.func,disabled:c.bool,tooltip:c.oneOfType([c.node,c.string]),size:c.oneOf(["normal","large"])};e.exports=a}),null);
__d("MessengerInfoPanelGroupSection.react",["cx","fbt","FBToggleSwitch.react","MercuryIDs","MessengerParticipants.bs","immutable","MercuryThreadActions","MessengerAdminGroupUtils","MessengerApprovalModeTypes","MessengerApprovalRequester.react","MessengerInfoPanelSectionReact.bs","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MercuryThreadActions").get(),k=b("MessengerInfoPanelSectionReact.bs").jsComponent;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(a){i.constructor.call(this,a),this.state={approvalQueue:b("immutable").Map()}}a.prototype.componentDidMount=function(){this.$1(this.props.thread)};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(k,{customColor:this.props.thread.solid_color,isCollapsible:!0,isCollapsed:this.props.isOptionsCollapsed,onToggle:this.props.onOptionsToggle,title:h._("Group Options")},b("React").createElement("div",{className:"_3iho"},this.$2(),this.$3())),this.$4())};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.$1(a.thread)};a.prototype.$1=function(a){__p&&__p();if(!a)return;if(b("MessengerAdminGroupUtils").isAdminRequired(a)){var c=a.group_approval_queue&&a.group_approval_queue.map(function(a){return[b("MercuryIDs").getParticipantIDFromUserID(a.requester.id),a]}),d=c&&new Map(c);d&&b("MessengerParticipants.bs").getMulti(Array.from(d.keys()),function(a){a=Object.values(a);a=a;this.setState({approvalQueue:b("immutable").Map(a.map(function(a){return[a.id,this.$5(a,d)]}.bind(this)))})}.bind(this))}else a.approval_queue_ids&&b("MessengerParticipants.bs").getMulti(a.approval_queue_ids,function(a){this.setState({approvalQueue:b("immutable").Map(a)})}.bind(this))};a.prototype.$5=function(a,b){b=b.get(a.id);return{fbid:a.fbid,id:a.id,image_src:a.image_src,is_messenger_user:!!a.is_messenger_user,name:a.name,inviter_id:b&&b.inviter.id,requester_id:b&&b.requester.id,request_source:b&&Number(b.request_source),request_timestamp:b&&b.request_timestamp}};a.prototype.$2=function(){var a=this.props.thread,c=a.joinable_mode.link;return!b("MessengerAdminGroupUtils").showJoinableLink(a)?null:b("React").createElement("div",{className:"_3szn _3szo"},b("React").createElement("div",{className:"_3szq"},h._("Share the link"),b("React").createElement("div",{className:"_3ihp _3oh-"},c)))};a.prototype.$3=function(){var a=this.props,c=a.viewer,d=a.thread;a=b("MessengerAdminGroupUtils").isApprovalOpenThread(d);if(!b("MessengerAdminGroupUtils").showJoinableApprovalToggle(d,c))return null;c=b("MessengerAdminGroupUtils").isAdminRequired(d);var e=c?h._("Require Admin Approval"):h._("New member approval");c=c?null:b("React").createElement("div",{className:"_3ihp"},h._("Approve who can join the group"));return b("React").createElement("div",{className:"_3szn _3szo _2ya9"},b("React").createElement("div",{className:"_3szq"},e,c),b("React").createElement(b("FBToggleSwitch.react"),{animate:!0,"aria-label":e,checked:!a,onToggle:function(a){return j.setApprovalMode(a?b("MessengerApprovalModeTypes").APPROVALS:b("MessengerApprovalModeTypes").OPEN,d)}}))};a.prototype.$4=function(){var a=this.props,c=a.viewer,d=a.thread,e=d.thread_fbid;if(!e||!b("MessengerAdminGroupUtils").showApprovalQueue(d,c))return null;a=b("MessengerAdminGroupUtils").getPendingRequestNumber(d);c=b("MessengerAdminGroupUtils").isAdminRequired(d)?h._("Member Requests ({memberRequestCount})",[h._param("memberRequestCount",a)]):h._("Pending Requests ({pendingRequestCount})",[h._param("pendingRequestCount",a)]);return b("React").createElement(k,{customColor:this.props.thread.solid_color,isCollapsible:!0,isCollapsed:this.props.isApprovalsCollapsed,onToggle:this.props.onApprovalToggle,title:c},b("React").createElement("div",{className:"_3iho _3oh-"},this.state.approvalQueue.map(function(a){return a.fbid&&b("React").createElement(b("MessengerApprovalRequester.react"),{key:a.id,imageSRC:a.image_src,inviterFBID:a.inviter_id,requestSource:a.request_source,isAdminRequired:b("MessengerAdminGroupUtils").isAdminRequired(d),isMessengerUser:a.is_messenger_user,name:a.name,threadFBID:e,userFBID:a.fbid})}).toArray()))};e.exports=a}),null);
__d("MercuryGenericConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MAX_THREAD_NAME_LENGTH:250,MAX_GROUP_THREAD_DESCRIPTION_LENGTH:1e3})}),null);
__d("MessengerEditGroupThreadDescriptionDialogReact.bs",["cx","fbt","bs_curry","React","bs_string","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MercuryGenericConstants","MessengerDialogBodyReact.bs","MessengerTextWithEmojiInputReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerEditGroupThreadDescriptionDialogReact");function j(a,b){b[1][0][0]=a==null?0:[a];return 0}function a(a,c,d,e){__p&&__p();var f=function(a){if(a)return 0;else{d&&b("bs_curry")._1(d[0],0);return b("MessengerDialogs.bs").removeDialog(0)}},g=function(d,e){d=e[1][0][0];if(d){e=b("bs_string").trim(d[0].getValue());d=e===a;d||c&&b("bs_curry")._1(c[0],e)}return f(!1)};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(c){var d=b("ReasonReact.bs").element(0,[b("bs_curry")._1(c[0],j)],b("MessengerTextWithEmojiInputReact.bs").make(["_1n7c"],0,[b("MercuryGenericConstants").MAX_GROUP_THREAD_DESCRIPTION_LENGTH],0,[h._("What's this group about?")],[a],[!0],[]));return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](["_1cyb"],[f],0,0,0,0,[500],[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,h._("Edit Group Description"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(["_3yb4"],[b("React").createElement("div",{className:"_1cyc"},h._("Anyone with the group link will be able to see this description.")),d])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h._("Save")],0,0,[b("bs_curry")._1(c[0],g)],[0],0,0,[]))]))]))},function(){return[[0]]},i[10],function(a,b){return 0},i[12]]}f.component=i;f.setDescriptionInputRef=j;f.make=a}),null);
__d("MessengerTextWithEmoticonsReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerTextWithEmoticons.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerTextWithEmoticons.react"),{renderEmoji:b("bs_js_null_undefined").fromOption(a),renderEmoticons:b("bs_js_null_undefined").fromOption(c),text:b("bs_js_null_undefined").fromOption(d),customSize:b("bs_js_null_undefined").fromOption(e)},f)}f.make=a}),null);
__d("MessengerInfoPanelGroupThreadDescriptionSectionReact.bs",["cx","fbt","Keys.bs","bs_curry","React","ReasonReact.bs","MessengerDialogs.bs","LitestandEllipsis","MessengerTextWithEmoticonsReact.bs","MessengerEditGroupThreadDescriptionDialogReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelGroupThreadDescriptionSectionReact");function j(a,b){a=b[1][0][0];if(a)return a[0].focus();else return 0}function k(a,b){b[1][0][0]=a==null?0:[a];return 0}function l(a,b){b[1][1][0]=a==null?0:[a];return 0}function a(a,c,d,e){__p&&__p();e=d.description;var f=e==null?"":e,g=function(a){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerEditGroupThreadDescriptionDialogReact.bs").make(f,[c],[b("bs_curry")._1(a,j)],[]))})},m=function(a,b){a.preventDefault();return g(b[0])},n=function(a,c){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();return g(c[0])}else return 0};e=d.description;d=e==null?[h._("What's this group about?"),!0]:[b("ReasonReact.bs").element(0,0,b("MessengerTextWithEmoticonsReact.bs").make(0,0,[e],0,[])),!1];var o=d[1],p=d[0];return[i[0],i[1],i[2],i[3],i[4],function(a){a=a[1][1][1][0];if(a){b("LitestandEllipsis").add(a[0],65,null);return 0}else return 0},i[6],i[7],function(c){return b("React").createElement("div",{className:"_69d_"},b("React").createElement("div",{ref:b("bs_curry")._1(c[0],k),className:"_69e0"+(a?"":" disabled"),role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(c[0],n),onClick:b("bs_curry")._1(c[0],m)},b("React").createElement("div",{ref:b("bs_curry")._1(c[0],l),className:"_69e1 _69e2"+(o?" _69e3":"")},p)))},function(){return[[0],[0]]},i[10],function(a,b){return 0},i[12]]}f.component=i;f.handleDialogClose=j;f.setDescriptionRef=k;f.setDescriptionTextRef=l;f.make=a}),null);
__d("MessengerInfoPanelGroupThreadDescriptionContainerReact.bs",["cx","fbt","bs_curry","React","ReasonReact.bs","bs_js_primitive","MercuryThreadInfo","MessageRequestUtils","MercuryThreadActions","MessengerAdminGroupUtils","MessengerInfoPanelSectionReact.bs","MessagingThreadCustomizationSource","MessengerInfoPanelGroupThreadDescriptionSectionReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelGroupThreadDescriptionContainerReact");function j(a,c,d,e,f){__p&&__p();return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(f){__p&&__p();if(!d.is_subscribed||b("MessageRequestUtils").isMessageRequest(d))return null;else{var g=b("MessengerAdminGroupUtils").canUpdateThreadDescription(d,e),i=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeGroupThreadDescription(d.thread_id,c,b("MessagingThreadCustomizationSource").SETTINGS);return 0}};g=b("React").createElement("div",{className:"_4izw"},b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelGroupThreadDescriptionSectionReact.bs").make(g,b("bs_curry")._1(f[0],i),d,[])));return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").null_undefined_to_opt(d.solid_color),[!0],[a],[c],[h._("Group Description")],[g]))}},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.isCollapsed,a.onToggle,a.thread,a.viewer,[])});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerInfoPanelContactNameSectionReact.bs",["cx","React","ReasonReact.bs","bs_js_primitive","MessengerProfileLink.bs","MessengerLocalTimeReact.bs","MessengerPresenceStatusReact.bs","MessengerProfileLinkLocation"],(function(a,b,c,d,e,f,g){"use strict";var h=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelContactNameSectionReact");function a(a,c,d,e,f,g){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var g=a.title;return b("React").createElement("div",{className:"_2jnq"},f,b("React").createElement("div",{className:"_2jnt"},b("React").createElement("div",{className:"_3eur"},b("React").createElement("span",{className:"_3oh-"},b("ReasonReact.bs").element(0,0,b("MessengerProfileLink.bs").make(b("bs_js_primitive").null_undefined_to_opt(a.href),"_blank",b("MessengerProfileLinkLocation").INFOPANEL,a.name,a.fbid,[])))),g==null?null:b("React").createElement("span",{className:"_3eus"},g),b("React").createElement("div",{className:"_3eus"},b("ReasonReact.bs").element(0,0,b("MessengerPresenceStatusReact.bs").make(0,c,d,e,[]))),b("React").createElement("div",undefined,b("ReasonReact.bs").element(0,0,b("MessengerLocalTimeReact.bs").make("_5uh",b("bs_js_primitive").null_undefined_to_opt(a.timezone),[])))))},h[9],h[10],h[11],h[12]]}f.component=h;f.make=a}),null);
__d("MessengerThreadPhotoUploader.react",["cx","fbt","FileInput","FileInputUploader","Link.react","MercuryConfig","React","ReactDOM","SubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerThreadPhotoUploader",_fileInput:null,_subscriptions:null,_uploader:null,_uploadIsInProgress:!1,propTypes:{onComplete:a.func.isRequired,onFail:a.func,onStart:a.func,uri:a.string},getDefaultProps:function(){return{uri:b("MercuryConfig").upload_url}},componentDidMount:function(){var a=b("ReactDOM").findDOMNode(this.refs.input),c=new(b("FileInput"))(b("ReactDOM").findDOMNode(this.refs.form),b("ReactDOM").findDOMNode(this.refs.uploadButton),a);a=new(b("FileInputUploader"))(a).setURI(this.props.uri).setAllowCrossOrigin(!0).setAllowCrossPageTransition(!0).setData({images_only:!0});var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(a.subscribe("success",this._handleAllUploadsCompleted),a.subscribe("failure",this._handleLastUploadFailed));this._subscriptions=d;this._uploader=a;this._fileInput=c},componentWillUnmount:function(){this._uploadIsInProgress||this._doUnmountComponents()},render:function(){var a=h._("Click to change the image");return b("React").createElement("form",{action:this.props.uri,method:"post",ref:"form"},b("React").createElement("input",{type:"hidden",name:"attach_id",ref:"attachID"}),b("React").createElement("input",{type:"hidden",name:"images_only",value:"true"}),b("React").createElement("div",{className:"_m _4q60 _2lyy"},b("React").createElement(b("Link.react"),{className:"_4q61 _2lyz",ref:"uploadButton"},h._("edit")),b("React").createElement("input",{type:"file",className:"_n",name:"attachment[]",accept:".jpg,.png,.jpeg,.bmp,.tif,.tiff",ref:"input",onChange:this._handleFileInputChange,title:a})))},_handleAllUploadsCompleted:function(a,b){this._uploadIsInProgress=!1,this.props.onComplete&&this.props.onComplete(b.response.payload),this.isMounted()||this._doUnmountComponents()},_handleLastUploadFailed:function(a,b){this._uploadIsInProgress=!1,this.props.onFail&&this.props.onFail(b),this.isMounted()||this._doUnmountComponents()},_handleFileInputChange:function(a){a.target.value&&this._uploader&&(this._uploader.send(),this._uploadIsInProgress=!0,this.props.onStart&&this.props.onStart())},_doUnmountComponents:function(){this._subscriptions&&this._subscriptions.release(),this._fileInput&&this._fileInput.destroy(),delete this._subscriptions,delete this._uploader}});e.exports=c}),null);
__d("MessengerThreadPhotoUploaderReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerThreadPhotoUploader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadPhotoUploader.react"),{onComplete:a,onFail:b("bs_js_null_undefined").fromOption(c),onStart:b("bs_js_null_undefined").fromOption(d),uri:b("bs_js_null_undefined").fromOption(e)},f)}f.make=a}),null);
__d("MessengerInfoPanelThreadNameSectionReact.bs",["cx","fbt","Keys.bs","bs_block","bs_curry","React","bs_string","bs_caml_obj","ReasonReact.bs","setImmediate","MessengerButtonReact.bs","MessengerSpinnerReact.bs","MercuryGenericConstants","MercuryThreadTitleReact.bs","MessengerTextWithEmojiInputReact.bs","MessengerThreadPhotoUploaderReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,b){a=b[1][1][0];if(a)return a[0].focusInput();else return 0}function j(){return b("React").createElement("div",{className:"_2jnw"},b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,0,0,[])))}function k(a,b){a=b[1][2][0];if(a)return a[0].focus();else return 0}function l(a,b){b[1][1][0]=a==null?0:[a];return 0}function m(a,b){b[1][2][0]=a==null?0:[a];return 0}var n=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelThreadNameSectionReact");function a(a,c,d,e,f,g,o,p,q){__p&&__p();var r=function(a,d){a.stopPropagation();a=d[1][1][0];a&&b("bs_curry")._1(c,b("bs_string").trim(a[0].getValue()));return b("setImmediate")(b("bs_curry")._1(d[0],k))},s=function(c,a){if(c.currentTarget.contains(c.relatedTarget)){c.stopPropagation();return 0}else if(o>=2)return b("bs_curry")._1(g,0);else return b("bs_curry")._1(g,1)},t=function(a){return b("React").createElement("div",{className:"_2jnx",onBlur:b("bs_curry")._1(a[0],s)},b("React").createElement("div",{className:"_2jny"},b("ReasonReact.bs").element(0,[b("bs_curry")._1(a[0],l)],b("MessengerTextWithEmojiInputReact.bs").make(["_2jnz"],[b("bs_curry")._1(a[0],r)],[b("MercuryGenericConstants").MAX_THREAD_NAME_LENGTH],0,[h._("Name This Conversation")],[f.name],0,[]))),b("React").createElement("div",{className:"_2jn-"},b("ReasonReact.bs").element(0,0,b("MessengerButtonReact.bs").make(0,["button"],0,0,[b("bs_curry")._1(a[0],r)],0,0,0,0,h._("Done"),0,0,0,0,0,[]))))},u=function(d,c){d.stopPropagation();if(a&&o===1)return b("bs_curry")._1(g,0);else return 0},v=function(d,c){c=d.charCode;if(o!==1||!(c===b("Keys.bs").$$return||c===b("Keys.bs").space))return 0;else{d.preventDefault();d.stopPropagation();if(a)return b("bs_curry")._1(g,0);else return 0}};return[n[0],n[1],n[2],function(a){var c=a[3];if(c&&b("bs_caml_obj").caml_notequal(c[0],f.thread_id))return[!1,a[1],a[2],[f.thread_id],a[4]];else return a},n[4],function(a){a=a[0];var c=a[1][4];if(c!==1||o===1)return 0;else{setTimeout(b("bs_curry")._1(a[0],i),1);return 0}},n[6],n[7],function(c){var g=c[3],h=c[1],i=c[0],k=o!==1,l=h[0];return b("React").createElement("div",{className:"_2jnq"},b("React").createElement("div",{className:"_2jnr"+(h[0]?" _2jns":"")},e,l?j(0):null,a?b("ReasonReact.bs").element(0,0,b("MessengerThreadPhotoUploaderReact.bs").make(b("bs_curry")._1(c[0],function(c,a){a=a[1][3];a&&b("bs_curry")._1(d,[a[0],c]);return b("bs_curry")._1(g,0)}),[function(){return b("bs_curry")._1(g,1)}],[function(){return b("bs_curry")._1(g,[f.thread_id])}],0,[])):null),b("React").createElement("div",{ref:b("bs_curry")._1(i,m),className:"_2jnt"+(k?"":" _1sw_")+(a?"":" disabled"),role:k?"":"button",tabIndex:0,onKeyPress:b("bs_curry")._1(i,v),onClick:b("bs_curry")._1(i,u)},b("React").createElement("div",{className:"_2jnu"},k?t(c):b("ReasonReact.bs").element(0,0,b("MercuryThreadTitleReact.bs").make(["_2jnv"],0,f,p,0,[!1],[!1],0,[])))))},function(){return[!1,[0],[0],0,o]},n[10],function(a){if(typeof a==="number")return function(a){return b("bs_block").__(0,[[!1,a[1],a[2],0,a[4]]])};else{var c=a[0];return function(a){return b("bs_block").__(0,[[!0,a[1],a[2],[c],a[4]]])}}},n[12]]}f.focusThreadNameInput=i;f.renderSpinner=j;f.focusEditThreadNameButton=k;f.setRefThreadNameInput=l;f.setRefEditThreadNameButton=m;f.component=n;f.make=a}),null);
__d("MessengerPlatformAbuseReportType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SPAM:"spam",INAPPROPRIATE:"inappropriate",OTHER_ABUSE:"other_abuse"})}),null);
__d("XMNReportPageConversationActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger_platform/report_page_conversation/submit/",{page_id:{type:"FBID",required:!0},report_type:{type:"String",required:!0},surface:{type:"String"}})}),null);
__d("MNCommerceReportConversationDialog.react",["cx","fbt","AsyncRequest","Link.react","MercuryIDs","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogs.bs","MessengerEnvironment","MessengerParticipants.bs","MessengerPlatformAbuseReportType","MNCommerceDialogStateActions","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialogContainer.react","React","XMNReportPageConversationActionController","XUIRadioList.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("XUIRadioList.react").Item;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={error:!1,pageName:"",reportType:b("MessengerPlatformAbuseReportType").SPAM},this.$9=function(){this.$1();var a=function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)},c=this.props.pageID;b("MNCommerceDialogStateActions").showDialog(b("MNCommercePromotionManageBlockDialogContainer.react"),{pageID:c,onConfirmButtonClick:a})}.bind(this),this.$7=function(a){this.setState({reportType:a})}.bind(this),this.$1=function(){this.props.onToggle?this.props.onToggle():b("MessengerDialogs.bs").removeDialog()}.bind(this),this.$6=function(){var a=b("MessengerEnvironment").messengerui?"www_messenger":"www_chat_tabs";a=b("XMNReportPageConversationActionController").getURIBuilder().setFBID("page_id",this.props.pageID).setString("report_type",this.state.reportType).setString("surface",a).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(function(){this.$1()}.bind(this)).setErrorHandler(function(){this.setState({error:!0})}.bind(this)).send()}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){var a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(this.props.pageID));this.setState({pageName:a?a.short_name:""})};a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.$1},b("React").createElement(b("MessengerDialogHeader.react"),null,h._("Report")),this.$2(),this.$3())};a.prototype.$2=function(){var a=b("React").createElement("div",{className:"_5zjy"},h._("Help us understand what's happening:")),c=this.$4(),d=b("React").createElement("div",{className:"_5zjz"},h._("Reporting this conversation will also turn off all messages from {page name}.",[h._param("page name",this.state.pageName)])),e=this.$5();return this.state.error?b("React").createElement(b("MessengerDialogBody.react"),{className:"_5zj-"},h._("Sorry, Something went wrong.")):b("React").createElement(b("MessengerDialogBody.react"),{className:"_5zj_"},a,c,d,e)};a.prototype.$3=function(){var a=h._("Report"),c=h._("Cancel"),d=h._("OK");return this.state.error?b("React").createElement(b("MessengerDialogFooter.react"),{className:"_5zk0"},b("React").createElement(b("MessengerDialogButton.react"),{label:d,onClick:this.$1,type:"primary",use:"default"})):b("React").createElement(b("MessengerDialogFooter.react"),{className:"_5zk0"},b("React").createElement(b("MessengerDialogButton.react"),{label:c,type:"secondary",onClick:this.$1,use:"default"}),b("React").createElement(b("MessengerDialogButton.react"),{label:a,onClick:this.$6,type:"primary",use:"default"}))};a.prototype.$4=function(){return b("React").createElement(b("XUIRadioList.react"),{selectedValue:this.state.reportType,onValueChange:this.$7},b("React").createElement(j,{value:b("MessengerPlatformAbuseReportType").SPAM},h._("It's spam")),b("React").createElement(j,{value:b("MessengerPlatformAbuseReportType").INAPPROPRIATE},h._("It's inappropriate")),b("React").createElement(j,{value:b("MessengerPlatformAbuseReportType").OTHER_ABUSE},h._("Other")))};a.prototype.$5=function(){return b("React").createElement("div",{className:"_5zk1"},h._("To stop receiving messages without reporting {page name}, you can manage your messages instead.",[h._param("page name",this.state.pageName)]),this.$8())};a.prototype.$8=function(){return b("React").createElement(b("Link.react"),{className:"_5zk2",onClick:this.$9},h._("Manage"))};a.propTypes={pageID:c.string.isRequired,onToggle:c.func};e.exports=a}),null);
__d("MNCommerceReportConversationDialogReact.bs",["ReasonReact.bs","MNCommerceReportConversationDialog.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MNCommerceReportConversationDialog.react"),{pageID:a},c)}f.make=a}),null);
__d("MessengerDeleteDialogReact.bs",["fbt","bs_block","bs_curry","ReasonReact.bs","MessagingTag","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MessengerDeleteDialogReact");function a(a,c,d,e,f,i){__p&&__p();return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(h){return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,0,0,[h[1][0]],0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,g._("Delete Conversation"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[g._("This will permanently delete the conversation history.")])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[g._("Delete")],0,["danger"],[function(){b("bs_curry")._1(f,0);return b("bs_curry")._1(h[3],0)}],[0],0,0,[])),a===b("MessagingTag").INBOX?b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[g._("Archive")],0,["danger"],[function(a){b("bs_curry")._1(d,a);return b("bs_curry")._1(h[3],0)}],[0],0,0,[])):a===b("MessagingTag").PENDING?b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[c?g._("Ignore"):g._("Block")],0,["danger"],[function(){b("bs_curry")._1(e,0);return b("bs_curry")._1(h[3],0)}],[0],0,0,[])):null]))]))},function(){return[!0]},h[10],function(a,c){return b("bs_block").__(0,[[!1]])},h[12]]}f.component=h;f.make=a}),null);
__d("MessengerIgnoreDialogReact.bs",["cx","fbt","bs_curry","React","Utils.bs","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerIgnoreDialogReact");function j(a,c,d,e,f,g){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var g=function(){b("bs_curry")._1(a,0);return b("bs_curry")._1(c,!1)},i=d?[d[0].short_name]:0;if(!(e==null)){var j=new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_clicked").setThreadID(e).setPlatform("messengerdotcom");j.log()}return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,[c],0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,f?h._("Ignore group?"):h._("Ignore this conversation?"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[b("React").createElement("div",{className:"_1q73"},f?h._("You won't be notified when someone messages this group, and the group will move to Filtered Messages. We won't tell anyone in the group that the messages have been ignored."):h._("You won't be notified when {short_name_or_description} messages you directly, and the conversation will move to Filtered Messages. We won't tell {sameParam} that the messages have been ignored.",[h._param("short_name_or_description",b("Utils.bs").$pipe$unknown(i,h._("this person"))),h._param("sameParam",b("Utils.bs").$pipe$unknown(i,h._("this person")))]))])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h._("Ignore Messages")],0,["danger"],[g],[0],0,0,[]))]))]))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.onIgnore,a.onToggle,b("bs_js_primitive").null_undefined_to_opt(a.contact),a.threadID,a.isGroupChat,[])});c=b("Utils.bs").$pipe$unknown;f.$pipe$unknown=c;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerMarkSpamDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("messengerMarkSpamDialogReactComponent").__setRef("MessengerMarkSpamDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerMarkSpamDialogBootloaderReact.bs",["ReasonReact.bs","MessengerMarkSpamDialogBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMarkSpamDialogBootloader.react"),{onMarkSpam:a,onToggle:c},d)}f.make=a}),null);
__d("XNFXStartForMessageThreadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/start_message_thread/",{thread_fbid:{type:"String",required:!0},responsible_fbid:{type:"Int"},location:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("MessengerThreadlistRowActionsReact.bs",["cx","fbt","Keys.bs","bs_block","bs_curry","React","Utils.bs","gkx","bs_caml_obj","MercuryIDs","AsyncDialog","CurrentUser","ReasonReact.bs","joinClasses","AsyncRequest","bs_js_primitive","MessagingTag","MessengerDialogs.bs","MercuryThreadIDMap","MessengerMenuReact.bs","MessengerMuteDialogReact.bs","MessengerBlockDialogReact.bs","MessengerPopoverMenuReact.bs","MessengerDeleteDialogReact.bs","MessengerIgnoreDialogReact.bs","XNFXStartForMessageThreadController","MessengerMarkSpamDialogBootloaderReact.bs","MNCommerceReportConversationDialogReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(0)}function j(a){a.preventDefault();a.stopPropagation();return 0}var k=b("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerThreadlistRowActionsReact"),l="_5blh _4-0h",m="_5blh _4-0h _4-0i";function n(a,c,d,e,f,g,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L){__p&&__p();var M=a?a[0]:"",N=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerDeleteDialogReact.bs").make(K.folder,d,q,D,r,[]))})},O=function(){if(f)return b("bs_curry")._1(A,0);else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerMuteDialogReact.bs").make(w,[]))})},P=function(){if(p)if(B)return b("bs_curry")._1(B[0],0);else return 0;else if(x)return b("bs_curry")._1(x[0],0);else return 0},Q=function(){if(n)return b("bs_curry")._1(t,0);else return b("bs_curry")._1(v,0)},R=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerMarkSpamDialogBootloaderReact.bs").make(u,i,[]))})},S=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerIgnoreDialogReact.bs").make(C,i,c,K.thread_fbid,b("MercuryIDs").isGroupChat(K.thread_id),[]))})},T=function(){if(o)return b("bs_curry")._1(E,0);else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerBlockDialogReact.bs").make(D,c,K.thread_fbid,[]))})},U=function(){var a=b("MercuryThreadIDMap").get();a.getServerIDFromClientID(K.thread_id,function(a){b("AsyncDialog").send(new(b("AsyncRequest"))(b("XNFXStartForMessageThreadController").getURIBuilder().setString("thread_fbid",a).getURI()));return 0});return 0},V=function(){var a=K.other_user_fbid;if(a==null)return 0;else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MNCommerceReportConversationDialogReact.bs").make(a,[]))})},W=function(){return[S,T,N,Q,R,O,P,V,U]};return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],function(a){var b=a[1];a=a[0];if(b[2]||b[2]!==a[2])return!0;else return b[1]!==a[1]},function(a){__p&&__p();var c=a[1];if(g){var i=p?h._("Unpin"):h._("Pin"),k=e?d?h._("Leave Chat"):h._("Leave Room"):h._("Leave Group"),r=h._("Ignore Messages"),t=o?h._("Unblock Messages"):h._("Block Messages"),u=b("bs_caml_obj").caml_equal(K.other_user_fbid,b("CurrentUser").getID()),v=b("Utils.bs").isSomeTrue(H),w=b("Utils.bs").isSomeTrue(H),x=b("CurrentUser").isWorkUser()&&b("gkx")("AT4P8EeNU5psOznhIbc1cKhXCwNU-1iAmabZ7iBm-dOcgmsCEibyLc1ZZsOZGGQul_RlmIVlMxa-s5x-yiJ5uaFE"),z=K.is_archived,A=b("Utils.bs").isSomeTrue(I);if(u)u=null;else{var B=b("Utils.bs").isSomeTrue(I);u=B?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Report..."),[c[7]],0,[])):b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Report Spam or Abuse..."),[c[8]],0,[]))}B=!b("CurrentUser").isWorkUser()&&!o&&K.folder!==b("MessagingTag").OTHER&&(G||K.folder===b("MessagingTag").INBOX&&b("MercuryIDs").isGroupChat(K.thread_id));var C=!b("CurrentUser").isWorkUser()&&G;v=b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").Menu[0]([v?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Rename"),y,0,[])):null,w?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuSeparator[0]([])):null,x?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,i,[c[6]],0,[])):null,b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,f?h._("Unmute"):h._("Mute"),[c[5]],0,[])),b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),F?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,k,s,0,[])):null,z?null:b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Archive"),[q],0,[])),b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Delete"),[c[2]],0,[])),b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,n?h._("Mark as Read"):h._("Mark as Unread"),[c[3]],0,[])),A?null:b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,h._("Mark as Spam"),[c[4]],0,[])),u,B?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,r,[c[0]],0,[])):null,C?b("ReasonReact.bs").element(0,0,b("MessengerMenuReact.bs").MenuItem[0](0,t,[c[1]],0,[])):null]));w=M==="";x=w?m:b("joinClasses")(M,m);return b("React").createElement("div",{className:"_3d85"},b("ReasonReact.bs").element(0,[function(c){return b("bs_curry")._1(a[3],[c==null?0:[c]])}],b("MessengerPopoverMenuReact.bs").make(0,[!0],[g],v,[function(){return b("bs_curry")._1(a[3],1)}],0,[b("React").createElement("div",{ref:"button","aria-label":h._("Conversation actions"),className:x,role:"button",tabIndex:0,onClick:j})])))}else{i=M==="";k=i?l:b("joinClasses")(M,l);return b("React").createElement("div",{className:"_3d85"},b("React").createElement("div",{ref:"button","aria-label":h._("Conversation actions"),className:k,role:"button",tabIndex:J,onKeyUp:function(c){c=c.keyCode===b("Keys.bs").$$return;return b("bs_curry")._1(a[3],c?0:2)},onClick:function(){return b("bs_curry")._1(a[3],0)}}))}},W,g,function(c,a){__p&&__p();if(typeof c==="number")switch(c){case 0:return b("bs_block").__(2,[W(0),function(){return b("bs_curry")._1(z,!0)}]);case 1:return b("bs_block").__(1,[function(){return b("bs_curry")._1(z,!1)}]);case 2:return 0}else{a=c[0];if(a){var d=a[0];return b("bs_block").__(1,[function(){return d.showPopover()}])}else return 0}},k[12]]}a=b("ReasonReact.bs").wrapReasonForJs(k,function(a){var c=a.tabIndex;return n(b("bs_js_primitive").null_undefined_to_opt(a.className),b("bs_js_primitive").null_undefined_to_opt(a.contact),a.isGroupChat,a.isJoinableThread,a.isMuted,a.isOpen,a.isUnread,a.isBlocked,a.isPinned,a.onArchive,a.onDelete,b("bs_js_primitive").null_undefined_to_opt(a.onLeaveGroup),a.onMarkRead,a.onMarkSpam,a.onMarkUnread,a.onMute,[a.onPin],b("bs_js_primitive").null_undefined_to_opt(a.onRename),a.onToggle,a.onUnmute,[a.onUnpin],a.onIgnore,a.onBlock,a.onUnblock,a.showLeaveGroup,a.showBlock,b("bs_js_primitive").null_undefined_to_opt(a.showRename),b("bs_js_primitive").null_undefined_to_opt(a.showReport),c==null?-1:c,a.thread,[])});f.handleReasonDialogToggle=i;f.handleClick=j;f.component=k;f.actionButtonClassesClosed=l;f.actionButtonClassesOpen=m;f.make=n;f.jsComponent=a}),null);
__d("MessengerInfoPanelNameSectionReact.bs",["cx","bs_block","bs_curry","React","bs_caml_obj","ReasonReact.bs","bs_js_primitive","MercuryThreadInfo","MessengerAdminGroupUtils","MessengerThreadImageReact.bs","MessengerThreadlistRowActionsReact.bs","MessengerInfoPanelThreadNameSectionReact.bs","MessengerInfoPanelContactNameSectionReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelNameSectionReact");function i(a,b){b[1][2][0]=a==null?0:[a];return 0}function j(a,c,d){return b("React").createElement("div",{className:"_1jt8"},b("ReasonReact.bs").element(0,0,b("MessengerThreadImageReact.bs").make(0,0,0,0,[50],a,c,d,[])))}function k(a,c,d,e,f,g,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){__p&&__p();var F=function(c){var e=c[3],h=C.is_subscribed&&!C.is_canonical&&b("MessengerAdminGroupUtils").canUpdateThreadCustomization(C,D);return b("React").createElement("div",{className:"_3-ne"},b("ReasonReact.bs").element(0,0,b("MessengerThreadlistRowActionsReact.bs").make(0,a,b("MessengerAdminGroupUtils").isGroupChat(C),b("MessengerAdminGroupUtils").isJoinableThread(C),b("MercuryThreadInfo").isMuted(C),c[1][0],C.unread_count>0,d,C.is_pinned,p,f,g,k,l,m,n,[o],[function(){return b("bs_curry")._1(e,0)}],function(a){return b("bs_curry")._1(e,b("bs_block").__(1,[a]))},s,[w],t,u,v,A,x,[h],[B],0,C,[])))},G=function(a){return b("bs_curry")._2(r,a[0],a[1])};return[h[0],h[1],h[2],function(a){var c=b("bs_caml_obj").caml_equal(a[3],C.thread_id);if(c)return a;else return[a[0],1,a[2],C.thread_id]},h[4],h[5],h[6],h[7],function(d){__p&&__p();var f=C.is_subscribed||C.is_canonical,g;if(a)g=b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelContactNameSectionReact.bs").make(a[0],c,e,z,j(y,C,D),[]));else{var h=b("MessengerAdminGroupUtils").canUpdateThreadCustomization(C,D);g=b("ReasonReact.bs").element(0,[b("bs_curry")._1(d[0],i)],b("MessengerInfoPanelThreadNameSectionReact.bs").make(h,function(a){a!==C.name&&b("bs_curry")._1(q,a);return b("bs_curry")._1(d[3],1)},G,j(y,C,D),C,function(a){return b("bs_curry")._1(d[3],b("bs_block").__(0,[a]))},d[1][1],D,[]))}return b("React").createElement("div",{className:"_1jt6"},g,f?F(d):null)},function(){return[!1,1,[0],C.thread_id]},h[10],function(a,c){__p&&__p();if(typeof a==="number")if(a===0){var d=c[2][0];if(d)return b("bs_block").__(0,[[c[0],0,c[2],c[3]]]);else return 0}else return b("bs_block").__(0,[[c[0],1,c[2],c[3]]]);else if(a.tag)return b("bs_block").__(0,[[a[0],c[1],c[2],c[3]]]);else return b("bs_block").__(0,[[c[0],a[0],c[2],c[3]]])},h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return k(b("bs_js_primitive").null_undefined_to_opt(a.contact),a.isUserActive,a.isBlocked,b("bs_js_primitive").null_undefined_to_opt(a.lastActive),a.onDelete,b("bs_js_primitive").null_undefined_to_opt(a.onLeaveGroup),a.onMarkRead,a.onMarkSpam,a.onMarkUnread,a.onMute,a.onPin,a.onArchive,a.onThreadNameChange,a.onThreadPhotoChange,a.onUnmute,a.onIgnore,a.onBlock,a.onUnblock,a.onUnpin,a.showBlock,a.participants,b("bs_js_primitive").null_undefined_to_opt(a.platform),a.showLeaveGroup,a.showReport,a.thread,a.viewer,[])});c=50;f.component=h;f.imageSize=c;f.setThreadSectionRef=i;f.renderImage=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerMakeAsOwnerDialogReact.bs",["bs_curry","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerMakeAsOwnerDialogReact");function h(a,c,d,e,f,h){var i=function(d){b("bs_curry")._1(c,!1);if(a)return b("bs_curry")._1(a[0],d);else return 0};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){var a=b("MessengerAdminGroupUtils").getMakeOwnerTitleText(f,e),g=b("MessengerAdminGroupUtils").getMakeOwnerBodyText(f,e,d),h=b("MessengerAdminGroupUtils").getMakeOwnerButtonText(f,e);return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,[c],0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,a)),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[g])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h],0,["danger"],[i],[0],0,0,[]))]))]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(b("bs_js_primitive").null_undefined_to_opt(a.onMakeOwner),a.onToggle,a.name,a.isUserViewer,a.isAdminRequired,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerRemoveAsOwnerDialogReact.bs",["bs_curry","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerRemoveAsOwnerDialogReact");function h(a,c,d,e,f,h,i){var j=function(d){b("bs_curry")._1(c,!1);if(a)return b("bs_curry")._1(a[0],d);else return 0};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){var a=b("MessengerAdminGroupUtils").getRemoveOwnerTitleText(h),g=b("MessengerAdminGroupUtils").getRemoveOwnerBodyText(h,e,f,d),i=b("MessengerAdminGroupUtils").getRemoveOwnerButtonText(h);return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,[c],0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,a)),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[g])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[i],0,["danger"],[j],[0],0,0,[]))]))]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(b("bs_js_primitive").null_undefined_to_opt(a.onRemove),a.onToggle,a.name,a.isUserViewer,a.isLastAdminInThread,a.isAdminRequired,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerRemoveFromGroupDialogReact.bs",["fbt","bs_curry","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerRemoveFromGroupDialogReact");function i(a,c,d){var e=function(d){b("bs_curry")._1(c,!1);if(a)return b("bs_curry")._1(a[0],d);else return 0};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](0,[c],0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,g._("Remove from Group"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[g._("Are you sure you want to remove this person from the group? They will no longer be able to send or receive new messages")])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[g._("Remove")],0,["danger"],[e],[0],0,0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(b("bs_js_primitive").null_undefined_to_opt(a.onRemove),a.onToggle,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerInfoPanelContactActions.react",["cx","fbt","ImmutableObject","MercuryIDs","MessengerAdminGroupUtils","MessengerContactActions.bs","MessengerDialogs.bs","MessengerMakeAsOwnerDialogReact.bs","MessengerMenu.react","MessengerParticipants.bs","MessengerPopoverMenu.react","MessengerRemoveAsOwnerDialogReact.bs","MessengerRemoveFromGroupDialogReact.bs","MessengerState.bs","MessengerURIStore","React","ReactComponentWithPureRenderMixin","ShimButton.react","StoreAndPropBasedStateMixin","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactActions.bs").actions,j=b("MessengerMakeAsOwnerDialogReact.bs").jsComponent,k=b("MessengerRemoveAsOwnerDialogReact.bs").jsComponent,l=b("MessengerRemoveFromGroupDialogReact.bs").jsComponent,m=b("MessengerMenu.react").Item,n=b("MessengerMenu.react").Separator;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerInfoPanelContactActions",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MessengerURIStore"))],propTypes:{adminIds:a.arrayOf(a.string),extrasEnabled:a.bool.isRequired,contact:a.instanceOf(b("ImmutableObject")).isRequired,isAdminRequired:a.bool.isRequired,isOpen:a.bool,onAction:a.func.isRequired,onToggle:a.func.isRequired,viewer:a.string.isRequired},statics:{calculateState:function(a){var c=b("MessengerURIStore").getState().activeThreadID;a=c?b("MessengerState.bs").getThreadMetaNow(a.viewer,c):null;return{thread:a}}},render:function(){__p&&__p();var a=this._isViewerAdmin(),c=b("MessengerAdminGroupUtils").isAdmin(this.props.adminIds,this.props.contact.uid),d=this._isUserViewer(),e=b("MessengerAdminGroupUtils").canRemoveAdmin(a,c,this.state.thread)?b("React").createElement(m,{label:h._("Remove As Admin"),onclick:this._handleRemoveAsOwnerClick}):null,f=null;a=b("MessengerAdminGroupUtils").canMakeOthersAdmins(a,c,this.state.thread);c=b("MessengerAdminGroupUtils").canMakeSelfAdmin(d,this.state.thread);(a||c)&&(f=b("React").createElement(m,{label:h._("Make Admin"),onclick:this._hanleMakeOwnerClick}));if(d)if(f||e)a=b("React").createElement(b("MessengerMenu.react"),null,f,e);else return null;else a=b("React").createElement(b("MessengerMenu.react"),null,b("React").createElement(m,{label:h._("Message"),onclick:this._makeActionHandler(i.MESSAGE)}),this.props.contact.href?b("React").createElement(m,{label:h._("View Profile"),onclick:this._makeActionHandler(i.PROFILE)}):null,f,e,this._renderExtras());return b("React").createElement(b("MessengerPopoverMenu.react"),{menu:a,onHide:function(){return this.props.onToggle(!1)}.bind(this),onShow:function(){return this.props.onToggle(!0)}.bind(this)},b("React").createElement(b("ShimButton.react"),{className:b("joinClasses")(this.props.className,"_57gs"+(this.props.isOpen?" _57gt":"")),onClick:this._handleClick}))},_renderExtras:function(){if(!this.props.extrasEnabled)return null;var a=[b("React").createElement(n,{key:"separator"})],c=this._isViewerAdmin();b("MessengerAdminGroupUtils").canRemoveFromGroup(c,this.state.thread)&&a.push(b("React").createElement(m,{key:"remove-from-group",label:h._("Remove from Group"),onclick:this._handleRemoveClick}));return a.length>=2?a:null},_handleClick:function(a){a.stopPropagation(),a.preventDefault()},_makeActionHandler:function(a){return function(b){this._handleClick(b),this.props.onAction(a,b)}.bind(this)},_handleRemoveClick:function(a){this._handleClick(a),b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(l,{onToggle:this._handleDialogToggle,onRemove:this._handleDialogRemoveClick})}.bind(this))},_handleRemoveAsOwnerClick:function(a){this._handleClick(a);var c=b("MessengerParticipants.bs").getNow(this.props.contact.uid);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(k,{isAdminRequired:this.props.isAdminRequired,isLastAdminInThread:this.props.adminIds&&this.props.adminIds.length===1,isUserViewer:this._isUserViewer(),name:c&&c.name,onToggle:this._handleDialogToggle,onRemove:this._handleOwnerRemoveClick})}.bind(this))},_handleDialogRemoveClick:function(a){this.props.onAction(i.REMOVE,a)},_handleOwnerRemoveClick:function(a){this.props.onAction(i.REMOVE_OWNER,a)},_hanleMakeOwnerClick:function(a){this._handleClick(a);var c=b("MessengerParticipants.bs").getNow(this.props.contact.uid);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{onToggle:this._handleDialogToggle,onMakeOwner:this._handleOwnerAddClick,name:c&&c.name,isAdminRequired:this.props.isAdminRequired,isUserViewer:this._isUserViewer()})}.bind(this))},_handleOwnerAddClick:function(a){this.props.onAction(i.ADD_OWNER,a)},_handleDialogToggle:function(a){a||b("MessengerDialogs.bs").removeDialog()},_isUserViewer:function(){return b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)===this.props.contact.uid},_isViewerAdmin:function(){return b("MessengerAdminGroupUtils").isAdmin(this.props.adminIds,this.props.viewer)}});e.exports=c}),null);
__d("MessengerSortParticipants",[],(function(a,b,c,d,e,f){a={sortAlphabeticalWithAdmins:function(a,b){var c=b.filter(function(b){return!!b&&a&&a.indexOf(b.fbid)!==-1}).toArray().sort(function(a,b){return a.name.localeCompare(b.name)});b=b.filter(function(b){return!!b&&(!a||a.indexOf(b.fbid)===-1)}).toArray().sort(function(a,b){return a.name.localeCompare(b.name)});return c.concat(b)}};e.exports=a}),null);
__d("MessengerInfoPanelPeopleSection.react",["ix","cssVar","cx","fbt","CurrentUser","Image.react","ImmutableObject","Link.react","MessageRequestUtils","MessengerAddIconSVGReact.bs","MessengerAdminGroupUtils","MessengerContactList.react","MessengerInfoPanelContactActions.react","MessengerInfoPanelSectionReact.bs","MessengerSortParticipants","React","asset","immutable"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("MessengerAddIconSVGReact.bs").jsComponent,m=b("MessengerInfoPanelSectionReact.bs").jsComponent;c=b("React").PropTypes;k=babelHelpers.inherits(a,b("React").PureComponent);k&&k.prototype;a.prototype.render=function(){var a=this.props,c=a.adminIds,d=a.contactAdapter,e=a.isCollapsed,f=a.isViewerSubscribed,g=a.onContactAction,h=a.onContactSelect,i=a.onToggle,k=a.participants,l=a.thread;a=a.viewer;return b("React").createElement(m,{customColor:this.props.thread.solid_color,isCollapsible:!0,isCollapsed:e,onToggle:i,title:j._("People")},this.$1(),b("React").createElement(b("MessengerContactList.react"),{actionsClass:b("MessengerInfoPanelContactActions.react"),className:"_4wc-",contactAdapter:d,disableRole:!0,extraActionsEnabled:f,listSections:b("immutable").OrderedMap([[null,b("MessengerSortParticipants").sortAlphabeticalWithAdmins(c,k)]]),onSelect:h,onAction:g,viewer:a,adminIds:c,thread:l}))};a.prototype.$1=function(){if(!this.props.canViewerReply||b("MessageRequestUtils").isMessageRequest(this.props.thread))return null;var a=b("MessengerAdminGroupUtils").shouldInvite(this.props.thread)?j._("Invite"):j._("Add People"),c=this.props.thread.solid_color||(b("CurrentUser").isWorkUser()?"#373e4c":"#0084ff");c=b("CurrentUser").isWorkUser()?b("React").createElement("div",{className:"_3-8n _3-8u"},b("React").createElement(b("Image.react"),{src:g("461758")})):b("React").createElement(l,{className:"_4rpi",customColor:c});return b("React").createElement(b("Link.react"),{className:"_4rph",onClick:this.props.onAddPeopleClick},c,b("React").createElement("div",{className:"_4rpj"},a))};function a(){k.apply(this,arguments)}a.propTypes={adminIds:c.arrayOf(c.string),canViewerReply:c.bool.isRequired,contactAdapter:c.func.isRequired,isCollapsed:c.bool.isRequired,isViewerSubscribed:c.bool.isRequired,onAddPeopleClick:c.func.isRequired,onContactAction:c.func.isRequired,onContactSelect:c.func.isRequired,onToggle:c.func.isRequired,participants:c.instanceOf(b("immutable").Map).isRequired,thread:c.instanceOf(b("ImmutableObject")).isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("MessengerCustomThreadColorButtonReact.bs",["cx","fbt","Keys.bs","bs_curry","React","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("selected"),j=b("ReasonReact.bs").statelessComponent("MessengerCustomThreadColorButton");function k(a,c,d,e,f){__p&&__p();var g=function(d,c){d.preventDefault();return b("bs_curry")._1(e,a)},h=function(d,c){if(d.keyCode===b("Keys.bs").$$return){d.preventDefault();return b("bs_curry")._1(e,a)}else return 0};return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(e){return b("React").createElement("div",{"aria-label":d?c+(", "+i):c,className:"_5dr3",role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(e[0],h),onClick:b("bs_curry")._1(e[0],g)},b("React").createElement("div",{className:"_5dr4",style:{backgroundColor:a}}))},j[9],j[10],j[11],j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.colorChoice,a.colorName,a.isSelected,a.onChoose,[])});f.selectedText=i;f.component=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerChangeColorDialogReact.bs",["ix","cx","fbt","cssVar","bs_array","bs_block","bs_curry","React","bs_string","GridReact.bs","bs_belt_Array","ImageReact.bs","fbglyph","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","MessagingThreadCustomizationConfig","MessengerCustomThreadColorButtonReact.bs"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("ReasonReact.bs").reducerComponent("MessengerChangeColorDialogReact"),l="Unknown Color";function a(a,c,d,e){__p&&__p();var f=function(a){if(a)return 0;else{b("bs_curry")._1(d,0);return b("MessengerDialogs.bs").removeDialog(0)}};return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],function(c){var d=b("bs_array").concat([["#0084ff"],[b("MessagingThreadCustomizationConfig").colorChoices,0]]);d=b("bs_belt_Array").map(d,function(d){var e=b("MessagingThreadCustomizationConfig").colorNames[d];e=e!==undefined?e:l;var f=b("bs_string").lowercase(d)===b("bs_string").lowercase(a);return b("ReasonReact.bs").element([d],0,b("GridReact.bs").Item[0](["_gs0"],0,0,[b("React").createElement("div",undefined,f?b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(["_gs2"],0,0,0,[g("140201")],0,0,0,0,[])):null,b("ReasonReact.bs").element(0,0,b("MessengerCustomThreadColorButtonReact.bs").make(d,e,f,function(a){return b("bs_curry")._1(c[3],[a])},[])))]))});return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](["_gs3"],[f],0,[c[1][0]],0,0,[335],[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,i._("Pick a color for this conversation"))),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[b("React").createElement("div",{className:"_28he"},i._("Everyone in this conversation will see this.")),b("ReasonReact.bs").element(0,0,b("GridReact.bs").Grid[0](["_gs4"],5,0,0,0,0,0,d))])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[]))]))]))},function(){return[!0]},k[10],function(e,d){var f=e[0];if(f!==a)return b("bs_block").__(2,[[!1],function(){return b("bs_curry")._1(c,f)}]);else return b("bs_block").__(0,[[!1]])},k[12]]}f.component=k;f.unknownColor=l;f.make=a}),null);
__d("MessengerChangeColorIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"-1 -1 47 47"},b("React").createElement("title",undefined,"colors@2x"),b("React").createElement("path",{d:"M912,1569a3,3,0,1,1-3,3A3,3,0,0,1,912,1569Z",fill:c,transform:"translate(-895.5 -1561.5)"}),b("React").createElement("path",{d:"M924,1569a3,3,0,1,1-3,3A3,3,0,0,1,924,1569Z",fill:c,transform:"translate(-895.5 -1561.5)"}),b("React").createElement("path",{d:"M931,1579a3,3,0,1,1-3,3A3,3,0,0,1,931,1579Z",fill:c,transform:"translate(-895.5 -1561.5)"}),b("React").createElement("path",{d:"M905,1579a3,3,0,1,1-3,3A3,3,0,0,1,905,1579Z",fill:c,transform:"translate(-895.5 -1561.5)"}),b("React").createElement("path",{d:"M918,1562a22,22,0,0,0,0,44,3.67,3.67,0,0,0,2.71-6.14,3.65,3.65,0,0,1,2.74-6.09h4.33A12.23,12.23,0,0,0,940,1581.56C940,1570.75,930.15,1562,918,1562Z",fill:"transparent",stroke:c,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4%",transform:"translate(-895.5 -1561.5)"})))}f.make=a}),null);
__d("MessengerInfoPanelCustomColorReact.bs",["cx","fbt","Keys.bs","bs_curry","React","ReasonReact.bs","MessengerDialogs.bs","MessengerCustomColorUtils.bs","MessengerChangeColorDialogReact.bs","MessengerChangeColorIconSVGReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelCustomColorReact");function j(a,b){a=b[1][0][0];if(a)return a[0].focus();else return 0}function k(a,b){b[1][0][0]=a==null?0:[a];return 0}function a(a,c,d){__p&&__p();var e=function(d){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerChangeColorDialogReact.bs").make(b("MessengerCustomColorUtils.bs").customColorOrBlue(a),c,b("bs_curry")._1(d,j),[]))})},f=function(a,b){a.preventDefault();return e(b[0])},g=function(a,c){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();return e(c[0])}else return 0};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(c){if(a.customization_enabled){var d=b("MessengerCustomColorUtils.bs").customColorOrBlue(a);return b("React").createElement("div",{ref:b("bs_curry")._1(c[0],k),className:"_3szn _3szo",tabIndex:0,onKeyDown:b("bs_curry")._1(c[0],g),onClick:b("bs_curry")._1(c[0],f)},b("React").createElement("div",{className:"_3szp"},b("MessengerChangeColorIconSVGReact.bs").make("_17vc",d)),b("React").createElement("div",{className:"_3szq"},h._("Change Color")))}else return null},function(){return[[0]]},i[10],function(a,b){return 0},i[12]]}f.component=i;f.handleDialogClose=j;f.setTheRef=k;f.make=a}),null);
__d("MessengerInfoPanelEmoji.react",["ix","cx","fbt","Bootloader","CurrentUser","EmojiLikeConstants","Image.react","ImmutableObject","Keys","MercuryShareAttachmentRenderLocations","MessengerDialogs.bs","MessengerHotLikeOutlineSVG.react","MessengerSupportedEmojiUtils","React","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$2=function(event){event.preventDefault(),this.$5()}.bind(this),this.$3=function(event){event.keyCode===b("Keys").RETURN&&(event.preventDefault(),this.$5())}.bind(this),this.$6=function(){this.$1&&this.$1.focus()}.bind(this),this.$4=function(a){this.$1=a}.bind(this),c}a.prototype.render=function(){if(!this.props.thread.customization_enabled)return null;var a=this.props.thread.custom_like_icon&&this.props.thread.custom_like_icon.emoji?b("MessengerSupportedEmojiUtils").getNewEmojiData(this.props.thread.custom_like_icon.emoji,b("EmojiLikeConstants").size.SMALL):null;a=a&&a.url?b("React").createElement(b("Image.react"),{src:a.url,className:"_12cp"}):b("CurrentUser").isWorkUser()?b("React").createElement(b("Image.react"),{src:g("470537")}):b("React").createElement(b("MessengerHotLikeOutlineSVG.react"),{className:"_12cq",color:this.props.thread.solid_color?this.props.thread.solid_color:"",height:"60%",location:b("MercuryShareAttachmentRenderLocations").MESSENGER});return b("React").createElement("div",{className:"_3szn _3szo",onClick:this.$2,onKeyDown:this.$3,ref:this.$4,role:"button",tabIndex:"0"},b("React").createElement("div",{className:"_3szp"},a),b("React").createElement("div",{className:"_3szq"},i._("Change Emoji")))};a.prototype.$5=function(){b("Bootloader").loadModules(["MessengerChangeEmojiDialogReact.bs"],function(a){var c=a.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(c,{currentEmoji:this.props.thread.custom_like_icon?this.props.thread.custom_like_icon.emoji:String.fromCodePoint.apply(String,b("EmojiLikeConstants").FB_THUMBS_UP_EMOJI),onClose:this.$6,onSave:this.props.onChange})}.bind(this))}.bind(this),"MessengerInfoPanelEmoji.react")};a.propTypes={thread:c.instanceOf(b("ImmutableObject")).isRequired,viewer:c.string.isRequired,onChange:c.func.isRequired};e.exports=a}),null);
__d("MessengerInfoPanelEmojiReact.bs",["ReasonReact.bs","MessengerInfoPanelEmoji.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerInfoPanelEmoji.react"),{thread:a,viewer:c,onChange:d},e)}f.make=a}),null);
__d("MessengerInfoPanelCreateGroupLinkReact.bs",["ix","cx","fbt","cssVar","React","asset","ImageReact.bs","CurrentUser","ReasonReact.bs","MessageRequestUtils","MessengerAddIconSVGReact.bs"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelCreateGroupLinkReact");function l(a,c,d,e){__p&&__p();return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],function(){__p&&__p();if(!a||b("MessageRequestUtils").isMessageRequest(d))return null;else{var e=i._("Create Group"),f=d.solid_color;if(f==null){var h=b("CurrentUser").isWorkUser();h=h?"#373e4c":"#0084ff"}else h=f;f=b("CurrentUser").isWorkUser();f=f?b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[g("571863")],0,0,0,0,[])):b("ReasonReact.bs").element(0,0,b("MessengerAddIconSVGReact.bs").make("_6fku",h,[]));return b("React").createElement("div",{className:"_3szn _3szo",role:"button",tabIndex:0,onClick:c},b("React").createElement("div",{className:"_3szp"},f),b("React").createElement("div",{className:"_3szq _6fkv"},e))}},k[9],k[10],k[11],k[12]]}a=b("ReasonReact.bs").wrapReasonForJs(k,function(a){return l(a.canViewerReply,a.onAddPeopleClick,a.thread,[])});f.component=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerInfoPanelEscalateToGroupReact.bs",["bs_curry","ReasonReact.bs","MessengerView","SearchableEntry","MessengerActions","MercuryThreadInfo","MessengerComposerActions","MessengerInfoPanelCreateGroupLinkReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelEscalateToGroup");function a(a,b){return{uniqueID:a,title:b}}function c(a,c,d,e){__p&&__p();var f=function(a,e){__p&&__p();a=d.filter(function(d,a,b){if(d==null)return!1;else return d.fbid!==c});a.forEach(function(d,a,c){a={uniqueID:d.fbid,title:d.name};c=new(b("SearchableEntry"))(a);b("MessengerComposerActions").addToken(c);return 0});b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);return 0};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(c){if(a.is_canonical){var d=b("MercuryThreadInfo").canReply(a);return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelCreateGroupLinkReact.bs").make(d,b("bs_curry")._1(c[0],f),a,[]))}else return null},g[9],g[10],g[11],g[12]]}f.component=g;f.searchableEntryData=a;f.make=c}),null);
__d("MNCommercePromotionManageBlockDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("MNCommercePromotionManageBlockDialogContainer.react").__setRef("MNCommercePromotionManageBlockDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("ShimButtonReact.bs",["ReasonReact.bs","ShimButton.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("ShimButton.react"),{className:b("bs_js_null_undefined").fromOption(a),inline:b("bs_js_null_undefined").fromOption(c),onClick:b("bs_js_null_undefined").fromOption(d)},e)}f.make=a}),null);
__d("MessengerInfoPanelManageMessagesReact.bs",["cx","fbt","React","MercuryIDs","ReasonReact.bs","ShimButtonReact.bs","MessengerParticipants.bs","MNCommerceDialogStateActions","MNCommercePromotionManageBlockDialogBootloader.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelManageMessagesReact");function j(a){a=b("MercuryIDs").getParticipantIDFromFromThreadID(a.thread_id);if(a==null)return!1;else{a=b("MessengerParticipants.bs").getNow(a);if(a==null)return!1;else return a.is_business_enabled}}function a(a,c,d){var e=function(c){c.preventDefault();c.stopPropagation();b("MNCommerceDialogStateActions").showDialog(b("MNCommercePromotionManageBlockDialogBootloader.react"),{pageID:a.other_user_fbid});return 0};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){if(j(a))return b("React").createElement("div",{className:"_3szn _3szo"},b("React").createElement("div",{className:"_3szp"}),b("ReasonReact.bs").element(0,0,b("ShimButtonReact.bs").make(["_3szq"],[!0],[e],[h._("Manage Messages")])));else return null},i[9],i[10],i[11],i[12]]}f.component=i;f.isBusinessEnabled=j;f.make=a}),null);
__d("MessengerInfoPanelManageReview.react",["cx","fbt","Bootloader","ImmutableObject","MercuryIDs","MessengerParticipants.bs","MNCommerceDialogStateActions","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(event){event.preventDefault(),b("Bootloader").loadModules(["MNCommerceReviewDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{pageID:this.props.thread.other_user_fbid,onConfirmButtonClick:this.$3})}.bind(this),"MessengerInfoPanelManageReview.react")}.bind(this),c}a.prototype.render=function(){return!this.$1()?null:b("React").createElement("div",{className:"_3szn _3szo"},b("React").createElement("div",{className:"_3szp"}),b("React").createElement(b("ShimButton.react"),{className:"_3szq",inline:!0,onClick:this.$2},h._("Leave Feedback")))};a.prototype.$1=function(){var a=b("MercuryIDs").getParticipantIDFromFromThreadID(this.props.thread.thread_id);if(!a)return!1;a=b("MessengerParticipants.bs").getNow(a);return!!(a&&a.accepts_messenger_user_feedback)};a.prototype.$3=function(a,c,d){if(c===0)return;b("Bootloader").loadModules(["MessengerPlatformBotReviewWriteDataManager"],function(b){b.review(a,c,d.trim())},"MessengerInfoPanelManageReview.react")};a.propTypes={thread:c.instanceOf(b("ImmutableObject")).isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("MessengerInfoPanelManageReviewReact.bs",["ReasonReact.bs","MessengerInfoPanelManageReview.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerInfoPanelManageReview.react"),{thread:a,viewer:c},d)}f.make=a}),null);
__d("MessengerContactListReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerContactList.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("MessengerContactList.react"),{contactAdapter:b("bs_js_null_undefined").fromOption(a),disableRole:b("bs_js_null_undefined").fromOption(c),listSections:d,onSelect:b("bs_js_null_undefined").fromOption(e),rowClassName:b("bs_js_null_undefined").fromOption(f),viewer:g,thread:b("bs_js_null_undefined").fromOption(h)},i)}f.make=a}),null);
__d("MessengerEditNicknameDialogReact.bs",["cx","fbt","bs_curry","React","MercuryIDs","ReasonReact.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","MessengerTextWithEmojiInputReact.bs","MessagingThreadCustomizationConfig"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerEditNicknameDialogReact");function j(a,b){b[1][0][0]=a==null?0:[a];return 0}function a(a,c,d,e,f,g){__p&&__p();var k=function(f,g){f=g[1][0][0];g=f?[f[0].getValue()]:0;f=0;g&&(g[0]===""?c&&(f=1):f=1);if(f===1&&g!==c){f=b("MercuryIDs").getUserIDFromParticipantID(a.id);f==null||b("bs_curry")._1(d,[f,g[0]])}return b("bs_curry")._1(e,!1)};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(d){var e=a.name,g=b("MercuryIDs").getUserIDFromParticipantID(a.id),i,l=0;!(g==null)&&g===f?i=h._("Edit Your Nickname"):l=1;l===1&&(i=h._("Edit Nickname for {personName}",[h._param("personName",e)]));return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](["_2c1u"],0,0,0,0,0,[400],[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,i)),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(0,[b("React").createElement("div",{className:"_-bo"},h._("Everyone in this conversation will see this.")),b("ReasonReact.bs").element(0,[b("bs_curry")._1(d[0],j)],b("MessengerTextWithEmojiInputReact.bs").make(["_2c1v"],[b("bs_curry")._1(d[0],k)],[b("MessagingThreadCustomizationConfig").maxNicknameLength],0,[e],c,0,[]))])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Footer[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Button[0](0,[h._("Save")],0,0,[b("bs_curry")._1(d[0],k)],[0],0,0,[]))]))]))},function(){return[[0]]},i[10],function(a,b){return 0},i[12]]}f.component=i;f.setInput=j;f.make=a}),null);
__d("MessengerEditNicknamesDialogReact.bs",["cx","fbt","bs_curry","immutable","MercuryIDs","ReasonReact.bs","bs_js_primitive","ImmutableObject","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs","MessengerContactListReact.bs","MessengerEditNicknameDialogReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,c){var d=b("MercuryIDs").getUserIDFromParticipantID(c.id),e;if(d==null)e=[c.name,""];else if(a==null)e=[c.name,""];else{a=a[d];e=a!==undefined?[a,c.name]:[c.name,""]}return new(b("ImmutableObject"))({alias:c.vanity,uid:c.id,photo:c.image_src,title:e[0],subtitle:e[1],type:c.type,isMessengerUser:c.is_messenger_user,href:c.href,isWorkUser:undefined,timezone:undefined,participants:undefined,thread:undefined})}var j=b("ReasonReact.bs").statelessComponent("MessengerEditNicknamesDialogReact");function a(a,c,d,e,f,g){__p&&__p();var k=function(a){if(a)return 0;else{b("bs_curry")._1(e,0);return b("MessengerDialogs.bs").removeAllDialogs(0)}},l=function(e,a){a=b("MercuryIDs").getUserIDFromParticipantID(e.id);var g=c.custom_nickname,h=!(a==null)&&!(g==null)?b("bs_js_primitive").undefined_to_opt(g[a]):0;return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerEditNicknameDialogReact.bs").make(e,h,d,k,f,[]))})};return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){__p&&__p();var d=a.filter(function(d,a,e){__p&&__p();if(d==null)return!1;else{a=b("MessengerAdminGroupUtils").isJoinableThread(c);e=b("MercuryIDs").getUserIDFromParticipantID(d.id);if(a)if(e==null)return!1;else return e===f;else return!0}}).toArray(),e=c.custom_nickname;return b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Dialog[0](["_4h9n"],[k],0,0,0,["default"],[350],[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Header[0](0,0,[b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").CancelButton[0](0,[])),b("ReasonReact.bs").element(0,0,b("MessengerDialogReact.bs").Title[0](0,[h._("Edit Nicknames")]))])),b("ReasonReact.bs").element(0,0,b("MessengerDialogBodyReact.bs").make(["_4h9o"],[b("ReasonReact.bs").element(0,0,b("MessengerContactListReact.bs").make([function(a){return i(e,a)}],[!0],b("immutable").OrderedMap([[null,d]]),[l],["_44kr"],f,[c],[]))]))]))},j[9],j[10],j[11],j[12]]}f.fromMercuryParticipant=i;f.component=j;f.make=a}),null);
__d("MessengerEditNicknamesIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"0 0 38 37.01"},b("React").createElement("title",undefined,"nicknames"),b("React").createElement("path",{d:"M899,1204h38v2H899v-2Z",fill:c,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),b("React").createElement("path",{d:"M927.57,1172.17l-22.32,22.36-0.72,5,5-.72,22.32-22.36ZM908.8,1196.6l-1.41-1.41L929,1173.61l1.41,1.41Z",fill:c,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),b("React").createElement("path",{d:"M932.93,1175.36l2.07-2.13a6,6,0,0,0-1.33-3,5.72,5.72,0,0,0-2.91-1.28l-2.07,2.13Z",fill:c,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"})))}f.make=a}),null);
__d("MessengerInfoPanelNicknamesReact.bs",["ix","cx","fbt","Keys.bs","bs_curry","React","asset","ImageReact.bs","CurrentUser","ReasonReact.bs","MessengerDialogs.bs","MessengerCustomColorUtils.bs","MessengerEditNicknamesDialogReact.bs","MessengerEditNicknamesIconSVGReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,b){a=b[1][0][0];if(a)return a[0].focus();else return 0}function k(a,b){b[1][0][0]=a==null?0:[a];return 0}var l=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelNicknamesReact");function a(a,c,d,e,f){__p&&__p();var h=function(f){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerEditNicknamesDialogReact.bs").make(a,c,e,b("bs_curry")._1(f[0],j),d,[]))})},m=function(a,b){a.preventDefault();return h(b)},n=function(a,c){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();return h(c)}else return 0};return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],function(a){if(c.customization_enabled){var d=b("MessengerCustomColorUtils.bs").customColorOrBlue(c),e=b("CurrentUser").isWorkUser();return b("React").createElement("div",{ref:b("bs_curry")._1(a[0],k),className:"_3szn _3szo",role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(a[0],n),onClick:b("bs_curry")._1(a[0],m)},b("React").createElement("div",{className:"_3szp"},e?b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[g("461749")],0,0,0,0,[])):b("MessengerEditNicknamesIconSVGReact.bs").make("_5odt",d)),b("React").createElement("div",{className:"_3szq"},i._("Edit Nicknames")))}else return null},function(){return[[0]]},l[10],function(a,b){return 0},l[12]]}f.handleDialogClose=j;f.setHandleRef=k;f.component=l;f.make=a}),null);
__d("WorkChatNewBadgeReactBootloader.bs",["bs_block","bs_curry","React","Bootload.bs","Bootloader","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableWorkChatNewBadgeReact.bs"],a,"WorkChatNewBadgeReactBootloader.bs");return 0}d=[a];var g=b("Bootload.bs").Create(d),h=b("ReasonReact.bs").reducerComponent("WorkChatNewBadgeReactBootloader");function i(a,c){return b("bs_curry")._1(a[3],[c])}function c(){return[h[0],h[1],h[2],h[3],function(a){return b("bs_curry")._1(g[0],function(b){return i(a,b)})},h[5],h[6],h[7],function(a){a=a[1][0];if(a)return b("ReasonReact.bs").element(0,0,b("bs_curry")._1(a[0][1],[]));else return b("React").createElement("div",undefined)},function(){return[0]},h[10],function(a,c){return b("bs_block").__(0,[[[a[0]]]])},h[12]]}f.BootloadableWorkChatNewBadgeReact=d;f.LoadableWorkChatNewBadgeReact=g;f.component=h;f.handleNewBadgeLoad=i;f.make=c}),null);
__d("MessengerInfoPanelPinningThreadReact.bs",["ix","cx","fbt","bs_curry","React","gkx","asset","ImageReact.bs","CurrentUser","ReasonReact.bs","MercuryThreadActions","MercuryOrderedThreadlist","ChatPinnedThreadsEntryPoint","WorkChatNewBadgeReactBootloader.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelPinningThreadReact");function a(a,c,d){__p&&__p();var e=function(d,e){d=a.is_pinned;if(d){b("MercuryThreadActions").getForFBID(c).unpin(a.thread_id,b("ChatPinnedThreadsEntryPoint").INFO_PANEL_SECTION_ITEM);return 0}else{b("MercuryThreadActions").getForFBID(c).pin(a.thread_id,b("ChatPinnedThreadsEntryPoint").INFO_PANEL_SECTION_ITEM);return 0}};d=a.is_pinned;var f=d?i._("Unpin Conversation"):i._("Pin Conversation"),h=b("CurrentUser").isWorkUser()&&b("gkx")("AT4P8EeNU5psOznhIbc1cKhXCwNU-1iAmabZ7iBm-dOcgmsCEibyLc1ZZsOZGGQul_RlmIVlMxa-s5x-yiJ5uaFE"),k=b("MercuryOrderedThreadlist").getForFBID(c).getPinnedThreadlist().length!==0;return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(a){if(h)return b("React").createElement("div",{className:"_3szn _3szo _6f_f",role:"button",onClick:b("bs_curry")._1(a[0],e)},b("React").createElement("div",{className:"_3szp"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[g("571563")],0,0,0,0,[]))),b("React").createElement("div",{className:"_3szq"},f),k?null:b("ReasonReact.bs").element(0,0,b("WorkChatNewBadgeReactBootloader.bs").make([])));else return null},j[9],j[10],j[11],j[12]]}f.component=j;f.make=a}),null);
__d("MessengerThreadSearchIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"8 8 48 48"},b("React").createElement("title",undefined,"search conversation"),b("React").createElement("circle",{cx:"28",cy:"28",fill:"none",r:"14",stroke:c,strokeMiterlimit:"10",strokeWidth:"2"}),b("React").createElement("path",{clipRule:"evenodd",d:"M50,50L37.9,37.9",fill:"none",fillRule:"evenodd",stroke:c,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})))}f.make=a}),null);
__d("MessengerInfoPanelSearchReact.bs",["ix","cx","fbt","Keys.bs","bs_curry","React","Bootload.bs","asset","Bootloader","ImageReact.bs","CurrentUser","ReasonReact.bs","MessengerActions","MessengerURIStore","MessengerCustomColorUtils.bs","MessengerThreadSearchIconSVGReact.bs","MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelSearchReact");function a(a){b("Bootloader").loadModules(["BootloadableMessengerContentSearchFunnelLogger.bs"],a,"MessengerInfoPanelSearchReact.bs");return 0}d=[a];var k=b("Bootload.bs").Create(d);function l(a,c){b("MessengerContentSearchFunnelLogger").startFunnel(a,b("MessengerContentSearchFunnelLoggerConstants").SEARCH_WITHIN_THREAD);return 0}function m(){var a=b("MessengerURIStore").getState().query;a=a==null;b("MessengerActions").changeQuery(a?"":undefined);return 0}function n(a){var c=b("MessengerURIStore").getState().query,d=c==null?"":c;a.preventDefault();b("bs_curry")._1(k[0],function(a){return l(d,a)});return m(0)}function o(a){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();return m(0)}else return 0}function c(a,c){return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){var c=b("MessengerCustomColorUtils.bs").customColorOrBlue(a),d=b("CurrentUser").isWorkUser();return b("React").createElement("div",{className:"_3szn _3szo",tabIndex:0,onKeyDown:o,onClick:n},b("React").createElement("div",{className:"_3szp"},d?b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[g("465522")],0,0,0,0,[])):b("MessengerThreadSearchIconSVGReact.bs").make("_6b45",c)),b("React").createElement("div",{className:"_3szq"},i._("Search in Conversation")))},j[9],j[10],j[11],j[12]]}f.component=j;f.BootloadableMessengerContentSearchFunnelLogger=d;f.LoadableMessengerContentSearchFunnelLoggerRe=k;f.handleLoggerLoad=l;f.showQuery=m;f.handleSearchThreadClick=n;f.handleSearchThreadKeyDown=o;f.make=c}),null);
__d("MessengerCompositeMuteSettingsDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("messengerCompositeMuteSettingsDialogReactComponent").__setRef("MessengerCompositeMuteSettingsDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerCompositeMuteSettingsDialogBootloaderReact.bs",["ReasonReact.bs","MessengerCompositeMuteSettingsDialogBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("MessengerCompositeMuteSettingsDialogBootloader.react"),{isMuted:a,mentionsMuted:c,reactionsMuted:d,showMentions:e,onMentionsMute:f,onReactionsMute:g,onMute:h,onToggle:i},j)}f.make=a}),null);
__d("MessengerNotificationsIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{height:"24",width:"24",viewBox:"0 0 18 18"},b("React").createElement("defs",undefined,b("React").createElement("circle",{id:"path-1",cx:"1",cy:"1",r:"1"})),b("React").createElement("g",{fill:"none",fillRule:"evenodd"},b("React").createElement("rect",{id:"Bounds",height:"18",width:"18",x:"0",y:"0"}),b("React").createElement("path",{d:"M9,16.5 C9.828,16.5 10.5,15.828 10.5,15 L7.5,15\nC7.5,15.828 8.172,16.5 9,16.5",fill:c}),b("React").createElement("path",{d:"M13,10 L13,7.5 C13,5.562 11.622,3.948 9.793,3.58\nC9.914,3.414 10,3.221 10,3 C10,2.448 9.552,2 9,2 C8.448,2\n8,2.448 8,3 C8,3.221 8.086,3.414 8.207,3.58 C6.378,3.948\n5,5.562 5,7.5 L5,10 C5,11.105 4,12 4,12 L3.70537567,12.2946243\nC3.31580745,12.6841926 3.31640625,13.3164062\n3.70537567,13.7053757 L4,14 L14,14 L14.2946243,13.7053757\nC14.6841926,13.3158074 14.6835937,12.6835938\n14.2946243,12.2946243 L14,12 C14,12 13,11.105 13,10 Z",stroke:c,strokeWidth:"4%"}))))}f.make=a}),null);
__d("MessengerNotificationsButtonReact.bs",["ix","cx","fbt","Keys.bs","bs_curry","React","asset","ImageReact.bs","formatDate","CurrentUser","ReasonReact.bs","MessengerDialogs.bs","MessengerCustomColorUtils.bs","MessengerNotificationsIconSVGReact.bs","MessengerCompositeMuteSettingsDialogBootloaderReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,b){if(a)return 0;else{a=b[1][0][0];if(a)return a[0].focus();else return 0}}function k(a,b){b[1][0][0]=a==null?0:[a];return 0}var l=b("ReasonReact.bs").reducerComponent("MessengerNotificationsButtonReact");function a(a,c,d,e,f,h,m,n,o){__p&&__p();var p=function(d){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(0,0,b("MessengerCompositeMuteSettingsDialogBootloaderReact.bs").make(a,c,e,!n.is_canonical,f,m,h,b("bs_curry")._1(d[0],j),[]))})},q=function(a,b){a.preventDefault();a.stopPropagation();return p(b)},r=function(a,c){if(a.keyCode===b("Keys.bs").$$return){a.preventDefault();a.stopPropagation();return p(c)}else return 0},s=function(){__p&&__p();if(d){var a=d[0];if(a!==0){var c;if(a>0)if(a<86401)c=0;else{var e=new Date(a*1e3).getDay()===new Date().getDay();c=e?[i._("Off until {time}",[i._param("time",b("formatDate")(a,"g:ia"))])]:[i._("Off until {time} tomorrow",[i._param("time",b("formatDate")(a,"g:ia"))])]}else c=a===-1?[i._("Off indefinitely")]:0;if(c)return b("React").createElement("span",{className:"_3x6v"},c[0]);else return null}else return null}else return null};return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],function(a){var c=b("MessengerCustomColorUtils.bs").customColorOrBlue(n),e=b("CurrentUser").isWorkUser();return b("React").createElement("div",{ref:b("bs_curry")._1(a[0],k),className:"_3szn _3szo",role:"button",tabIndex:0,onKeyDown:b("bs_curry")._1(a[0],r),onClick:b("bs_curry")._1(a[0],q)},b("React").createElement("div",{className:"_3szp"},e?b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[g("470464")],0,0,0,0,[])):b("MessengerNotificationsIconSVGReact.bs").make("_3wh2",c)),b("React").createElement("div",{className:"_3szq _6b46"+(d?" _6b47":"")},i._("Notifications"),s(0)))},function(){return[[0]]},l[10],function(a,b){return 0},l[12]]}f.handleDialogToggle=j;f.setRef=k;f.component=l;f.make=a}),null);
__d("MessengerMuteButtonContainerReact.bs",["bs_curry","ReasonReact.bs","MercuryThreadInfo","MercuryThreadActions","MessengerNotificationsButtonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerMuteButtonContainerReact");function a(a,c,d){__p&&__p();var e=function(e,d){b("MercuryThreadActions").getForFBID(c).updateMuteSetting(a.thread_id,e);return 0},f=function(e,d){b("MercuryThreadActions").getForFBID(c).updateMentionsMuteSetting(a.thread_id,e);return 0},h=function(e,d){b("MercuryThreadActions").getForFBID(c).updateReactionsMuteSetting(a.thread_id,e);return 0};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(c){var d=b("MercuryThreadInfo").isMuted(a),g=b("MercuryThreadInfo").getMuteSetting(a);return b("ReasonReact.bs").element(0,0,b("MessengerNotificationsButtonReact.bs").make(d,b("MercuryThreadInfo").areMentionsMuted(a),g==null?0:[g],b("MercuryThreadInfo").areReactionsMuted(a),b("bs_curry")._1(c[0],f),b("bs_curry")._1(c[0],e),b("bs_curry")._1(c[0],h),a,[]))},g[9],g[10],g[11],g[12]]}f.component=g;f.make=a}),null);
__d("MessengerInfoPanelThreadOptionsContainerReact.bs",["fbt","bs_curry","WorkGKs","CurrentUser","ReasonReact.bs","bs_js_primitive","MercuryThreadInfo","MessageRequestUtils","MercuryThreadActions","MessengerAdminGroupUtils","MessengerInfoPanelEmojiReact.bs","MessengerInfoPanelSearchReact.bs","MessengerInfoPanelSectionReact.bs","MessengerInfoPanelNicknamesReact.bs","MessengerMuteButtonContainerReact.bs","MessagingThreadCustomizationSource","MessengerInfoPanelCustomColorReact.bs","MessengerInfoPanelManageReviewReact.bs","MessengerInfoPanelPinningThreadReact.bs","MessengerInfoPanelManageMessagesReact.bs","MessengerInfoPanelEscalateToGroupReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelThreadOptionsContainerReact");function i(a,c,d,e,f,i){__p&&__p();var j=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeThreadColor(d.thread_id,c,b("MessagingThreadCustomizationSource").SETTINGS);return 0}},k=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeThreadEmoji(d.thread_id,c,b("MessagingThreadCustomizationSource").SETTINGS);return 0}},l=function(c,a){if(b("MercuryThreadInfo").isEmptyLocalThread(d))return 0;else{b("MercuryThreadActions").getForFBID(e).changeThreadNicknames(d.thread_id,c[0],c[1],b("MessagingThreadCustomizationSource").SETTINGS);return 0}};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(h){__p&&__p();if(!d.is_subscribed||b("MessageRequestUtils").isMessageRequest(d))return null;else{var i=b("CurrentUser").isWorkUser(),m=b("MessengerAdminGroupUtils").canUpdateThreadCustomization(d,e),n=m&&(!i||b("WorkGKs").workchat_thread_color_customization);n=n?b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelCustomColorReact.bs").make(d,b("bs_curry")._1(h[0],j),[])):null;m=m&&(!i||b("WorkGKs").workchat_thread_emoji_customization);m=m?b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelEmojiReact.bs").make(d,e,b("bs_curry")._1(h[0],k),[])):null;var o=b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSearchReact.bs").make(d,[]));i=!i||b("WorkGKs").workchat_thread_nickname_customization;i=i?b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelNicknamesReact.bs").make(c,d,e,b("bs_curry")._1(h[0],l),[])):null;h=b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelManageMessagesReact.bs").make(d,e,[]));var p=b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelManageReviewReact.bs").make(d,e,[])),q=b("ReasonReact.bs").element(0,0,b("MessengerMuteButtonContainerReact.bs").make(d,e,[])),r=b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelPinningThreadReact.bs").make(d,e,[])),s=b("WorkGKs").workchat_escalate_to_group_chat;s=s?b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelEscalateToGroupReact.bs").make(d,e,c,[])):null;return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").null_undefined_to_opt(d.solid_color),[!0],[a],[f],[g._("Options")],[o,i,n,m,h,p,q,r,s]))}},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.isCollapsed,a.participants,a.thread,a.viewer,a.onToggle,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerWorkContextInformationWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1613769105371737"};c.getQueryID=function(){"use strict";return"381051872368528"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MercuryWorkContextInformation",["EmitterSubscription","EventEmitter","KeyedCallbackManager","MercuryDispatcher","MercurySingletonProvider","MessengerWorkContextInformationWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("EventEmitter"))();function a(a){__p&&__p();this.$4=new Map(),this.$6=function(a){__p&&__p();if(a&&a.user&&a.user.scim_company_user){var b=a.user.scim_company_user,c=b.work_phone_numbers.nodes;c=c.filter(function(a){return a.is_primary_number===!0&&a.user_phone_number_type}).shift();var d=b.work_location.nodes[0],e={};e[a.user.id]={phone:c?[c.user_phone_number_for_display]:null,email:b.email?[b.email]:null,location:d?[d.user_formatted_address]:null};this.$3.addResourcesAndExecute(e);this.$4.set(a.user.id,!1);g.emit("change")}}.bind(this),this.$1=a,this.$2=b("MercuryDispatcher").getForFBID(this.$1),this.$3=new(b("KeyedCallbackManager"))(),this.$4=new Map()}a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};a.prototype.getTopThreads=function(){return this.$3.getAllResources()};a.prototype.getOrFetch=function(a){if(!a)return null;var b=this.$3.getResource(a);if(b)return b;this.$5(a);return null};a.prototype.$5=function(a){if(this.$4.get(a))return;this.$4.set(a,!0);b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerWorkContextInformationWebGraphQLQuery"))({id:a})),this.$6)};a.addListener=function(a,b){return g.addListener(a,b)};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerInfoPanelWorkContextContainerReact.bs",["cx","fbt","bs_block","bs_curry","React","LinkReact.bs","ReasonReact.bs","bs_js_primitive","SubscriptionsHandler","WorkChatActivityTypedLogger.bs","WorkChatActivityTypedLogger","MercuryWorkContextInformation","MessengerInfoPanelSectionReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryWorkContextInformation").get(),j=b("ReasonReact.bs").reducerComponent("MessengerInfoPanelWorkContextContainerReact"),k={phone:undefined,email:undefined,location:undefined};function l(a,c,d,e,f){__p&&__p();return[j[0],j[1],j[2],function(){var a=c.other_user_fbid;if(a==null)return k;else{a=i.getOrFetch(a);if(a==null)return k;else return a}},function(a){var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("MercuryWorkContextInformation").addListener("change",function(){return b("bs_curry")._1(a[3],0)}));b("bs_curry")._1(a[4],function(){c.release();return 0});return b("bs_curry")._1(a[3],0)},j[5],j[6],j[7],function(f){__p&&__p();var g=f[1].phone,i=f[1].email,j=f[1].location;if(g==null&&i==null&&j==null)return null;else g=1;if(g===1){i=f[1].phone;j=f[1].email;g=f[1].location;return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").null_undefined_to_opt(c.solid_color),[!0],[a],[d],[h._("About")],[b("React").createElement("table",{className:"_2dwl"},b("React").createElement("tbody",undefined,i==null?null:b("React").createElement("tr",undefined,b("React").createElement("td",undefined,h._("Phone")),b("React").createElement("td",undefined,i)),j==null?null:b("React").createElement("tr",undefined,b("React").createElement("td",undefined,h._("Email")),b("React").createElement("td",undefined,j)),g==null?null:b("React").createElement("tr",undefined,b("React").createElement("td",undefined,h._("Location")),b("React").createElement("td",undefined,g)))),b("React").createElement("div",{className:"_3-8z"},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,["_2dwm"],0,0,0,0,0,[e],0,[function(){new(b("WorkChatActivityTypedLogger"))().setEvent(b("WorkChatActivityTypedLogger.bs").string_of_event(2)).log();return 0}],0,0,0,0,0,["_blank"],0,h._("View Profile"))))]))}},function(){return{phone:undefined,email:undefined,location:undefined}},j[10],function(a,d){a=c.other_user_fbid;if(a==null)return 0;else{d=i.getOrFetch(a);if(d==null)return 0;else return b("bs_block").__(0,[d])}},j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return l(a.isCollapsed,a.thread,a.onToggle,a.href,[])});f.mercuryWorkContextInformation=i;f.component=j;f.nullInfo=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerInfoPanelWorkGroupLinksContainerReact.bs",["ix","cx","fbt","React","asset","LinkReact.bs","ImageReact.bs","ReasonReact.bs","bs_js_primitive","WorkChatActivityTypedLogger","WorkChatActivityTypedLogger.bs","MessengerInfoPanelSectionReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelWorkGroupLinksContainerReact");function k(a,c,d,e){__p&&__p();return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){__p&&__p();var e=c.associated_object,f;if(e==null)f=["","",""];else{var h=e.action_link,j=e.profile_picture;e=e.name;f=h==null?["","",""]:j==null?["","",""]:[h,j.uri,e]}var k=f[2],l=f[1],m=f[0];h=function(){return b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,["_3-8w _35-k"],0,0,0,0,0,[m+("?ref="+b("WorkChatActivityTypedLogger.bs").string_of_event(4))],0,[function(){new(b("WorkChatActivityTypedLogger"))().setEvent(b("WorkChatActivityTypedLogger.bs").string_of_event(4)).log();return 0}],0,0,0,0,0,["_blank"],0,[b("React").createElement("div",undefined,b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(["_35-n"],0,0,0,[l],0,0,0,0,[]))),b("React").createElement("div",{className:"_35-o"},b("React").createElement("div",{className:"_35-p"},k),b("React").createElement("div",{className:"_35-q"},i._("Go to Workplace Group")))]))};j=function(a,c,d,e){return b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,["_3szo"],0,0,0,0,0,[c+("?ref="+b("WorkChatActivityTypedLogger.bs").string_of_event(e))],0,[function(){new(b("WorkChatActivityTypedLogger"))().setEvent(b("WorkChatActivityTypedLogger.bs").string_of_event(e)).log();return 0}],0,0,0,0,0,["_blank"],0,[b("React").createElement("div",{className:"_3szp"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,0,0,0,[d],0,0,0,0,[]))),b("React").createElement("div",{className:"_3szq"},a)]))};return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").null_undefined_to_opt(c.solid_color),[!0],[a],[d],[i._("Group Info")],[h(0),j(i._("About"),m+"about/",g("413959"),5),j(i._("Posts"),m,g("610205"),6),j(i._("Saved"),m+"saved/",g("466321"),7),j(i._("Events"),m+"events/",g("386128"),8)]))},j[9],j[10],j[11],j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.isCollapsed,a.thread,a.onToggle,[])});f.component=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerSharedFileReact.bs",["cx","React","LinkReact.bs","ReasonReact.bs","joinClasses","MercuryAttachment"],(function(a,b,c,d,e,f,g){"use strict";var h=b("ReasonReact.bs").statelessComponent("MessengerSharedFile");function a(a,c,d,e){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var e=b("MercuryAttachment").getAttachIconClassByMime(d);return b("React").createElement("li",{className:"_2a42"},b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,[b("joinClasses")("_2a43",e)],0,0,0,0,0,[c],0,0,0,0,0,0,0,["_blank"],0,[b("React").createElement("div",{className:"_2a44"},b("React").createElement("i",{className:"img"}),b("React").createElement("span",{className:"_2a45 _fy2"},a))])))},h[9],h[10],h[11],h[12]]}f.component=h;f.make=a}),null);
__d("MessengerThreadSharedFilesWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1509212465873777"};c.getQueryID=function(){"use strict";return"580743575640108"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerSharedFilesReact.bs",["cx","fbt","bs_block","bs_curry","React","bs_caml_obj","LinkReact.bs","bs_caml_array","WebGraphQL","ReasonReact.bs","promiseDone","bs_js_primitive","MercuryAttachment","MercuryMessageStore","MessengerSpinnerReact.bs","MessengerSharedFileReact.bs","MessengerInfoPanelSectionReact.bs","MessengerThreadSharedFilesWebGraphQLQuery"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){__p&&__p();a=a.message_thread;if(a==null)return!1;else{a=a.message_shared_media;if(a==null)return!1;else{a=a.page_info;if(a==null)return!1;else{a=a.has_next_page;if(a==null)return!1;else return a}}}}function j(a){a=a.page_info;if(a==null)return!1;else{a=a.end_cursor;return!(a==null)}}a=b("React").createElement("div",{className:"_omn"},b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,["gray"],0,[])));var k=b("ReasonReact.bs").reducerComponent("MessengerSharedFilesReact");function l(a,c,d,e,f){__p&&__p();var g=function(a,d){if(c){var e={threadFBID:c[0]};a&&(e.count=a[0]);b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerThreadSharedFilesWebGraphQLQuery"))(e)),function(a){return b("bs_curry")._1(d[3],[a])},undefined);return 0}else return 0},l=function(a,c){__p&&__p();a=c[1][1];var d=c[1][2];if(a||!d)return 0;else{a=d[0].message_shared_media;if(a==null)return 0;else{b("bs_curry")._1(c[3],0);d=a.count;return g(d==null?0:[d],c)}}},m=function(a,c){__p&&__p();return a.subscribe(function(a){__p&&__p();var d=a.eventType,e=d===b("MercuryMessageStore").MESSAGES_RECEIVED;d=d===b("MercuryMessageStore").MESSAGES_CHANGED;a=a.messages;if(a.length!==0&&(e||d))e=1;else return 0;if(e===1){d=b("bs_caml_array").caml_array_get(a,a.length-1|0);e=d.attachments;a=e==null?!1:e.some(function(a){return b("MercuryAttachment").isFileAttachment(a)});if(a){var f=setTimeout(function(){return g(0,c)},1e3);return b("bs_curry")._1(c[4],function(){clearTimeout(f);return 0})}else return 0}})},n=function(a){if(a[1][1])return b("React").createElement("div",{className:"_2n20"},b("ReasonReact.bs").element(0,0,b("MessengerSpinnerReact.bs").make(0,["gray"],0,[])));else return b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,0,["_3oh- _fy2 _2wjv"],0,0,0,0,0,0,0,[b("bs_curry")._1(a[0],l)],0,0,0,0,0,0,0,[h._("Show All...")]))},o=function(a,c){a=a.edges;var d=c[1][0];d=d?n(c):null;return b("React").createElement("ul",{className:"_2o39"},a.map(function(a){a=a.node;return b("ReasonReact.bs").element([a.legacy_attachment_id],0,b("MessengerSharedFileReact.bs").make(a.filename,a.url,a.mimetype,[]))}),d)};return[k[0],k[1],k[2],function(a){return[a[0],a[1],a[2],c]},function(c){g(0,c);var d=new(b("MercuryMessageStore"))(a);m(d,c);return b("bs_curry")._1(c[4],function(){d.destroy();return 0})},function(a){a=a[0];if(b("bs_caml_obj").caml_notequal(a[1][3],c))return b("bs_curry")._1(a[3],1);else return 0},k[6],k[7],function(a){__p&&__p();var f=a[1][2];if(f&&c&&c[0]!==""){f=a[1][2];if(f){f=f[0].message_shared_media;if(!(f==null)&&j(f))return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSectionReact.bs").make(0,[!0],[d],[e],[h._("Shared Files")],[o(f,a)]));else return null}else return null}else return null},function(){return[!1,!1,0,c]},k[10],function(a,c){if(typeof a==="number")if(a!==0)return b("bs_block").__(2,[[c[0],c[1],0,c[3]],function(a){return g(0,a)}]);else return b("bs_block").__(0,[[c[0],!0,c[2],c[3]]]);else{a=a[0];return b("bs_block").__(0,[[i(a),!1,b("bs_js_primitive").null_undefined_to_opt(a.message_thread),c[3]]])}},k[12]]}c=b("ReasonReact.bs").wrapReasonForJs(k,function(a){return l(a.threadID,b("bs_js_primitive").null_undefined_to_opt(a.threadFBID),a.isCollapsed,a.onToggle,[])});f.hasNextPage=i;f.hasFiles=j;f.spinner=a;f.component=k;f.make=l;f.jsComponent=c}),null);
__d("MessengerThreadSharedLinksWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"2289069757800221"};c.getQueryID=function(){"use strict";return"1095173140631450"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerSharedLinks.react",["cx","fbt","Image.react","Layout.react","LayoutColumn.react","LayoutFillColumn.react","Link.react","MercuryMessageStore","MercuryThreadTimestampReact.bs","MercuryTimestamp","MessengerInfoPanelSectionReact.bs","MessengerSpinner.react","MessengerThreadSharedLinksWebGraphQLQuery","React","URI","WebGraphQL","gkx","isLinkshimURI","promiseDone"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=b("MercuryThreadTimestampReact.bs").jsComponent,k=b("MessengerInfoPanelSectionReact.bs").jsComponent,l=5,m=36;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={canShowMore:!1,isFetchingMore:!1,fetchCount:l,messageThread:null},this.$6=function(){this.$2(this.state.fetchCount+l)}.bind(this),b}a.prototype.componentDidMount=function(){"use strict";this.$2(this.state.fetchCount),this.$3(this.props.threadID)};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.destroy()};a.prototype.componentDidUpdate=function(a,b){"use strict";a.threadFBID!==this.props.threadFBID&&this.setState({messageThread:null,fetchCount:l},function(){this.$2(this.state.fetchCount)}.bind(this))};a.prototype.render=function(){var a;if(!b("gkx")("AT67ptDj-ZaeW3Tyo9vbms2vYK1iy8t_jMuVqoEuGQXOqT3WIH9DEYXNBElJniUDVETCVboaIbfUes068dlrYLZO"))return null;a=(a=this.state.messageThread)!=null?(a=a.shared_links)!=null?a.length:a:a;return!this.props.threadFBID||!this.state.messageThread||!this.state.messageThread.shared_links||a==null||a==0?null:b("React").createElement(k,{isCollapsible:!0,isCollapsed:this.props.isCollapsed,customColor:this.props.customColor,onToggle:this.props.onToggle,title:h._("Shared Links")},b("React").createElement("div",{className:"_2wjt"},this.state.messageThread.shared_links.map(function(a,b){return this.$4(a,b)}.bind(this)),this.$5()))};a.prototype.$2=function(a){"use strict";this.setState({isFetchingMore:!0}),b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerThreadSharedLinksWebGraphQLQuery"))({threadFBID:this.props.threadFBID,count:a})),function(b){var c,d=(c=b.message_thread)!=null?(c=c.shared_links)!=null?c.length:c:c;this.setState(function(c){return{messageThread:b.message_thread,canShowMore:d?d>=a:!1,isFetchingMore:!1,fetchCount:a}})}.bind(this))};a.prototype.$3=function(a){"use strict";__p&&__p();this.$1=new(b("MercuryMessageStore"))(a),this.$1.subscribe(function(a){if(a.messages.length<1)return;var c=a.eventType==b("MercuryMessageStore").MESSAGES_RECEIVED,d=a.eventType==b("MercuryMessageStore").MESSAGES_CHANGED;if(!c&&!d)return;c=a.messages[a.messages.length-1];c.attachments&&c.attachments.length>0&&setTimeout(function(){return this.$2(this.state.fetchCount)}.bind(this),1e3)}.bind(this))};a.prototype.$4=function(a,c){"use strict";var d=a.media&&a.media.image&&a.media.image.uri?b("React").createElement(b("LayoutColumn.react"),null,b("React").createElement(b("Image.react"),{className:"_2wjy",src:a.media.image.uri,style:{height:m,width:m}})):null,e=null;a.sharer&&a.sharer.name?e=b("React").createElement("div",{className:"_2wj_"},h._("Sent by {sender_name}",[h._param("sender_name",a.sharer.name)])):a.description&&a.description.text?e=b("React").createElement("div",{className:"_2wj_"},a.description.text):e=b("React").createElement("div",{className:"_2wj_"},this.$7(a.url));return b("React").createElement("li",{key:c},b("React").createElement(b("Link.react"),{className:"_2pit _2wju",style:{color:this.props.customColor},target:"_blank",href:a.url},b("React").createElement(b("Layout.react"),{className:"_2wjz clearfix"},d,b("React").createElement(b("LayoutFillColumn.react"),{className:"_653d _159d"},b("React").createElement("div",{className:"_2wj-"},a.title_with_entities.text),e),b("React").createElement(b("LayoutColumn.react"),null,a.creation_time?this.$8(a.creation_time*1e3):null))))};a.prototype.$8=function(a){"use strict";return b("React").createElement(j,{className:"_1ht7 _159e",time:a,title:b("MercuryTimestamp").getAbsoluteTimestamp(a),text:b("MercuryTimestamp").getRelativeTimestamp(a)})};a.prototype.$7=function(a){"use strict";if(a==null)return"";var c=new(b("URI"))(a);if(!b("isLinkshimURI")(c))return a;c=c.getQueryData().u;return!c?a:c};a.prototype.$5=function(){"use strict";if(!this.state.canShowMore)return null;return this.state.isFetchingMore?b("React").createElement("div",{className:"_2n20"},b("React").createElement(b("MessengerSpinner.react"),{color:"gray"})):b("React").createElement(b("Link.react"),{className:"_3oh- _fy2 _2wjv",onClick:this.$6},h._("Show More..."))};e.exports=a}),null);
__d("MessengerSharedPhotoReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerSharedPhoto.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("ReasonReact.bs").wrapJsForReason(b("MessengerSharedPhoto.react"),{className:a,fbid:c,onClick:d,uri:b("bs_js_null_undefined").fromOption(e),isSpherical:f},[])}f.make=a}),null);
__d("MessengerSharedPhotosAlbumViewContainerReact.bs",["ReasonReact.bs","MessengerSharedPhotosAlbumViewContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerSharedPhotosAlbumViewContainer.react"),{onClick:a,onCloseSharedPhotos:c,threadID:d,viewedPhoto:e},[])}f.make=a}),null);
__d("MessengerSharedPhotosVideosData.bs",["bs_curry","bs_js_dict","bs_belt_Array","bs_js_primitive","MessengerThreadSharedMediaHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){return b("bs_js_primitive").undefined_to_opt(g[a])}function h(a,b){g[a]=b;return 0}function i(a){a=b("bs_belt_Array").get(b("bs_js_dict").values(a),0);if(a){a=a[0];if(a==null)return 0;else return[a.message_shared_media]}else return 0}function j(a,c,d,e){__p&&__p();a=i(a);if(a){a=a[0];var f=d[0];f=f[1];f=[1,f];d=d[1];if(d){d=d[0];var g=a.edges;g=g.length!==0?[f,[[g.concat(d[0]),[a.page_info.start_cursor],d[2],a.page_info.has_next_page]]]:[f,[[d[0],d[1],d[2],a.page_info.has_next_page]]]}else g=[f,[[a.edges,[a.page_info.start_cursor],[a.page_info.end_cursor],a.page_info.has_next_page]]];h(e,g);return b("bs_curry")._1(c,0)}else return 0}function k(a,c,d,e){__p&&__p();a=i(a);if(a){a=a[0];var f=d[0];f=f[0];f=[f,1];d=d[1];if(d){d=d[0];var g=a.edges;g=g.length!==0?[f,[[d[0].concat(g),d[1],[a.page_info.end_cursor],a.page_info.has_next_page]]]:[f,[[d[0],d[1],d[2],a.page_info.has_next_page]]]}else g=[f,[[a.edges,[a.page_info.start_cursor],[a.page_info.end_cursor],a.page_info.has_next_page]]];h(e,g);return b("bs_curry")._1(c,0)}else return 0}function l(a,c,d,e,f,i){__p&&__p();var j=a[0];j=[j[0],0];a=a[1];j=[j,a];h(c,j);b("MessengerThreadSharedMediaHelper").loadMorePrevious(d,f?f[0]:undefined,e,function(a){var b=g[c];if(b!==undefined)return k(a,i,b,c);else return 0});return 0}function m(a,c,d,e,f,i){__p&&__p();var k=a[0];k=[0,k[1]];a=a[1];k=[k,a];h(c,k);b("MessengerThreadSharedMediaHelper").loadMoreLatest(d,f?f[0]:undefined,e,function(a){var b=g[c];if(b!==undefined)return j(a,i,b,c);else return 0});return 0}function c(a,b,c,d){__p&&__p();var e=g[c];if(e!==undefined)if(e[0][0]){var f=e[1];if(f){f=f[0];if(f[0].length!==0)return m(e,c,b,a,f[1],d);else f=1}else f=1;if(f===1)return l(e,c,b,a,0,d)}else return 0;else return l([[1,1],0],c,b,a,0,d)}function d(a,b,c,d){__p&&__p();var e=g[c];if(e!==undefined)if(e[0][1]){var f=e[1];if(f){f=f[0];if(f[3])if(f[0].length!==0)return l(e,c,b,a,f[2],d);else f=1;else return 0}else f=1;if(f===1)return l(e,c,b,a,0,d)}else return 0;else return l([[1,1],0],c,b,a,0,d)}function e(a,b){__p&&__p();var c=g[a];if(c!==undefined){var d=c[1];if(d){d=d[0];var e=d[0];if(e.length!==0){e=e.filter(function(a){return!b.some(function(b){return b===a.node.legacy_attachment_id})});c=c[0];e=[[e,d[1],d[2],d[3]]];d=[c,e];return h(a,d)}else return 0}else return 0}else return 0}f.data=g;f.get=a;f.set=h;f.convertPayload=i;f.onFetchNewerDone=j;f.onFetchOlderDone=k;f.mutateDataThenLoadMoreFromRecentToOld=l;f.mutateDataThenLoadMoreFromOldToRecent=m;f.fetchNewer=c;f.fetchOlder=d;f.localRemove=e}),null);
__d("SpotlightMessengerSharedMediaViewerContainerReact.bs",["ReasonReact.bs","SpotlightMessengerSharedMediaViewerContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h){return b("ReasonReact.bs").wrapJsForReason(b("SpotlightMessengerSharedMediaViewerContainer.react"),{onClosePhotoView:a,openAlbum:c,photoID:d,rootClassName:e,threadID:f,disableForward:g},[])}f.make=a}),null);
__d("SpotlightViewerReact.bs",["ReasonReact.bs","SpotlightViewer"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("SpotlightViewer"),{className:a,onHide:c,open:d},e)}f.make=a}),null);
__d("MessengerSharedPhotosReact.bs",["cx","fbt","bs_block","bs_curry","React","bs_belt_Array","MercuryIDs","ReasonReact.bs","bs_js_primitive","MercuryMessages","MercuryAttachment","MercuryDispatcher","SphericalPhotoUtils","MercuryPayloadSource","SpotlightViewerReact.bs","MessengerSharedPhotoReact.bs","MessengerInfoPanelSectionReact.bs","MessengerSharedPhotosVideosData.bs","MessengerSharedPhotosAlbumViewContainerReact.bs","SpotlightMessengerSharedMediaViewerContainerReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("React").createElement("div",{className:"_4dfu"}),j=b("ReasonReact.bs").reducerComponent("MessengerSharedPhotosReact");function k(a,c,d,e,f,g,k,l){__p&&__p();var m=function(a){__p&&__p();var f=b("MessengerSharedPhotosVideosData.bs").get(g);if(k){var h=k[0];if(f)if(f[0][0][1]&&!(e||!b("bs_curry")._1(c,0)||b("bs_curry")._1(d,0)===0))return b("MessengerSharedPhotosVideosData.bs").fetchOlder(12,h,g,function(){return b("bs_curry")._1(a[3],0)});else return 0;else return b("MessengerSharedPhotosVideosData.bs").fetchOlder(12,h,g,function(){return b("bs_curry")._1(a[3],0)})}else return 0};return[j[0],j[1],j[2],j[3],function(c){__p&&__p();var d=b("MercuryDispatcher").getForFBID(a),e=d.subscribe("update-messages",function(d,e){__p&&__p();if(e==null)return 0;else if(e.payload_source===b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE){d=e.actions;if(d.length!==1)return 0;else{d=d[0];var f=d.thread_id,g=b("MercuryIDs").getThreadFBIDFromThreadID(f);d=d.attachments;if(d==null)return 0;else{var h=d.some(function(a){if(b("MercuryAttachment").isPhotoAttachment(a))return!0;else return b("MercuryAttachment").isVideoAttachment(a)});if(h)return b("MessengerSharedPhotosVideosData.bs").fetchNewer(Math.max(d.length,10),g,f,function(){return b("bs_curry")._1(c[3],0)});else return 0}}}else if(e.payload_source===b("MercuryPayloadSource").CLIENT_UPDATE_SNIPPET){h=e.actions;if(h.length!==1)return 0;else{d=h[0];var i=d.thread_id;g=b("MercuryMessages").getForFBID(a);f=b("bs_belt_Array").some(g.getMessagesFromIDs(d.deleted_ids),function(a){__p&&__p();if(a==null)return!1;else{a=a.attachments;a=a==null?[]:b("bs_belt_Array").keepMap(a,function(a){if(b("MercuryAttachment").isPhotoAttachment(a)||b("MercuryAttachment").isVideoAttachment(a)){a=a.metadata;if(a==null)return 0;else return b("bs_js_primitive").null_undefined_to_opt(a.fbid)}else return 0});if(a.length!==0){b("MessengerSharedPhotosVideosData.bs").localRemove(i,a);return!0}else return!1}});if(f)return b("bs_curry")._1(c[3],0);else return 0}}else return 0});b("bs_curry")._1(c[4],function(){e.unsubscribe();return 0});return m(c)},function(a){return m(a[0])},j[6],j[7],function(a){__p&&__p();var c=b("MessengerSharedPhotosVideosData.bs").get(g);if(k&&c){var d=c[0][1];if(d&&d[0][0].length!==0){d=c[0];c=d[1][0];var j=k[0],l=a[1][1];l=l?b("ReasonReact.bs").element(0,0,b("SpotlightMessengerSharedMediaViewerContainerReact.bs").make(function(){return b("bs_curry")._1(a[3],1)},function(c){return b("bs_curry")._1(a[3],b("bs_block").__(0,[c]))},l[0],"",j,!1,[])):null;var m=a[1][0];j=m?b("ReasonReact.bs").element(0,["spotlightViewer"],b("SpotlightViewerReact.bs").make("_3ode",function(){return b("bs_curry")._1(a[3],2)},!0,[b("ReasonReact.bs").element(0,0,b("MessengerSharedPhotosAlbumViewContainerReact.bs").make(function(c){return b("bs_curry")._1(a[3],b("bs_block").__(1,[c]))},function(){return b("bs_curry")._1(a[3],2)},j,m[0],[]))])):null;m=h._("Shared Photos");return b("ReasonReact.bs").element(0,0,b("MessengerInfoPanelSectionReact.bs").make(0,[!0],[e],[f],[m],[l,j,b("React").createElement("div",{className:"_40jj _5l-3"},b("bs_belt_Array").map(c[0],function(e){__p&&__p();var c=e.node.image;c=c==null?["_3m31 _ooh",0]:["_3m31",[c.uri]];var f=c[1];e=e.node;var g=e.photo_encodings,d;if(g==null)d=[!1,f];else if(g.length!==0){g=b("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings(g).smallThumbnail;g=g==null?f:[g];d=[!0,g]}else d=[!1,f];return b("ReasonReact.bs").element([e.legacy_attachment_id],0,b("MessengerSharedPhotoReact.bs").make(c[0],e.legacy_attachment_id,function(c){return b("bs_curry")._1(a[3],b("bs_block").__(2,[c]))},d[1],d[0],[]))})),d[0][1]&&!c[3]?i:null]))}else return null}else return null},function(){return[0,0]},j[10],function(a,c){if(typeof a==="number")switch(a){case 0:return b("bs_block").__(0,[c]);case 1:return b("bs_block").__(0,[[c[0],0]]);case 2:return b("bs_block").__(0,[[0,c[1]]])}else switch(a.tag|0){case 0:return b("bs_block").__(0,[[[a[0]],0]]);case 1:return b("bs_block").__(0,[[0,[a[0]]]]);case 2:return b("bs_block").__(0,[[c[0],[a[0]]]])}},j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.viewer,a.getIsScrolledToBottom,a.getScrollableHeight,a.isCollapsed,a.onToggle,a.threadID,b("bs_js_primitive").null_undefined_to_opt(a.threadFBID),[])});f.endOfMediaIndicator=i;f.component=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerThreadInfoPanelScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={prevHeight:-1,prevIsScrolledToBottom:!1},this.$1=null,this.isScrolledToBottom=function(){if(this.refs.scrollable)return this.refs.scrollable.isScrolledToBottom();else return!0}.bind(this),this.getHeight=function(){if(this.refs.scrollable)return b("ReactDOM").findDOMNode(this.refs.scrollable).offsetHeight;else return 0}.bind(this),this.$2=function(){var a=this.isScrolledToBottom(),b=this.getHeight();(this.state.prevIsScrolledToBottom!==a||this.state.prevHeight!==b)&&this.setState({prevHeight:b,prevIsScrolledToBottom:a})}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$2},b("React").createElement(b("MessengerScrollableArea.react"),{height:"100%",onScroll:this.$2,ref:"scrollable"},this.props.children(this.state.prevHeight,this.state.prevIsScrolledToBottom,this.isScrolledToBottom,this.getHeight)))};a.propTypes={children:c.func.isRequired};e.exports=a}),null);
__d("XMessagingSetThreadImageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_thread_image/",{})}),null);
__d("MessengerThreadInfoPanelContainer.react",["cx","fbt","AsyncRequest","Bootloader","BootloadOnRender.react","ChatPinnedThreadsEntryPoint","CurrentUser","ErrorBoundary.react","IgnoreMessagesTypedLogger","ImmutableObject","JSResource","LazyComponent.react","LoadOnRender.react","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryMessageActions","MercuryMessageObject","MercuryMessages","MercuryThreadActions","MercuryThreadInfo","MessageRequestUtils","MessageThreadAssociatedObjectUtils","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerConfig","MessengerConfirmBlockThreadDialogReact.bs","MessengerConfirmLeaveGroupDialogReact.bs","MessengerContactActions.bs","MessengerContactAdapters","MessengerDialogs.bs","MessengerDomIDs.bs","MessengerInfoPanelAssociatedObjectSection.react","MessengerInfoPanelGroupSection.react","MessengerInfoPanelGroupThreadDescriptionContainerReact.bs","MessengerInfoPanelNameSectionReact.bs","MessengerInfoPanelPeopleSection.react","MessengerInfoPanelThreadOptionsContainerReact.bs","MessengerInfoPanelWorkContextContainerReact.bs","MessengerInfoPanelWorkGroupLinksContainerReact.bs","MessengerLeaveGroupAction","MessengerMessage.bs","MessengerMessageRequestsTypedLogger","MessengerObjectAssociationType","MessengerSettingsActions","MessengerSettingsStore","MessengerSharedFilesReact.bs","MessengerSharedLinks.react","MessengerSharedPhotosReact.bs","MessengerThreadInfoPanelScrollableArea.react","React","StoreAndPropBasedStateMixin","URI","WorkModeConfig","XMessagingSetThreadImageController","XMessagingSetThreadNameController","getPageIDFromThreadID","gkx","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,j=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent,k=b("MessengerContactActions.bs").actions,l=b("MessengerDomIDs.bs").ids,m=b("MessengerInfoPanelGroupThreadDescriptionContainerReact.bs").jsComponent,n=b("MessengerInfoPanelNameSectionReact.bs").jsComponent,o=b("MessengerInfoPanelThreadOptionsContainerReact.bs").jsComponent,p=b("MessengerInfoPanelWorkContextContainerReact.bs").jsComponent,q=b("MessengerInfoPanelWorkGroupLinksContainerReact.bs").jsComponent,r=b("MessengerSharedFilesReact.bs").jsComponent,s=b("MessengerSharedPhotosReact.bs").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerThreadInfoPanelContainer",mixins:[b("StoreAndPropBasedStateMixin")(b("MessengerSettingsStore"))],propTypes:{className:a.string.isRequired,blockedIds:a.instanceOf(Set).isRequired,contactData:a.object,participants:a.instanceOf(b("immutable").Map).isRequired,thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired},statics:{calculateState:function(){var a=b("MessengerSettingsStore").getSettings(),c=a.links_section_collapsed,d=a.associated_object_section_collapsed,e=a.people_section_collapsed,f=a.photos_section_collapsed,g=a.files_section_collapsed,h=a.thread_section_collapsed,i=a.thread_stats_section_collapsed,j=a.group_section_collapsed,k=a.group_approval_section_collapsed,l=a.group_link_section_collapsed,m=a.description_section_collapsed,n=a.saved_message_section_collapsed;a=a.page_link_section_collapsed;return{links_section_collapsed:c,associated_object_section_collapsed:d,people_section_collapsed:e,photos_section_collapsed:f,files_section_collapsed:g,thread_section_collapsed:h,thread_stats_section_collapsed:i,group_section_collapsed:j,group_approval_section_collapsed:k,group_link_section_collapsed:l,description_section_collapsed:m,saved_message_section_collapsed:n,page_link_section_collapsed:a}}},render:function(){var a=this.props.contactData||{},c=this.props.thread.thread_fbid||this.props.thread.other_user_fbid,d=b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(this.props.viewer,this.props.blockedIds,this.props.thread);return b("React").createElement(b("MessengerThreadInfoPanelScrollableArea.react"),{className:this.props.className},function(e,f,g,i){return b("React").createElement("div",{className:"_3tkv",id:l.THREAD_INFO_PANEL},b("React").createElement("h3",{className:"accessible_elem"},h._("Conversation Information")),b("React").createElement(n,{contact:a.contact,isUserActive:a.isUserActive||!1,isBlocked:d,lastActive:a.lastActive,onArchive:this._handleArchive,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMuteChange,onThreadNameChange:this._handleThreadNameChange,onThreadPhotoChange:this._handleThreadPhotoChange,onPin:this._handlePin,onUnpin:this._handleUnpin,onUnmute:this._handleUnmute,onIgnore:this._handleIgnore,onBlock:this._handleBlock,onUnblock:this._handleUnblock,showBlock:this.props.thread.is_canonical_user&&this.props.thread.other_user_fbid&&this.props.viewer!==this.props.thread.other_user_fbid,participants:this.props.participants,platform:a.platform,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical,showReport:this._isPageChat(),thread:this.props.thread,viewer:this.props.viewer}),this._renderAssociatedObject(),this._renderWorkContext(),this._renderMarketplaceBanner(),b("React").createElement(o,{isCollapsed:this.state.thread_section_collapsed,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,onToggle:this._handleThreadSectionToggle}),this._renderPageLink(),b("MessengerConfig").IGDE?this._renderGroupDescription():null,b("MessengerConfig").IVITP?this._renderGroupLink():null,b("MessengerAdminGroupUtils").canSeeGroupOptionsSection(this.props.thread,this.props.viewer)?this._renderGroupOptions():null,this._renderGames(),this.props.thread.is_canonical?null:this._renderMembers(),b("MessengerConfig").canSaveMessages?this._renderSavedMessages():null,b("React").createElement(b("MessengerSharedLinks.react"),{threadID:this.props.thread.thread_id,threadFBID:c,customColor:this.props.thread.solid_color,isCollapsed:this.state.links_section_collapsed,onToggle:this._handleLinksSectionToggle}),b("React").createElement(r,{threadID:this.props.thread.thread_id,threadFBID:c,isCollapsed:this.state.files_section_collapsed,onToggle:this._handleFilesSectionToggle}),b("React").createElement(s,{getIsScrolledToBottom:g,getScrollableHeight:i,isCollapsed:this.state.photos_section_collapsed,onToggle:this._handlePhotosSectionToggle,threadID:this.props.thread.thread_id,threadFBID:c,viewer:this.props.viewer}))}.bind(this))},_handleArchive:function(){this._getThreadActions().archive(this.props.thread.thread_id),b("MessengerActions").selectThread(null)},_handlePin:function(){this._getThreadActions().pin(this.props.thread.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_INFO_PANEL)},_handleUnpin:function(){this._getThreadActions().unpin(this.props.thread.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_INFO_PANEL)},_handleDelete:function(){this._getThreadActions()["delete"](this.props.thread.thread_id),b("MessengerActions").selectThread(null)},_handleMarkRead:function(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function(){this._getThreadActions().markSpam(this.props.thread.thread_id),b("MessengerActions").selectThread(null)},_handleMarkUnread:function(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function(a){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,a)},_handleUnmute:function(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleIgnore:function(){this._getThreadActions().changeFolder(this.props.thread.thread_id,"other"),b("MessengerActions").selectThread(null),new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlock:function(){var a=this.props.thread;a=a.thread_id;var b=this.props.contactData&&this.props.contactData.contact.short_name||h._("sender");a&&this._getThreadActions().blockIgnoreOnMessengerDotCom(!0,a,function(){this._handleAfterBlock(b)}.bind(this))},_handleAfterBlock:function(a){var c=this.props,d=c.thread;c=c.viewer;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{participantName:a})});c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.thread_id,b("MercuryIDs").getParticipantIDFromUserID(c));d.folder===b("MessagingTag").PENDING&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.thread_id)).setSurface("thread").setFolderType(b("MessagingTag").PENDING).setThreadKey(c).setEntryPoint("settings").log()},_handleUnblock:function(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_handleMuteChange:function(a){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,a)},_handleContactSelect:function(a,event){a=b("MercuryIDs").getThreadIDFromParticipantID(a.uid);a&&b("MessengerActions").selectThread(a)},_handleContactAction:function(a,c){__p&&__p();if(b("MercuryIDs").getUserIDFromParticipantID(c.uid)!==this.props.viewer)switch(a){case k.MESSAGE:this._handleContactSelect(c);break;case k.PROFILE:var d=this.props.participants.get(c.uid);d&&d.href?window.open(d.href):this._handleContactSelect(c);break;case k.REMOVE:if(!b("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)){d=new(b("URI"))("/chat/remove_participants/");d.addQueryData({uid:b("MercuryIDs").getUserIDFromParticipantID(c.uid),tid:this.props.thread.thread_fbid});d=new(b("AsyncRequest"))(d);d.send()}break}switch(a){case k.REMOVE_OWNER:b("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)||this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[b("MercuryIDs").getUserIDFromParticipantID(c.uid)],!1);break;case k.ADD_OWNER:b("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)||this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[b("MercuryIDs").getUserIDFromParticipantID(c.uid)],!0);break}},_handleLeaveGroup:function(){if(this.props.viewer){var a=b("MessengerAdminGroupUtils").isAdmin(this.props.thread.admin_ids,this.props.viewer);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:a,thread:this.props.thread})}.bind(this))}},_onLeaveGroupConfirm:function(){b("MessengerLeaveGroupAction").leaveGroup(this.props.thread,this.props.viewer)},_handleThreadNameChange:function(a){var c=b("XMessagingSetThreadNameController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({thread_id:this.props.thread.thread_fbid,thread_name:a}).send()},_handleThreadPhotoChange:function(a,c){c=(c=c)!=null?(c=c.metadata)!=null?(c=c[0])!=null?c.image_id:c:c:c;if(!c)return;var d=b("XMessagingSetThreadImageController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(d).setData({thread_id:b("MercuryIDs").getThreadFBIDFromThreadID(a),thread_image_id:c}).send()},_handleAssociatedObjectSectionToggle:function(){b("MessengerSettingsActions").changeSettings({associated_object_section_collapsed:!this.state.associated_object_section_collapsed})},_handlePeopleSectionToggle:function(){b("MessengerSettingsActions").changeSettings({people_section_collapsed:!this.state.people_section_collapsed})},_handlePhotosSectionToggle:function(){b("MessengerSettingsActions").changeSettings({photos_section_collapsed:!this.state.photos_section_collapsed})},_handleFilesSectionToggle:function(){b("MessengerSettingsActions").changeSettings({files_section_collapsed:!this.state.files_section_collapsed})},_handleThreadSectionToggle:function(){b("MessengerSettingsActions").changeSettings({thread_section_collapsed:!this.state.thread_section_collapsed})},_handleThreadStatsSectionToggle:function(){b("MessengerSettingsActions").changeSettings({thread_stats_section_collapsed:!this.state.thread_stats_section_collapsed})},_handleGroupOptionsSectionToggle:function(){b("MessengerSettingsActions").changeSettings({group_section_collapsed:!this.state.group_section_collapsed})},_handleGroupOptionsApprovalSectionToggle:function(){b("MessengerSettingsActions").changeSettings({group_approval_section_collapsed:!this.state.group_approval_section_collapsed})},_handleLinksSectionToggle:function(){b("MessengerSettingsActions").changeSettings({links_section_collapsed:!this.state.links_section_collapsed})},_handleDescriptionSectionToggle:function(){b("MessengerSettingsActions").changeSettings({description_section_collapsed:!this.state.description_section_collapsed})},_handleGroupLinkSectionToggle:function(){b("MessengerSettingsActions").changeSettings({group_link_section_collapsed:!this.state.group_link_section_collapsed})},_handleSavedMessageSectionToggle:function(){var a=!this.state.saved_message_section_collapsed;b("MessengerSettingsActions").changeSettings({saved_message_section_collapsed:a})},_handlePageMDotMeLinkSectionToggle:function(){b("MessengerSettingsActions").changeSettings({page_link_section_collapsed:!this.state.page_link_section_collapsed})},_getThreadActions:function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function(){return b("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function(){return b("MercuryMessageObject").getForFBID(this.props.viewer)},_isPageChat:function(){return!!b("getPageIDFromThreadID")(this.props.thread.thread_id)},_renderAssociatedObject:function(){if(b("CurrentUser").isWorkUser()&&b("gkx")("AT7k7OhU4PWHaK3fZbJiCkzrPTve3t2jCAS7rvzYrArN366s3vmsMndOwEwMVSC_0vaVtQSCeeDMAtA6LATUc2g8gWhlIV3hqeVehFRFMg0l_g")&&this.props.thread.object_association_type===b("MessengerObjectAssociationType").GENERAL_CHAT)return b("React").createElement(q,{isCollapsed:this.state.associated_object_section_collapsed,thread:this.props.thread,onToggle:this._handleAssociatedObjectSectionToggle});var a=b("MessageThreadAssociatedObjectUtils").shouldRender(this.props.thread.associated_object);return!a?null:b("React").createElement(b("MessengerInfoPanelAssociatedObjectSection.react"),{isCollapsed:this.state.associated_object_section_collapsed,onToggle:this._handleAssociatedObjectSectionToggle,customColor:this.props.thread.solid_color,associatedObject:this.props.thread.associated_object})},_renderWorkContext:function(){var a=this.props.contactData||{};a=a.contact;return!b("CurrentUser").isWorkUser()||!a||!a.href||!b("gkx")("AT4U12g3_bcwn6ufLpU4OEUYc1kFcjBGcKNGLrZ6ojdDQcQXRWXqnapmNxWOT3hrOPJ53IJ8NqlKsl875YQK2FZ5")||b("WorkModeConfig").hide_email_address||a.type!=="user"&&a.type!=="fb4c"?null:b("React").createElement(p,{isCollapsed:this.state.thread_stats_section_collapsed,thread:this.props.thread,onToggle:this._handleThreadStatsSectionToggle,href:a.href})},_renderMarketplaceBanner:function(){var a,c,d;d=(d=this.props.thread)!=null?d.marketplace_thread_data:d;c=(c=d)!=null?c.for_sale_item:c;a=(a=d)!=null?a.buyer_fbid:a;d=(d=d)!=null?d.seller_fbid:d;return!c||!a||!d?null:b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MarketplaceMessengerContextBanner.react").__setRef("MessengerThreadInfoPanelContainer.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{buyerID:a,forSaleItem:c,renderLocation:"messenger",sellerID:d})})},_renderPageLink:function(){if(b("CurrentUser").isWorkUser()||!this._isPageChat())return null;var a=function(a){b("Bootloader").loadModules(["MessengerInfoPanelPageThreadMDotMeLinkContainerReact.bs"],function(b){b=b.jsComponent;return a(b)},"MessengerThreadInfoPanelContainer.react")};return b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("LoadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{isCollapsed:this.state.page_link_section_collapsed,onToggle:this._handlePageMDotMeLinkSectionToggle,thread:this.props.thread,viewer:this.props.viewer}),loader:a,placeholder:b("React").createElement("div",null)}))},_renderGroupDescription:function(){var a;a=this.props.thread.marketplace_thread_data&&(((a=this.props.thread.marketplace_thread_data)!=null?a.for_sale_item:a)||((a=this.props.thread.marketplace_thread_data)!=null?a.buyer_fbid:a)||((a=this.props.thread.marketplace_thread_data)!=null?a.seller_fbid:a));a=a||this.props.thread.is_canonical||b("MessageRequestUtils").isMessageRequest(this.props.thread)||this.props.thread.associated_object;return a?null:b("React").createElement(m,{isCollapsed:this.state.description_section_collapsed,onToggle:this._handleDescriptionSectionToggle,thread:this.props.thread,viewer:this.props.viewer})},_renderGroupLink:function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{isCollapsed:this.state.group_link_section_collapsed,onToggle:this._handleGroupLinkSectionToggle,thread:this.props.thread,viewer:this.props.viewer}),loader:b("JSResource")("messengerInfoPanelGroupLinkContainerReactComponent").__setRef("MessengerThreadInfoPanelContainer.react"),placeholder:b("React").createElement("div",null)})},_renderGroupOptions:function(){return b("React").createElement(b("MessengerInfoPanelGroupSection.react"),{isOptionsCollapsed:this.state.group_section_collapsed,onOptionsToggle:this._handleGroupOptionsSectionToggle,isApprovalsCollapsed:this.state.group_approval_section_collapsed,onApprovalToggle:this._handleGroupOptionsApprovalSectionToggle,onToggle:this._handleThreadSectionToggle,participants:this.props.participants,viewer:this.props.viewer,thread:this.props.thread})},_renderGames:function(){return b("gkx")("AT6PPN9XdosR0Rgf7ysDaWH9yG554xZ0Vp0wqH9FcQWKWHefu3Fidk1XtmEfDBRdDx5TzVERt26C_olGYNMPgXP_hfHFkXphabtXKhBOj4fIqw")?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerInfoPanelGamesSection.react").__setRef("MessengerThreadInfoPanelContainer.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{thread:this.props.thread})}):null},_renderMembers:function(){return b("React").createElement(b("MessengerInfoPanelPeopleSection.react"),{canViewerReply:b("MercuryThreadInfo").canReply(this.props.thread),contactAdapter:b("MessengerContactAdapters").fromMercuryParticipant,isCollapsed:this.state.people_section_collapsed,isViewerSubscribed:this.props.thread.is_subscribed,onAddPeopleClick:this._handleAddPeopleClick,onContactAction:this._handleContactAction2,onContactSelect:this._handleContactSelect2,onToggle:this._handlePeopleSectionToggle,participants:this.props.participants,viewer:this.props.viewer,adminIds:this.props.thread.admin_ids,thread:this.props.thread})},_handleAddPeopleClick:function(event){event.preventDefault(),b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("messengerAddToConversationDialogReactComponent").__setRef("MessengerThreadInfoPanelContainer.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{thread:this.props.thread,viewer:this.props.viewer})})}.bind(this))},_handleContactAction2:function(a,c){this._handleContactAction(a,b("MessengerContactAdapters").fromMercuryParticipant(c))},_handleContactSelect2:function(a,event){this._handleContactSelect(b("MessengerContactAdapters").fromMercuryParticipant(a))},_renderSavedMessages:function(){var a=h._("Saved Messages"),c=this.props,d=c.thread;c=c.viewer;var e=d.thread_id,f=b("MercuryMessages").getForFBID(c),g=b("MessengerMessage.bs").getSavedMessages(f.getThreadMessagesRangeNow(e,0,5));return!g||g.length===0?null:b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerInfoPanelSavedMessageSection.react").__setRef("MessengerThreadInfoPanelContainer.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{title:a,thread:d,viewer:c,onToggle:this._handleSavedMessageSectionToggle,isSectionCollapsed:this.state.saved_message_section_collapsed,messages:b("MessengerMessage.bs").getSavedMessages(f.getThreadMessagesRangeNow(e,0,5))})})}});e.exports=c}),null);
__d("MercurySearchContextResults",["KeyedCallbackManager","MercuryAPIArgsSource","MercuryIDs","MercuryPayloadSource","MercuryThreadlistConstants","MercuryThreadIDMap","RangedCallbackManager","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MessengerMessageTransformer.bs","WebMessengerConstants"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MercuryThreadIDMap").get(),h=b("MercuryServerPayloadPreprocessor").get(),i=new(b("KeyedCallbackManager"))(),j=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_COUNT,k=b("WebMessengerConstants").MORE_SEARCH_CONTEXT_COUNT;a={getSearchContext:function(a,c,d){__p&&__p();if(a){var e=i.executeOrEnqueue(a,function(b){b=m(b,a);d(b)}),f=i.getUnavailableResources(e);if(f.length){f={message_id:a,limit:j+1};var h=g.getServerIDFromClientIDNow(c);c=b("MercuryIDs").tokenize(c);c.type=="user"?f.other_user_fbid=h:f.thread_fbid=h;n(f)}return e}},getMoreSearchContext:function(a,c,d,e){__p&&__p();if(a){var f=i.getResource(a);if(f){var h=d==b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP?f.up_message_ids:f.down_message_ids,j=h.getCurrentArraySize()+k,l=h.executeOrEnqueue(0,j,function(){var b=m(f,a);e(b)});h=h.getUnavailableResources(l);if(h.length){h={message_id:a,limit:j,direction:d};j=g.getServerIDFromClientIDNow(c);d=b("MercuryIDs").tokenize(c);d.type=="user"?h.other_user_fbid=j:h.thread_fbid=j;n(h)}return l}}},handleUpdate:function(a){__p&&__p();if(a.graphql_payload){var c=a.graphql_payload.map(function(c){return b("MessengerMessageTransformer.bs").transformMessage(a.viewer,c,a.thread_data,a.for_page)});h.handleUpdate({actions:c,payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}c=a.search_context||{};for(var d in c){var e=c[d],f=e.other_user_fbid||e.thread_fbid;f=g.getClientIDFromServerIDNow(f);var m=!i.getResource(d);f=m?{thread_id:f,up_message_ids:new(b("RangedCallbackManager"))(),down_message_ids:new(b("RangedCallbackManager"))()}:i.getResource(d);var n=m?j+1:k;e.up_message_ids&&(f.up_message_ids.getCurrentArraySize()===0||e.up_message_ids.length>=f.up_message_ids.getCurrentArraySize())&&l(f.up_message_ids,e.up_message_ids,n);e.down_message_ids&&(f.down_message_ids.getCurrentArraySize()===0||e.down_message_ids.length>=f.down_message_ids.getCurrentArraySize())&&l(f.down_message_ids,e.down_message_ids,n);m&&i.setResource(d,f)}},unsubscribe:function(a,c,d){if(c){c=i.getResource(c);c?d==b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP?c.up_message_ids.unsubscribe(a):c.down_message_ids.unsubscribe(a):i.unsubscribe(a)}}};function l(a,b,c){var d=a.getCurrentArraySize();d=b.length<d+c;b.length&&(a.removeAllResources(),a.addResourcesWithoutSorting(b,0));d&&a.setReachedEndOfArray()}function m(a,b){var c=a.up_message_ids.hasReachedEndOfArray(),d=a.up_message_ids.getAllResources();c||d.shift();var e=a.down_message_ids.hasReachedEndOfArray(),f=a.down_message_ids.getAllResources();e||f.pop();return{thread_id:a.thread_id,message_id:b,up_message_ids:d,up_exhausted:c,down_message_ids:f,down_exhausted:e}}function n(a){a.client=b("MercuryAPIArgsSource").WEBMESSENGER,b("MercuryServerDispatcher").trySend("/ajax/mercury/search_context.php",a)}b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_context.php":{mode:b("MercuryServerDispatcher").IMMEDIATE,handler:a.handleUpdate}});e.exports=a}),null);
__d("MercurySearchSnippetResults",["MercuryAPIArgsSource","MercuryPayloadSource","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercurySingletonMixin","MercuryThreadIDMap","MercuryThreadlistConstants","MessengerEnvironment","MessengerServerPayloadTransformer.bs","RangedCallbackManager"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MessengerEnvironment").messengerui?b("MercuryAPIArgsSource").MESSENGER:b("MercuryAPIArgsSource").WEBMESSENGER,h={},i={},j=null,k=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_COUNT,l=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_LIMIT,m=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_MORE;function a(a){"use strict";this.$1=a,this.$2=b("MercuryServerPayloadPreprocessor").getForFBID(a),b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_snippets.php":{request_user_id:a,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a){this.handleUpdate(a)}.bind(this)}}),this.$3=b("MercuryThreadIDMap").getForFBID(a)}a.prototype.getFBID=function(){"use strict";return this.$1};a.prototype.getThreadIDMap=function(){"use strict";return this.$3};a.prototype.getAllThreadSearchResults=function(a,b){"use strict";a&&n(this.$1,a,l,0,b)};a.prototype.getAllLocalThreadSearchResults=function(a,b){"use strict";if(a){var c=h[a];if(c){c=c.getCurrentArraySize();n(this.$1,a,0,c,b)}}};a.prototype.getAllThreadSearchMoreResults=function(a,b){"use strict";if(a){var c=h[a];if(c){c=c.getCurrentArraySize();n(this.$1,a,m,c,b)}}};a.prototype.getSingleThreadSearchResults=function(a,b,c){"use strict";if(!a||!b)return;o.call(this,a,b,k,0,c)};a.prototype.getSingleThreadSearchMoreResults=function(a,b,c){"use strict";__p&&__p();if(!a||!b)return;if(!i[b])return;var d=i[b][a];if(d){var e=d.num_total_snippets;d=d.snippets_cbm.getCurrentArraySize();e=e-d;if(e>0){e=e>m?m:e;o.call(this,a,b,e,d,c)}}};a.prototype.countSnippetsMatchingQueryInThread=function(a,b){"use strict";b=i[b][a];if(b)return b.num_total_snippets};a.prototype.findIndexOfSnippet=function(a,b,c,d){"use strict";d=t(a,b);a=d.getAllResources();for(var b=0;b<a.length;b++)if(c===a[b].message_id)return b};a.prototype.findSnippetAtIndex=function(a,b,c,d){"use strict";q(a,b,c),r.call(this,a,b,c,d)};a.prototype.handleUpdate=function(a){"use strict";__p&&__p();if(a.graphql_payload){var c=(a.graphql_payload.message_threads||[]).map(function(c){return b("MessengerServerPayloadTransformer.bs").transformThread(this.$1,c,a.is_page)}.bind(this));this.$2.handleUpdate({threads:c,payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}else a.mercury_payload&&this.$2.handleUpdate(a.mercury_payload);var d=a.search_snippets||{};Object.keys(d).filter(function(a){return!!d[a]}).forEach(function(a){Object.keys(d[a]).forEach(function(b){if(!d[a][b].snippets)return;d[a][b].snippets.forEach(function(a){a.matched_keywords=p(a.matched_keywords)})})});c=a.offset;var e=[];for(var f in d){var g=d[f];for(var h in g){var j=g[h],k=a.other_user_fbid||a.thread_fbid,l=this.$3.getClientIDFromServerIDNow(h),m=j.snippets,n=t(f,l),o=n.getCurrentArraySize();if(!k){e.push(l);if(o)continue}else if(c!=o)continue;l=i[l][f];l.num_total_snippets=j.num_total_snippets;j=m?m.length:0;j>0&&n.addResourcesWithoutSorting(m,o);(!k||a.limit>j)&&(n.getCurrentArraySize()==l.num_total_snippets&&n.setReachedEndOfArray())}if(!k){m=s(f);o=m.getCurrentArraySize();c==o&&(m.addResourcesWithoutSorting(e,o),a.limit>e.length&&m.setReachedEndOfArray())}}};function n(a,b,c,d,e){__p&&__p();if(j&&!j.thread_id){var f=s(j.query);f.unsubscribe(j.subscriber_id);j=null}var f=s(b),g=d+c;g=f.executeOrEnqueue(0,g,function(a){var c={};for(var d=0;d<a.length;d++){var g=a[d],h=i[g][b];c[g]={num_total_snippets:h.num_total_snippets,snippets:h.snippets_cbm.getAllResources()}}g=f.hasReachedEndOfArray();e(c,g)});var h=f.getUnavailableResources(g);if(h.length){j={query:b,thread_id:null,subscriber_id:g};h={query:b,offset:d,limit:c+1,snippetLimit:k};h.identifier="thread_fbid";u(h,a)}}function o(a,b,c,d,e){__p&&__p();if(j&&j.thread_id){var f=t(j.query,j.thread_id);f.unsubscribe(j.subscriber_id);j=null}var f=t(a,b),g=d+c;g=f.executeOrEnqueue(0,g,function(){var d=f.getAllResources(),c=i[b][a].num_total_snippets;e(d,c)});var h=f.getUnavailableResources(g);if(h.length){j={query:a,thread_id:b,subscriber_id:g};h=this.getThreadIDMap().getServerIDFromClientIDNow(b);g={query:a,snippetOffset:d,snippetLimit:c,thread_fbid:h,identifier:"thread_fbid"};u(g,this.getFBID())}}function p(a){if(a instanceof Array){var b={};for(var c=0;c<a.length;c++)b[c.toString()]=a[c];return b}else return a}function q(a,b,c){}function r(a,b,c,d){__p&&__p();var e=i[b][a],f=e.snippets_cbm.getAllResources();e=e.num_total_snippets;var g=f.length;if(c<g){d(f[c].message_id);return}f=e-g;e=f>m?m:f;o.call(this,a,b,e,g,function(e,f){r.call(this,a,b,c,d)})}function s(a){h[a]||(h[a]=new(b("RangedCallbackManager"))());return h[a]}function t(a,c){i[c]||(i[c]={});var d=i[c][a];d||(d={num_total_snippets:-1,snippets_cbm:new(b("RangedCallbackManager"))()},i[c][a]=d);return d.snippets_cbm}function u(a,c){a.client=g,b("MercuryServerDispatcher").trySend("/ajax/mercury/search_snippets.php",a,null,c)}Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MessengerThreadSearchStore",["cx","Bootloader","ImmutableObject","MercuryMessages","MercurySearchContextResults","MercurySearchSnippetResults","MessengerActions","MessengerComposerSteps","MessengerComposerStore","MessengerContentSearchFunnelLoggerConstants","MessengerDispatcher","MessengerState.bs","MessengerStore","MessengerThreadSearchActions","MessengerURIStore","MessengerView","gkx","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("immutable").List;c=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS;var j=c.BROWSE_CONTEXT,k=c.BROWSE_MESSAGE_IN_THREAD,l=c.LOAD_MORE_THREADS,m=c.LOAD_MESSAGE_IN_THREAD,n=c.SELECT_THREAD,o=c.THREAD_IMPRESSIONS,p={activeThreadID:null,downExhausted:null,loading:!1,messages:null,query:null,results:i(),selectedIndex:0,threadID:null,totalCount:0,upExhausted:null,threads:null,threadsExhausted:null,mid:null};d=babelHelpers.inherits(a,b("MessengerStore"));h=d&&d.prototype;function a(){h.constructor.call(this),this.$MessengerThreadSearchStore3=p}a.prototype.getForFBID=function(a){this.$MessengerThreadSearchStore1=a,this.$MessengerThreadSearchStore4=new(b("MercurySearchSnippetResults"))(a),this.$MessengerThreadSearchStore2=b("MercuryMessages").getForFBID(a)};a.prototype.getState=function(){return this.$MessengerThreadSearchStore3};a.prototype.__onDispatch=function(a){__p&&__p();if(!this.$MessengerThreadSearchStore4)return;b("MessengerDispatcher").waitFor([b("MessengerURIStore").getDispatchToken()]);var c=b("MessengerURIStore").getState(),d=c.activeThreadID,e=c.masterView,f=c.mid,g=c.query;c=e===b("MessengerView").MASTER.SEARCH;switch(a.type){case b("MessengerActions").Types.REPLACE_STATE:if(f!=this.$MessengerThreadSearchStore3.mid&&d!=this.$MessengerThreadSearchStore3.activeThreadID){f&&d?(this.$MessengerThreadSearchStore3=babelHelpers["extends"]({},this.$MessengerThreadSearchStore3,{threadID:d,mid:f}),b("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore7(),this.$MessengerThreadSearchStore3.threadID,function(a){return this.setMessages(a)}.bind(this))):(this.$MessengerThreadSearchStore8(),this.$MessengerThreadSearchStore3=p);return}else(this.$MessengerThreadSearchStore3.query!==g||this.$MessengerThreadSearchStore3.threadID!==d)&&(g&&!f?b("MessengerComposerStore").getState().step!==b("MessengerComposerSteps").NULL?this.$MessengerThreadSearchStore9():(this.$MessengerThreadSearchStore3=babelHelpers["extends"]({},this.$MessengerThreadSearchStore3,{loading:!0}),this.$MessengerThreadSearchStore4.getSingleThreadSearchResults(g,d,function(a,b){this.$MessengerThreadSearchStore10({name:n,thread_id:d,has_results:b?b>0:!1}),this.accumulateSearchResultsAndEmitChange(g,d,0,a,b)}.bind(this))):this.$MessengerThreadSearchStore9(),c?(this.$MessengerThreadSearchStore3=babelHelpers["extends"]({},this.$MessengerThreadSearchStore3,{loading:!0}),g!==this.$MessengerThreadSearchStore3.query?(this.$MessengerThreadSearchStore6=Date.now(),this.$MessengerThreadSearchStore4.getAllThreadSearchResults(g,function(a,b){this.setAllThreadResults(a,b);b=Object.keys(a);this.$MessengerThreadSearchStore10({name:o,threads:b})}.bind(this))):(this.$MessengerThreadSearchStore6=Date.now(),this.$MessengerThreadSearchStore4.getAllLocalThreadSearchResults(g,function(a,b){return this.setAllThreadResults(a,b)}.bind(this)))):this.$MessengerThreadSearchStore11(),this.emitChange());break;case b("MessengerThreadSearchActions").Types.CHANGE_RESULT_INDEX:var h=Math.max(Math.min(this.$MessengerThreadSearchStore3.totalCount-1,this.$MessengerThreadSearchStore3.selectedIndex+a.delta),0);if(h===this.$MessengerThreadSearchStore3.selectedIndex)break;h>=this.$MessengerThreadSearchStore3.results.size?(this.$MessengerThreadSearchStore10({name:k,thread_id:this.$MessengerThreadSearchStore3.threadID}),this.$MessengerThreadSearchStore6=Date.now(),this.$MessengerThreadSearchStore3=babelHelpers["extends"]({},this.$MessengerThreadSearchStore3,{loading:!0}),this.$MessengerThreadSearchStore4.getSingleThreadSearchMoreResults(g,d,function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.accumulateSearchResultsAndEmitChange.apply(this,[g,d,h].concat(b))}.bind(this))):(this.$MessengerThreadSearchStore6=Date.now(),this.$MessengerThreadSearchStore10({name:k,thread_id:this.$MessengerThreadSearchStore3.threadID}),this.$MessengerThreadSearchStore3=babelHelpers["extends"]({},this.$MessengerThreadSearchStore3,{loading:!0,selectedIndex:h}),b("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore7(),this.$MessengerThreadSearchStore3.threadID,function(a){return this.setMessages(a)}.bind(this)));this.emitChange();e=this.$MessengerThreadSearchStore3.results.get(h);this.$MessengerThreadSearchStore10({name:m,mid:e.message_id,thread_id:this.$MessengerThreadSearchStore3.threadID,latency:Date.now()-this.$MessengerThreadSearchStore6});break;case b("MessengerThreadSearchActions").Types.GET_MORE_CONTEXT:this.$MessengerThreadSearchStore3=babelHelpers["extends"]({},this.$MessengerThreadSearchStore3,{loading:!0});b("MercurySearchContextResults").getMoreSearchContext(this.$MessengerThreadSearchStore7(),this.$MessengerThreadSearchStore3.threadID,a.direction,function(a){this.setMessages(a),this.$MessengerThreadSearchStore10({name:j})}.bind(this));this.emitChange();break;case b("MessengerThreadSearchActions").Types.GET_MORE_THREADS:this.$MessengerThreadSearchStore5=Date.now();this.$MessengerThreadSearchStore3=babelHelpers["extends"]({},this.$MessengerThreadSearchStore3,{loading:!0});this.$MessengerThreadSearchStore4.getAllThreadSearchMoreResults(g,function(a,b){this.$MessengerThreadSearchStore10({name:l,threads:Object.keys(a),latency:Date.now()-this.$MessengerThreadSearchStore5}),this.setAllThreadResults(a,b)}.bind(this));this.emitChange();break}};a.prototype.setAllThreadResults=function(a,c){__p&&__p();var d=Object.keys(a);d=d.map(function(c){c=b("MessengerState.bs").getThreadMetaNow(this.$MessengerThreadSearchStore1,c);if(!c)return;var d=a[c.thread_id];if(!d)return;return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{snippetCount:d.num_total_snippets}))}.bind(this)).filter(Boolean);this.$MessengerThreadSearchStore3=babelHelpers["extends"]({},this.$MessengerThreadSearchStore3,{threads:d,threadsExhausted:c,loading:!1});this.emitChange()};a.prototype.$MessengerThreadSearchStore11=function(){this.$MessengerThreadSearchStore12(["threads","threadsExhausted","loading"])};a.prototype.accumulateSearchResultsAndEmitChange=function(a,c,d,e,f){this.$MessengerThreadSearchStore3=babelHelpers["extends"]({},this.$MessengerThreadSearchStore3,{query:a,threadID:c,selectedIndex:d||0,results:i(e),totalCount:f||0});if(this.$MessengerThreadSearchStore3.results.size){b("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore7(),this.$MessengerThreadSearchStore3.threadID,function(a){return this.setMessages(a)}.bind(this));a=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex);this.$MessengerThreadSearchStore10({name:m,mid:a.message_id,thread_id:this.$MessengerThreadSearchStore3.threadID,latency:Date.now()-this.$MessengerThreadSearchStore6})}else this.$MessengerThreadSearchStore3=babelHelpers["extends"]({},this.$MessengerThreadSearchStore3,{messages:null});this.emitChange()};a.prototype.$MessengerThreadSearchStore9=function(){this.$MessengerThreadSearchStore8(),this.$MessengerThreadSearchStore12(["query","threadID","selectedIndex","results","totalCount","downExhausted","loading","messages","upExhausted"])};a.prototype.$MessengerThreadSearchStore12=function(a){a=a.reduce(function(a,b){a[b]=p[b];return a},{});this.$MessengerThreadSearchStore3=babelHelpers["extends"]({},this.$MessengerThreadSearchStore3,a)};a.prototype.setMessages=function(a){__p&&__p();var c=this.$MessengerThreadSearchStore2.getMessagesFromIDs([].concat(a.up_message_ids,a.message_id,a.down_message_ids)).map(function(c){if(c&&c.message_id===a.message_id)if(!this.$MessengerThreadSearchStore3.results.isEmpty()){var d=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex),e=d.matched_keywords,f=c.body.indexOf(d.body);d=Object.keys(d.matched_keywords).map(function(a){return{offset:f+Number(a),length:e[a].length,entity:{url:""},className:"__in"}});return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{ranges:c.ranges?c.ranges.concat(d):d}))}else return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{isSelected:!0}));return c}.bind(this)).map(function(a){return new(b("ImmutableObject"))(a)});this.$MessengerThreadSearchStore3=babelHelpers["extends"]({},this.$MessengerThreadSearchStore3,{downExhausted:a.down_exhausted,loading:!1,messages:i(c),upExhausted:a.up_exhausted});this.emitChange()};a.prototype.$MessengerThreadSearchStore7=function(){return this.$MessengerThreadSearchStore3.mid||this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex).message_id};a.prototype.$MessengerThreadSearchStore8=function(){if(this.$MessengerThreadSearchStore3.messages){var a=this.$MessengerThreadSearchStore3.messages.map(function(a){return a.message_id}).toArray();b("gkx")("AT613TTnkarQDh3RHMvc5A7_OcPuwhlkjXW6XKeJfymVfzeaOB6O8XRKFPr5VN8ShLEiy7YkoifDc5vWT-bFquci")?b("MessengerState.bs").invalidateSearchedMessages(this.$MessengerThreadSearchStore1,a):this.$MessengerThreadSearchStore2.invalidateSearchedMessages(a)}};a.prototype.$MessengerThreadSearchStore10=function(event){__p&&__p();b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(a){__p&&__p();if(a&&event)switch(event.name){case k:a.browseMessageInThread(event.thread_id);break;case l:a.logLoadMoreThreads(event.threads,event.latency);break;case n:a.logThreadSelect(event.thread_id,event.has_results);break;case m:a.loadMessageInThread(event.mid,event.thread_id,event.latency);break;case o:a.logThreadImpressions(event.threads);break;case j:a.logContextBrowse();break}},"MessengerThreadSearchStore")};e.exports=new a()}),null);
__d("MessengerURIListener",["MessengerActions","MessengerURISerializer","PageTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1;a={start:function(){g||b("PageTransitions").registerHandler(h,6),g=!0},stop:function(){b("PageTransitions").removeHandler(h,6),g=!1}};function h(a){a=b("MessengerURISerializer").deserialize(a);if(a.notMessenger)return!1;b("PageTransitions").transitionComplete();b("MessengerActions").changeState(a);return!0}e.exports=a}),null);
__d("WorkchatAppKeyboardShortcut.react",["cx","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;b("immutable").List;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_2_xt _4lrb"},b("React").createElement("div",{className:"_4lrc"},this.props.label),b("React").createElement("div",{className:"_4lrl"},this.props.keys.map(function(a){return b("React").createElement("span",{className:"_4lrm",key:a},a)})))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("WorkchatAppKeyboardShortcutsDialog.react",["cx","fbt","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogHeader.react","MessengerDialogs.bs","MessengerDialogTitle.react","React","WorkchatAppKeyboardShortcut.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerDialogBodyReact.bs").jsComponent,k=b("immutable").List,l=function(a){return a==="darwin"?{CmdOrCtrl:"\u2318",Alt:"\u2387",Shift:"\u21e7",Tab:"\u21b9",Up:"\u2191",Down:"\u2193"}:{CmdOrCtrl:"Ctrl",Alt:"Alt",Shift:"Shift",Tab:"Tab",Up:"\u2191",Down:"\u2193"}},m=function(a){a=l(a);return k([{Header:"General",Shortcuts:k([{label:h._("Create new chat"),keys:k([a.CmdOrCtrl,"N"])},{label:h._("Seach chats"),keys:k([a.CmdOrCtrl,"K"])},{label:h._("Show\/hide notifications"),keys:k([a.CmdOrCtrl,"/"])}])},{Header:"Navigation",Shortcuts:k([{label:h._("Go to previous chat"),keys:k([a.Alt,a.Up])},{label:h._("Go to next chat"),keys:k([a.Alt,a.Down])},{label:h._("Go to next element"),keys:k([a.Tab])},{label:h._("Open\/select element"),keys:k(["Spacebar"])}])},{Header:"In a Conversation",Shortcuts:k([{label:h._("Show\/hide information"),keys:k([a.CmdOrCtrl,"."])},{label:h._("Mute\/unmute chat"),keys:k([a.CmdOrCtrl,a.Shift,"M"])},{label:h._("Find in chat"),keys:k([a.CmdOrCtrl,"F"])},{label:h._("Start call"),keys:k([a.CmdOrCtrl,a.Shift,"C"])},{label:h._("Start video call"),keys:k([a.CmdOrCtrl,a.Shift,"V"])}])},{Header:"During a Call",Shortcuts:k([{label:h._("Toggle mute"),keys:k(["M"])},{label:h._("Toggle video"),keys:k(["V"])}])}])};c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={allShortcuts:m(this.props.platform)},b}a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.$1,type:"default",width:560},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogTitle.react"),null,h._("Keyboard Shortcuts")),b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",label:h._("Done"),type:"primary",use:"default"})),b("React").createElement(j,null,this.$2()))};a.prototype.$2=function(){return b("React").createElement("div",{className:"_4yne"},this.state.allShortcuts.map(function(a,c){return b("React").createElement("div",{className:"_2_xt"+(c!==0?" _4ynf":""),key:a.Header},b("React").createElement("div",{className:"_4ynr"},a.Header),b("React").createElement("div",null,a.Shortcuts.map(function(a){return b("React").createElement(b("WorkchatAppKeyboardShortcut.react"),{key:a.label,keys:a.keys,label:a.label})})))}))};a.prototype.$1=function(a){a||b("MessengerDialogs.bs").removeDialog()};e.exports=a}),null);
__d("WorkchatAppBridge",["fbt","invariant","Arbiter","CurrentLocale","CurrentUser","MercuryDispatcher","MercuryIDs","MercuryMessages","MercuryThreadActions","MercuryThreadInfo","MercuryUnseenState","MessengerActions","MessengerDialogs.bs","MessengerInfoPanelSearchReact.bs","MessengerParticipants.bs","MessengerPresenceStatusUtils","MessengerPromotionDataActions","MessengerRTCInvokeHandler","MessengerSettingsActions","MessengerSettingsStore","MessengerState.bs","MessengerURIListener","MessengerURIStore","React","WorkchatAppKeyboardShortcutsDialog.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={TOGGLE_NOTIFICATION_DIALOG:"TOGGLE_NOTIFICATION_DIALOG",getParticipants:function(a,c){var d=b("immutable").Map();return d.withMutations(function(d){a.participants&&a.participants.forEach(function(a){d.set(a,b("MessengerParticipants.bs").getNow(a))}),a.is_subscribed&&d.set(b("MercuryIDs").getParticipantIDFromUserID(c),b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(c)))})},handleStartCall:function(a){var c=b("CurrentUser").getAccountID(),d=b("MessengerURIStore").getState().activeThreadID;d||h(0);var e=b("MessengerState.bs").getThreadMetaNow(c,d);e||h(0);var f=i.getParticipants(e,c),g=b("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(f,e);g=g?g.contact.name:"";var j=b("MessengerRTCInvokeHandler").isCallable(d,e);b("MessengerRTCInvokeHandler").handleStartCall(d,e,a,c,f,g,j)},toggleWorkNotificationJewel:function(){b("Arbiter").inform(i.TOGGLE_NOTIFICATION_DIALOG)},toggleKeyboardShortCutsList:function(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("WorkchatAppKeyboardShortcutsDialog.react"),{platform:a})})},toggleInfoPanel:function(){var a=b("MessengerSettingsStore").getSettings().info_sidebar_collapsed;b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:!a})},getCurrentUser:function(){return{isWorkUser:b("CurrentUser").isWorkUser,isEmployee:b("CurrentUser").isEmployee,getID:b("CurrentUser").getID}},getCurrentLocale:function(){return b("CurrentLocale").get()},subscribeToUnseenMessageCount:function(a){var c=b("MercuryUnseenState").get(),d=b("MercuryDispatcher").get();d.subscribe("update-unseen",function(){return a(c.getUnseenCount())})},enableDesktopNotifs:function(){b("MessengerSettingsActions").changeDesktopNotifs(!0)},onSampleTextFromThread:function(a){__p&&__p();function c(){var c=b("MessengerURIStore").getState().activeThreadID;if(!c)return;b("MercuryMessages").get().getThreadMessagesRange(c,0,10,function(b){b=b.map(function(a){return a.body}).join("\n");a(b)})}c();b("MessengerURIStore").addListener("change",function(){c()})},selectThread:function(a){b("MessengerActions").selectThread("thread:"+a)},newThread:function(){b("MessengerActions").changeDetailView("detail/compose")},searchInChat:function(){var a={preventDefault:function(){}};b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:!1});b("MessengerInfoPanelSearchReact.bs").handleSearchThreadClick(a)},restartURIListener:function(){b("MessengerURIListener").stop(),b("MessengerURIListener").start()},toggleMuteConversation:function(){var a=b("CurrentUser").getID(),c=b("MessengerURIStore").getState().activeThreadID;if(!c)return;var d=b("MessengerState.bs").getThreadMetaNow(a,c);if(!d)return;d=b("MercuryThreadInfo").isMuted(d);a=b("MercuryThreadActions").getForFBID(a);d?a.unmute(c):a.updateMuteSetting(c,-1)},showAppUpdateBanner:function(a){b("MessengerPromotionDataActions").setPromotionData({promotionID:null,promotionContent:g._("A new version is available with improvements and fixes."),primaryActionTitle:g._("Click to update"),primaryActionCallback:a})}};e.exports=i}),null);
__d("MessengerDetailView.react",["cx","fbt","invariant","Bootloader","BootloadOnRender.react","CurrentUser","CustomColorHighlighting.react","DataTransfer","EventReminderActions","EventRemindersGating","JSResource","LazyComponent.react","MercuryCanonicalGroupThreadStore","MercuryConfig","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MessengerActions","MessengerComposerContainer.react","MessengerComposerStore","MessengerConversation.react","MessengerConversationContainer.react","MessengerDetailViewHeaderContainer.react","MessengerDomIDs.bs","MessengerErrorBoundary.react","MessengerParticipants.bs","MessengerPresenceStatusUtils","MessengerSettingsActions","MessengerSettingsStore","MessengerState.bs","MessengerThreadInfoPanelContainer.react","MessengerThreadSearchActions","MessengerThreadSearchStore","MessengerURIStore","MessengerView","MessengerWebDriverTestIDs","Parent","PresenceStatus","React","SubscriptionsHandler","WorkChatAvailabilityStatusLoader","gkx","immutable","WorkchatAppBridge","AvailableList","emptyFunction","ifRequired","promiseDone","shallowCompare"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerDomIDs.bs").ids;b("WorkchatAppBridge");b("AvailableList");a=b("React").PropTypes;function k(event,a,c,d){if(!b("EventRemindersGating").shouldShowPlansOnMessengerCom)return null;if(!a)return null;return!event?null:b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerEventPlanContainer.react").__setRef("MessengerDetailView.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:a,participants:c,viewer:d})})}c=b("React").createClass({displayName:"MessengerDetailView",_composer:undefined,_refsConversationContainer:null,_subscriptionsHandler:null,_participantSubscription:null,_userStatusLiveSubscription:null,_userIDStatusLiveSubscription:null,propTypes:{activeThreadID:a.string,blockedIds:a.instanceOf(Set).isRequired,deliveryReceipts:a.object,messengerState:a.array.isRequired,readReceipts:a.object,view:a.string,viewer:a.string.isRequired,isWorkUser:a.bool.isRequired,hostProps:a.object},calculateState:function(a,c){__p&&__p();c===void 0&&(c=!1);var d=a.activeThreadID,e=b("MessengerComposerStore").getState();if(a.view===b("MessengerView").DETAIL.COMPOSE){!e.recipients&&i(0);var f=e.recipients;f.size===1?d=b("MercuryIDs").getThreadIDFromUserID(f.first().getUniqueID().toString()):f.size>1&&(d=b("MercuryCanonicalGroupThreadStore").getOrFetch(Array.from(f).map(function(a){return a.getUniqueID().toString()})))}f=d?b("MessengerState.bs").getThreadMetaNow(a.viewer,d):null;!f&&d&&!c&&b("MessengerState.bs").getThreadMeta(a.viewer,d,function(a){f=a,this.setState(this.calculateState(this.props,c))}.bind(this));var g=b("immutable").Map(),h=[];this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription);var j=f;if(j&&d){g=g.withMutations(function(c){j.participants&&j.participants.forEach(function(a){var d=b("MessengerParticipants.bs").getNow(a);c.set(a,d);d||h.push(a)});var d=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),e=b("MessengerParticipants.bs").getNow(d);j.is_subscribed&&c.set(d,e);e||h.push(d)});h.length>0&&(this._participantSubscription=b("MessengerParticipants.bs").getMulti(h,function(d){var c={};j.participants&&j.participants.forEach(function(a){var d=b("MessengerParticipants.bs").getNow(a);c[a]=d});d=b("MercuryIDs").getParticipantIDFromUserID(a.viewer);var e=b("MessengerParticipants.bs").getNow(d);j.is_subscribed&&(c[d]=e);this._participantSubscription=null;this.setState({participants:b("immutable").Map(c)})}.bind(this)));if(b("EventRemindersGating").shouldShowPlansOnMessengerCom){var event=j?j.lightweight_event:null;b("EventReminderActions").clearAllReminders(d);if(event){b("EventReminderActions").updateEventReminder(d,event);var k=j.lightweight_events;if(k&&Object.keys(k).length>0)for(var l in k)b("EventReminderActions").updateEventReminder(d,k[l],l)}}}k=b("ifRequired")("MessengerUploadFilesStore",function(a){return a.getState()},function(){return b("immutable").Map({})});var m=b("ifRequired")("MessengerSharePreviewStore",function(a){return a.getState()},function(){return b("immutable").Map({})});this._checkUserThreadUpdatedForStatusSubscription(d);return{infoPanelCollapsed:b("MessengerSettingsStore").getSettings().info_sidebar_collapsed,activeThreadID:d,composerState:e,messengerState:b("MessengerURIStore").getState(),contactData:b("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(g,j),activeThread:j,participants:g,searchResults:b("MessengerThreadSearchStore").getState(),uploadFilesState:k,sharePreivewState:m}},getInitialState:function(){return babelHelpers["extends"]({dropTargetOverlayVisible:!1},this.calculateState(this.props,!0))},componentDidMount:function(){this._subscriptionsHandler=new(b("SubscriptionsHandler"))(),this._subscribeToSubscrptionHandler([b("MessengerComposerStore"),b("MessengerSettingsStore"),b("MessengerURIStore"),b("MessengerThreadSearchStore"),b("MercuryCanonicalGroupThreadStore"),b("PresenceStatus")]),b("Bootloader").loadModules(["MessengerUploadFilesStore"],function(a){this._subscribeToSubscrptionHandler([a])}.bind(this),"MessengerDetailView.react"),b("Bootloader").loadModules(["MessengerSharePreviewStore"],function(a){this._subscribeToSubscrptionHandler([a])}.bind(this),"MessengerDetailView.react"),b("CurrentUser").isWorkUser()&&b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6")&&b("promiseDone")(b("WorkChatAvailabilityStatusLoader").load(),function(a){var c=a.store;a._;this._subscribeToSubscrptionHandler([c]);a=b("MercuryIDs").getUserIDFromThreadID(this.state.activeThreadID);a&&c.fetchUsers([a])}.bind(this)),this.setState(this.calculateState(this.props,!1))},_subscribeToSubscrptionHandler:function(a){var b=function(){this.setState(this.calculateState(this.props,!1))}.bind(this),c=[];a.forEach(function(a){a.hasChanged&&a.getDispatchToken&&a.addListener?c.push(a.addListener(b)):a.subscribe?c.push(a.subscribe("change",b)):a.addListener?c.push(a.addListener("change",b)):i(0)});if(c.length>0){this._subscriptionsHandler&&(a=this._subscriptionsHandler).addSubscriptions.apply(a,c)}},shouldComponentUpdate:function(a,c){return b("shallowCompare")(this,a,c)},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release(),this._subscriptionsHandler=null,this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription)},UNSAFE_componentWillReceiveProps:function(a){this.setState(this.calculateState(a,!1)),this.props&&this.props.activeThreadID!==a.activeThreadID&&this._cancelReplyingToMessage()},_checkUserThreadUpdatedForStatusSubscription:function(a){if(!b("CurrentUser").isWorkUser()||!b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6")||!b("WorkChatAvailabilityStatusLoader").isLoaded())return;var c=b("WorkChatAvailabilityStatusLoader").getStoreEnforce(),d=this._userIDStatusLiveSubscription;a=b("MercuryIDs").getUserIDFromThreadID(a);a!==d&&(d&&this._userStatusLiveSubscription&&(this._userStatusLiveSubscription.dispose(),this._userStatusLiveSubscription=null),this._userIDStatusLiveSubscription=a,a&&(c.fetchUsers([a]),this._userStatusLiveSubscription=c.liveSubscribe(a)))},_renderMessageView:function(a){var c;this.state.activeThread&&(c=this.props.query==null?k(this.state.activeThread.lightweight_event,a,this.state.participants,this.props.viewer):null);return b("React").createElement("div",{className:"_4_j4",onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop,role:"presentation"},this._renderMainView(a),c,this._renderSearchView(a),this._renderFooterView(a),b("React").createElement("div",{className:(this.state.dropTargetOverlayVisible?"":"hidden_elem")+" _2fg6"}),this._renderUploadFiles(a))},render:function(){var a=this.state.activeThreadID;if(this.props.hostProps&&this.props.hostProps.renderMinimal)return this._renderMessageView(a);else{var c=this._getMainLabelDetails();return b("React").createElement("div",{"aria-labelledby":c.labelIDs,className:"_1t2u",role:"main"},b("React").createElement("div",{className:"hidden_elem",id:j.MAIN_LABEL},c.labelText," "),b("React").createElement(b("CustomColorHighlighting.react"),{className:"_wsc",customColor:this.state.activeThread&&this.state.activeThread.solid_color},b("React").createElement(b("MessengerDetailViewHeaderContainer.react"),{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelCollapsed:this.state.infoPanelCollapsed,isWorkUser:this.props.isWorkUser,messengerState:this.props.messengerState}),b("React").createElement("div",{className:"_20bp"},this._renderInfoPanel(),this._renderMessageView(a))))}},_renderUploadFiles:function(a){if(!a)return null;var c=this.state.uploadFilesState.get(a)||{},d=this.state.sharePreivewState.get(a);return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerDragAndDrop.react").__setRef("MessengerDetailView.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:a,uploadedFiles:c.uploadedFiles,uploadingFiles:c.uploadingFiles,sharePreview:d})})},_renderSearchView:function(a){return a&&!this.props.mid&&this.props.query!=null?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerThreadSearchContainer.react").__setRef("MessengerDetailView.react"),placeholder:b("React").createElement("div",{className:"_33p7 _5iwm"}),component:b("React").createElement(b("LazyComponent.react"),{loading:this.state.searchResults.loading,query:this.state.searchResults.query,selectedIndex:this.state.searchResults.selectedIndex,totalCount:this.state.searchResults.totalCount})}):null},_assignConversationContainerRef:function(a){this._refsConversationContainer=a},_renderMainView:function(a){if(!a)return b("React").createElement("div",{className:"_1ut7"});var c=this.state.contactData?this.state.contactData.contact:null;return this.state.searchResults.messages?b("React").createElement(b("MessengerErrorBoundary.react"),{component:"conversation"},b("React").createElement(b("MessengerConversation.react"),{className:"_1wfr",contact:c,deliveryReceipts:this.props.deliveryReceipts,downExhausted:this.state.searchResults.downExhausted,fetchMessages:b("MessengerThreadSearchActions").getMoreSearchContext,onVoiceClipCreate:this.handleAudioUpload,innerClassName:"_1r_-",isCanonical:b("MercuryIDs").isCanonical(a),isLoaded:!0,isLoading:!1,messages:this.state.searchResults.messages,onRead:b("emptyFunction"),onReplyToMessage:this._handleReplyToMessage,participants:this.state.participants,readReceipts:this.props.readReceipts,thread:this.state.activeThread,threadID:a,upExhausted:this.state.searchResults.upExhausted,useManualFetch:!0,viewer:this.props.viewer,ref:this._assignConversationContainerRef,selectedMessage:this.state.searchResults.mid,isSearchResult:!!this.state.searchResults.query})):b("React").createElement(b("MessengerErrorBoundary.react"),{component:"conversation"},b("React").createElement(b("MessengerConversationContainer.react"),{className:"_1wfr",contact:c,deliveryReceipts:this.props.deliveryReceipts,messengerState:this.props.messengerState,onVoiceClipCreate:this.handleAudioUpload,onMarkRead:this._handleMarkRead,onReplyToMessage:this._handleReplyToMessage,participants:this.state.participants,readReceipts:this.props.readReceipts,ref:this._assignConversationContainerRef,thread:this.state.activeThread,threadID:a,viewer:this.props.viewer}))},_renderFooterView:function(a){var c=b("MercuryConfig").ColdOpenBlock&&this.state.activeThread&&b("MercuryThreadInfo").isColdOpen(this.state.activeThread);return b("React").createElement(b("MessengerErrorBoundary.react"),{className:"_4rv3 _2pen",component:"composer"},b("React").createElement(b("MessengerComposerContainer.react"),{canReply:!!(!c&&(this.props.view===b("MessengerView").DETAIL.COMPOSE||this.state.activeThread&&b("MercuryThreadInfo").canReply(this.state.activeThread)&&!b("MercuryConfig").ViewerIsReadOnly)),fileUploader:this.state.uploadFilesState.get(a),onMount:function(a){return this._composer=a}.bind(this),onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,sharePreview:this.state.sharePreivewState.get(a),hostProps:this.props.hostProps,threadID:a,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,replyingToMessage:this.state.replyingToMessage,onCancelReplyingToMessage:this._cancelReplyingToMessage}))},_renderInfoPanel:function(){var a=this.state,c=a.activeThread,d=a.contactData,e=a.infoPanelCollapsed;a=a.participants;var f=this.props.view;return!c||!a||f===b("MessengerView").DETAIL.COMPOSE?null:b("React").createElement("div",{className:(e?"hidden_elem":"")+" _4_j5","data-testid":b("MessengerWebDriverTestIDs").INFO_PANEL},b("React").createElement(b("MessengerErrorBoundary.react"),{className:"_4rv3",component:"conversation information"},b("React").createElement(b("MessengerThreadInfoPanelContainer.react"),{blockedIds:this.props.blockedIds,className:"_4_j9",contactData:d,participants:a,thread:c,viewer:this.props.viewer})))},_getMainLabelDetails:function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE?{labelText:h._("New Message"),labelIDs:j.MAIN_LABEL}:{labelText:h._("Conversation with"),labelIDs:j.MAIN_LABEL+" "+j.THREAD_TITLE}},_handleConversationClick:function(a){var c=this.props.activeThreadID;c&&this._refsConversationContainer&&this._refsConversationContainer.isScrolledToBottom()&&this._handleMarkRead(c);if(window.getSelection().toString()!=="")return;c=a.target;if(c instanceof Node&&b("Parent").byTag(c,"a")!=null)return;a=this._getComposer();a&&a.focusInput()},handleAudioUpload:function(a){var b=this._getComposer();b!=null&&a!=null&&(b.handleAudioUpload(a),b.focusInput())},_showDropTargetOverlay:function(a){a&&a.preventDefault(),this.setState({dropTargetOverlayVisible:!0})},_hideDropTargetOverlay:function(a){a&&a.preventDefault();this.setState({dropTargetOverlayVisible:!1});a=this._getComposer();a&&a.resetDrag()},_handleDrop:function(a){__p&&__p();this._hideDropTargetOverlay(a);var c=this._getComposer();if(!c)return;a.nativeEvent.dataTransfer instanceof Object||i(0);var d=new(b("DataTransfer"))(a.nativeEvent.dataTransfer),e=d.getFiles(),f=this.state.activeThreadID;if(e.length){b("MessengerActions").prepareFilesForSend(f,a.nativeEvent.dataTransfer.files,"DragAndDrop");return}if(e.length)c.handleFileUpload(e);else{f=d.getText();f&&c.handleTextDropped(f)}},_handleResize:function(){var a=this._refsConversationContainer;a&&a.handleResize()},_handleInfoPanelToggle:function(){var a=!this.state.infoPanelCollapsed;this.setState({infoPanelCollapsed:a},function(){b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:a})})},_handleMarkRead:function(a){b("MercuryThreadActions").getForFBID(this.props.viewer).markRead(a)},_handleReplyToMessage:function(a){this.setState({replyingToMessage:a})},_cancelReplyingToMessage:function(){this.setState({replyingToMessage:null})},_getComposer:function(){return this._composer}});e.exports=c}),null);